<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Vue+Antdæ­é…ç™¾åº¦åœ°å›¾å®ç°æœç´¢å®šä½ç­‰åŠŸèƒ½</title>
      <link href="/2020-11-03/Vue+Antd%E6%90%AD%E9%85%8D%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%E5%AE%9E%E7%8E%B0%E6%90%9C%E7%B4%A2%E5%AE%9A%E4%BD%8D%E7%AD%89%E5%8A%9F%E8%83%BD/"/>
      <url>/2020-11-03/Vue+Antd%E6%90%AD%E9%85%8D%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%E5%AE%9E%E7%8E%B0%E6%90%9C%E7%B4%A2%E5%AE%9A%E4%BD%8D%E7%AD%89%E5%8A%9F%E8%83%BD/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ€è¿‘ï¼Œåœ¨åš<code>vue</code>é¡¹ç›®çš„æ—¶å€™æœ‰åšåˆ°é€‰æ‹©åœ°å€åŠŸèƒ½ï¼Œè€ŒåŸé¡¹ç›®ä¸­åˆå¼•å…¥äº†ç™¾åº¦åœ°å›¾ï¼Œæ‰€ä»¥æˆ‘å°±æ‰“ç®—é€šè¿‡ä½¿ç”¨ç™¾åº¦åœ°å›¾æ¥å®ç°åœ°å€æœç´¢åŠŸèƒ½å•¦ã€‚</p><p>æœ¬æ¬¡æ•™ç¨‹å¯èƒ½è¿‡äºå•°å—¦ï¼Œæ‰€ä»¥è¿™é‡Œå…ˆæ”¾ä¸Šé¢„è§ˆåœ°å€ä¾›å¤§å®¶é¢„è§ˆâ€”â€”<a href="https://gating.gitee.io/demo/baidu-map-demo/" target="_blank" rel="noopener">ç‚¹æˆ‘é¢„è§ˆ</a>ï¼Œä¹Ÿå¯åˆ°æ–‡æœ«ç›´æ¥ä¸‹è½½ä»£ç å…ˆè‡ªè¡Œä½“éªŒã€‚ã€‚ã€‚</p><blockquote><p>ps: åˆå› ä¸ºç™¾åº¦åœ°å›¾ 1.2 ä»¥ä¸Šéœ€è¦ AK å¯†é’¥ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ç›´æ¥ä½¿ç”¨ 1.2 ç‰ˆæœ¬å®ç°<br>ps: ğŸ˜1.xç‰ˆæœ¬æ˜¯ä¸èƒ½æ”¯æŒhttpsçš„ï¼Œæ‰€ä»¥ä½¿ç”¨æ—¶è¯·æ³¨æ„</p></blockquote><h1 id="ç®€å•çš„è¯´ä¸‹å®ç°çš„æ•ˆæœ"><a href="#ç®€å•çš„è¯´ä¸‹å®ç°çš„æ•ˆæœ" class="headerlink" title="ç®€å•çš„è¯´ä¸‹å®ç°çš„æ•ˆæœ"></a>ç®€å•çš„è¯´ä¸‹å®ç°çš„æ•ˆæœ</h1><p>å› ä¸ºæˆ‘è¿™è¾¹åšçš„æ˜¯æ‰“å¡çš„åœ°å€é€‰æ‹©ï¼Œé‚£ä¹ˆè‚¯å®šè¦æœ‰æœç´¢æç¤ºæ¥é€‰å–åœ°å€å•¦ï¼Œåˆå› ä¸ºæ˜¯æ‰“å¡ï¼Œè‚¯å®šçš„æ‰“å¡çš„èŒƒå›´é€‰æ‹©ã€‚ä¸ºäº†ç”¨æˆ·ä½“éªŒï¼Œæˆ‘ä»¬ä¹Ÿè¦æ·»åŠ ç‚¹å‡»åœ°å›¾ä»»æ„ä½ç½®ç”Ÿè¾°å¯¹åº”çš„åœ°å€ï¼Œä¹Ÿè¦å¯ä»¥æ‹–æ‹½æ ‡æ³¨æ¥ç”Ÿæˆå¯¹åº”åœ°å€ã€‚</p><p>æ—¢ç„¶çŸ¥é“äº†åŠŸèƒ½ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸Šæ•ˆæœå›¾å§ ğŸ˜</p><p><a href="https://cdn.jsdelivr.net/gh/GATING/blog_imgs/2020-11-03/renderings.jpg" data-fancybox="group" data-caption="baidu-map-demoæ•ˆæœå›¾" class="fancybox"><img alt="baidu-map-demoæ•ˆæœå›¾" title="baidu-map-demoæ•ˆæœå›¾" data-src="https://cdn.jsdelivr.net/gh/GATING/blog_imgs/2020-11-03/renderings.jpg" class="lazyload"></a></p><p>çœ‹åˆ°è¿™ï¼Œæˆ‘ä»¬å¤§æ¦‚çŸ¥é“çš„åŠŸèƒ½ç‚¹æœ‰ï¼š</p><ul><li>è®¾ç½®å›¾åƒæ ‡æ³¨å¹¶ç»‘å®šæ‹–æ‹½æ ‡æ³¨ç»“æŸåäº‹ä»¶</li><li>ç»‘å®šç‚¹å‡»åœ°å›¾ä»»æ„ç‚¹äº‹ä»¶</li><li>å°è£…é€†åœ°å€è§£æå‡½æ•°ï¼Œç”¨äºé€šè¿‡åæ ‡ç‚¹è·å–è¯¦ç»†åœ°å€</li><li>æ·»åŠ è¾“å…¥æç¤ºæ¥é€‰å–åœ°å€</li><li>æ·»åŠ åœ°å›¾è¦†ç›–ç‰©(åœ†)ï¼Œç”¨äºæ ‡è¯†æˆ‘ä»¬é€‰æ‹©çš„èŒƒå›´</li></ul><p>çœ‹åˆ°è¿™é‡Œï¼Œæ˜¯ä¸æ˜¯ä¹Ÿæƒ³è·ƒè·ƒæ¬²è¯•å•¦ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å°±å¼€å§‹å†™æˆ‘ä»¬çš„ä»£ç å§</p><h1 id="æ­å»ºé¡¹ç›®"><a href="#æ­å»ºé¡¹ç›®" class="headerlink" title="æ­å»ºé¡¹ç›®"></a>æ­å»ºé¡¹ç›®</h1><p>å› ä¸ºï¼Œç”¨åˆ°äº†<code>vue</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬è‚¯å®šå®‰è£…<code>vue-cli</code>è¿™ä¸ªè„šæ‰‹æ¶å•¦ï¼Œåˆå› ä¸º<code>Vue3</code>å‘å¸ƒäº†æ­£å¼ç‰ˆï¼Œæ‰€ä»¥è¿™æ¬¡æˆ‘ä»¬çš„æ•™ç¨‹å½“ç„¶æ˜¯ä½¿ç”¨<code>Vue3</code>è¿›è¡Œå¼€å‘å•¦ï¼Œæ‰€ä»¥æˆ‘ä»¬è„šæ‰‹æ¶å¯èƒ½éœ€è¦æ›´æ–°ä¸€ä¸‹ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g @vue/cli</span><br><span class="line"><span class="comment"># OR</span></span><br><span class="line">yarn global add @vue/cli</span><br></pre></td></tr></table></figure></div><blockquote><p>ps: å»ºè®®éƒ½æ›´æ–°ä¸‹å’¯ï¼Œé¿å…æ— æ³•åˆ›å»º vue3 çš„é¡¹ç›®</p></blockquote><p>è¿™é‡Œæˆ‘ä»¬é€‰æ‹©é»˜è®¤çš„é…ç½®å°±å¥½äº†ï¼Œå¦‚å›¾:</p><p><a href="https://cdn.jsdelivr.net/gh/GATING/blog_imgs/2020-11-03/default-options.jpg" data-fancybox="group" data-caption="vue3é»˜è®¤é…ç½®" class="fancybox"><img alt="vue3é»˜è®¤é…ç½®" title="vue3é»˜è®¤é…ç½®" data-src="https://cdn.jsdelivr.net/gh/GATING/blog_imgs/2020-11-03/default-options.jpg" class="lazyload"></a></p><blockquote><p>è‹¥å®‰è£…ç¼“æ…¢æŠ¥é”™ï¼Œå¯å°è¯•ç”¨ yarn æˆ–åˆ«çš„é•œåƒæºè‡ªè¡Œå®‰è£…ï¼šrm -rf node_modules &amp;&amp; yarn installã€‚</p></blockquote><p>åœ¨æ¼«é•¿çš„ç­‰ä»–ï¼Œä»–å®‰è£…äº†æˆ‘ä»¬çš„æ¨¡æ¿ï¼Œä»æ ‡é¢˜æˆ‘ä»¬ä¹ŸçŸ¥é“ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<code>ant-design-vue</code>å•¦ï¼Œå› ä¸º<code>element-ui</code>ç°åœ¨è¿˜æ²¡æœ‰æ”¯æŒ<code>Vue3</code>ï¼Œè€Œ<code>element-plus</code>çš„æ–‡æ¡£è¿˜æ˜¯<code>element-ui</code>çš„ï¼Œå¯¹æˆ‘ä»¬ååˆ†ä¸å‹å¥½ï¼Œæ”¯æŒçš„ä¹Ÿä¸å®Œå–„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œç›´æ¥ä½¿ç”¨<code>ant-design-vue@2.x</code>å•¦ã€‚</p><p>æ‰€ä»¥åºŸè¯ä¸å¤šè¯´äº†ï¼Œç›´æ¥å®‰è£…ä¾èµ–ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i --save ant-design-vue@next</span><br></pre></td></tr></table></figure></div><p>å®‰è£…å®Œåæˆ‘ä»¬å°±å¯ä»¥åœ¨<code>main.js</code>é…ç½®ä¸‹æˆ‘ä»¬çš„<code>ant-design-vue</code>äº†</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">"vue"</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">"./App.vue"</span>;</span><br><span class="line"><span class="keyword">import</span> Antd <span class="keyword">from</span> <span class="string">"ant-design-vue"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">"ant-design-vue/dist/antd.css"</span>;</span><br><span class="line">createApp(App).use(Antd).mount(<span class="string">"#app"</span>);</span><br></pre></td></tr></table></figure></div><blockquote><p>psï¼šå› ä¸ºè¿™é‡Œæˆ‘ä»¬åªæ˜¯åšä¸ªä¾‹å­ï¼Œæ‰€ä»¥æˆ‘ä¸ºäº†æ–¹ä¾¿ç›´æ¥ä½¿ç”¨å…¨å±€äº†</p></blockquote><p>æ—¢ç„¶æˆ‘ä»¬ç”¨äº†<code>Vue3</code>ï¼Œæˆ‘ä»¬å°±è¯´è¯´ <code>Vue3</code> å¯¹æ¯” <code>Vue2</code> æœ‰ä»€ä¹ˆæ›´çˆ½çš„ç‚¹</p><h2 id="Vue2-ä¸-Vue3-çš„å¯¹æ¯”"><a href="#Vue2-ä¸-Vue3-çš„å¯¹æ¯”" class="headerlink" title="Vue2 ä¸ Vue3 çš„å¯¹æ¯”"></a>Vue2 ä¸ Vue3 çš„å¯¹æ¯”</h2><ul><li><p>å¯¹ <code>TypeScript</code> æ”¯æŒæ›´å‹å¥½äº†ï¼Œå› ä¸º <code>Vue2</code> æ‰€æœ‰å±æ€§éƒ½æ”¾åœ¨äº† <code>this</code> å¯¹è±¡ä¸Šï¼Œéš¾ä»¥æ¨å€’ç»„ä»¶çš„æ•°æ®ç±»å‹ã€‚</p></li><li><p>åŒç¬¬ä¸€ç‚¹ï¼Œæ‰€æœ‰å±æ€§éƒ½æ”¾åœ¨äº† <code>this</code> å¯¹è±¡ä¸Šï¼Œéš¾ä»¥å®ç° <code>TreeShaking</code>ã€‚</p></li><li><p><code>Template</code> ç»ˆäºæ”¯æŒå¤šä¸ªæ ¹æ ‡ç­¾äº†ï¼Œä¸éœ€è¦æ¯æ¬¡å†™æ¨¡æ¿çš„æ—¶å€™éƒ½åŠ ä¸Šå¤šä½™çš„æ ¹å…ƒç´ ã€‚</p></li><li><p><code>Composition Api</code>ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬æœ€å¬åˆ°çš„æ–°åŠŸèƒ½(å¦‚æœä½ ç”¨è¿‡<code>React Hooks</code>ï¼Œé‚£ä¸€å®šå¯¹å®ƒä¸é™Œç”Ÿï¼Œå› ä¸ºå®ƒå’Œ<code>React Hooks</code>ååˆ†ç±»ä¼¼)ï¼Œå¾ˆå¤šäººä¹Ÿå»ºè®®ä¼˜å…ˆä½¿ç”¨<code>Composition Api</code>æ¥æ›¿ä»£<code>Mixins</code>çš„å†™æ³•ï¼Œå¥½å¤„å¦‚ä¸‹ï¼š</p><ol><li>ç›¸å…³é€»è¾‘å¯ä»¥é›†ä¸­ï¼Œä¸”æ›´å®¹æ˜“å¤ç”¨</li><li>ä¸ä¼šå› ä¸ºè«åçš„å˜æ•°æˆ–æ–¹æ³•åæ‰¾åŠå¤©ï¼Œç„¶åå‘ç°åœ¨<code>Mixins</code></li><li>å‡å°‘<code>this</code>æŒ‡å‘é—®é¢˜</li><li>è§£å†³ç»„ä»¶å†…çš„å‘½åå†²çª</li><li>éšå¼ä¾èµ–å¾—åˆ°è§£å†³ï¼Œä½ å¯ä»¥ç›´è§‚çš„çœ‹åˆ°æ¶ˆè´¹ç»„ä»¶æ‰€éœ€è¦çš„å˜é‡</li><li>å…¶å®ƒç­‰ç­‰â€¦</li></ol></li><li><p>å…¶å®ƒç­‰ç­‰â€¦</p></li></ul><h2 id="ç»„åˆå¼-API"><a href="#ç»„åˆå¼-API" class="headerlink" title="ç»„åˆå¼ API"></a>ç»„åˆå¼ API</h2><p>æ—¢ç„¶æˆ‘ä»¬è¯´äº†è¿™ä¹ˆå¤š <code>Composition Api</code> çš„ä¼˜ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯¥æ€ä¹ˆä½¿ç”¨ä»–å‘¢ï¼Ÿåœ¨ <code>Vue</code> ç»„ä»¶ä¸­ï¼Œæä¾›äº†ä¸€ä¸ª<code>setup</code>çš„ç»„ä»¶é€‰é¡¹ï¼Œå¹¶å……å½“åˆæˆ API çš„å…¥å£ç‚¹ã€‚</p><blockquote><p>ps: ç”±äºåœ¨æ‰§è¡Œ setup æ—¶å°šæœªåˆ›å»ºç»„ä»¶å®ä¾‹ï¼Œå³åœ¨ created ä¹‹å‰ï¼Œå› æ­¤åœ¨ setup é€‰é¡¹ä¸­æ²¡æœ‰ thisã€‚è¿™æ„å‘³ç€ï¼Œé™¤äº† props ä¹‹å¤–ï¼Œä½ å°†æ— æ³•è®¿é—®ç»„ä»¶ä¸­å£°æ˜çš„ä»»ä½•å±æ€§â€”â€”æœ¬åœ°çŠ¶æ€ã€è®¡ç®—å±æ€§æˆ–æ–¹æ³•ã€‚</p></blockquote><p>ä½¿ç”¨<code>setup</code>å‡½æ•°æ˜¯ï¼Œä»–å°†æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯<code>props</code>å’Œ<code>context</code></p><h3 id="Props"><a href="#Props" class="headerlink" title="Props"></a>Props</h3><p><code>setup</code> å‡½æ•°ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>props</code>ã€‚æ­£å¦‚åœ¨ä¸€ä¸ªæ ‡å‡†ç»„ä»¶ä¸­æ‰€æœŸæœ›çš„é‚£æ ·ï¼Œsetup å‡½æ•°ä¸­çš„ props æ˜¯å“åº”å¼çš„ï¼Œå½“ä¼ å…¥æ–°çš„ prop æ—¶ï¼Œå®ƒå°†è¢«æ›´æ–°ã€‚</p><blockquote><p>ps: å› ä¸º props æ˜¯å“åº”å¼çš„ï¼Œä½ ä¸èƒ½ä½¿ç”¨ ES6 è§£æ„ï¼Œå› ä¸ºå®ƒä¼šæ¶ˆé™¤ prop çš„å“åº”æ€§</p></blockquote><h3 id="ä¸Šä¸‹æ–‡"><a href="#ä¸Šä¸‹æ–‡" class="headerlink" title="ä¸Šä¸‹æ–‡"></a>ä¸Šä¸‹æ–‡</h3><p><code>context</code>æ˜¯ä¸€ä¸ªæ™®é€šçš„<code>JavaScript</code>å¯¹è±¡ï¼Œå®ƒæš´éœ²ä¸‰ä¸ªç»„ä»¶çš„ propertyï¼š<code>attrs</code>ã€<code>slots</code>ã€<code>emit</code></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  setup(props, context) &#123;</span><br><span class="line">    <span class="comment">// Attribute (éå“åº”å¼å¯¹è±¡)</span></span><br><span class="line">    <span class="built_in">console</span>.log(context.attrs);</span><br><span class="line">    <span class="comment">// æ’æ§½ (éå“åº”å¼å¯¹è±¡)</span></span><br><span class="line">    <span class="built_in">console</span>.log(context.slots);</span><br><span class="line">    <span class="comment">// è§¦å‘äº‹ä»¶ (æ–¹æ³•) åŒä»¥å‰çš„ this.$emit()</span></span><br><span class="line">    <span class="built_in">console</span>.log(context.emit);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><p><code>context</code>æ˜¯ä¸€ä¸ªæ™®é€šçš„<code>JavaScript</code>å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä¸æ˜¯å“åº”å¼çš„ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥å®‰å…¨åœ°å¯¹<code>context</code>ä½¿ç”¨<code>ES6</code>è§£æ„ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  setup(props, &#123; attrs, slots, emit &#125;) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><p>ğŸ˜¢ å› ä¸ºæˆ‘ä»¬ä¸æ˜¯<code>Vue3</code>åŸºç¡€å…¥é—¨ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œå°±åªè®²ç”¨åˆ°çš„å‡ ä¸ª APIï¼Œå¦<code>Vue3</code>æ”¯æŒå¤§å¤šæ•°<code>Vue2</code>çš„ç‰¹æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨<code>Vue2</code>è¯­æ³•å¼€å‘<code>Vue3</code>ä¹Ÿæ˜¯å®Œå…¨æ²¡é—®é¢˜çš„(ğŸ¤£ å¼€ç©ç¬‘çš„)</p><h3 id="ref-å‡½æ•°"><a href="#ref-å‡½æ•°" class="headerlink" title="ref å‡½æ•°"></a>ref å‡½æ•°</h3><p>é—²è¯å°±ä¸å¤šè¯´äº†ï¼Œå…ˆæ¥äº†è§£ä»¥ä¸‹<code>Composition Api</code>çš„é­…åŠ›å§ã€‚</p><p>åœ¨ Vue 3.0 ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªæ–°çš„<code>ref</code>å‡½æ•°ä½¿ä»»ä½•å“åº”å¼å˜é‡åœ¨ä»»ä½•åœ°æ–¹èµ·ä½œç”¨ã€‚</p><p>å¹¶ä¸”<code>ref</code>è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡å€¼ï¼Œè¯¥å¯¹åƒåªåŒ…å«ä¸€ä¸ª <code>value</code> å±æ€§ï¼Œä¸”åªæœ‰æˆ‘ä»¬åœ¨<code>setup</code>å‡½æ•°è¿›è¡Œè®¿é—®/ä¿®æ”¹çš„æ—¶å€™éœ€è¦åŠ .valueï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±ä¿®æ”¹ä¸‹<code>HelloWorld</code>ç»„ä»¶ï¼Œæ¥å®ç°ä¸€ä¸‹<code>é€‰æ‹©æœ€å–œçˆ±çš„æ°´æœ</code>çš„å°ç¨‹åºå§ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>è¯·é€‰æ‹©ä½ æœ€å–œæ¬¢çš„æ°´æœ<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-for</span>=<span class="string">"(fruit, idx) in fruits"</span> <span class="attr">:key</span>=<span class="string">"fruit"</span> @<span class="attr">click</span>=<span class="string">"handleSelect(idx)"</span>&gt;</span></span><br><span class="line">      &#123;&#123; fruit &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>ä½ æœ€å–œæ¬¢çš„æ˜¯ã€&#123;&#123; select &#125;&#125;ã€‘<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">"vue"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  setup() &#123;</span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> fruits = ref([<span class="string">"èŠ’æœ"</span>, <span class="string">"æ¦´è²"</span>, <span class="string">"è è"</span>]);</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> select = ref(<span class="string">""</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> handleSelect = <span class="function">(<span class="params">idx</span>) =&gt;</span> &#123;</span></span><br><span class="line">      select.value = fruits.value[idx];</span><br><span class="line">    &#125;;</span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line">      fruits,</span><br><span class="line">      select,</span><br><span class="line">      handleSelect,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>è¿™æ ·å­ï¼Œæˆ‘ä»¬çš„è¿™ä¸ªå° demo å°±æ˜¯å®ç°å•¦ã€‚çœ‹ä¸‹æˆ‘ä»¬çš„ä»£ç ï¼Œæœ‰å‘ç°äº†ä»€ä¹ˆå—ï¼Ÿæ²¡é”™ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>setup</code>ä¹‹åï¼Œå¯ä»¥å®Œå…¨ä¸éœ€è¦ data å’Œ methods å±æ€§ï¼Œå¹¶ä¸”æˆ‘ä»¬å¯ä»¥åœ¨ç»„ä»¶æ¨¡æ¿ä¸­ä½¿ç”¨å¤šä¸ªæ ¹èŠ‚ç‚¹ã€‚</p><h3 id="reactive-å‡½æ•°"><a href="#reactive-å‡½æ•°" class="headerlink" title="reactive å‡½æ•°"></a>reactive å‡½æ•°</h3><p>çœ‹äº†ä¸Šé¢çš„ä»£ç ï¼Œå¯ä»¥è¯´æ²¡ä»€ä¹ˆç« æ³•å¯è¨€ï¼Œæ‰€æœ‰çš„å˜é‡å’Œæ–¹æ³•éƒ½æ··æ·†åœ¨ä¸€èµ·ï¼Œæœ€ä¸èƒ½å¿å—çš„å°±æ˜¯åœ¨ <code>setup</code> ä¸­è¦æ”¹å˜å’Œè¯»å–ä¸€ä¸ªå€¼çš„æ—¶å€™ï¼Œè¿˜è¦åŠ ä¸Š valueã€‚é‚£ä¹ˆè¿™é‡Œï¼Œæˆ‘ä»¬å°±å¼•å…¥ä¸€ä¸ªæ–°çš„ Api <code>reactive</code>æ¥ä¼˜åŒ–æˆ‘ä»¬çš„ä»£ç å§ã€‚</p><p><code>reactive</code>å‡½æ•°æ¥æ”¶ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ªå“åº”å¼çš„æ•°æ®å¯¹è±¡ã€‚æ—¢ç„¶æ˜¯æ™®é€šå¯¹è±¡ï¼Œé‚£ä¹ˆæ— è®ºæ˜¯å˜é‡ã€è¿˜æ˜¯æ–¹æ³•ï¼Œéƒ½å¯ä»¥ä½œä¸ºå¯¹è±¡ä¸­çš„ä¸€ä¸ªå±æ€§æ¥ä½¿ç”¨å•¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±èƒ½ä¼˜é›…çš„ä¿®æ”¹æˆ‘ä»¬çš„å€¼ï¼Œä¸ç”¨å†é€šè¿‡<code>.value</code>ä¿®æ”¹æˆ‘ä»¬çš„å€¼å•¦ï¼Œé‚£ä¹ˆå°±é€šè¿‡<code>reactive</code>ä¿®æ”¹ä¸‹æˆ‘ä»¬çš„ä»£ç å§ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>è¯·é€‰æ‹©ä½ æœ€å–œæ¬¢çš„æ°´æœ<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-for</span>=<span class="string">"(fruit, idx) in data.fruits"</span> <span class="attr">:key</span>=<span class="string">"fruit"</span> @<span class="attr">click</span>=<span class="string">"data.handleSelect(idx)"</span>&gt;</span></span><br><span class="line">      &#123;&#123; fruit &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>ä½ æœ€å–œæ¬¢çš„æ˜¯ã€&#123;&#123; data.select &#125;&#125;ã€‘<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">"vue"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  setup() &#123;</span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> data = reactive(&#123;</span></span><br><span class="line"><span class="actionscript">      fruits: [<span class="string">"èŠ’æœ"</span>, <span class="string">"æ¦´è²"</span>, <span class="string">"è è"</span>],</span></span><br><span class="line"><span class="actionscript">      select: <span class="string">""</span>,</span></span><br><span class="line">      handleSelect(idx) &#123;</span><br><span class="line">        data.select = data.fruits[idx];</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line">      data,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div><h3 id="toRefs-å‡½æ•°"><a href="#toRefs-å‡½æ•°" class="headerlink" title="toRefs å‡½æ•°"></a>toRefs å‡½æ•°</h3><p>è™½ç„¶æˆ‘ä»¬é€šè¿‡<code>reactive</code>ä¼˜åŒ–äº†ä»£ç ï¼Œä½†æ˜¯çœ‹ç€éƒ½éœ€è¦<code>data.</code>ä¹Ÿä¸æ˜¯äº‹å•Šï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•ä¼˜åŒ–è¿™ä¸ªç‚¹å‘¢ï¼Ÿå®é™…æ˜¯æœ‰çš„ï¼ŒVue3 æä¾›äº† <code>toRefs()</code>ï¼Œå°†å“åº”å¼å¯¹è±¡è½¬æ¢ä¸ºæ™®é€šå¯¹è±¡ï¼Œå…¶ä¸­ç»“æœå¯¹è±¡çš„æ¯ä¸ª property éƒ½æ˜¯æŒ‡å‘åŸå§‹å¯¹è±¡ç›¸åº” property çš„ <code>ref</code>ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬ç»§ç»­ä¼˜åŒ–æˆ‘ä»¬çš„ä»£ç å§ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>è¯·é€‰æ‹©ä½ æœ€å–œæ¬¢çš„æ°´æœ<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-for</span>=<span class="string">"(fruit, idx) in fruits"</span> <span class="attr">:key</span>=<span class="string">"fruit"</span> @<span class="attr">click</span>=<span class="string">"handleSelect(idx)"</span>&gt;</span></span><br><span class="line">      &#123;&#123; fruit &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>ä½ æœ€å–œæ¬¢çš„æ˜¯ã€&#123;&#123; select &#125;&#125;ã€‘<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; reactive, toRefs &#125; <span class="keyword">from</span> <span class="string">"vue"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  setup() &#123;</span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> data = reactive(&#123;</span></span><br><span class="line"><span class="actionscript">      fruits: [<span class="string">"èŠ’æœ"</span>, <span class="string">"æ¦´è²"</span>, <span class="string">"è è"</span>],</span></span><br><span class="line"><span class="actionscript">      select: <span class="string">""</span>,</span></span><br><span class="line">      handleSelect(idx) &#123;</span><br><span class="line">        data.select = data.fruits[idx];</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line">      ...toRefs(data),</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div><h3 id="watch-å‡½æ•°"><a href="#watch-å‡½æ•°" class="headerlink" title="watch å‡½æ•°"></a>watch å‡½æ•°</h3><p><code>watch</code>å‡½æ•°ä¸é€‰é¡¹å¼ API<code>this.$watch</code>(ä»¥åŠç›¸åº”çš„ <code>watch</code> é€‰é¡¹) å®Œå…¨ç­‰æ•ˆã€‚<code>watch</code>éœ€è¦ä¾¦å¬ç‰¹å®šçš„<code>data</code>æºï¼Œå¹¶åœ¨å•ç‹¬çš„å›è°ƒå‡½æ•°ä¸­å‰¯ä½œç”¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯æ‡’æ‰§è¡Œï¼Œå³å›è°ƒæ˜¯ä»…åœ¨ä¾¦å¬æºå‘ç”Ÿæ›´æ”¹æ—¶è°ƒç”¨ã€‚</p><p>è™½ç„¶è¿™é‡Œçš„è‡ªå·±ä¸éœ€è¦ä½¿ç”¨<code>watch</code>å’Œè·å–çœŸå®çš„<code>DOM</code>ï¼Œä½†æˆ‘è¿™é‡Œä¹Ÿè®²ä¸€ä¸‹ï¼Œä¾¿äºåé¢ä¾‹å­çš„ä»£ç ç¼–å†™(ç”Ÿç¡¬çš„è½¬æŠ˜ ğŸ¤£)ã€‚</p><p>Vue3 è·å–çœŸå® dom å…ƒç´ ä¹Ÿæ¯”è¾ƒç®€å•ï¼ŒåŸºæœ¬å’Œå¾€å¸¸ä¸€æ ·ï¼Œå¤§æ¦‚åˆ†ä¸ºä¸‰æ­¥ï¼š</p><ol><li>å’Œä»¥å‰ä¸€æ ·ï¼Œåœ¨æ ‡ç­¾ä¸Šå†™ä¸Š ref åç§°</li><li>åœ¨ setup ä¸­å®šä¹‰ä¸€ä¸ªå’Œæ ‡ç­¾ä¸Š ref åç§°ä¸€æ ·çš„ <code>Ref</code> çš„ç¤ºä¾‹ï¼Œå¹¶è¿”å›</li><li>onMounted å°±å¯ä»¥å¾—åˆ° ref çš„ RefImpl çš„å¯¹è±¡ï¼Œå¹¶é€šè¿‡.value è·å–</li></ol><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>è¯·é€‰æ‹©ä½ æœ€å–œæ¬¢çš„æ°´æœ<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-for</span>=<span class="string">"(fruit, idx) in fruits"</span> <span class="attr">:key</span>=<span class="string">"fruit"</span> @<span class="attr">click</span>=<span class="string">"handleSelect(idx)"</span>&gt;</span></span><br><span class="line">      &#123;&#123; fruit &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 1.å’Œä»¥å‰ä¸€æ ·ï¼Œåœ¨æ ‡ç­¾ä¸Šå†™ä¸Š ref åç§°--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">"selectRef"</span>&gt;</span>ä½ æœ€å–œæ¬¢çš„æ˜¯ã€&#123;&#123; select &#125;&#125;ã€‘<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; ref, reactive, toRefs, watch &#125; <span class="keyword">from</span> <span class="string">"vue"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  setup() &#123;</span><br><span class="line"><span class="actionscript">    <span class="comment">// 2. å®šä¹‰ä¸€ä¸ªå’Œæ ‡ç­¾ä¸Š ref åç§°ä¸€æ ·çš„ Ref å®ä¾‹</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> selectRef = ref(<span class="literal">null</span>);</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> data = reactive(&#123;</span></span><br><span class="line"><span class="actionscript">      fruits: [<span class="string">"èŠ’æœ"</span>, <span class="string">"æ¦´è²"</span>, <span class="string">"è è"</span>],</span></span><br><span class="line"><span class="actionscript">      select: <span class="string">""</span>,</span></span><br><span class="line">      handleSelect(idx) &#123;</span><br><span class="line">        data.select = data.fruits[idx];</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">    watch(</span><br><span class="line">      () =&gt; data.select,</span><br><span class="line">      (val, preVal) =&gt; &#123;</span><br><span class="line"><span class="actionscript">        <span class="comment">// å¾—åˆ°ä¸€ä¸ª RefImpl çš„å¯¹è±¡, é€šè¿‡ .value è®¿é—®åˆ°çœŸå®DOM</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(selectRef.value);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(val, preVal);</span></span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line">      ...toRefs(data),</span><br><span class="line">      selectRef,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>å½“ç„¶ï¼Œ<code>watch</code>è¿˜å¯ä»¥ç›‘å¬å¤šä¸ªæºï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">watch([fooRef, barRef], ([foo, bar], [prevFoo, prevBar]) =&gt; &#123;</span><br><span class="line">  <span class="comment">/* ... */</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><p>åˆ°è¿™é‡Œï¼ŒåŸºæœ¬ä¸Šå‰ç½®çŸ¥è¯†éƒ½è¿‡å¾—å·®ä¸å¤šäº†ï¼Œå¯ä»¥å¼€å§‹ç¼–å†™æˆ‘ä»¬çš„ä»£ç äº†</p><h1 id="æ­£å¼ç¼–å†™ä»£ç "><a href="#æ­£å¼ç¼–å†™ä»£ç " class="headerlink" title="æ­£å¼ç¼–å†™ä»£ç "></a>æ­£å¼ç¼–å†™ä»£ç </h1><p>é€šè¿‡å‰é¢å­¦ä¹ çš„çŸ¥è¯†ç‚¹æˆ‘ä»¬å¤§æ¦‚äº†è§£äº† Vue3 æœ€åŸºæœ¬çš„ç”¨æ³•ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç¼–å†™æˆ‘ä»¬çš„ä»£ç äº†</p><h2 id="æ¸…ç†ä¸‹æ— ç”¨çš„ä»£ç "><a href="#æ¸…ç†ä¸‹æ— ç”¨çš„ä»£ç " class="headerlink" title="æ¸…ç†ä¸‹æ— ç”¨çš„ä»£ç "></a>æ¸…ç†ä¸‹æ— ç”¨çš„ä»£ç </h2><p>ç”¨ <code>vue-cli</code> ç”Ÿäº§çš„ Vue3 é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¿®æ”¹äº†<code>HelloWorld</code>ç”¨äºå­¦ä¹ äº† Vue3 çš„åŸºæœ¬ Apiï¼Œå®é™…ä¸Šæˆ‘ä»¬æ¥ä¸‹æ¥çš„æ¡ˆä¾‹æ˜¯ä¸éœ€è¦è¿™äº›ä»£ç çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰“å¼€<code>App.vue</code>ï¼Œå»æ‰éƒ¨åˆ†æ— å…³ä»£ç ï¼Œå¹¶åœ¨<code>components</code>ç›®å½•æ–°å»º<code>MapDialog.vue</code>æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>è¿™æ˜¯åœ°å›¾å¼¹çª—<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  name: <span class="string">"MapDialog"</span>,</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>æ¸…ç†æ— ç”¨ä»£ç åå¹¶å¯¼å…¥<code>MapDialog</code>ç»„ä»¶</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">map-dialog</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> MapDialog <span class="keyword">from</span> <span class="string">"./components/MapDialog.vue"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  name: <span class="string">"App"</span>,</span></span><br><span class="line">  components: &#123;</span><br><span class="line">    MapDialog,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div><h2 id="ç™¾åº¦åœ°å›¾åŸºæœ¬ä½¿ç”¨"><a href="#ç™¾åº¦åœ°å›¾åŸºæœ¬ä½¿ç”¨" class="headerlink" title="ç™¾åº¦åœ°å›¾åŸºæœ¬ä½¿ç”¨"></a>ç™¾åº¦åœ°å›¾åŸºæœ¬ä½¿ç”¨</h2><p>å‰æ–‡ä¹Ÿè¯´äº†ï¼Œæˆ‘ä¹‹å‰é¡¹ç›®æ˜¯é€šè¿‡<code>script</code>æ ‡ç­¾å¼•å…¥çš„ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä¹Ÿæ˜¯ç›´æ¥å¼•å…¥ js åº“</p><blockquote><p>ps: ä¹Ÿå¯ä»¥é€šè¿‡ npm å®‰è£… vue-baidu-map å¼•å…¥<a href="https://dafrok.github.io/vue-baidu-map/#/" target="_blank" rel="noopener">vue-baidu-map</a>è¿™ä¸ªç™¾åº¦åœ°å›¾ç»„ä»¶</p></blockquote><ol><li>å¼•å…¥ js åº“</li></ol><p>æ‰“å¼€<code>public/index.html</code>ï¼Œå¼•å…¥ js</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"https://api.map.baidu.com/api?v=1.2"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div><ol start="2"><li>ç¼–å†™ä»£ç </li></ol><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"map"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">"vue"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  name: <span class="string">"MapDialog"</span>,</span></span><br><span class="line">  setup() &#123;</span><br><span class="line"><span class="javascript">    onMounted(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> &#123; <span class="built_in">Map</span>, Point &#125; = BMap;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>(<span class="string">"map"</span>);</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">const</span> point = <span class="keyword">new</span> Point(<span class="number">116.404</span>, <span class="number">39.915</span>);</span></span><br><span class="line">      map.centerAndZoom(point, 16);</span><br><span class="line">      map.enableScrollWheelZoom();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-id">#map</span> &#123;</span></span><br><span class="line">  height: 400px;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>å†™åˆ°è¿™é‡Œå¯èƒ½ä¼šå‡ºç°ä¸‹å›¾çš„ä¸€ä¸ªé”™è¯¯ï¼š</p><p><a href="https://cdn.jsdelivr.net/gh/GATING/blog_imgs/2020-11-03/eslint.jpg" data-fancybox="group" data-caption="eslint" class="fancybox"><img alt="eslint" title="eslint" data-src="https://cdn.jsdelivr.net/gh/GATING/blog_imgs/2020-11-03/eslint.jpg" class="lazyload"></a></p><p>å› ä¸ºæˆ‘ä»¬é€‰æ‹©äº†é»˜è®¤æ¨¡æ¿ï¼Œé‡Œé¢åˆåŒ…æ‹¬äº†<code>eslint</code>è€Œæˆ‘ä»¬åˆå¼•å…¥äº†ä¸€ä¸ª<code>BMap</code>çš„å…¨å±€å˜é‡ï¼Œ<code>eslint</code>ä¸è®¤è¯†å®ƒï¼Œæ‰€ä»¥ä¼šæŠ¥<code>BMap is not defined.</code>è¿™ä¸ªé”™è¯¯ã€‚æ€ä¹ˆè§£å†³å‘¢ï¼Ÿæˆ‘ä»¬åªéœ€è¦å‘Šè¯‰<code>eslint</code>ï¼Œè¿™æ˜¯å…¨å±€å˜é‡å³å¯ï¼Œæ‰“å¼€<code>package.json</code>ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">json</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">"eslintConfig"</span>: &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attr">"globals"</span>: &#123;</span><br><span class="line">      <span class="attr">"BMap"</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">"BMAP_STATUS_SUCCESS"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>å€¼å¾—æ³¨æ„çš„ç‚¹æ˜¯ï¼š</p><ul><li>å®¹å™¨ div éœ€è¦ä½¿ç”¨ id</li><li>å®¹å™¨ div éœ€è¦æŒ‡å®šå®½é«˜</li></ul><p>å…¶ä½™ç”¨æ³•ä¸ html ä¸­ç¼–ç æ— å¼‚</p><p>ç¼–å†™å®Œè¿™ä¸ªä»£ç åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨é¡µé¢çœ‹åˆ°ç™¾åº¦åœ°å›¾çš„é›å½¢å¹¶ä¸”ä¸ä¼šæŠ¥é”™äº†ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥å¼€å§‹ä¹¦å†™å…¶ä»–åŠŸèƒ½çš„ä»£ç å•¦ O(âˆ©_âˆ©)O~~</p><h2 id="å…ˆä»ç®€å•çš„å¼€å§‹å…¥æ‰‹"><a href="#å…ˆä»ç®€å•çš„å¼€å§‹å…¥æ‰‹" class="headerlink" title="å…ˆä»ç®€å•çš„å¼€å§‹å…¥æ‰‹"></a>å…ˆä»ç®€å•çš„å¼€å§‹å…¥æ‰‹</h2><p>ä»å‰æ–‡çš„æ•ˆæœå›¾å¯ä»¥çŸ¥é“ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡ç‚¹å‡»<code>é€‰æ‹©ä½ç½®</code>æŒ‰é’®æ¥å¼¹å‡ºåœ°å›¾çš„ï¼Œè¿™é‡Œæˆ‘å°±ä¸ä¸€æ­¥æ­¥ç¼–å†™åŸºæœ¬çš„<code>ui</code>äº†ï¼Œç›´æ¥ä¸ŠåŸºç¡€ä»£ç äº†</p><p><code>App.vue</code>ä»£ç å¦‚ä¸‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  æ‚¨é€‰æ‹©çš„ä½ç½®æ˜¯ï¼š&#123;&#123; place.address &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">a-button</span> @<span class="attr">click</span>=<span class="string">"toggleVisible"</span>&gt;</span>é€‰æ‹©ä½ç½®<span class="tag">&lt;/<span class="name">a-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">map-dialog</span> <span class="attr">v-model:visible</span>=<span class="string">"visible"</span> <span class="attr">:point</span>=<span class="string">"place.point"</span> <span class="attr">:range</span>=<span class="string">"place.range"</span> @<span class="attr">confirm</span>=<span class="string">"handleConfirm"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; reactive, toRefs &#125; <span class="keyword">from</span> <span class="string">"vue"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> MapDialog <span class="keyword">from</span> <span class="string">"./components/MapDialog.vue"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  name: <span class="string">"App"</span>,</span></span><br><span class="line">  components: &#123;</span><br><span class="line">    MapDialog,</span><br><span class="line">  &#125;,</span><br><span class="line">  setup() &#123;</span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> data = reactive(&#123;</span></span><br><span class="line">      place: &#123;&#125;,</span><br><span class="line"><span class="actionscript">      visible: <span class="literal">false</span>,</span></span><br><span class="line">      toggleVisible() &#123;</span><br><span class="line">        data.visible = !data.visible;</span><br><span class="line">      &#125;,</span><br><span class="line">      handleConfirm(place) &#123;</span><br><span class="line">        data.place = place;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line">      ...toRefs(data),</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>è¿™é‡Œç”¨äº†æˆ‘ä»¬<code>v-mode:visible</code>å¯¹<code>visible</code>å¯¹è¿™ä¸ª<code>props</code>è¿›è¡Œäº†åŒå‘ç»‘å®šï¼Œå®é™…ä¸Šåœ¨ Vue2.x çš„å†™æ³•ä¸­æ˜¯é€šè¿‡<code>:visible.sync</code>ä¿®é¥°ç¬¦æ¥å®ç°çš„</p><p>è¯¦ç»†äº†è§£ï¼Œè¯·å‚è€ƒ<a href="https://vue3js.cn/docs/zh/guide/migration/v-model.html" target="_blank" rel="noopener">è¿™ä¸ªé“¾æ¥</a></p><p><code>MapDialog.vue</code> åŸºç¡€ä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a-modal</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:visible</span>=<span class="string">"visible"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">centered</span></span></span><br><span class="line"><span class="tag">    <span class="attr">title</span>=<span class="string">"è¯·é€‰æ‹©åœ°å€"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">cancelText</span>=<span class="string">"å–æ¶ˆ"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">okText</span>=<span class="string">"ç¡®å®š"</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">cancel</span>=<span class="string">"close"</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">ok</span>=<span class="string">"handleOk"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a-form</span> <span class="attr">class</span>=<span class="string">"form"</span> <span class="attr">layout</span>=<span class="string">"inline"</span> <span class="attr">ref</span>=<span class="string">"mapForm"</span> <span class="attr">:model</span>=<span class="string">"form"</span> <span class="attr">:rules</span>=<span class="string">"rules"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a-form-item</span> <span class="attr">name</span>=<span class="string">"address"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a-auto-complete</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-model:value</span>=<span class="string">"form.address"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:options</span>=<span class="string">"addressSource"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥ä½ è¦æœç´¢çš„åœ°ç‚¹"</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">search</span>=<span class="string">"handleQuery"</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">select</span>=<span class="string">"handleSelect"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">style</span>=<span class="string">"width: 360px"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">a-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a-form-item</span> <span class="attr">name</span>=<span class="string">"range"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a-select</span> <span class="attr">v-model:value</span>=<span class="string">"form.range"</span> <span class="attr">placeholder</span>=<span class="string">"è¯·é€‰æ‹©èŒƒå›´"</span> @<span class="attr">change</span>=<span class="string">"setRadius"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a-select-option</span> <span class="attr">v-for</span>=<span class="string">"range in ranges"</span> <span class="attr">:key</span>=<span class="string">"range"</span>&gt;</span></span><br><span class="line">            &#123;&#123; range &#125;&#125;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">a-select-option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">a-select</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">a-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">a-form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"map"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">a-modal</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; ref, reactive, toRefs, watch, nextTick &#125; <span class="keyword">from</span> <span class="string">"vue"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  name: <span class="string">"MapDialog"</span>,</span></span><br><span class="line">  props: &#123;</span><br><span class="line">    visible: &#123;</span><br><span class="line"><span class="javascript">      type: <span class="built_in">Boolean</span>,</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">default</span>: <span class="literal">false</span>,</span></span><br><span class="line">    &#125;,</span><br><span class="line">    range: &#123;</span><br><span class="line"><span class="javascript">      type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">default</span>: <span class="string">"300ç±³"</span>,</span></span><br><span class="line">    &#125;,</span><br><span class="line">    point: &#123;</span><br><span class="line"><span class="javascript">      type: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="javascript">      <span class="keyword">default</span>: <span class="function"><span class="params">()</span> =&gt;</span> (&#123; <span class="attr">lng</span>: <span class="number">113.271429</span>, <span class="attr">lat</span>: <span class="number">23.135336</span> &#125;),</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  setup(props, &#123; emit &#125;) &#123;</span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> mapForm = ref(<span class="literal">null</span>);</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> formData = reactive(&#123;</span></span><br><span class="line">      form: &#123;</span><br><span class="line"><span class="actionscript">        address: <span class="string">""</span>,</span></span><br><span class="line">        range: props.range,</span><br><span class="line">      &#125;,</span><br><span class="line">      rules: &#123;</span><br><span class="line">        address: [</span><br><span class="line">          &#123;</span><br><span class="line"><span class="actionscript">            required: <span class="literal">true</span>,</span></span><br><span class="line"><span class="actionscript">            message: <span class="string">"è¯·è¾“å…¥ä½ è¦æœç´¢çš„åœ°ç‚¹"</span>,</span></span><br><span class="line"><span class="actionscript">            trigger: <span class="string">"blur"</span>,</span></span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line"><span class="actionscript">      ranges: [<span class="string">"100ç±³"</span>, <span class="string">"300ç±³"</span>, <span class="string">"500ç±³"</span>],</span></span><br><span class="line">      addressPoint: props.point,</span><br><span class="line">      addressSource: [],</span><br><span class="line">      setRadius() &#123;&#125;,</span><br><span class="line">      handleQuery() &#123;&#125;,</span><br><span class="line">      handleSelect() &#123;&#125;,</span><br><span class="line">      close() &#123;</span><br><span class="line"><span class="actionscript">        emit(<span class="string">"update:visible"</span>, <span class="literal">false</span>);</span></span><br><span class="line">        mapForm.value.resetFields();</span><br><span class="line">      &#125;,</span><br><span class="line">      handleOk() &#123;</span><br><span class="line"><span class="javascript">        mapForm.value.validate().then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">          emit(<span class="string">"confirm"</span>, &#123;</span></span><br><span class="line">            address: formData.form.address,</span><br><span class="line">            point: formData.addressPoint,</span><br><span class="line">            range: formData.form.range,</span><br><span class="line">          &#125;);</span><br><span class="line"><span class="actionscript">          emit(<span class="string">"update:visible"</span>, <span class="literal">false</span>);</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> &#123; <span class="built_in">Map</span>, Point &#125; = BMap;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// åœ°å›¾ç›¸å…³å…ƒç´ ï¼Œå› ä¸ºå¯èƒ½åœ¨åˆ«çš„æ–¹æ³•ä½¿ç”¨</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> map = <span class="literal">null</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// åˆå§‹åŒ–åœ°å›¾</span></span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">initMap</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// é˜²æ­¢domè¿˜æœªæ¸²æŸ“</span></span></span><br><span class="line"><span class="javascript">      nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// ç¦ç”¨åœ°å›¾é»˜è®¤ç‚¹å‡»å¼¹æ¡†</span></span></span><br><span class="line"><span class="javascript">        map = <span class="keyword">new</span> <span class="built_in">Map</span>(<span class="string">"map"</span>, &#123; <span class="attr">enableMapClick</span>: <span class="literal">false</span> &#125;);</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> &#123; lng, lat &#125; = formData.addressPoint;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> point = <span class="keyword">new</span> Point(lng, lat);</span></span><br><span class="line">        map.centerAndZoom(point, 16);</span><br><span class="line">        map.enableScrollWheelZoom();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    watch(</span><br><span class="line">      () =&gt; props.visible,</span><br><span class="line">      (visible) =&gt; &#123;</span><br><span class="line">        visible &amp;&amp; initMap();</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line">      mapForm,</span><br><span class="line">      ...toRefs(formData),</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-id">#map</span> &#123;</span></span><br><span class="line">  height: 400px;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-class">.form</span> &#123;</span></span><br><span class="line">  height: 66px;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>å¤åˆ¶è¿›å»ï¼ŒåŸºæœ¬ä¸Šæ•´ä¸ªæ¨¡å­å°±å‡ºæ¥äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å®ç°æˆ‘ä»¬çš„åŠŸèƒ½äº†</p><h3 id="è®¾ç½®å›¾åƒæ ‡æ³¨å¹¶ç»‘å®šæ‹–æ‹½æ ‡æ³¨ç»“æŸåäº‹ä»¶"><a href="#è®¾ç½®å›¾åƒæ ‡æ³¨å¹¶ç»‘å®šæ‹–æ‹½æ ‡æ³¨ç»“æŸåäº‹ä»¶" class="headerlink" title="è®¾ç½®å›¾åƒæ ‡æ³¨å¹¶ç»‘å®šæ‹–æ‹½æ ‡æ³¨ç»“æŸåäº‹ä»¶"></a>è®¾ç½®å›¾åƒæ ‡æ³¨å¹¶ç»‘å®šæ‹–æ‹½æ ‡æ³¨ç»“æŸåäº‹ä»¶</h3><p>ç™¾åº¦åœ°å›¾æä¾›äº†å¾ˆå¤šè¦†ç›–ç‰©ä¾›æˆ‘ä»¬å¾ˆå¤šè¦†ç›–ç‰©çš„ç±»ï¼Œè€Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨<code>Marker</code>æ ‡æ³¨ç‚¹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ•ˆæœå›¾æ‰€çœ‹åˆ°çš„å°çº¢ç‚¹ï¼Œå› ä¸ºå®ƒå¯ä»¥æ¯”è¾ƒå½¢è±¡çš„æ ‡æ³¨ç”¨æˆ·çœ‹åˆ°çš„å…´è¶£ç‚¹(å°±æ¯”å¦‚æˆ‘ä»¬é€‰ä¸­çš„åœ°å€)ã€‚</p><p>å½“ç„¶ï¼Œå®ƒä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ–°çš„å›¾æ ‡ï¼Œä¸è¿‡è¿™ä¸æ˜¯æˆ‘ä»¬è¿™ç¯‡æ¡ˆä¾‹çš„é‡ç‚¹ï¼Œæœ‰å…´è¶£çš„å¯ä»¥å‚è€ƒ<a href="http://lbsyun.baidu.com/index.php?title=jspopular3.0/guide/mark" target="_blank" rel="noopener">æ ‡æ³¨</a>ã€(è‡ªå®šä¹‰ Marker å›¾æ ‡)[<a href="http://lbsyun.baidu.com/jsdemo.htm#eChangeMarkerIcon]" target="_blank" rel="noopener">http://lbsyun.baidu.com/jsdemo.htm#eChangeMarkerIcon]</a></p><p>è®¾ç½®å›¾åƒæ ‡æ³¨å¹¶å¹¶ç»‘å®šæ‹–æ‹½äº‹ä»¶éå¸¸ç®€å•ï¼Œåªéœ€è¦ä¸‹é¢å‡ è¡Œä»£ç ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥Markerç±»</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="built_in">Map</span>, Point, Marker &#125; = BMap;</span><br><span class="line"><span class="comment">// åœ°å›¾ç›¸å…³å…ƒç´ ï¼Œå› ä¸ºå¯èƒ½åœ¨åˆ«çš„æ–¹æ³•ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">let</span> map = <span class="literal">null</span>,</span><br><span class="line">  marker = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–åœ°å›¾</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initMap</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// é˜²æ­¢domè¿˜æœªæ¸²æŸ“</span></span><br><span class="line">  nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªå›¾åƒæ ‡æ³¨å®ä¾‹ï¼Œå…è®¸å¯ç”¨æ‹–æ‹½Marker</span></span><br><span class="line">    marker = <span class="keyword">new</span> Marker(point, &#123; <span class="attr">enableDragging</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">    map.addOverlay(marker);</span><br><span class="line">    <span class="comment">// æ ‡æ³¨æ‹–æ‹½</span></span><br><span class="line">    marker.addEventListener(<span class="string">"dragend"</span>, (&#123; point &#125;) =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(point);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>è¿™æ ·ä½ å°±å¯ä»¥åœ¨åœ°å›¾ä¸Šçœ‹åˆ°å°çº¢ç‚¹ï¼Œå¹¶ä¸”å¯ä»¥æ‹–æ‹½å°çº¢ç‚¹å•¦ï¼Œæ‹–æ‹½é‡Šæ”¾åè¿˜ä¼šåœ¨æµè§ˆå™¨æ‰“å°å‡ºåæ ‡ç‚¹ã€‚</p><h3 id="ç»‘å®šç‚¹å‡»åœ°å›¾ä»»æ„ç‚¹äº‹ä»¶"><a href="#ç»‘å®šç‚¹å‡»åœ°å›¾ä»»æ„ç‚¹äº‹ä»¶" class="headerlink" title="ç»‘å®šç‚¹å‡»åœ°å›¾ä»»æ„ç‚¹äº‹ä»¶"></a>ç»‘å®šç‚¹å‡»åœ°å›¾ä»»æ„ç‚¹äº‹ä»¶</h3><p>æ—¢ç„¶å®ç°æ‹–æ‹½æ ‡æ³¨ç»“æŸåè·å–åæ ‡ç‚¹ï¼Œå½“ç„¶åœ¨åœ°å›¾ä¸Šé€‰å–ä»»æ„ç‚¹ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦è·å–è¯¥ç‚¹çš„åœ°å€ä¿¡æ¯å•¦ã€‚</p><p>å®ç°ä¹Ÿååˆ†ç®€å•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–åœ°å›¾</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initMap</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// é˜²æ­¢domè¿˜æœªæ¸²æŸ“</span></span><br><span class="line">  nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="comment">// åœ°å›¾ç‚¹å‡»</span></span><br><span class="line">    map.addEventListener(<span class="string">"click"</span>, (&#123; point &#125;) =&gt; &#123;</span><br><span class="line">      getAddrByPoint(point);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h3 id="æ·»åŠ åœ°å›¾è¦†ç›–ç‰©-åœ†"><a href="#æ·»åŠ åœ°å›¾è¦†ç›–ç‰©-åœ†" class="headerlink" title="æ·»åŠ åœ°å›¾è¦†ç›–ç‰©(åœ†)"></a>æ·»åŠ åœ°å›¾è¦†ç›–ç‰©(åœ†)</h3><p>å› ä¸ºæˆ‘ä»¬éœ€è¦é€‰ä¸­è¿”å›ï¼Œé‚£ä¹ˆè¦†ç›–ç‰©-åœ†å°±æœ€ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥æ·»åŠ ä¸€ä¸‹å§</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å› ä¸ºé»˜è®¤çš„åœ†å¤ªéš¾çœ‹äº†ï¼Œæ‰€ä»¥æˆ‘ä¿®æ”¹äº†ä¸‹æ ·å¼</span></span><br><span class="line"><span class="keyword">const</span> circleOptions = &#123;</span><br><span class="line">  strokeColor: <span class="string">"#18A65E"</span>,</span><br><span class="line">  strokeWeight: <span class="number">2</span>,</span><br><span class="line">  fillColor: <span class="string">"#18A65E"</span>,</span><br><span class="line">  fillOpacity: <span class="string">"0.1"</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  setup(props, &#123; emit &#125;) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="built_in">Map</span>, Point, Marker, Circle &#125; = BMap;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–åœ°å›¾</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">initMap</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// é˜²æ­¢domè¿˜æœªæ¸²æŸ“</span></span><br><span class="line">      nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªè¦†ç›–ç‰©â€”â€”åœ†</span></span><br><span class="line">        circle = <span class="keyword">new</span> BMap.Circle(point, <span class="built_in">parseInt</span>(formData.form.range), circleOptions);</span><br><span class="line">        <span class="comment">// æ·»åŠ è¦†ç›–ç‰©</span></span><br><span class="line">        map.addOverlay(circle);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      mapForm,</span><br><span class="line">      ...toRefs(formData),</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><p>æ—¢ç„¶å·²ç»æ·»åŠ äº†åœ†ï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬æ”¹å˜äº†èŒƒå›´çš„æ—¶å€™è¿™ä¸ªåœ†è‚¯å®šä¹Ÿè¦è·Ÿç€æ”¹å˜å•¦</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> formData = reactive(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  setRadius() &#123;</span><br><span class="line">    circle.setCenter(formData.addressPoint);</span><br><span class="line">    circle.setRadius(<span class="built_in">parseInt</span>(formData.form.range));</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><p>åˆ‡æ¢ä¸€ä¸‹ï¼Œçœ‹æˆ‘ä»¬çš„åœ†æ˜¯ä¸æ˜¯ä¼šå˜å¤§å’Œå˜å°å•¦ï¼Ÿ</p><h3 id="å°è£…é€†åœ°å€è§£æå‡½æ•°ï¼Œç”¨äºé€šè¿‡åæ ‡ç‚¹è·å–è¯¦ç»†åœ°å€"><a href="#å°è£…é€†åœ°å€è§£æå‡½æ•°ï¼Œç”¨äºé€šè¿‡åæ ‡ç‚¹è·å–è¯¦ç»†åœ°å€" class="headerlink" title="å°è£…é€†åœ°å€è§£æå‡½æ•°ï¼Œç”¨äºé€šè¿‡åæ ‡ç‚¹è·å–è¯¦ç»†åœ°å€"></a>å°è£…é€†åœ°å€è§£æå‡½æ•°ï¼Œç”¨äºé€šè¿‡åæ ‡ç‚¹è·å–è¯¦ç»†åœ°å€</h3><p>å†™åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»è·å–å¯ä»¥ç‚¹å‡»åœ°å›¾å’Œæ‹–æ‹½è·å–åæ ‡ç‚¹äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç¼ºå°‘ä»€ä¹ˆå‘¢ï¼Ÿæ²¡é”™ï¼Œå°±æ˜¯ç¼ºå°‘äº†ä¸ªå¯ä»¥è§£æåæ ‡ç‚¹çš„æ–¹æ³•ã€‚</p><p>å‚è€ƒ<a href="http://lbsyun.baidu.com/jsdemo.htm#xRevAddressParseSingle" target="_blank" rel="noopener">åœ°å€é€†è§£æ</a>ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°è£…ä¸€ä¸ªæ ¹æ®åæ ‡ç‚¹å¯ä»¥è·å–åˆ°è·ç¦»ä½ç½®çš„æ–¹æ³•äº†ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ç»™åœ°å›¾è®¾ç½®é»˜è®¤çš„åœ°å€äº†ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="built_in">Map</span>, Point, Marker, Circle, Geocoder &#125; = BMap;</span><br><span class="line"><span class="keyword">const</span> geco = <span class="keyword">new</span> Geocoder();</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€†åœ°å€è§£æå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getAddrByPoint</span>(<span class="params">point</span>) </span>&#123;</span><br><span class="line">  geco.getLocation(point, (res) =&gt; &#123;</span><br><span class="line">    formData.addressPoint = point;</span><br><span class="line">    formData.form.address = res.address;</span><br><span class="line">    formData.setRadius();</span><br><span class="line">    map.panTo(point);</span><br><span class="line">    marker.setPosition(point);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–åœ°å›¾</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initMap</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// é˜²æ­¢domè¿˜æœªæ¸²æŸ“</span></span><br><span class="line">  nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="comment">// æ ‡æ³¨æ‹–æ‹½</span></span><br><span class="line">    marker.addEventListener(<span class="string">"dragend"</span>, (&#123; point &#125;) =&gt; &#123;</span><br><span class="line">      getAddrByPoint(point);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ°å›¾ç‚¹å‡»</span></span><br><span class="line">    map.addEventListener(<span class="string">"click"</span>, (&#123; point &#125;) =&gt; &#123;</span><br><span class="line">      getAddrByPoint(point);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="comment">// è®¾ç½®é»˜è®¤åœ°å€</span></span><br><span class="line">    geco.getLocation(point, (res) =&gt; &#123;</span><br><span class="line">      formData.form.address = res.address;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h3 id="æ·»åŠ è¾“å…¥æç¤ºæ¥é€‰å–åœ°å€"><a href="#æ·»åŠ è¾“å…¥æç¤ºæ¥é€‰å–åœ°å€" class="headerlink" title="æ·»åŠ è¾“å…¥æç¤ºæ¥é€‰å–åœ°å€"></a>æ·»åŠ è¾“å…¥æç¤ºæ¥é€‰å–åœ°å€</h3><p>å®ç°åˆ°ç°åœ¨ï¼Œå…¶å®åŸºæœ¬ä¸ŠåŠŸèƒ½éƒ½å·²ç»å†™å®Œäº†ï¼Œå°±å·®ä¸€ä¸ªæœç´¢åŠŸèƒ½ã€‚è€Œç™¾åº¦åœ°å›¾æä¾›çš„æ£€ç´¢åŠŸèƒ½æœ‰å¾ˆå¤šï¼Œè¿™é‡Œæˆ‘é‡‡ç”¨çš„æ˜¯<a href="http://lbsyun.baidu.com/jsdemo.htm#i1_4" target="_blank" rel="noopener">æœ¬åœ°æ£€ç´¢</a>ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥çœ‹çœ‹ä»–å…¶ä»–çš„æ£€ç´¢åŠŸèƒ½ã€‚</p><p>Antdd çš„ AutoComplete å¯ä»¥å‚è€ƒ<a href="https://2x.antdv.com/components/auto-complete-cn/" target="_blank" rel="noopener">è¿™ä¸ªé“¾æ¥</a>ï¼Œè¿™é‡Œå°±ä¸åšè¿›ä¸€æ­¥åœ°è®²è§£äº†ã€‚</p><p>ä¸»è¦ç”¨åˆ°äº†<code>search</code>å’Œ<code>select</code>ä¸¤ä¸ªäº‹ä»¶å›è°ƒã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> formData = reactive(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  handleQuery(query) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!query) &#123;</span><br><span class="line">      formData.addressSource = [];</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    local.search(query);</span><br><span class="line">  &#125;,</span><br><span class="line">  handleSelect(item) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; point &#125; = formData.addressSource.find(<span class="function">(<span class="params">&#123; value &#125;</span>) =&gt;</span> value === item);</span><br><span class="line">    formData.addressPoint = point;</span><br><span class="line">    formData.setRadius();</span><br><span class="line">    marker.setPosition(point);</span><br><span class="line">    map.panTo(point);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="built_in">Map</span>, Point, Marker, Geocoder, LocalSearch &#125; = BMap;</span><br><span class="line"><span class="comment">// åœ°å›¾ç›¸å…³å…ƒç´ ï¼Œå› ä¸ºå¯èƒ½åœ¨åˆ«çš„æ–¹æ³•ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">let</span> map = <span class="literal">null</span>,</span><br><span class="line">  marker = <span class="literal">null</span>,</span><br><span class="line">  circle = <span class="literal">null</span>,</span><br><span class="line">  local = <span class="literal">null</span>;</span><br><span class="line"><span class="comment">// åˆå§‹åŒ–åœ°å›¾</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initMap</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// é˜²æ­¢domè¿˜æœªæ¸²æŸ“</span></span><br><span class="line">  nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="comment">// åˆ›å»ºæœ¬åœ°æ£€ç´¢å®ä¾‹ä¾›searchå›è°ƒä½¿ç”¨</span></span><br><span class="line">    local = <span class="keyword">new</span> LocalSearch(map, &#123;</span><br><span class="line">      onSearchComplete: <span class="function">(<span class="params">results</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (local.getStatus() == BMAP_STATUS_SUCCESS) &#123;</span><br><span class="line">          <span class="keyword">const</span> res = [];</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; results.getCurrentNumPois(); i++) &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123; title, address &#125; = results.getPoi(i);</span><br><span class="line">            res.push(&#123;</span><br><span class="line">              ...results.getPoi(i),</span><br><span class="line">              value: <span class="string">`<span class="subst">$&#123;title&#125;</span>(<span class="subst">$&#123;address&#125;</span>)`</span>,</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">          formData.addressSource = res;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†æ‰€æœ‰çš„åŠŸèƒ½ç‚¹å•¦ Ï†(*ï¿£ 0 ï¿£) å½“ç„¶ï¼Œå…¶å®å¥½å¤šæ²¡æœ‰å®Œå–„çš„ç‚¹ï¼Œå°±ç­‰ç€å„ä½ä¹‹åå®Œå–„å’¯</p><blockquote><p><a href="https://gitee.com/gating/demo/tree/master/baidu-map-demo" target="_blank" rel="noopener">gitee åœ°å€</a>,<a href="https://github.com/GATING/demo/tree/master/baidu-map-demo" target="_blank" rel="noopener">github åœ°å€</a></p></blockquote><h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><p><a href="https://2x.antdv.com/docs/vue/introduce-cn/" target="_blank" rel="noopener">Ant Design of Vue</a></p><p><a href="https://vue3js.cn/docs/zh/guide/composition-api-introduction.html#%E4%BB%80%E4%B9%88%E6%98%AF%E7%BB%84%E5%90%88%E5%BC%8F-api" target="_blank" rel="noopener">ä»€ä¹ˆæ˜¯ç»„åˆå¼ APIï¼Ÿ</a></p><h1 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h1><p>è™½ç„¶æœ¬æ–‡ç½—å—¦äº†ç‚¹ï¼Œä½†è¿˜æ˜¯æ„Ÿè°¢å„ä½è§‚ä¼—è€çˆ·çš„èƒ½çœ‹åˆ°æœ€å O(âˆ©_âˆ©)O å¸Œæœ›ä½ èƒ½æœ‰æ‰€æ”¶è· ğŸ˜</p>]]></content>
      
      
      <categories>
          
          <category> è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> ant-design-vue </tag>
            
            <tag> baidu-map </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSä¸­æœ‰è¶£çš„å†…ç½®å¯¹è±¡-JSON</title>
      <link href="/2020-09-08/JS%E4%B8%AD%E6%9C%89%E8%B6%A3%E7%9A%84%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1-JSON/"/>
      <url>/2020-09-08/JS%E4%B8%AD%E6%9C%89%E8%B6%A3%E7%9A%84%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1-JSON/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>åœ¨ä»¥å‰çš„<code>webå¼€å‘ä¸­</code>ï¼Œæˆ‘ä»¬å¤šæ•°é€‰æ‹©<code>çº¯æ–‡æœ¬</code>æˆ–<code>XML</code>ä½œä¸ºæˆ‘ä»¬çš„æäº¤çš„æ•°æ®æ ¼å¼ï¼Œå¤§å¤šæ•°æ˜¯<code>XML</code>ï¼Œå°‘æ•°<code>çº¯æ–‡æœ¬</code>ã€‚å…¶å®ä»<code>AJAX(Asynchronous JavaScript and XML)</code>çš„å‘½åæˆ‘ä»¬ä¹ŸçŸ¥é“ï¼Œæ•°æ®äº¤æ¢æ˜¯å¤§å¤šæ•°é€šè¿‡<code>XML</code>æ ¼å¼è¿›è¡Œçš„ã€‚ä½†æ˜¯<code>XML</code>æ ¼å¼æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯æ–‡æ¡£æ„é€ å¤æ‚ï¼Œéœ€è¦ä¼ è¾“æ¯”è¾ƒå¤šçš„å­—èŠ‚æ•°ï¼Œå¹¶ä¸”è§£æèµ·æ¥ä¹Ÿæ¯”è¾ƒéº»çƒ¦ã€‚æ‰€ä»¥å°±åˆ›å»ºäº†<code>JSON</code>è¿™ç§æ•°æ®æè¿°æ ¼å¼ï¼Œå¯ä»¥å¾ˆç®€å•çš„å°±æè¿°å¾ˆå¤æ‚çš„æ•°æ®ã€‚åŒæ—¶ç‹¬ç«‹äºè¯­è¨€ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨å¤šç§è¯­è¨€å†…ä½¿ç”¨ã€‚ä¹Ÿæ­£æ˜¯å› ä¸ºè¿™ä¸ªï¼Œ<code>JSON</code>çš„è½»ä¾¿æ€§é€æ¸å¾—åˆ°é‡è§†ï¼Œåæ¥æ›¿ä»£<code>XML</code>æˆä¸ºæœ€ä¸»è¦çš„æ•°æ®ä¼ è¾“æ ¼å¼ã€‚</p><blockquote><p>ps: å½“ç„¶ï¼Œè™½ç„¶è¯´äº†å¾ˆå¤š<code>JSON</code>çš„å¥½å¤„ï¼Œä½ å°±ä»¥ä¸ºä¸ç”¨å­¦ä¹ <code>XML</code>äº†å—ï¼Ÿè‚¯å®šä¸æ˜¯å•¦ï¼Œå¾®ä¿¡å…¬å…±å¹³å°æ¥å£ä¸­çš„æœ‰æ˜¯æœ‰ç›¸å½“ä¸€éƒ¨åˆ†æ¥å£ä½¿ç”¨äº†<code>XML</code>çš„ã€‚</p></blockquote><p><code>JSON</code>å¯¹è±¡åŒ…å«ä¸¤ä¸ªæ–¹æ³•: ç”¨äºè§£æ <a href="https://www.json.org/json-en.html" target="_blank" rel="noopener">JavaScript Object Notation</a> (<a href="https://developer.mozilla.org/zh-CN/docs/Glossary/JSON" target="_blank" rel="noopener">JSON</a>) çš„ parse() æ–¹æ³•ï¼Œä»¥åŠå°†å¯¹è±¡/å€¼è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²çš„ stringify() æ–¹æ³•ã€‚é™¤äº†è¿™ä¸¤ä¸ªæ–¹æ³•, JSON è¿™ä¸ªå¯¹è±¡æœ¬èº«å¹¶æ²¡æœ‰å…¶ä»–ä½œç”¨ï¼Œä¹Ÿä¸èƒ½è¢«è°ƒç”¨æˆ–è€…ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨ã€‚</p><blockquote><p>ps: <a href="http://timelessrepo.com/json-isnt-a-javascript-subset" target="_blank" rel="noopener">JSONï¼šå¹¶ä¸æ˜¯ JavaScript çš„å­é›†ã€‚</a>å°½ç®¡ä¸æ˜¯ä¸¥æ ¼æ„ä¹‰ä¸Šçš„å­é›†ï¼ŒJSON éå¸¸æ¥è¿‘ JavaScript è¯­æ³•çš„å­é›†ã€‚</p></blockquote><h1 id="JavaScript-ä¸-JSON-çš„åŒºåˆ«"><a href="#JavaScript-ä¸-JSON-çš„åŒºåˆ«" class="headerlink" title="JavaScript ä¸ JSON çš„åŒºåˆ«"></a>JavaScript ä¸ JSON çš„åŒºåˆ«</h1><table><thead><tr><th>JavaScriptç±»å‹</th><th>JSON çš„ä¸åŒç‚¹</th></tr></thead><tbody><tr><td>å¯¹è±¡å’Œæ•°ç»„</td><td>å±æ€§åç§°å¿…é¡»æ˜¯åŒå¼•å·æ‹¬èµ·æ¥çš„å­—ç¬¦ä¸²ï¼›æœ€åä¸€ä¸ªå±æ€§åä¸èƒ½æœ‰é€—å·ã€‚</td></tr><tr><td>æ•°å€¼</td><td>ç¦æ­¢å‡ºç°å‰å¯¼é›¶ï¼ˆJSON.stringify æ–¹æ³•è‡ªåŠ¨å¿½ç•¥å‰å¯¼é›¶ï¼Œè€Œåœ¨ JSON.parse æ–¹æ³•ä¸­å°†ä¼šæŠ›å‡º SyntaxErrorï¼‰ï¼›å¦‚æœæœ‰å°æ•°ç‚¹, åˆ™åé¢è‡³å°‘è·Ÿç€ä¸€ä½æ•°å­—ã€‚</td></tr></tbody></table><p>é’ˆå¯¹äºè¿™ä¸¤ç‚¹ï¼Œæˆ‘ä»¬ä¸¾ä¸ªä¾‹å­ï¼Œå¯¹äºå¯¹è±¡å’Œæ•°ç»„ç±»å‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å±æ€§åç§°å¿…é¡»æ˜¯åŒå¼•å·æ‹¬èµ·æ¥çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">const</span> test1 = <span class="string">"['1','1']"</span></span><br><span class="line"><span class="built_in">JSON</span>.parse(test1) <span class="comment">// Uncaught SyntaxError: Unexpected token ' in JSON at position 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> test2 = <span class="string">"&#123;'name':'gating'&#125;"</span></span><br><span class="line"><span class="built_in">JSON</span>.parse(test2) <span class="comment">// Uncaught SyntaxError: Unexpected token o in JSON at position 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> test3 = <span class="string">'["2","1"]'</span></span><br><span class="line"><span class="built_in">JSON</span>.parse(test3) <span class="comment">// ["2","1"]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> test4 = <span class="string">'&#123;"name":"gating"&#125;'</span></span><br><span class="line"><span class="built_in">JSON</span>.parse(test3) <span class="comment">// &#123;name: "gating"&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ€åä¸€ä¸ªå±æ€§åä¸èƒ½æœ‰é€—å·</span></span><br><span class="line"><span class="keyword">const</span> test5 = <span class="string">'["2","1",]'</span></span><br><span class="line"><span class="built_in">JSON</span>.parse(test5) <span class="comment">// Uncaught SyntaxError: Unexpected token ] in JSON at position 9</span></span><br><span class="line"><span class="keyword">const</span> test6 = <span class="string">'&#123;"name":"gating",&#125;'</span></span><br><span class="line"><span class="built_in">JSON</span>.parse(test6) <span class="comment">// Uncaught SyntaxError: Unexpected token &#125; in JSON at position 17</span></span><br></pre></td></tr></table></figure></div><p>å¯¹äºæ•°å€¼ç±»å‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç¦æ­¢å‡ºç°å‰å¯¼é›¶</span></span><br><span class="line"><span class="keyword">const</span> test7 = [<span class="number">00010</span>, <span class="number">1</span>]</span><br><span class="line"><span class="built_in">JSON</span>.stringify(test7) <span class="comment">// "[8,1]"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> test8 = <span class="string">"[00010, 1]"</span></span><br><span class="line"><span class="built_in">JSON</span>.parse(test8) <span class="comment">// SyntaxError: Unexpected number in JSON at position 2**</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœæœ‰å°æ•°ç‚¹ï¼Œåˆ™åé¢è‡³å°‘è·Ÿç€ä¸€ä½æ•°å­—ã€‚</span></span><br><span class="line"><span class="keyword">const</span> test9 = [<span class="number">1</span>, <span class="number">1.</span>]</span><br><span class="line"><span class="built_in">JSON</span>.stringify(test9) <span class="comment">// "[1,1]"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> test10 = <span class="string">"[1, 1.]"</span></span><br><span class="line"><span class="built_in">JSON</span>.parse(test10) <span class="comment">// Uncaught SyntaxError: Unexpected token ] in JSON at position 6</span></span><br></pre></td></tr></table></figure></div><blockquote><p>ps: <strong>0+æ•°å­—</strong>è¡¨ç¤º8è¿›åˆ¶ï¼Œ- -æ‰€ä»¥ä¸Šé¢æ‰“å°å‡ºæ¥çš„æ˜¯8ï¼ŒåŒæ ·çš„æœ‰ï¼š<strong>0b+æ•°å­—(äºŒè¿›åˆ¶)</strong>ã€<strong>0x+æ•°å­—(16è¿›åˆ¶)</strong>ï¼Œå…¶å®<strong>0o+æ•°å­—</strong>ä¹Ÿå¯ä»¥è¡¨ç¤º8è¿›åˆ¶</p></blockquote><p>å…¶å®è¿˜æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹ï¼Œ<strong>JavaScript</strong>å’Œ<strong>JSON</strong>å¤„ç†æ˜¯ä¸ä¸€è‡´çš„ï¼Œè¿™é‡Œä¸ºå•¥æˆ‘åªå†™ä¸¤ç‚¹å‘¢ï¼Ÿæ˜¯å› ä¸ºè¿˜æœ‰ç°åœ¨åœ¨æ–°ç‰ˆçš„<strong>Chrome</strong>å·²ç»å¯ä»¥è§£ææ­£å¸¸ï¼Œä½†æ˜¯æƒ³å…·ä½“å¯ä»¥æŸ¥çœ‹ä¸‹é¢<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON" target="_blank" rel="noopener">å‚è€ƒé“¾æ¥</a>è‡ªè¡Œäº†è§£ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†</p><blockquote><p>å‚è€ƒï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON" target="_blank" rel="noopener">JavaScript ä¸ JSON çš„åŒºåˆ«</a>ï¼Œå­—ç¬¦ä¸²é‚£ä¸€ç‚¹æˆ‘åœ¨<strong>Chrome 85.0.4183.83</strong>ä»¥åŠå¯ä»¥æ­£å¸¸è§£æ</p></blockquote><h1 id="stringify"><a href="#stringify" class="headerlink" title="stringify"></a>stringify</h1><p>stringify() æ–¹æ³•ç”¨äºå°†<code>JavaScript</code>å€¼è½¬æ¢ä¸º<code>JSON</code>å­—ç¬¦ä¸²ã€‚</p><p>è™½ç„¶æˆ‘ä»¬ç»å¸¸ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä½†æˆ‘æƒ³ä¼°è®¡æœ‰ä¸å°‘äººä¸çŸ¥é“å®ƒå±…ç„¶æœ‰ä¸‰ä¸ªå‚æ•°ä¹‹å¤šå§ï¼Ÿåˆ†åˆ«æ˜¯<code>value</code>ã€<code>replacer</code>ã€<code>space</code>ã€‚</p><blockquote><p>JSON.stringify(value[, replacer [, space]])</p></blockquote><ul><li>value<ul><li>å°†è¦åºåˆ—åŒ–æˆ ä¸€ä¸ª JSON å­—ç¬¦ä¸²çš„å€¼ã€‚</li></ul></li><li>replacer <code>å¯é€‰</code><ul><li>å¦‚æœè¯¥å‚æ•°æ˜¯ä¸€ä¸ª<strong>å‡½æ•°</strong>ï¼Œåˆ™åœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­ï¼Œè¢«åºåˆ—åŒ–çš„å€¼çš„æ¯ä¸ªå±æ€§éƒ½ä¼šç»è¿‡è¯¥å‡½æ•°çš„è½¬æ¢å’Œå¤„ç†ï¼›å¦‚æœè¯¥å‚æ•°æ˜¯ä¸€ä¸ª<strong>æ•°ç»„</strong>ï¼Œåˆ™åªæœ‰åŒ…å«åœ¨è¿™ä¸ªæ•°ç»„ä¸­çš„å±æ€§åæ‰ä¼šè¢«åºåˆ—åŒ–åˆ°æœ€ç»ˆçš„ JSON å­—ç¬¦ä¸²ä¸­ï¼›å¦‚æœè¯¥å‚æ•°ä¸º <strong>null</strong> æˆ–è€…æœªæä¾›ï¼Œåˆ™å¯¹è±¡æ‰€æœ‰çš„å±æ€§éƒ½ä¼šè¢«åºåˆ—åŒ–ã€‚</li></ul></li><li>space <code>å¯é€‰</code><ul><li>æŒ‡å®šç¼©è¿›ç”¨çš„ç©ºç™½å­—ç¬¦ä¸²ï¼Œç”¨äºç¾åŒ–è¾“å‡ºï¼ˆpretty-printï¼‰ï¼›å¦‚æœå‚æ•°æ˜¯ä¸ªæ•°å­—ï¼Œå®ƒä»£è¡¨æœ‰å¤šå°‘çš„ç©ºæ ¼ï¼›ä¸Šé™ä¸º10ã€‚è¯¥å€¼è‹¥å°äº1ï¼Œåˆ™æ„å‘³ç€æ²¡æœ‰ç©ºæ ¼ï¼›å¦‚æœè¯¥å‚æ•°ä¸ºå­—ç¬¦ä¸²ï¼ˆå½“å­—ç¬¦ä¸²é•¿åº¦è¶…è¿‡10ä¸ªå­—æ¯ï¼Œå–å…¶å‰10ä¸ªå­—æ¯ï¼‰ï¼Œè¯¥å­—ç¬¦ä¸²å°†è¢«ä½œä¸ºç©ºæ ¼ï¼›å¦‚æœè¯¥å‚æ•°æ²¡æœ‰æä¾›ï¼ˆæˆ–è€…ä¸º nullï¼‰ï¼Œå°†æ²¡æœ‰ç©ºæ ¼ã€‚</li></ul></li></ul><h2 id="valueå‚æ•°"><a href="#valueå‚æ•°" class="headerlink" title="valueå‚æ•°"></a>valueå‚æ•°</h2><p>é€šå¸¸æˆ‘ä»¬æœ€å¸¸ç”¨çš„å°±æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä¹Ÿå°±æ˜¯valueå‚æ•°ï¼Œä½†æ˜¯ä½ çŸ¥é“å®ƒçš„è¿ç®—è§„åˆ™æ˜¯æ€ä¹ˆæ ·çš„å—ï¼Ÿé—²è¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šä¾‹å­</p><h3 id="NaN-å’Œ-Infinity-æ ¼å¼çš„æ•°å€¼åŠ-null-éƒ½ä¼šè¢«å½“åš-null"><a href="#NaN-å’Œ-Infinity-æ ¼å¼çš„æ•°å€¼åŠ-null-éƒ½ä¼šè¢«å½“åš-null" class="headerlink" title="NaN å’Œ Infinity æ ¼å¼çš„æ•°å€¼åŠ null éƒ½ä¼šè¢«å½“åš null"></a>NaN å’Œ Infinity æ ¼å¼çš„æ•°å€¼åŠ null éƒ½ä¼šè¢«å½“åš null</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify([<span class="literal">NaN</span>, <span class="literal">Infinity</span>, <span class="literal">null</span>]) <span class="comment">// [null,null,null]</span></span><br></pre></td></tr></table></figure></div><h3 id="undefinedã€ä»»æ„çš„å‡½æ•°ä»¥åŠ-symbol-å€¼çš„å¤„ç†"><a href="#undefinedã€ä»»æ„çš„å‡½æ•°ä»¥åŠ-symbol-å€¼çš„å¤„ç†" class="headerlink" title="undefinedã€ä»»æ„çš„å‡½æ•°ä»¥åŠ symbol å€¼çš„å¤„ç†"></a>undefinedã€ä»»æ„çš„å‡½æ•°ä»¥åŠ symbol å€¼çš„å¤„ç†</h3><h4 id="å‡ºç°åœ¨éæ•°ç»„å¯¹è±¡çš„å±æ€§å€¼ä¸­æ—¶ï¼Œåœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­ä¼šè¢«å¿½ç•¥"><a href="#å‡ºç°åœ¨éæ•°ç»„å¯¹è±¡çš„å±æ€§å€¼ä¸­æ—¶ï¼Œåœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­ä¼šè¢«å¿½ç•¥" class="headerlink" title="å‡ºç°åœ¨éæ•°ç»„å¯¹è±¡çš„å±æ€§å€¼ä¸­æ—¶ï¼Œåœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­ä¼šè¢«å¿½ç•¥"></a>å‡ºç°åœ¨éæ•°ç»„å¯¹è±¡çš„å±æ€§å€¼ä¸­æ—¶ï¼Œåœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­ä¼šè¢«å¿½ç•¥</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(&#123;<span class="attr">x</span>: <span class="literal">undefined</span>, <span class="attr">y</span>: <span class="built_in">Object</span>, <span class="attr">z</span>: <span class="built_in">Symbol</span>(<span class="string">""</span>)&#125;) <span class="comment">// "&#123;&#125;"</span></span><br></pre></td></tr></table></figure></div><h4 id="å‡ºç°åœ¨æ•°ç»„ä¸­æ—¶è¢«è½¬æ¢æˆnull"><a href="#å‡ºç°åœ¨æ•°ç»„ä¸­æ—¶è¢«è½¬æ¢æˆnull" class="headerlink" title="å‡ºç°åœ¨æ•°ç»„ä¸­æ—¶è¢«è½¬æ¢æˆnull"></a>å‡ºç°åœ¨æ•°ç»„ä¸­æ—¶è¢«è½¬æ¢æˆnull</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify([<span class="literal">undefined</span>, <span class="built_in">Object</span>, <span class="built_in">Symbol</span>(<span class="string">""</span>)])  <span class="comment">// "[null,null,null]"</span></span><br></pre></td></tr></table></figure></div><h4 id="å•ç‹¬å‡ºç°åˆ™ä¼šè¿”å›undefined"><a href="#å•ç‹¬å‡ºç°åˆ™ä¼šè¿”å›undefined" class="headerlink" title="å•ç‹¬å‡ºç°åˆ™ä¼šè¿”å›undefined"></a>å•ç‹¬å‡ºç°åˆ™ä¼šè¿”å›undefined</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(<span class="literal">undefined</span>)  <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify(<span class="built_in">Object</span>)  <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify(<span class="built_in">Symbol</span>(<span class="string">""</span>))  <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></div><h3 id="æ‰€æœ‰ä»¥-symbol-ä¸ºå±æ€§é”®çš„å±æ€§éƒ½ä¼šè¢«å®Œå…¨å¿½ç•¥æ‰ï¼Œå³ä¾¿-replacer-å‚æ•°ä¸­å¼ºåˆ¶æŒ‡å®šåŒ…å«äº†å®ƒä»¬ã€‚"><a href="#æ‰€æœ‰ä»¥-symbol-ä¸ºå±æ€§é”®çš„å±æ€§éƒ½ä¼šè¢«å®Œå…¨å¿½ç•¥æ‰ï¼Œå³ä¾¿-replacer-å‚æ•°ä¸­å¼ºåˆ¶æŒ‡å®šåŒ…å«äº†å®ƒä»¬ã€‚" class="headerlink" title="æ‰€æœ‰ä»¥ symbol ä¸ºå±æ€§é”®çš„å±æ€§éƒ½ä¼šè¢«å®Œå…¨å¿½ç•¥æ‰ï¼Œå³ä¾¿ replacer å‚æ•°ä¸­å¼ºåˆ¶æŒ‡å®šåŒ…å«äº†å®ƒä»¬ã€‚"></a>æ‰€æœ‰ä»¥ symbol ä¸ºå±æ€§é”®çš„å±æ€§éƒ½ä¼šè¢«å®Œå…¨å¿½ç•¥æ‰ï¼Œå³ä¾¿ replacer å‚æ•°ä¸­å¼ºåˆ¶æŒ‡å®šåŒ…å«äº†å®ƒä»¬ã€‚</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(&#123;[<span class="built_in">Symbol</span>(<span class="string">"foo"</span>)]: <span class="string">"foo"</span>&#125;) <span class="comment">// "&#123;&#125;"</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify(&#123;[<span class="built_in">Symbol</span>.for(<span class="string">"foo"</span>)]: <span class="string">"foo"</span>&#125;, [<span class="built_in">Symbol</span>.for(<span class="string">"foo"</span>)]) <span class="comment">// "&#123;&#125;"</span></span><br></pre></td></tr></table></figure></div><h3 id="è½¬æ¢å€¼å¦‚æœæœ‰-toJSON-æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å®šä¹‰ä»€ä¹ˆå€¼å°†è¢«åºåˆ—åŒ–ã€‚"><a href="#è½¬æ¢å€¼å¦‚æœæœ‰-toJSON-æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å®šä¹‰ä»€ä¹ˆå€¼å°†è¢«åºåˆ—åŒ–ã€‚" class="headerlink" title="è½¬æ¢å€¼å¦‚æœæœ‰ toJSON() æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å®šä¹‰ä»€ä¹ˆå€¼å°†è¢«åºåˆ—åŒ–ã€‚"></a>è½¬æ¢å€¼å¦‚æœæœ‰ toJSON() æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å®šä¹‰ä»€ä¹ˆå€¼å°†è¢«åºåˆ—åŒ–ã€‚</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">  toJSON: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'gating'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;) <span class="comment">// "gating"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> name = &#123;</span><br><span class="line">  age: <span class="number">18</span>,</span><br><span class="line">  toJSON: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'gating'</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">JSON</span>.stringify(&#123; name &#125;) <span class="comment">// &#123;"name":"gating"&#125;</span></span><br></pre></td></tr></table></figure></div><p>åˆå› ä¸º<strong>Date</strong>å¯¹è±¡ä¸ŠæŒ‚è½½äº†ä¸€ä¸ª<strong>toJSON</strong>æ–¹æ³•ï¼Œæ‰€ä»¥é’ˆå¯¹äº<strong>Date</strong>ç±»å‹ï¼Œå®ƒé»˜è®¤å°±ä¼šè°ƒç”¨<strong>Date</strong>ç±»å‹ä¸Šçš„<strong>toJSON</strong>æ–¹æ³•(åŒDate.toISOString())</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"2020/01/01"</span>)) <span class="comment">// "2019-12-31T16:00:00.000Z" å› ä¸ºä¸­å›½åœ¨ä¸œå…«åŒºï¼Œæ‰€ä»¥ç›¸å·®äº†8å°æ—¶</span></span><br></pre></td></tr></table></figure></div><blockquote><p>ps: ä¸œå…«åŒºï¼ˆUTC/GMT+08:00ï¼‰æ˜¯æ¯”ä¸–ç•Œåè°ƒæ—¶é—´ï¼ˆUTCï¼‰/æ ¼æ—å°¼æ²»æ—¶é—´ï¼ˆGMTï¼‰å¿«8å°æ—¶çš„æ—¶åŒº</p></blockquote><h3 id="å…¶ä»–ç±»å‹çš„å¯¹è±¡ï¼Œä»…ä¼šåºåˆ—åŒ–å¯¹è±¡å¯æšä¸¾çš„å±æ€§ï¼ŒåŒ…æ‹¬-Map-Set-WeakMap-WeakSet"><a href="#å…¶ä»–ç±»å‹çš„å¯¹è±¡ï¼Œä»…ä¼šåºåˆ—åŒ–å¯¹è±¡å¯æšä¸¾çš„å±æ€§ï¼ŒåŒ…æ‹¬-Map-Set-WeakMap-WeakSet" class="headerlink" title="å…¶ä»–ç±»å‹çš„å¯¹è±¡ï¼Œä»…ä¼šåºåˆ—åŒ–å¯¹è±¡å¯æšä¸¾çš„å±æ€§ï¼ŒåŒ…æ‹¬ Map/Set/WeakMap/WeakSet"></a>å…¶ä»–ç±»å‹çš„å¯¹è±¡ï¼Œä»…ä¼šåºåˆ—åŒ–å¯¹è±¡å¯æšä¸¾çš„å±æ€§ï¼ŒåŒ…æ‹¬ Map/Set/WeakMap/WeakSet</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(</span><br><span class="line">  <span class="built_in">Object</span>.create(<span class="literal">null</span>, &#123;</span><br><span class="line">    x: &#123; <span class="attr">value</span>: <span class="string">'x'</span>&#125;, <span class="comment">// enumerable é»˜è®¤ä¸ºä¸å¯æšä¸¾</span></span><br><span class="line">    y: &#123; <span class="attr">value</span>: <span class="string">'y'</span>, <span class="attr">enumerable</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">) <span class="comment">// "&#123;"y":"y"&#125;"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(map, <span class="string">'name'</span>, &#123;</span><br><span class="line">  value: <span class="string">'gating'</span>,</span><br><span class="line">  enumerable: <span class="literal">true</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(map, <span class="string">'age'</span>, &#123;</span><br><span class="line">  value: <span class="number">18</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">JSON</span>.stringify(map) <span class="comment">// &#123;"name":"gating"&#125;</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify(<span class="keyword">new</span> <span class="built_in">Set</span>) <span class="comment">// &#123;&#125;</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify(<span class="keyword">new</span> <span class="built_in">RegExp</span>) <span class="comment">// &#123;&#125;</span></span><br></pre></td></tr></table></figure></div><p>çœ‹åˆ°è¿™é‡Œï¼Œä½ åŸºæœ¬å·²ç»çŸ¥é“è¿ç®—è§„åˆ™æ˜¯æ€ä¹ˆæ ·æ»´äº†ï¼Œä¹Ÿå°±çŸ¥é“äº†ä¸ºä»€ä¹ˆ<code>JSON.stringify + JSON.parse</code>ä¸èƒ½è½¬æ¢å‡½æ•°ã€æ­£åˆ™ã€Errorç­‰å¯¹è±¡äº†å§ï¼Ÿ</p><p>é‚£ä¹ˆæ¥ä¸‹æ¥å°±è¦äº†è§£ä¸‹æ›´æœ‰æ„æ€çš„ä¸œè¥¿å•¦ï¼Œå°±æ˜¯<code>stringify</code>ç¬¬äºŒä¸ªå‚æ•°<code>replacer</code>å•¦</p><h2 id="replacerå‚æ•°"><a href="#replacerå‚æ•°" class="headerlink" title="replacerå‚æ•°"></a>replacerå‚æ•°</h2><p>replacer å‚æ•°å¯ä»¥ç”¨æ¥æ¥æ›´æ”¹é»˜è®¤çš„å­—ç¬¦ä¸²åŒ–çš„è¡Œä¸ºã€‚å®ƒå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–è€…ä¸€ä¸ªæ•°ç»„ã€‚å¦‚æœè¯¥å‚æ•°ä¸º null æˆ–è€…æœªæä¾›ï¼Œåˆ™å¯¹è±¡æ‰€æœ‰çš„å±æ€§éƒ½ä¼šè¢«åºåˆ—åŒ–ã€‚</p><h3 id="ä½œä¸ºå‡½æ•°"><a href="#ä½œä¸ºå‡½æ•°" class="headerlink" title="ä½œä¸ºå‡½æ•°"></a>ä½œä¸ºå‡½æ•°</h3><p>åœ¨å¼€å§‹æ—¶, replacer å‡½æ•°ä¼šè¢«ä¼ å…¥ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ä½œä¸º key å€¼ï¼Œä»£è¡¨ç€è¦è¢« stringify çš„è¿™ä¸ªå¯¹è±¡ã€‚éšåæ¯ä¸ªå¯¹è±¡æˆ–æ•°ç»„ä¸Šçš„å±æ€§ä¼šè¢«ä¾æ¬¡ä¼ å…¥ã€‚</p><p>è¿™å¥è¯çœ‹ä¸å¤ªæ‡‚ï¼Ÿä¸è¦ç´§ï¼Œä¸¾ä¸ªä¾‹å­ä½ å°±æ‡‚äº†</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">replacer</span>(<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'['</span> + key + <span class="string">']:'</span> + value)</span><br><span class="line">  <span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(&#123; <span class="attr">name</span>: <span class="string">'gating'</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;, replacer)</span><br><span class="line"><span class="comment">// []:[object Object]</span></span><br><span class="line"><span class="comment">// [name]:gating</span></span><br><span class="line"><span class="comment">// [age]:18</span></span><br></pre></td></tr></table></figure></div><p>ä¸Šé¢ä¾‹å­ä¸­ï¼Œä»–ä¼šæ‰§è¡Œä¸‰æ¬¡ï¼Œä¹Ÿå°±æ˜¯ä¸€å¼€å§‹ä»–ä¼šé»˜è®¤ä¼ ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ä½œä¸ºé”®ï¼Œè€Œé”®å€¼æ˜¯æ•´ä¸ªå¯¹è±¡ï¼›ç¬¬äºŒæ¬¡é”®ä¸º<code>name</code>ï¼Œé”®å€¼ä¸º<code>gating</code>ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><p>å½“ç„¶ï¼Œè¿™é‡Œä¹Ÿæœ‰ä¸ªç‰¹åˆ«éœ€è¦æ³¨æ„çš„ç‚¹ï¼Œå°±æ˜¯è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œè¯¥å¯¹è±¡é€’å½’åœ°åºåˆ—åŒ–æˆ JSON å­—ç¬¦ä¸²ï¼Œå¯¹æ¯ä¸ªå±æ€§è°ƒç”¨<code>replacer</code>æ–¹æ³•ã€‚é™¤éè¯¥å¯¹è±¡æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ç§æƒ…å†µå°†ä¸ä¼šè¢«åºåˆ—åŒ–æˆ JSON å­—ç¬¦ä¸²ã€‚</p><p>æ¯”å¦‚ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">replacer</span>(<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;<span class="attr">a</span>:<span class="number">1</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">JSON</span>.stringify(&#123;&#125;, replacer)</span><br></pre></td></tr></table></figure></div><p>å› ä¸ºæˆ‘ä»¬æ¯æ¬¡è¿”å›çš„éƒ½æ˜¯å¯¹è±¡ï¼Œé‚£ä¹ˆæ¯æ¬¡éƒ½ä¼šè°ƒç”¨<code>replacer</code>ï¼Œæ‰€ä»¥ä¼šé€ æˆå †æ ˆæº¢å‡ºï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸¾ä¸ªä¸ä¼šæº¢å‡ºçš„å°æ —å­ä¾‹å­å§ğŸ¤£ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">replacer</span>(<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">typeof</span> value === <span class="string">'object'</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">age</span>: <span class="number">9</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> value * <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> name = &#123;&#125;</span><br><span class="line"><span class="built_in">JSON</span>.stringify(name, replacer) <span class="comment">// &#123;"age":18&#125;</span></span><br></pre></td></tr></table></figure></div><p>åœ¨è¿™é‡Œï¼Œæ¯ä¸€æ¬¡å¤„ç†çš„å¯¹è±¡ï¼Œéƒ½æ˜¯å‰ä¸€æ¬¡è¿”å›çš„å€¼ã€‚å› ä¸ºæˆ‘ä»¬<code>replacer</code>ä¿®æ”¹äº†<code>name</code>å¯¹è±¡ï¼Œæ¥ç€å°±è¦é€’å½’<code>replacer</code>å¤„ç†ä¿®æ”¹åçš„å¯¹è±¡ã€‚</p><blockquote><p>æ€»ç»“ï¼šé€’å½’å¤„ç†ä¸­ï¼Œæ¯ä¸€æ¬¡å¤„ç†çš„å¯¹è±¡ï¼Œéƒ½æ˜¯å‰ä¸€æ¬¡è¿”å›çš„å€¼ã€‚</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">key, value</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value)</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string">"object"</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="attr">b</span>: <span class="number">2</span>&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> value*<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(o,f)</span><br></pre></td></tr></table></figure></div><p>é‚£ä¹ˆï¼Œæ—¢ç„¶æ˜¯æ›´æ”¹é»˜è®¤çš„å­—ç¬¦ä¸²åŒ–çš„è¡Œä¸ºï¼Œé‚£ä¹ˆæˆ‘å°±å°è¯•ä¸‹æ›´æ”¹ä¸‹å§</p><h4 id="replacerâ€”â€”æ•°å­—Double"><a href="#replacerâ€”â€”æ•°å­—Double" class="headerlink" title="replacerâ€”â€”æ•°å­—Double"></a>replacerâ€”â€”æ•°å­—Double</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">replacer</span>(<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string">"number"</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> value * <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> me = &#123;</span><br><span class="line">  name: <span class="string">'gating'</span>,</span><br><span class="line">  age: <span class="number">9</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">JSON</span>.stringify(me, replacer) <span class="comment">// &#123;"name":"gating","age":18&#125;</span></span><br></pre></td></tr></table></figure></div><h4 id="replacerâ€”â€”å‰”é™¤ä¸è¦çš„å±æ€§"><a href="#replacerâ€”â€”å‰”é™¤ä¸è¦çš„å±æ€§" class="headerlink" title="replacerâ€”â€”å‰”é™¤ä¸è¦çš„å±æ€§"></a>replacerâ€”â€”å‰”é™¤ä¸è¦çš„å±æ€§</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">replacer</span>(<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string">"string"</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">undefined</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> me = &#123;</span><br><span class="line">  name: <span class="string">'gating'</span>,</span><br><span class="line">  age: <span class="number">18</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">JSON</span>.stringify(me, replacer) <span class="comment">// &#123;"age":18&#125; å‰”é™¤äº†nameå±æ€§</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify([<span class="number">1</span>,<span class="string">"2"</span>], replacer) <span class="comment">// "[1,null]"</span></span><br></pre></td></tr></table></figure></div><blockquote><p>æ³¨æ„: ä¸èƒ½ç”¨ replacer æ–¹æ³•ï¼Œä»æ•°ç»„ä¸­ç§»é™¤å€¼ï¼ˆvaluesï¼‰ï¼Œå¦‚è‹¥è¿”å› undefined æˆ–è€…ä¸€ä¸ªå‡½æ•°ï¼Œå°†ä¼šè¢« null å–ä»£(å…¶å®ä» value çš„è¿ç®—è§„åˆ™æˆ‘ä»¬ä¹ŸçŸ¥é“ä¼šå‡ºç°è¿™ä¸ªç»“æœäº†)ã€‚</p></blockquote><h3 id="ä½œä¸ºæ•°ç»„"><a href="#ä½œä¸ºæ•°ç»„" class="headerlink" title="ä½œä¸ºæ•°ç»„"></a>ä½œä¸ºæ•°ç»„</h3><p>æ•°ç»„çš„å€¼ä»£è¡¨å°†è¢«åºåˆ—åŒ–æˆ<code>JSON</code>å­—ç¬¦ä¸²çš„å±æ€§å</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> me = &#123;</span><br><span class="line">  name: <span class="string">'gating'</span>,</span><br><span class="line">  age: <span class="number">18</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">JSON</span>.stringify(me, [<span class="string">'name'</span>]) <span class="comment">// &#123;"name":"gating"&#125; åªä¿ç•™äº†nameçš„å±æ€§å€¼</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify([<span class="string">'a'</span>, <span class="string">'b'</span>], [<span class="string">'0'</span>]) <span class="comment">// ['a', 'b']</span></span><br></pre></td></tr></table></figure></div><blockquote><p>è¿™ä¸ªç±»ä¼¼ç™½åå•çš„æ•°ç»„ï¼Œåªå¯¹å¯¹è±¡çš„å±æ€§æœ‰æ•ˆï¼Œå¯¹æ•°ç»„æ— æ•ˆã€‚</p></blockquote><h2 id="spaceå‚æ•°"><a href="#spaceå‚æ•°" class="headerlink" title="spaceå‚æ•°"></a>spaceå‚æ•°</h2><p>space å‚æ•°ç”¨æ¥æ§åˆ¶ç»“æœå­—ç¬¦ä¸²é‡Œé¢çš„é—´è·ï¼Œå¢åŠ è¿”å›çš„ JSON å­—ç¬¦ä¸²çš„å¯è¯»æ€§ã€‚å¦‚æœæ˜¯ä¸€ä¸ªæ•°å­—, åˆ™åœ¨å­—ç¬¦ä¸²åŒ–æ—¶æ¯ä¸€çº§åˆ«ä¼šæ¯”ä¸Šä¸€çº§åˆ«ç¼©è¿›å¤šè¿™ä¸ªæ•°å­—å€¼çš„ç©ºæ ¼ï¼ˆæœ€å¤š10ä¸ªç©ºæ ¼ï¼‰ï¼›å¦‚æœæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™æ¯ä¸€çº§åˆ«ä¼šæ¯”ä¸Šä¸€çº§åˆ«å¤šç¼©è¿›è¯¥å­—ç¬¦ä¸²ï¼ˆæˆ–è¯¥å­—ç¬¦ä¸²çš„å‰10ä¸ªå­—ç¬¦ï¼‰ã€‚</p><h3 id="ä½¿ç”¨æ•°å­—"><a href="#ä½¿ç”¨æ•°å­—" class="headerlink" title="ä½¿ç”¨æ•°å­—"></a>ä½¿ç”¨æ•°å­—</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(&#123; <span class="attr">name</span>: <span class="string">"gating"</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;, <span class="literal">null</span>, <span class="number">6</span>)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">"&#123;</span></span><br><span class="line"><span class="comment">      "name": "gating",</span></span><br><span class="line"><span class="comment">      "age": 18</span></span><br><span class="line"><span class="comment">&#125;"</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></div><h3 id="ä½¿ç”¨å­—ç¬¦ä¸²"><a href="#ä½¿ç”¨å­—ç¬¦ä¸²" class="headerlink" title="ä½¿ç”¨å­—ç¬¦ä¸²"></a>ä½¿ç”¨å­—ç¬¦ä¸²</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(&#123; <span class="attr">name</span>: <span class="string">"gating"</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;, <span class="literal">null</span>, <span class="string">'|-'</span>)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">"&#123;</span></span><br><span class="line"><span class="comment">|-"name": "gating",</span></span><br><span class="line"><span class="comment">|-"age": 18</span></span><br><span class="line"><span class="comment">&#125;"</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></div><h3 id="ä½¿ç”¨åˆ¶è¡¨ç¬¦ï¼ˆ-tï¼‰æ¥ç¼©è¿›"><a href="#ä½¿ç”¨åˆ¶è¡¨ç¬¦ï¼ˆ-tï¼‰æ¥ç¼©è¿›" class="headerlink" title="ä½¿ç”¨åˆ¶è¡¨ç¬¦ï¼ˆ\tï¼‰æ¥ç¼©è¿›"></a>ä½¿ç”¨åˆ¶è¡¨ç¬¦ï¼ˆ\tï¼‰æ¥ç¼©è¿›</h3><p>å› ä¸ºæœ€ç”¨ç”¨åˆ°è¦ç¾åŒ–JSONçš„åœºæ™¯ï¼Œæ‰€ä»¥é¡ºä¾¿æŠŠåˆ¶è¡¨ç¬¦ä¹Ÿå†™å‡ºæ¥äº† ğŸ˜Š</p><p>å°±æ˜¯æäº¤çš„æ—¶å€™æ˜¯jsonï¼Œè¿”å›çš„æ—¶å€™ç¾åŒ–jsonæ˜¾ç¤ºåˆ°è¾“å…¥æ¡†å†…</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(&#123; <span class="attr">name</span>: <span class="string">"gating"</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;, <span class="literal">null</span>, <span class="string">'\t'</span>)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">"&#123;</span></span><br><span class="line"><span class="comment">"name": "gating",</span></span><br><span class="line"><span class="comment">"age": 18</span></span><br><span class="line"><span class="comment">&#125;"</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></div><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li>JSON.stringify()å°†å€¼è½¬æ¢ä¸ºç›¸åº”çš„JSONæ ¼å¼ï¼š<ul><li>è½¬æ¢å€¼å¦‚æœæœ‰ toJSON() æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å®šä¹‰ä»€ä¹ˆå€¼å°†è¢«åºåˆ—åŒ–ã€‚</li><li>éæ•°ç»„å¯¹è±¡çš„å±æ€§ä¸èƒ½ä¿è¯ä»¥ç‰¹å®šçš„é¡ºåºå‡ºç°åœ¨åºåˆ—åŒ–åçš„å­—ç¬¦ä¸²ä¸­ã€‚</li><li>å¸ƒå°”å€¼ã€æ•°å­—ã€å­—ç¬¦ä¸²çš„åŒ…è£…å¯¹è±¡åœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨è½¬æ¢æˆå¯¹åº”çš„åŸå§‹å€¼ã€‚</li><li>undefinedã€ä»»æ„çš„å‡½æ•°ä»¥åŠ symbol å€¼ï¼Œåœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­ä¼šè¢«å¿½ç•¥ï¼ˆå‡ºç°åœ¨éæ•°ç»„å¯¹è±¡çš„å±æ€§å€¼ä¸­æ—¶ï¼‰æˆ–è€…è¢«è½¬æ¢æˆ nullï¼ˆå‡ºç°åœ¨æ•°ç»„ä¸­æ—¶ï¼‰ã€‚å‡½æ•°ã€undefined è¢«å•ç‹¬è½¬æ¢æ—¶ï¼Œä¼šè¿”å› undefinedï¼Œå¦‚JSON.stringify(function(){}) or JSON.stringify(undefined).</li><li>å¯¹åŒ…å«å¾ªç¯å¼•ç”¨çš„å¯¹è±¡ï¼ˆå¯¹è±¡ä¹‹é—´ç›¸äº’å¼•ç”¨ï¼Œå½¢æˆæ— é™å¾ªç¯ï¼‰æ‰§è¡Œæ­¤æ–¹æ³•ï¼Œä¼šæŠ›å‡ºé”™è¯¯ã€‚</li><li>æ‰€æœ‰ä»¥ symbol ä¸ºå±æ€§é”®çš„å±æ€§éƒ½ä¼šè¢«å®Œå…¨å¿½ç•¥æ‰ï¼Œå³ä¾¿ replacer å‚æ•°ä¸­å¼ºåˆ¶æŒ‡å®šåŒ…å«äº†å®ƒä»¬ã€‚</li><li>Date æ—¥æœŸè°ƒç”¨äº† toJSON() å°†å…¶è½¬æ¢ä¸ºäº† string å­—ç¬¦ä¸²ï¼ˆåŒDate.toISOString()ï¼‰ï¼Œå› æ­¤ä¼šè¢«å½“åšå­—ç¬¦ä¸²å¤„ç†ã€‚</li><li>NaN å’Œ Infinity æ ¼å¼çš„æ•°å€¼åŠ null éƒ½ä¼šè¢«å½“åš nullã€‚</li><li>å…¶ä»–ç±»å‹çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬ Map/Set/WeakMap/WeakSetï¼Œä»…ä¼šåºåˆ—åŒ–å¯æšä¸¾çš„å±æ€§ã€‚</li></ul></li></ul><h1 id="parse"><a href="#parse" class="headerlink" title="parse"></a>parse</h1><p>parse() æ–¹æ³•ç”¨äºå°†ä¸€ä¸ª JSON å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯¹è±¡ã€‚</p><blockquote><p>JSON.parse(text[, reviver])</p></blockquote><h2 id="textå‚æ•°"><a href="#textå‚æ•°" class="headerlink" title="textå‚æ•°"></a>textå‚æ•°</h2><p>textå‚æ•°æ²¡å•¥å¯è¯´çš„ï¼Œå°±æ˜¯è¦è¢«è§£ææˆ JavaScript å€¼çš„å­—ç¬¦ä¸²ï¼Œå¿…é¡»ç¬¦åˆ<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON" target="_blank" rel="noopener">JSON</a>çš„è¯­æ³•æ ¼å¼</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.parse(<span class="string">'&#123;&#125;'</span>) <span class="comment">// &#123;&#125;</span></span><br><span class="line"><span class="comment">// å¦‚æœä¼ å…¥çš„å­—ç¬¦ä¸²ä¸æ˜¯æœ‰æ•ˆçš„ JSON æ ¼å¼, JSON.parseæ–¹æ³•å°†æŠ¥é”™ã€‚</span></span><br><span class="line"><span class="built_in">JSON</span>.parse(<span class="string">"'String'"</span>) <span class="comment">// Uncaught SyntaxError: Unexpected token ' in JSON at position 0</span></span><br></pre></td></tr></table></figure></div><h2 id="reviverå‚æ•°"><a href="#reviverå‚æ•°" class="headerlink" title="reviverå‚æ•°"></a>reviverå‚æ•°</h2><p>reviverå‚æ•°å’ŒJSON.stringifyæ–¹æ³•çš„reviverå‚æ•°ç±»ä¼¼ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯å¦‚æœæœ‰æ·±å±‚å¯¹è±¡ï¼Œä»–çš„éå†é¡ºåºä¾ç…§ï¼š</p><p>ä»æœ€å†…å±‚å¼€å§‹ï¼ŒæŒ‰ç…§å±‚çº§é¡ºåºï¼Œä¾æ¬¡å‘å¤–éå†ï¼Œè€ŒJSON.stringifyçš„éå†é¡ºåºåˆšå¥½ç›¸åï¼Œä»å¤–å‘å†…</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.parse(<span class="string">'&#123;"1": 1, "2": 2,"3": &#123;"4": 4, "5": &#123;"6": 6&#125;&#125;&#125;'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">k, v</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(k); <span class="comment">// è¾“å‡ºå½“å‰çš„å±æ€§åï¼Œä»è€Œå¾—çŸ¥éå†é¡ºåºæ˜¯ä»å†…å‘å¤–çš„ï¼Œ</span></span><br><span class="line">                    <span class="comment">// æœ€åä¸€ä¸ªå±æ€§åä¼šæ˜¯ä¸ªç©ºå­—ç¬¦ä¸²ã€‚</span></span><br><span class="line">    <span class="keyword">return</span> v;       <span class="comment">// è¿”å›åŸå§‹å±æ€§å€¼ï¼Œç›¸å½“äºæ²¡æœ‰ä¼ é€’ reviver å‚æ•°ã€‚</span></span><br><span class="line">&#125;) <span class="comment">// 1 2 4 6 5 3 ""</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(&#123;<span class="string">"1"</span>: <span class="number">1</span>, <span class="string">"2"</span>: <span class="number">2</span>,<span class="string">"3"</span>: &#123;<span class="string">"4"</span>: <span class="number">4</span>, <span class="string">"5"</span>: &#123;<span class="string">"6"</span>: <span class="number">6</span>&#125;&#125;&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">k, v</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(k); </span><br><span class="line">    <span class="keyword">return</span> v;      </span><br><span class="line">&#125;) <span class="comment">// "" 1 2 3 4 5 6</span></span><br></pre></td></tr></table></figure></div><h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><ul><li><a href="https://javascript.ruanyifeng.com/stdlib/json.html" target="_blank" rel="noopener">JSONå¯¹è±¡</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON" target="_blank" rel="noopener">JSON</a></li></ul><h1 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h1><p>è™½ç„¶æœ¬æ–‡ç½—å—¦äº†ç‚¹ï¼Œä½†è¿˜æ˜¯æ„Ÿè°¢å„ä½è§‚ä¼—è€çˆ·çš„èƒ½çœ‹åˆ°æœ€å O(âˆ©_âˆ©)O å¸Œæœ›ä½ èƒ½æœ‰æ‰€æ”¶è· ğŸ˜</p>]]></content>
      
      
      <categories>
          
          <category> è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nodeå®ç°æ–‡ä»¶å±æ€§æ‰¹é‡ä¿®æ”¹(æ–‡ä»¶å)</title>
      <link href="/2020-07-05/node%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E5%B1%9E%E6%80%A7%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9(%E6%96%87%E4%BB%B6%E5%90%8D)/"/>
      <url>/2020-07-05/node%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E5%B1%9E%E6%80%A7%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9(%E6%96%87%E4%BB%B6%E5%90%8D)/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ä¹¦æ¥ä¸Šå›ï¼Œæˆ‘ä»¬å®ç°äº†<code>æ‰¹é‡ä¿®æ”¹æ–‡ä»¶çš„æ—¶é—´</code>ï¼Œä½†æ˜¯å´æ²¡æœ‰å®ç°<code>æ–‡ä»¶åç§°çš„æ‰¹é‡ä¿®æ”¹</code>ï¼Œæ˜¯å› ä¸ºæˆ‘ä¹Ÿè¯´è¿‡ï¼Œæ²¡æœ‰ç•Œé¢çš„è¯ç›´æ¥åœ¨å‘½ä»¤è¡Œå®ç°æ˜¾å¾—æœ‰ç‚¹ç¹çï¼Œæ‰€ä»¥æˆ‘ä»¬å°±é€šè¿‡<code>æ¥å£+ç•Œé¢</code>çš„æ–¹å¼æ¥å®ç°æˆ‘ä»¬è¿™ä¸ªå°éœ€æ±‚å§ã€‚æ‰€ä»¥ï¼Œé—²è¯ä¸å¤šè¯´å•¦ï¼Œå¼€å§‹å†™æˆ‘ä»¬çš„ä»£ç å•¦~~</p><p>æœ¬æ¬¡æ•™ç¨‹è¿‡äºå•°å—¦ï¼Œæ‰€ä»¥è¿™é‡Œå…ˆæ”¾ä¸Šé¢„è§ˆåœ°å€ä¾›å¤§å®¶é¢„è§ˆâ€”â€”<a href="https://gating.gitee.io/demo/batch-modify-filenames/" target="_blank" rel="noopener">ç‚¹æˆ‘é¢„è§ˆ</a>ï¼Œä¹Ÿå¯åˆ°æ–‡æœ«ç›´æ¥ä¸‹è½½ä»£ç å…ˆè‡ªè¡Œä½“éªŒã€‚ã€‚ã€‚</p><h1 id="ç®€å•çš„è¯´ä¸‹å®ç°çš„æ•ˆæœ"><a href="#ç®€å•çš„è¯´ä¸‹å®ç°çš„æ•ˆæœ" class="headerlink" title="ç®€å•çš„è¯´ä¸‹å®ç°çš„æ•ˆæœ"></a>ç®€å•çš„è¯´ä¸‹å®ç°çš„æ•ˆæœ</h1><p>é€šå¸¸æˆ‘ä»¬åœ¨<code>è“æ¹–</code>ä¸Šä¸‹è½½çš„åˆ‡å›¾æ˜¯å’Œ<code>UIå°å§å§</code>å®šä¹‰çš„å›¾å±‚åç›¸å…³çš„ï¼Œä¸€èˆ¬ä¸‹è½½ä¸‹æ¥ä¹‹åæˆ‘ä»¬å°±éœ€è¦ä¿®æ”¹åç§°ï¼Œä½†æ˜¯ä¸€ä¸ªä¸ªä¿®æ”¹åˆæ˜¾å¾—ååˆ†å‚»é€¼ ğŸ˜†ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±è‡ªå·±å†™ä¸€ä¸‹ä»£ç è‡ªå·±ä¿®æ”¹ï¼Œå…·ä½“æ•ˆæœå¦‚å›¾ï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-07-05/need.png" data-fancybox="group" data-caption="äº§å“æ•ˆæœ" class="fancybox"><img alt="äº§å“æ•ˆæœ" title="äº§å“æ•ˆæœ" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-07-05/need.png" class="lazyload"></a></p><p>çœ‹åˆ°è¿™é‡Œï¼Œæ˜¯ä¸æ˜¯ä¹Ÿæƒ³è·ƒè·ƒæ¬²è¯•å•¦ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å°±å¼€å§‹å†™æˆ‘ä»¬çš„ä»£ç å§</p><h1 id="ç®€å•çš„æ­å»ºä¸€ä¸‹"><a href="#ç®€å•çš„æ­å»ºä¸€ä¸‹" class="headerlink" title="ç®€å•çš„æ­å»ºä¸€ä¸‹"></a>ç®€å•çš„æ­å»ºä¸€ä¸‹</h1><ul><li><p>æ–°å»ºä¸€ä¸ª <code>batch-modify-filenames</code> ç›®å½•</p></li><li><p>åˆå§‹åŒ–ä¸€ä¸ª<code>node</code>é¡¹ç›®å·¥ç¨‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure></div></li><li><p>å®‰è£…ä¾èµ–ï¼Œè¿™é‡Œä¾èµ–æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥ä¸‹é¢æˆ‘ä¼šè®²ä¸€ä¸‹ä»–ä»¬å¤§æ¦‚æ˜¯å¹²å˜›çš„</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i archiver glob koa koa-body koa-router koa-static uuid -S</span><br><span class="line">npm i nodemon -D</span><br></pre></td></tr></table></figure></div><ul><li>koa <code>Nodejsçš„Webæ¡†æ¶</code></li><li>koa-body <code>è§£æ post è¯·æ±‚ï¼Œæ”¯æŒæ–‡ä»¶ä¸Šä¼ </code></li><li>koa-router <code>å¤„ç†è·¯ç”±(æ¥å£)ç›¸å…³</code></li><li>koa-static <code>å¤„ç†é™æ€æ–‡ä»¶</code></li><li>glob <code>æ‰¹é‡å¤„ç†æ–‡ä»¶</code></li><li>uuid <code>ç”Ÿæˆä¸é‡å¤çš„æ–‡ä»¶å</code></li><li>nodemon <code>ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼Œè‡ªåŠ¨é‡å¯é¡¹ç›®</code></li><li>archiver <code>å‹ç¼©æˆ zip æ–‡ä»¶</code></li></ul><blockquote><p>psï¼šnodemon æ˜¯ç”¨äºæˆ‘ä»¬è°ƒè¯•çš„ï¼Œæ‰€ä»¥ä»–æ˜¯å¼€å‘ä¾èµ–ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦<code>-D</code>ã€‚å…¶ä»–çš„éƒ½æ˜¯ä¸»è¦ä¾èµ–ï¼Œæ‰€ä»¥<code>-S</code></p></blockquote></li><li><p>é…ç½®ä¸€ä¸‹æˆ‘ä»¬çš„å¯åŠ¨å‘½ä»¤</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="string">"scripts"</span>: &#123;</span><br><span class="line">      <span class="string">"dev"</span>: <span class="string">"nodemon app.js"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></li></ul><h2 id="Koa-æ˜¯ä»€ä¹ˆ"><a href="#Koa-æ˜¯ä»€ä¹ˆ" class="headerlink" title="Koa æ˜¯ä»€ä¹ˆ"></a>Koa æ˜¯ä»€ä¹ˆ</h2><p>æ—¢ç„¶ç”¨åˆ°äº†<code>Koa</code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±äº†è§£ä¸€ä¸‹ä»–æ˜¯ä»€ä¹ˆï¼Ÿ</p><p><code>Koa</code> æ˜¯ç”± <code>Express</code> åŸç­äººé©¬æ‰“é€ çš„ï¼Œè‡´åŠ›äºæˆä¸ºä¸€ä¸ªæ›´å°ã€æ›´å¯Œæœ‰è¡¨ç°åŠ›ã€æ›´å¥å£®çš„ Web æ¡†æ¶ï¼Œé‡‡ç”¨äº† <code>async</code> å’Œ <code>await</code> çš„æ–¹å¼æ‰§è¡Œå¼‚æ­¥æ“ä½œã€‚ <code>Koa</code> å¹¶æ²¡æœ‰æ†ç»‘ä»»ä½•ä¸­é—´ä»¶ï¼Œ è€Œæ˜¯æä¾›äº†ä¸€å¥—ä¼˜é›…çš„æ–¹æ³•ï¼Œå¸®åŠ©æ‚¨å¿«é€Ÿè€Œæ„‰å¿«åœ°ç¼–å†™æœåŠ¡ç«¯åº”ç”¨ç¨‹åºã€‚ä¹Ÿæ­£æ˜¯å› ä¸ºæ²¡æœ‰æ†ç»‘ä»»ä½•ä¸­é—´ä»¶ï¼Œ<code>Koa</code> ä¿æŒç€ä¸€ä¸ªå¾ˆå°çš„ä½“ç§¯ã€‚</p><p>é€šä¿—ç‚¹æ¥è®²ï¼Œå°±æ˜¯å¸¸è¯´çš„åç«¯æ¡†æ¶ï¼Œå¤„ç†æˆ‘ä»¬å‰ç«¯å‘é€è¿‡å»çš„è¯·æ±‚ã€‚</p><h3 id="ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰"><a href="#ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰" class="headerlink" title="ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰"></a>ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰</h3><p><code>Koa Context</code> å°† <code>node</code> çš„ <code>request</code> å’Œ <code>response</code> å¯¹è±¡å°è£…åˆ°å•ä¸ªå¯¹è±¡ä¸­ï¼Œä¸ºç¼–å†™ Web åº”ç”¨ç¨‹åºå’Œ API æä¾›äº†è®¸å¤šæœ‰ç”¨çš„æ–¹æ³•ã€‚ è¿™äº›æ“ä½œåœ¨ <code>HTTP</code> æœåŠ¡å™¨å¼€å‘ä¸­é¢‘ç¹ä½¿ç”¨ï¼Œå®ƒä»¬è¢«æ·»åŠ åˆ°æ­¤çº§åˆ«è€Œä¸æ˜¯æ›´é«˜çº§åˆ«çš„æ¡†æ¶ï¼Œè¿™å°†å¼ºåˆ¶ä¸­é—´ä»¶é‡æ–°å®ç°æ­¤é€šç”¨åŠŸèƒ½ã€‚</p><p><code>Context</code>è¿™é‡Œæˆ‘ä»¬ä¸»è¦ç”¨åˆ°äº†<code>state</code>ã€<code>request</code>ã€<code>response</code>è¿™å‡ ä¸ªå¸¸ç”¨çš„å¯¹è±¡ï¼Œè¿™é‡Œæˆ‘å¤§æ¦‚è®²è®²ä»–ä»¬çš„ä½œç”¨ã€‚</p><ul><li>state <code>æ¨èçš„å‘½åç©ºé—´ï¼Œç”¨äºé€šè¿‡ä¸­é—´ä»¶ä¼ é€’ä¿¡æ¯å’Œä½ çš„å‰ç«¯è§†å›¾ã€‚</code></li><li>req <code>Node çš„ Request å¯¹è±¡.</code></li><li>request <code>Koa çš„ Request å¯¹è±¡.</code></li><li>res <code>Node çš„ Response å¯¹è±¡.</code></li><li>response <code>Koa çš„ Response å¯¹è±¡.</code></li></ul><h4 id="ctx-req-å’Œ-ctx-request-çš„åŒºåˆ«"><a href="#ctx-req-å’Œ-ctx-request-çš„åŒºåˆ«" class="headerlink" title="ctx.req å’Œ ctx.request çš„åŒºåˆ«"></a>ctx.req å’Œ ctx.request çš„åŒºåˆ«</h4><p>é€šå¸¸åˆšå­¦<code>Koa</code>çš„æ—¶å€™ï¼Œä¼°è®¡æœ‰ä¸å°‘äººå¼„æ··è¿™ä¸¤ä¸ªçš„åŒºåˆ«ï¼Œè¿™é‡Œå°±è¯´è¯´ä»–ä»¬ä¸¤æœ‰ä»€ä¹ˆåŒºåˆ«å§ã€‚</p><p>æœ€ä¸»è¦çš„åŒºåˆ«æ˜¯ï¼Œ<code>ctx.request</code> æ˜¯ <code>context</code> ç»è¿‡å°è£…çš„è¯·æ±‚å¯¹è±¡ï¼Œ<code>ctx.req</code> æ˜¯ <code>context</code> æä¾›çš„ <code>node.js</code> åŸç”Ÿ <code>HTTP</code> è¯·æ±‚å¯¹è±¡ï¼ŒåŒç† <code>ctx.response</code> æ˜¯ <code>context</code> ç»è¿‡å°è£…çš„å“åº”å¯¹è±¡ï¼Œ<code>ctx.res</code> æ˜¯ <code>context</code> æä¾›çš„ <code>node.js</code> åŸç”Ÿ <code>HTTP</code> å“åº”å¯¹è±¡ã€‚</p><p>æ‰€ä»¥ï¼Œé€šå¸¸æˆ‘ä»¬æ˜¯é€šè¿‡<code>ctx.request</code>è·å–è¯·æ±‚å‚æ•°ï¼Œé€šè¿‡<code>ctx.response</code>è®¾ç½®è¿”å›å€¼ï¼Œä¸è¦å¼„æ··äº†å“¦ (âŠ™oâŠ™)</p><h4 id="ctx-body-å’Œ-ctx-request-body-å‚»å‚»åˆ†ä¸æ¸…"><a href="#ctx-body-å’Œ-ctx-request-body-å‚»å‚»åˆ†ä¸æ¸…" class="headerlink" title="ctx.body å’Œ ctx.request.body å‚»å‚»åˆ†ä¸æ¸…"></a>ctx.body å’Œ ctx.request.body å‚»å‚»åˆ†ä¸æ¸…</h4><p>ä»¥ä¸ºé€šå¸¸<code>get</code>è¯·æ±‚æˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡<code>ctx.query(ctx.request.queryçš„åˆ«å)</code>å°±å¯ä»¥è·å¾—æäº¤è¿‡æ¥çš„æ•°æ®ï¼Œ<code>post</code>è¯·æ±‚çš„è¯è¿™æ˜¯é€šè¿‡<code>body</code>æ¥è·å–ï¼Œæ‰€ä»¥é€šå¸¸æˆ‘ä»¬ä¼šé€šè¿‡çŒœæƒ³ï¼Œä»¥ä¸º<code>ctx.body</code>ä¹Ÿæ˜¯<code>ctx.request.body</code>çš„åˆ«åï¼Œå…¶å®- -è¿™ä¸ªæ˜¯ä¸å¯¹çš„ã€‚å› ä¸ºæˆ‘ä»¬ä¸ä»…è¦æ¥å—æ•°æ®ï¼Œæœ€é‡è¦è¿˜è¦å“åº”æ•°æ®ç»™å‰ç«¯ï¼Œæ‰€ä»¥<code>ctx.body</code>æ˜¯<code>ctx.response.body</code>çš„åˆ«åã€‚è€Œ<code>ctx.request.body</code>ä¸ºäº†åŒºåˆ†ï¼Œæ˜¯æ²¡æœ‰è®¾ç½®åˆ«åçš„ï¼Œå³åªèƒ½é€šè¿‡<code>ctx.request.body</code>è·å–<code>post</code>æäº¤è¿‡æ¥çš„æ•°æ®ã€‚</p><blockquote><p>æ€»ç»“ï¼š<code>ctx.body</code>æ˜¯<code>ctx.response.body</code>çš„åˆ«åï¼Œè€Œ<code>ctx.request.body</code>æ˜¯<code>post</code>æäº¤è¿‡æ¥çš„æ•°æ®</p></blockquote><h3 id="Koa-ä¸­é—´ä»¶"><a href="#Koa-ä¸­é—´ä»¶" class="headerlink" title="Koa ä¸­é—´ä»¶"></a>Koa ä¸­é—´ä»¶</h3><p><code>Koa</code> çš„æœ€å¤§ç‰¹è‰²ï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€ä¸ªè®¾è®¡ï¼Œå°±æ˜¯<code>ä¸­é—´ä»¶ï¼ˆmiddlewareï¼‰</code>ã€‚<code>Koa</code> åº”ç”¨ç¨‹åºæ˜¯ä¸€ä¸ªåŒ…å«ä¸€ç»„ä¸­é—´ä»¶å‡½æ•°çš„å¯¹è±¡ï¼Œå®ƒæ˜¯æŒ‰ç…§ç±»ä¼¼å †æ ˆçš„æ–¹å¼ç»„ç»‡å’Œæ‰§è¡Œçš„ã€‚<code>Koa</code> ä¸­ä½¿ç”¨ <code>app.use()</code>ç”¨æ¥åŠ è½½ä¸­é—´ä»¶ï¼ŒåŸºæœ¬ä¸Š <code>Koa</code> æ‰€æœ‰çš„åŠŸèƒ½éƒ½æ˜¯é€šè¿‡ä¸­é—´ä»¶å®ç°çš„ã€‚æ¯ä¸ªä¸­é—´ä»¶é»˜è®¤æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>Context</code> å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ <code>next</code> å‡½æ•°ã€‚åªè¦è°ƒç”¨ <code>next</code> å‡½æ•°ï¼Œå°±å¯ä»¥æŠŠæ‰§è¡Œæƒè½¬äº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚</p><p>ä¸‹é¢ä¸¤å¼ å›¾å¾ˆæ¸…æ™°çš„è¡¨æ˜äº†ä¸€ä¸ªè¯·æ±‚æ˜¯å¦‚ä½•ç»è¿‡ä¸­é—´ä»¶æœ€åç”Ÿæˆå“åº”çš„ï¼Œè¿™ç§æ¨¡å¼ä¸­å¼€å‘å’Œä½¿ç”¨ä¸­é—´ä»¶éƒ½æ˜¯éå¸¸æ–¹ä¾¿çš„ï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-07-05/onion-model01.png" data-fancybox="group" data-caption="æ´‹è‘±æ¨¡å‹1" class="fancybox"><img alt="æ´‹è‘±æ¨¡å‹1" title="æ´‹è‘±æ¨¡å‹1" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-07-05/onion-model01.png" class="lazyload"></a></p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-07-05/onion-model02.png" data-fancybox="group" data-caption="æ´‹è‘±æ¨¡å‹2" class="fancybox"><img alt="æ´‹è‘±æ¨¡å‹2" title="æ´‹è‘±æ¨¡å‹2" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-07-05/onion-model02.png" class="lazyload"></a></p><p>å†æ¥çœ‹ä¸‹ <code>Koa</code> çš„æ´‹è‘±æ¨¡å‹å®ä¾‹ä»£ç ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">"koa"</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa();</span><br><span class="line">app.use(<span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">await</span> next();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">6</span>);</span><br><span class="line">&#125;);</span><br><span class="line">app.use(<span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">  <span class="keyword">await</span> next();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">5</span>);</span><br><span class="line">&#125;);</span><br><span class="line">app.use(<span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">  <span class="keyword">await</span> next();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">4</span>);</span><br><span class="line">&#125;);</span><br><span class="line">app.listen(<span class="number">8000</span>);</span><br></pre></td></tr></table></figure></div><p>æ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯æœ‰ä¸€ç‚¹ç‚¹æ„Ÿè§‰äº†ã€‚å½“ç¨‹åºè¿è¡Œåˆ° <code>await next()</code>çš„æ—¶å€™å°±ä¼šæš‚åœå½“å‰ç¨‹åºï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå¤„ç†å®Œä¹‹åæ‰ä¼šå›è¿‡å¤´æ¥ç»§ç»­å¤„ç†ã€‚</p><p>ç†è§£å®Œè¿™äº›åå°±å¯ä»¥å¼€å§‹å†™æˆ‘ä»¬çš„ä»£ç å•¦ï¼ï¼ï¼ (lll ï¿¢ Ï‰ ï¿¢)ï¼Œå¥½åƒå†™äº†å¥½å¤šå’Œè¿™æ¬¡æ•™ç¨‹ä¸»é¢˜æ²¡å…³çš„ä¸œè¥¿ï¼Œè§æ€ªè«æ€ªå•¦</p><h1 id="ç®€å•çš„æ­å»ºå‰ç«¯é¡¹ç›®"><a href="#ç®€å•çš„æ­å»ºå‰ç«¯é¡¹ç›®" class="headerlink" title="ç®€å•çš„æ­å»ºå‰ç«¯é¡¹ç›®"></a>ç®€å•çš„æ­å»ºå‰ç«¯é¡¹ç›®</h1><p>æ—¢ç„¶è¯´åˆ°äº†å†™ç•Œé¢ï¼Œè¿™é‡Œæˆ‘ä»¬æŠ€æœ¯æ ˆå°±é‡‡ç”¨<code>vue</code>å§ï¼Œç„¶å<code>UI</code>åº“çš„è¯ï¼Œå¤§å®¶éƒ½ç”¨æƒ¯äº†<code>ElementUI</code>ï¼Œæˆ‘æƒ³å¤§å®¶éƒ½ç‰¹åˆ«ç†Ÿæ‚‰äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå°±é‡‡ç”¨<code>Ant Design Vue</code>å§ï¼Œä¹Ÿæ–¹ä¾¿å¤§å®¶å¯¹<code>Antd</code>ç†Ÿæ‚‰ä¸€ä¸‹ï¼Œä¹Ÿæ²¡ä»€ä¹ˆåå¤„</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å°±ç®€å•çš„åˆ›å»ºä¸€ä¸‹æˆ‘ä»¬çš„é¡¹ç›®ï¼Œåœ¨æˆ‘ä»¬<code>batch-modify-filenames</code>æ–‡ä»¶å¤¹ä¸‹è¿è¡Œ<code>vue create batch-front-end</code>ï¼Œå¦‚å›¾æ‰€ç¤º:</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-07-05/batch-modify-filenames01.png" data-fancybox="group" data-caption="ç®€å•çš„ç¼–å†™ç•Œé¢" class="fancybox"><img alt="ç®€å•çš„ç¼–å†™ç•Œé¢" title="ç®€å•çš„ç¼–å†™ç•Œé¢" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-07-05/batch-modify-filenames01.png" class="lazyload"></a></p><p>åŸºæœ¬ä¸Šéƒ½æ˜¯æ— è„‘ä¸‹ä¸€æ­¥ï¼Œåªä¸è¿‡æ˜¯<code>ant-design-vue</code>ç”¨äº†<code>less</code>ï¼Œæˆ‘ä»¬ä¸ºäº†ç¬¦åˆå®ƒçš„å†™æ³•ï¼Œæˆ‘ä»¬é…ç½®ä¸Šä¹Ÿé‡‡ç”¨<code>less</code>ã€‚å½“ç„¶ï¼Œé‡‡ç”¨<code>sass</code>ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œæ²¡ä»€ä¹ˆå¼ºåˆ¶è¦æ±‚ã€‚</p><p>åˆ›å»ºå®Œé¡¹ç›®åå°±æ˜¯å®‰è£…ä¾èµ–äº†ï¼Œå› ä¸ºå…¶å®æˆ‘ä»¬ç”¨åˆ°çš„ç»„ä»¶ä¸å¤šï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨æŒ‰éœ€åŠ è½½ï¼Œå³éœ€è¦å®‰è£…<code>babel-plugin-import</code>ï¼Œè¿™é‡Œ<code>babel-plugin-import</code>ä¹Ÿæ˜¯å¼€å‘ä¾èµ–ï¼Œç”Ÿäº§ç¯å¢ƒæ˜¯ä¸éœ€è¦çš„ï¼Œæ‰€ä»¥å®‰è£…çš„æ—¶å€™éœ€è¦<code>-D</code></p><p>è¿™é‡Œæˆ‘ä»¬ç”¨åˆ°äº†ä¸€ä¸ªå¸¸ç”¨çš„<code>å·¥å…·åº“ï¼ˆç±»åº“ï¼‰â€”â€” lodash</code>ï¼Œæˆ‘ä»¬ä¸ä¸€å®šç”¨åˆ°ä»–æ‰€æœ‰çš„æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿéœ€è¦å®‰è£…ä¸ª<code>babel</code>æ’ä»¶è¿›è¡ŒæŒ‰éœ€åŠ è½½ï¼Œå³<code>babel-plugin-transform-imports</code>ï¼ŒåŒæ ·ä¹Ÿæ˜¯<code>-D</code></p><p>æœ€åï¼Œæ—¢ç„¶æ˜¯ä¸åç«¯åšäº¤äº’ï¼Œæˆ‘ä»¬è‚¯å®šéœ€è¦ç”¨åˆ°ä¸€ä¸ª<code>http</code>åº“å•¦ï¼Œæ—¢ç„¶å®˜æ–¹æ¨èæˆ‘ä»¬ç”¨<code>axios</code>ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä¹Ÿè¦æŠŠ<code>axios</code>è£…ä¸Šï¼Œä¸è¿‡<code>axios</code>ä¸æ˜¯<code>vue</code>çš„æ’ä»¶,æ‰€ä»¥ä¸èƒ½ç›´æ¥ç”¨<code>use</code>æ–¹æ³•ã€‚æ‰€ä»¥ï¼Œè¿™é‡Œæˆ‘ä¸ºäº†æ–¹ä¾¿ï¼Œä¹ŸæŠŠ<code>vue-axios</code>è£…ä¸Šäº†ã€‚åœ¨ä¹‹åï¼Œå› ä¸ºæˆ‘åˆä¸æƒ³æŠŠæœ€ç»ˆçš„<code>zip</code>æ–‡ä»¶ç•™åœ¨æœåŠ¡å™¨ä¸Šï¼Œæ¯•ç«Ÿä¼šå ç”¨ç©ºé—´ï¼Œæ‰€ä»¥æˆ‘ä»¥<strong>æµ(Stream)</strong>çš„æ–¹å¼è¿”å›ç»™å‰ç«¯ï¼Œè®©å‰ç«¯è‡ªå·±ä¸‹è½½ï¼Œé‚£ä¹ˆè¿™é‡Œæˆ‘å°±é‡‡ç”¨ä¸€ä¸ªæˆç†Ÿç¬¬ä¸‰æ–¹åº“å®ç°ï¼Œä¹Ÿå°±æ˜¯<code>file-saver</code>ï¼Œæ‰€ä»¥æœ€ç»ˆæˆ‘ä»¬çš„ä¾èµ–é¡¹å°±æ˜¯ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install ant-design-vue lodash axios vue-axios file-saver -S</span><br><span class="line">npm install babel-plugin-import babel-plugin-transform-imports -D</span><br></pre></td></tr></table></figure></div><p>é…ç½®<code>babel.config.js</code>:</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  presets: [<span class="string">"@vue/cli-plugin-babel/preset"</span>],</span><br><span class="line">  plugins: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">"import"</span>,</span><br><span class="line">      &#123; <span class="attr">libraryName</span>: <span class="string">"ant-design-vue"</span>, <span class="attr">libraryDirectory</span>: <span class="string">"es"</span>, <span class="attr">style</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    ], <span class="comment">// `style: true` ä¼šåŠ è½½ less æ–‡ä»¶,</span></span><br><span class="line">    [</span><br><span class="line">      <span class="string">"transform-imports"</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        lodash: &#123;</span><br><span class="line">          transform: <span class="string">"lodash/$&#123;member&#125;"</span>,</span><br><span class="line">          preventFullImport: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><p>å› ä¸ºæˆ‘ä»¬è¿™é‡Œæ”¹æˆäº†<code>style: true</code>ï¼ŒæŒ‰éœ€å¼•å…¥çš„æ—¶å€™å¤§æ¦‚ä¼šæŠ¥ä¸‹é¢çš„è¿™ä¸ªé”™è¯¯ï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-07-05/batch-modify-filenames02.png" data-fancybox="group" data-caption="æŒ‰éœ€åŠ è½½æŠ¥é”™" class="fancybox"><img alt="æŒ‰éœ€åŠ è½½æŠ¥é”™" title="æŒ‰éœ€åŠ è½½æŠ¥é”™" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-07-05/batch-modify-filenames02.png" class="lazyload"></a></p><p>è§£å†³æ–¹æ¡ˆè¿™é‡Œä¹Ÿè¯´çš„å¾ˆæ¸…æ¥šäº†ï¼Œåœ¨<a href="https://github.com/ant-design/ant-motion/issues/44" target="_blank" rel="noopener">https://github.com/ant-design/ant-motion/issues/44</a>è¿™ä¸ªé“¾æ¥ï¼Œä¹Ÿæœ‰è¯´æ˜<code>Inline JavaScript is not enabled. Is it set in your options?</code>ï¼Œå‘Šè¯‰æˆ‘ä»¬<code>less</code>æ²¡å¼€å¯<code>JavaScript</code>åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸‹ l<code>less-loader</code>çš„é…ç½®å³å¯</p><p>å› ä¸º<code>vue-cli4</code>çš„<code>webpack</code>ä¸åƒ<code>vue-cli2.x</code>ï¼Œä»–å¯¹å¤–å±è”½äº†<code>webpack</code>çš„ç»†èŠ‚ï¼Œå¦‚æœæƒ³ä¿®æ”¹å¿…é¡»åˆ›å»º<code>vue.config.js</code>æ¥ä¿®æ”¹é…ç½®ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code>vue.config.js</code>æ–‡ä»¶ï¼Œä¹¦å†™ä¸‹é¢é…ç½®ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  css: &#123;</span><br><span class="line">    loaderOptions: &#123;</span><br><span class="line">      less: &#123;</span><br><span class="line">        javascriptEnabled: <span class="literal">true</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><p>å…³æ‰æœåŠ¡ï¼Œå†é‡æ–°è·‘ä¸€ä¸‹<code>npm run serve</code>ï¼Œçœ‹æ˜¯ä¸æ˜¯æ²¡æœ‰æŠ¥é”™äº†ï¼Ÿè¿™æ ·å­æˆ‘å°±å¯ä»¥ä¹¦å†™æˆ‘ä»¬çš„ä»£ç äº†ã€‚</p><h2 id="ç¼–å†™å¸ƒå±€"><a href="#ç¼–å†™å¸ƒå±€" class="headerlink" title="ç¼–å†™å¸ƒå±€"></a>ç¼–å†™å¸ƒå±€</h2><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-07-05/batch-modify-filenames03.png" data-fancybox="group" data-caption="æ‰¹å¤„ç†ç•Œé¢" class="fancybox"><img alt="æ‰¹å¤„ç†ç•Œé¢" title="æ‰¹å¤„ç†ç•Œé¢" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-07-05/batch-modify-filenames03.png" class="lazyload"></a></p><p>ç•Œé¢å¤§æ¦‚é•¿è¿™æ ·å­ï¼Œæˆ‘æƒ³å¤§å®¶å†™ç•Œé¢åº”è¯¥æ¯”æˆ‘å‰å®³å¤šäº†ï¼Œéƒ½æ˜¯ç›´æ¥å¥—ç”¨<code>Antd</code>çš„ç»„ä»¶ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä¸»è¦åˆ†ææˆ‘ä»¬æ€ä¹ˆæ‹†åˆ†è¿™ä¸ªé¡µé¢çš„ç»„ä»¶æ¯”è¾ƒå¥½ï¼Œæ€ä¹ˆå®šä¹‰æˆ‘ä»¬çš„æ•°æ®æ¯”è¾ƒå¥½~~</p><p>ä»è¿™ä¸ªå›¾æˆ‘ä»¬å¯ä»¥çœ‹å‡º<strong>æ–°æ–‡ä»¶åˆ—è¡¨</strong>æ˜¯åŸºäº<strong>åŸæ–‡ä»¶åˆ—è¡¨+å„ç§è®¾ç½®</strong>å¾—å‡ºæ¥çš„ï¼Œæ‰€ä»¥<strong>æ–°æ–‡ä»¶åˆ—è¡¨</strong>æˆ‘ä»¬å°±å¯ä»¥é‡‡ç”¨<code>è®¡ç®—å±æ€§(computed)</code>æ¥å®ç°å•¦ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±æ˜¯æ‹†åˆ†æˆ‘ä»¬é¡µé¢çš„æ—¶å€™å•¦ã€‚ã€‚ã€‚</p><blockquote><p>psï¼šè¿™é‡Œæˆ‘ä¸ä¼šè¯¦ç»†è®²æ€ä¹ˆå†™ç•Œé¢ï¼Œåªä¼šæŠŠæˆ‘è§‰å¾—å¯¹å¼€å‘æœ‰ç”¨çš„è®²å‡ºæ¥ï¼Œä¸ç„¶æ–‡ç« å°±å¤ªå¤šå†—é•¿äº†ã€‚è™½ç„¶ç°åœ¨ä¹Ÿååˆ†å†—é•¿äº†ï¼ˆï¼›Â´Ğ´ ï½€ï¼‰ã‚</p></blockquote><h3 id="æ‹†åˆ†é¡µé¢"><a href="#æ‹†åˆ†é¡µé¢" class="headerlink" title="æ‹†åˆ†é¡µé¢"></a>æ‹†åˆ†é¡µé¢</h3><p>å…¶å®ä»é¡µé¢çš„åˆ†å‰²çº¿æˆ‘ä»¬å¤§æ¦‚å°±å¯ä»¥çœ‹å‡ºï¼Œä»–æ˜¯åˆ†æˆ 3 ä¸ªå¤§çš„å­ç»„ä»¶äº†ï¼Œè¿˜æœ‰<strong>æ–‡ä»¶åˆ—è¡¨</strong>å¯ä»¥å•ç‹¬åˆ’åˆ†ä¸ºå­™å­ç»„ä»¶ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šå¦‚å›¾æ‰€ç¤ºï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-07-05/batch-modify-filenames04.png" data-fancybox="group" data-caption="æ‹†åˆ†é¡µé¢" class="fancybox"><img alt="æ‹†åˆ†é¡µé¢" title="æ‹†åˆ†é¡µé¢" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-07-05/batch-modify-filenames04.png" class="lazyload"></a></p><p>ä»£ç ç»“æ„å¦‚å›¾ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">|-- batch-front-end</span><br><span class="line">    â”œâ”€.browserslistrc</span><br><span class="line">    â”œâ”€.eslintrc.js</span><br><span class="line">    â”œâ”€.gitignore</span><br><span class="line">    â”œâ”€babel.config.js</span><br><span class="line">    â”œâ”€package-lock.json</span><br><span class="line">    â”œâ”€package.json</span><br><span class="line">    â”œâ”€README.md</span><br><span class="line">    â”œâ”€vue.config.js</span><br><span class="line">    â”œâ”€src</span><br><span class="line">    |  â”œâ”€App.vue</span><br><span class="line">    |  â”œâ”€main.js</span><br><span class="line">    |  â”œâ”€utils</span><br><span class="line">    |  |   â”œâ”€helpers.js</span><br><span class="line">    |  |   â”œâ”€index.js</span><br><span class="line">    |  |   â””regexp.js</span><br><span class="line">    |  â”œâ”€components</span><br><span class="line">    |  |     â”œâ”€ModifyFilename2.vue</span><br><span class="line">    |  |     â”œâ”€ModifyFilename</span><br><span class="line">    |  |     |       â”œâ”€FileList.vue</span><br><span class="line">    |  |     |       â”œâ”€FileListItem.vue</span><br><span class="line">    |  |     |       â”œâ”€FileOutput.vue</span><br><span class="line">    |  |     |       â”œâ”€FileSetting.vue</span><br><span class="line">    |  |     |       â””index.vue</span><br><span class="line">    |  â”œâ”€assets</span><br><span class="line">    |  |   â””logo.png</span><br><span class="line">    â”œâ”€public</span><br><span class="line">    |   â”œâ”€favicon.ico</span><br><span class="line">    |   â””index.html</span><br></pre></td></tr></table></figure></div><p>çœ‹åˆ°è¿™é‡Œï¼ŒåŸºæœ¬çŸ¥é“æˆ‘æ˜¯æ€ä¹ˆæ‹†åˆ†çš„å§ï¼Ÿæ²¡é”™ï¼Œä¸€å…±ç”¨äº†å››ä¸ªç»„ä»¶åˆ†åˆ«æ˜¯<code>FileSetting(æ–‡ä»¶åè®¾ç½®)</code>ã€<code>FileOutput(è¾“å‡ºè®¾ç½®)</code>ã€<code>FileList(è¾“å‡ºç»“æœ)</code>å’Œ<code>FileListItem(åˆ—è¡¨ç»„ä»¶)</code>è¿™ä¹ˆå››å¤§å—</p><p>å½“ç„¶çŸ¥é“æ€ä¹ˆæ‹†åˆ†äº†è¿˜è¿œè¿œä¸å¤Ÿçš„ï¼Œè™½ç„¶ç°åœ¨æˆ‘ä»¬åªæœ‰ 4 ä¸ªç»„ä»¶ï¼Œæ‰€ä»¥å†™èµ·æ¥é—®é¢˜ä¸æ˜¯é‚£ä¹ˆçš„å¤§ï¼Œä½†æ˜¯å‘¢ã€‚ã€‚ã€‚å†™èµ·é¡µé¢æ¥å…¶å®ä¹Ÿæ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œä¸€èˆ¬æ­£å¸¸çš„å†™æ³•æ˜¯ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">divider</span> <span class="attr">orientation</span>=<span class="string">"left"</span>&gt;</span>æ–‡ä»¶åè®¾ç½®<span class="tag">&lt;/<span class="name">divider</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">FileSetting</span> <span class="attr">:fileSettings</span>=<span class="string">"fileSettings"</span> <span class="attr">:diyForm</span>=<span class="string">"diyForm"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">divider</span> <span class="attr">orientation</span>=<span class="string">"left"</span>&gt;</span>è¾“å‡ºè®¾ç½®<span class="tag">&lt;/<span class="name">divider</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">FileOutput</span> <span class="attr">:ext</span>=<span class="string">"ext"</span> <span class="attr">:enable</span>=<span class="string">"enable"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">divider</span> <span class="attr">orientation</span>=<span class="string">"left"</span>&gt;</span>è¾“å‡ºç»“æœ<span class="tag">&lt;/<span class="name">divider</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">FileList</span> <span class="attr">:oldFiles</span>=<span class="string">"oldFiles"</span> <span class="attr">:newFiles</span>=<span class="string">"newFiles"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123; Divider &#125; <span class="keyword">from</span> <span class="string">"ant-design-vue"</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> FileList <span class="keyword">from</span> <span class="string">"./FileList"</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> FileOutput <span class="keyword">from</span> <span class="string">"./FileOutput"</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> FileSetting <span class="keyword">from</span> <span class="string">"./FileSetting"</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">    name: <span class="string">"ModifyFilename"</span>,</span></span><br><span class="line">    components: &#123;</span><br><span class="line">      Divider,</span><br><span class="line">      FileList,</span><br><span class="line">      FileOutput,</span><br><span class="line">      FileSetting,</span><br><span class="line">    &#125;,</span><br><span class="line">    computed: &#123;</span><br><span class="line"><span class="actionscript">      <span class="comment">// æ–°æ–‡ä»¶åˆ—è¡¨</span></span></span><br><span class="line">      newFiles() &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> <span class="keyword">this</span>.oldFiles;</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// å­˜æ”¾è¿™æ–‡ä»¶åè®¾ç½®çš„æ•°æ®</span></span></span><br><span class="line">        fileSettings: &#123;&#125;,</span><br><span class="line"><span class="actionscript">        <span class="comment">// å­˜æ”¾è‡ªå®šä¹‰åºå·æ•°ç»„</span></span></span><br><span class="line">        diyForm: &#123;&#125;,</span><br><span class="line"><span class="actionscript">        <span class="comment">// å¯ç”¨è¾“å‡ºè®¾ç½®</span></span></span><br><span class="line"><span class="actionscript">        enable: <span class="literal">false</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// è¾“å‡ºè®¾ç½®åç¼€å</span></span></span><br><span class="line">        ext: [],</span><br><span class="line"><span class="actionscript">        <span class="comment">// åŸæ–‡ä»¶åˆ—è¡¨</span></span></span><br><span class="line">        oldFiles: [],</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"less"</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.content</span> &#123;</span></span><br><span class="line">    width: 1366px;</span><br><span class="line">    box-sizing: border-box;</span><br><span class="line">    padding: 0 15px;</span><br><span class="line">    margin: 0 auto;</span><br><span class="line">    overflow-x: hidden;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></div><h3 id="æ€è€ƒä¸€ä¸‹"><a href="#æ€è€ƒä¸€ä¸‹" class="headerlink" title="æ€è€ƒä¸€ä¸‹"></a>æ€è€ƒä¸€ä¸‹</h3><p>ä½†æ˜¯æœ‰æ²¡æœ‰å‘ç°ï¼Œæˆ‘ä»¬å†™äº†ä¸‰ä¸ª<code>divider</code>ç»„ä»¶ï¼Œè¦ç»‘å®šçš„æ•°æ®ä¹Ÿæ˜¯ç›¸å½“ä¹‹å¤šï¼Œè™½ç„¶æˆ‘éƒ½æ•´åˆåœ¨<code>fileSettings</code>äº†ã€‚å¦‚æœæˆ‘ä»¬è¦å•ç‹¬æ‹¿å‡ºæ¥çš„è¯ï¼Œå²‚ä¸æ˜¯è¦ç´¯æ­»ä¸ªäººï¼Ÿæ‰€ä»¥æˆ‘ä»¬æ€è€ƒä¸€ä¸‹ï¼Œæ€ä¹ˆå¯ä»¥æ›´åŠ æ–¹ä¾¿çš„ä¹¦å†™æˆ‘ä»¬çš„è¿™ä¸ªé¡µé¢ã€‚æ‰€ä»¥æˆ‘å¼•ç”³å‡ºäº†ä¸‹é¢ä¸‰ä¸ªé—®é¢˜ï¼š</p><ol><li><p>æœ‰æ²¡æœ‰åŠæ³•å¯ä»¥ç”¨ä¸€ä¸ªç»„ä»¶æ¥æ ‡è¯†æˆ‘ä»¬å¯¼å…¥çš„å¦å¤–ä¸‰ä¸ªå­ç»„ä»¶å‘¢ï¼Ÿ</p></li><li><p>æœ‰æ²¡æœ‰åŠæ³•ä¸€æ¬¡æ€§ç»‘å®šæˆ‘ä»¬è¦çš„æ•°æ®ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªä¸ªçš„ç»‘å®šå‘¢ï¼Ÿ</p></li><li><p>ä¸€æ¬¡æ€§ç»‘å®šä¹‹åï¼Œç»„ä»¶é—´æ€ä¹ˆé€šä¿¡å‘¢ï¼ˆå› ä¸ºè¿™é‡Œæ¶µç›–äº†å­å­™ç»„ä»¶ï¼‰ï¼Ÿ</p></li></ol><p>é’ˆå¯¹äºè¿™ä¸‰ä¸ªé—®é¢˜ï¼Œæˆ‘åˆ†åˆ«ä½¿ç”¨äº†<code>åŠ¨æ€ç»„ä»¶</code>ã€<code>v-bind</code>å’Œ<code>provide</code>å®ç°çš„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±è®²è®²æ€ä¹ˆå®ç°å®ƒï¼Œå…ˆä¸Šä»£ç ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">"item in components"</span> <span class="attr">:key</span>=<span class="string">"item.name"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">divider</span> <span class="attr">orientation</span>=<span class="string">"left"</span>&gt;</span>&#123;&#123; item.label &#125;&#125;<span class="tag">&lt;/<span class="name">divider</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">component</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:is</span>=<span class="string">"item.name"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-bind</span>=<span class="string">"&#123; ...getProps(item.props) &#125;"</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">update</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">          (key, val) =&gt; &#123;</span></span></span><br><span class="line"><span class="tag"><span class="string">            update(item.props, key, val);</span></span></span><br><span class="line"><span class="tag"><span class="string">          &#125;</span></span></span><br><span class="line"><span class="tag"><span class="string">        "</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> getNewFileList <span class="keyword">from</span> <span class="string">"@/utils/"</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123; Divider &#125; <span class="keyword">from</span> <span class="string">"ant-design-vue"</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> FileList <span class="keyword">from</span> <span class="string">"./FileList"</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> FileOutput <span class="keyword">from</span> <span class="string">"./FileOutput"</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> FileSetting <span class="keyword">from</span> <span class="string">"./FileSetting"</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">    name: <span class="string">"ModifyFilename"</span>,</span></span><br><span class="line">    components: &#123;</span><br><span class="line">      Divider,</span><br><span class="line">      FileList,</span><br><span class="line">      FileOutput,</span><br><span class="line">      FileSetting,</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="actionscript">    <span class="comment">// ä¼ é€’ç»™æ·±å±‚çº§å­ç»„ä»¶</span></span></span><br><span class="line">    provide() &#123;</span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">        parent: <span class="keyword">this</span>,</span></span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line">        components: [</span><br><span class="line">          &#123;</span><br><span class="line"><span class="actionscript">            label: <span class="string">"æ–‡ä»¶åè®¾ç½®"</span>,</span></span><br><span class="line"><span class="actionscript">            name: <span class="string">"FileSetting"</span>,</span></span><br><span class="line"><span class="actionscript">            props: <span class="string">"fileSettingsProps"</span>,</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line"><span class="actionscript">            label: <span class="string">"è¾“å‡ºè®¾ç½®"</span>,</span></span><br><span class="line"><span class="actionscript">            name: <span class="string">"FileOutput"</span>,</span></span><br><span class="line"><span class="actionscript">            props: <span class="string">"fileOutputProps"</span>,</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line"><span class="actionscript">            label: <span class="string">"è¾“å‡ºç»“æœ"</span>,</span></span><br><span class="line"><span class="actionscript">            name: <span class="string">"FileList"</span>,</span></span><br><span class="line"><span class="actionscript">            props: <span class="string">"fileListProps"</span>,</span></span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">        fileSettingsProps: &#123;</span><br><span class="line">          fileSettings: &#123;</span><br><span class="line">            filename: &#123;</span><br><span class="line"><span class="actionscript">              value: <span class="string">""</span>,</span></span><br><span class="line">              span: 6,</span><br><span class="line"><span class="actionscript">              type: <span class="string">"file"</span>,</span></span><br><span class="line"><span class="actionscript">              placeholder: <span class="string">"è¯·è¾“å…¥æ–°çš„æ–‡ä»¶å"</span>,</span></span><br><span class="line">            &#125;,</span><br><span class="line">            serialNum: &#123;</span><br><span class="line"><span class="actionscript">              value: <span class="string">""</span>,</span></span><br><span class="line">              span: 6,</span><br><span class="line"><span class="actionscript">              type: <span class="string">"sort-descending"</span>,</span></span><br><span class="line"><span class="actionscript">              placeholder: <span class="string">"èµ·å§‹åºå·(é»˜è®¤æ”¯æŒçº¯æ•°å­—æˆ–çº¯å­—æ¯)"</span>,</span></span><br><span class="line">            &#125;,</span><br><span class="line">            increment: &#123;</span><br><span class="line">              value: 1,</span><br><span class="line">              span: 2,</span><br><span class="line"><span class="actionscript">              placeholder: <span class="string">"å¢é‡"</span>,</span></span><br><span class="line"><span class="actionscript">              isNum: <span class="literal">true</span>,</span></span><br><span class="line">            &#125;,</span><br><span class="line">            preReplaceWord: &#123;</span><br><span class="line"><span class="actionscript">              value: <span class="string">""</span>,</span></span><br><span class="line">              span: 3,</span><br><span class="line"><span class="actionscript">              type: <span class="string">"file"</span>,</span></span><br><span class="line"><span class="actionscript">              placeholder: <span class="string">"æ›¿æ¢å‰çš„å­—ç¬¦"</span>,</span></span><br><span class="line">            &#125;,</span><br><span class="line">            replaceWord: &#123;</span><br><span class="line"><span class="actionscript">              value: <span class="string">""</span>,</span></span><br><span class="line">              span: 3,</span><br><span class="line"><span class="actionscript">              type: <span class="string">"file"</span>,</span></span><br><span class="line"><span class="actionscript">              placeholder: <span class="string">"æ›¿æ¢åçš„å­—ç¬¦"</span>,</span></span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          diyForm: &#123;</span><br><span class="line"><span class="actionscript">            diySerial: <span class="string">""</span>,</span></span><br><span class="line"><span class="actionscript">            separator: <span class="string">""</span>,</span></span><br><span class="line"><span class="actionscript">            diyEnable: <span class="literal">false</span>,</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        fileOutputProps: &#123;</span><br><span class="line"><span class="actionscript">          enable: <span class="literal">false</span>,</span></span><br><span class="line"><span class="actionscript">          ext: [<span class="string">""</span>, <span class="string">""</span>],</span></span><br><span class="line">        &#125;,</span><br><span class="line">        oldFiles: [],</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    computed: &#123;</span><br><span class="line">      newFiles() &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> &#123; fileSettings, diyForm &#125; = <span class="keyword">this</span>.fileSettingsProps;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> &#123; ext, enable &#125; = <span class="keyword">this</span>.fileOutputProps;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> &#123; diySerial, separator, diyEnable &#125; = diyForm;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> getNewFileList(</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">this</span>.oldFiles,</span></span><br><span class="line">          fileSettings,</span><br><span class="line">          ext,</span><br><span class="line">          enable,</span><br><span class="line"><span class="actionscript">          <span class="keyword">this</span>.getRange(diySerial, separator, diyEnable)</span></span><br><span class="line">        );</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    watch: &#123;</span><br><span class="line"><span class="actionscript">      <span class="string">"fileSettingsProps.diyForm.diySerial"</span>(val) &#123;</span></span><br><span class="line">        if (!val) &#123;</span><br><span class="line"><span class="actionscript">          <span class="keyword">this</span>.fileSettingsProps.diyForm.diyEnable = !<span class="number">1</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      getRange(diySerial, separator, enable) &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">if</span> (!enable) <span class="keyword">return</span> <span class="literal">null</span>;</span></span><br><span class="line"><span class="actionscript">        !separator ? (separator = <span class="string">","</span>) : <span class="literal">null</span>;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> diySerial.split(separator);</span></span><br><span class="line">      &#125;,</span><br><span class="line">      getProps(key) &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">if</span> (key === <span class="string">"fileListProps"</span>) &#123;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">            oldFiles: <span class="keyword">this</span>.oldFiles,</span></span><br><span class="line"><span class="actionscript">            newFiles: <span class="keyword">this</span>.newFiles,</span></span><br><span class="line">          &#125;;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> <span class="keyword">this</span>[key] || &#123;&#125;;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      update(props, key, val) &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">if</span> (props === <span class="string">"fileListProps"</span>) &#123;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">return</span> (<span class="keyword">this</span>[key] = val);</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>[props][key] = val;</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"less"</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.content</span> &#123;</span></span><br><span class="line">    width: 1366px;</span><br><span class="line">    box-sizing: border-box;</span><br><span class="line">    padding: 0 15px;</span><br><span class="line">    margin: 0 auto;</span><br><span class="line">    overflow-x: hidden;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>ä»£ç é‡Œï¼Œæˆ‘é€šè¿‡<code>component</code>çš„<code>is</code>æ¥æ ‡è¯†æˆ‘ä»¬å¯¼å…¥çš„ç»„ä»¶ï¼Œè¿™æ ·å°±è§£å†³äº†æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªé—®é¢˜ã€‚ç¬¬äºŒä¸ªé—®é¢˜ï¼Œä»<a href="https://cn.vuejs.org/v2/api/#v-bind" target="_blank" rel="noopener">æ–‡æ¡£</a>å¯çŸ¥ï¼Œ<code>v-bind</code>æ˜¯å¯ä»¥ç»‘å®šå¤šä¸ªå±æ€§å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥é€šè¿‡<code>v-bind</code>å°±å¯ä»¥å®ç°äº†ã€‚<br>ã€‘<br>ä½†æ˜¯ï¼Œè§£å†³ç¬¬äºŒä¸ªé—®é¢˜åï¼Œå°±å¼•å‘äº†ç¬¬ä¸‰ä¸ªé—®é¢˜ï¼Œå› ä¸ºé€šå¸¸æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>.sync</code>ä¿®é¥°ç¬¦æ¥è¿›è¡Œ<code>props</code>çš„åŒå‘ç»‘å®šï¼Œä½†æ˜¯<a href="https://cn.vuejs.org/v2/guide/components-custom-events.html#sync-%E4%BF%AE%E9%A5%B0%E7%AC%A6" target="_blank" rel="noopener">æ–‡æ¡£</a>æœ‰è¯´ï¼Œåœ¨è§£æä¸€ä¸ªå¤æ‚è¡¨è¾¾å¼æ—¶æ˜¯æ— æ³•æ­£å¸¸å·¥ä½œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•é€šè¿‡<code>this.$emit(&#39;update:props&#39;,newVal)</code>æ›´æ–°æˆ‘ä»¬çš„å€¼ã€‚</p><p>æ‰€ä»¥è¿™é‡Œæˆ‘è‡ªå®šä¹‰äº†ä¸€ä¸ª<code>update</code>æ–¹æ³•ï¼Œé€šè¿‡<code>props</code>çš„æ–¹å¼ä¼ é€’ç»™å­ç»„ä»¶ï¼Œé€šè¿‡å­ç»„ä»¶è§¦å‘çˆ¶ç»„ä»¶çš„æ–¹æ³•å®ç°çŠ¶æ€çš„æ›´æ–°ã€‚å½“ç„¶ï¼Œä¹Ÿé€šè¿‡<code>provide</code>æŠŠè‡ªèº«ä¼ é€’ä¸‹å»å…±å­ç»„ä»¶ä½¿ç”¨ï¼Œè¿™é‡Œæä¾›<code>FileListItem(åˆ—è¡¨ç»„ä»¶)</code>çš„ä»£ç ä¾›å¤§å®¶å‚è€ƒï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a-list</span> <span class="attr">bordered</span> <span class="attr">:dataSource</span>=<span class="string">"fileList"</span> <span class="attr">:pagination</span>=<span class="string">"pagination"</span> <span class="attr">ref</span>=<span class="string">"list"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"header"</span> <span class="attr">class</span>=<span class="string">"list-header"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">strong</span>&gt;</span></span><br><span class="line">        &#123;&#123; filename &#125;&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a-button</span> <span class="attr">type</span>=<span class="string">"danger"</span> <span class="attr">size</span>=<span class="string">"small"</span> @<span class="attr">click</span>=<span class="string">"clearFiles"</span>&gt;</span></span><br><span class="line">        æ¸…ç©º</span><br><span class="line">      <span class="tag">&lt;/<span class="name">a-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a-list-item</span> <span class="attr">slot</span>=<span class="string">"renderItem"</span> <span class="attr">slot-scope</span>=<span class="string">"item, index"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a-list-item-meta</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a-tooltip</span> <span class="attr">slot</span>=<span class="string">"title"</span> <span class="attr">:overlayStyle</span>=<span class="string">"&#123; maxWidth: '500px' &#125;"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">            &#123;&#123; item.name &#125;&#125;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">          &#123;&#123; item.name &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">a-tooltip</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">a-list-item-meta</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a-button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ghost</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">"danger"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">size</span>=<span class="string">"small"</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">click</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">          () =&gt; &#123;</span></span></span><br><span class="line"><span class="tag"><span class="string">            delCurrent(index);</span></span></span><br><span class="line"><span class="tag"><span class="string">          &#125;</span></span></span><br><span class="line"><span class="tag"><span class="string">        "</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        åˆ é™¤</span><br><span class="line">      <span class="tag">&lt;/<span class="name">a-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">a-list-item</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">a-list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123; List, Button, Tooltip &#125; <span class="keyword">from</span> <span class="string">"ant-design-vue"</span>;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> &#123; Item &#125; = List;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">    name: <span class="string">"FileListItem"</span>,</span></span><br><span class="line">    props: &#123;</span><br><span class="line">      fileList: &#123;</span><br><span class="line"><span class="javascript">        type: <span class="built_in">Array</span>,</span></span><br><span class="line"><span class="actionscript">        required: <span class="literal">true</span>,</span></span><br><span class="line">      &#125;,</span><br><span class="line">      filename: &#123;</span><br><span class="line"><span class="javascript">        type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="actionscript">        required: <span class="literal">true</span>,</span></span><br><span class="line">      &#125;,</span><br><span class="line">      pagination: &#123;</span><br><span class="line"><span class="javascript">        type: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="javascript">        <span class="keyword">default</span>: <span class="function"><span class="params">()</span> =&gt;</span> (&#123;</span></span><br><span class="line">          pageSize: 10,</span><br><span class="line"><span class="actionscript">          showQuickJumper: <span class="literal">true</span>,</span></span><br><span class="line"><span class="actionscript">          hideOnSinglePage: <span class="literal">true</span>,</span></span><br><span class="line">        &#125;),</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="actionscript">    inject: [<span class="string">"parent"</span>],</span></span><br><span class="line">    components: &#123;</span><br><span class="line"><span class="actionscript">      <span class="string">"a-list"</span>: List,</span></span><br><span class="line"><span class="actionscript">      <span class="string">"a-list-item"</span>: Item,</span></span><br><span class="line"><span class="actionscript">      <span class="string">"a-list-item-meta"</span>: Item.Meta,</span></span><br><span class="line"><span class="actionscript">      <span class="string">"a-button"</span>: Button,</span></span><br><span class="line"><span class="actionscript">      <span class="string">"a-tooltip"</span>: Tooltip,</span></span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      delCurrent(current) &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.parent.oldFiles.splice(current, <span class="number">1</span>);</span></span><br><span class="line">      &#125;,</span><br><span class="line">      clearFiles() &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.parent.update(<span class="string">"fileListProps"</span>, <span class="string">"oldFiles"</span>, []);</span></span><br><span class="line">      &#125;,</span><br><span class="line">      drop(e) &#123;</span><br><span class="line">        e.preventDefault();</span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.parent.update(<span class="string">"fileListProps"</span>, <span class="string">"oldFiles"</span>, [</span></span><br><span class="line">          ...this.parent.oldFiles,</span><br><span class="line">          ...e.dataTransfer.files,</span><br><span class="line">        ]);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> $el = <span class="keyword">this</span>.$refs.list.$el;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.$el = $el;</span></span><br><span class="line">      if ($el) &#123;</span><br><span class="line"><span class="javascript">        $el.ondragenter = $el.ondragover = $el.ondragleave = <span class="function"><span class="params">()</span> =&gt;</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="actionscript">        $el.addEventListener(<span class="string">"drop"</span>, <span class="keyword">this</span>.drop, <span class="literal">false</span>);</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    destroyed() &#123;</span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.$el &amp;&amp; <span class="keyword">this</span>.$el.removeEventListener(<span class="string">"drop"</span>, <span class="keyword">this</span>.drop, <span class="literal">false</span>);</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"less"</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.list-header</span> &#123;</span></span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: space-between;</span><br><span class="line">    align-items: center;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>è¿™é‡Œæˆ‘ä»¬çœ‹åˆ°ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨<strong>çˆ¶ç»„ä»¶</strong>èº«ä¸Šçš„æ–¹æ³•æ¥è¿›è¡Œæ•°æ®çš„æ›´æ–°ï¼ˆå½“ç„¶è¿™é‡Œä¹Ÿå¯ä»¥ç”¨<code>splice</code>æ›´æ–°æ•°æ®ï¼‰ï¼Œè¿™æ ·ä¹Ÿå°±è§£å†³äº†æˆ‘ä»¬ä¹‹å‰çš„ä¸‰ä¸ªé—®é¢˜å•¦ã€‚</p><blockquote><p><code>react</code>ï¼Œ<code>react</code>å¯æ˜¯å¾ˆå¸¸ç”¨æ‰©å±•è¿ç®—ç¬¦ä¼ å±æ€§çš„å“¦ï¼Œè™½ç„¶æ˜¯<code>jsx</code>éƒ½å¯ä»¥ ğŸ˜ ä½†æ˜¯æˆ‘ä»¬é€šè¿‡<code>v-bind</code>ä¹Ÿå¯ä»¥ç»‘å®šå¤æ‚å±æ€§ï¼ŒçŸ¥è¯†ç‚¹å“¦(â—â€™â—¡â€™â—)</p></blockquote><h4 id="Antd-çš„å‘"><a href="#Antd-çš„å‘" class="headerlink" title="Antd çš„å‘"></a>Antd çš„å‘</h4><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-07-05/batch-modify-filenames05.png" data-fancybox="group" data-caption="è‡ªå®šä¹‰åºå·" class="fancybox"><img alt="è‡ªå®šä¹‰åºå·" title="è‡ªå®šä¹‰åºå·" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-07-05/batch-modify-filenames05.png" class="lazyload"></a></p><p>å› ä¸ºæˆ‘è‡ªå®šä¹‰åºå·é‡‡ç”¨çš„äº‹å¼¹çª—ï¼Œåˆå› ä¸ºæˆ‘ä»¬é‡‡ç”¨çš„æ˜¯æŒ‰éœ€åŠ è½½ï¼Œåœ¨<code>ant-design-vue@1.6.2</code>ç‰ˆæœ¬ä¸­ä¼šæŠ¥<strong>Failed to resolve directive: ant-portal</strong>æ— æ³•è§£ææŒ‡ä»¤çš„é”™è¯¯ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨<code>main.js</code>ä¸­å…¨å±€æ³¨å†Œä»–ï¼Œç„¶åå› ä¸ºæˆ‘ä»¬è¯·æ±‚å¯èƒ½ä¼šç”¨<code>message</code>ï¼Œæ‰€ä»¥æˆ‘é¡ºä¾¿ä¹ŸæŠŠ<code>message</code>æ”¾åˆ°<code>vue</code>çš„åŸå‹é“¾ä¸Šäº†ï¼Œå³ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">"vue"</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">"./App.vue"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Message, Modal &#125; <span class="keyword">from</span> <span class="string">"ant-design-vue"</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">"axios"</span>;</span><br><span class="line"><span class="keyword">import</span> VueAxios <span class="keyword">from</span> <span class="string">"vue-axios"</span>;</span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span>;</span><br><span class="line">Vue.use(VueAxios, axios);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Failed to resolve directive: ant-portal</span></span><br><span class="line"><span class="comment">// https://github.com/vueComponent/ant-design-vue/issues/2261</span></span><br><span class="line">Vue.use(Modal);</span><br><span class="line">Vue.prototype.$message = Message;</span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  render: <span class="function">(<span class="params">h</span>) =&gt;</span> h(App),</span><br><span class="line">&#125;).$mount(<span class="string">"#app"</span>);</span><br></pre></td></tr></table></figure></div><p>è¿™æ ·å­å°±å¯ä»¥æ„‰å¿«çš„ä½¿ç”¨æˆ‘ä»¬çš„<code>Modal</code>äº†ï¼Œç„¶ååˆ°äº†ç»„ä»¶é€‰å‹ä¸Šäº†ï¼Œä¸€å¼€å§‹æˆ‘é€‰çš„ç»„ä»¶æ—¶<code>Form</code>ç»„ä»¶ï¼Œä½†æ˜¯å†™ç€å†™ç€å‘ç°æˆ‘ä»¬æœ‰ä¸ª<code>è‡ªå®šä¹‰åºå·</code>å’Œ<code>æ˜¯å¦å¯ç”¨è‡ªå®šä¹‰</code>ç›¸å…³è”ï¼Œè€Œä¸”<code>Form</code>ç»„ä»¶å¦‚æœæ˜¯å¿…é€‰çš„è¯ï¼Œåªèƒ½é€šè¿‡<code>v-decorator</code>æŒ‡ä»¤çš„<code>rules</code>å®ç°ç»‘å®šæ•°æ®å’Œå¿…é€‰ï¼Œä¸èƒ½é€šè¿‡<code>v-model</code>è¿›è¡Œæ•°æ®çš„åŒå‘ç»‘å®š(ä¸èƒ½å·æ‡’)ã€‚</p><p>å› ä¸ºæˆ‘ä»¬çš„<code>ant-design-vue</code>ç‰ˆæœ¬å·²ç»æ˜¯<code>1.5.0+</code>ï¼Œè€Œ<code>FormModel</code>ç»„ä»¶ä¹Ÿæ”¯æŒæ”¯æŒ<code>v-model</code>æ£€éªŒï¼Œé‚£ä¹ˆå°±æ›´ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚å•¦ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œæ”¹äº†ä¸‹æˆ‘çš„ä»£ç ï¼Œä½¿ç”¨<code>FormModel</code>ç»„ä»¶å®ç°æˆ‘ä»¬çš„éœ€æ±‚äº†ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a-modal</span></span></span><br><span class="line"><span class="tag">    <span class="attr">title</span>=<span class="string">"è‡ªå®šä¹‰åºå·"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:visible</span>=<span class="string">"serialNumVisible"</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">cancel</span>=<span class="string">"serialNumVisible = !1"</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">ok</span>=<span class="string">"handleDiySerialNum"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a-form-model</span></span></span><br><span class="line"><span class="tag">      <span class="attr">ref</span>=<span class="string">"diyForm"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:model</span>=<span class="string">"diyForm"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:rules</span>=<span class="string">"rules"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">labelAlign</span>=<span class="string">"left"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:label-col</span>=<span class="string">"&#123; span: 6 &#125;"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:wrapper-col</span>=<span class="string">"&#123; span: 18 &#125;"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a-form-model-item</span> <span class="attr">label</span>=<span class="string">"è‡ªå®šä¹‰åºå·"</span> <span class="attr">prop</span>=<span class="string">"diySerial"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a-input</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-model</span>=<span class="string">"diyForm.diySerial"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥è‡ªå®šä¹‰åºå·"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">aria-placeholder</span>=<span class="string">"è¯·è¾“å…¥è‡ªå®šä¹‰åºå·"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">a-form-model-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a-form-model-item</span> <span class="attr">label</span>=<span class="string">"è‡ªå®šä¹‰åˆ†éš”ç¬¦"</span> <span class="attr">prop</span>=<span class="string">"separator"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a-input</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-model</span>=<span class="string">"diyForm.separator"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥è‡ªå®šä¹‰åºå·åˆ†éš”ç¬¦(é»˜è®¤,)"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">aria-placeholder</span>=<span class="string">"è¯·è¾“å…¥è‡ªå®šä¹‰åºå·åˆ†éš”ç¬¦"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">a-form-model-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a-form-model-item</span> <span class="attr">label</span>=<span class="string">"æ˜¯å¦å¯ç”¨è‡ªå®šä¹‰"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a-switch</span> <span class="attr">v-model</span>=<span class="string">"diyForm.diyEnable"</span> <span class="attr">:disabled</span>=<span class="string">"disabled"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">a-form-model-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">a-form-model</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">a-modal</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure></div><blockquote><p>psï¼šæœç„¶ï¼Œæ‡’äººè¿˜æ˜¯æ¨åŠ¨æŠ€æœ¯è¿›æ­¥çš„æœ€ä¸»è¦çš„åŠ¨åŠ›å•Š ğŸ˜‚</p></blockquote><h4 id="post-è¯·æ±‚ä¸‹è½½æ–‡ä»¶"><a href="#post-è¯·æ±‚ä¸‹è½½æ–‡ä»¶" class="headerlink" title="post è¯·æ±‚ä¸‹è½½æ–‡ä»¶"></a>post è¯·æ±‚ä¸‹è½½æ–‡ä»¶</h4><p>å› ä¸ºæˆ‘ä¹‹å‰è¯´è¿‡ï¼Œæˆ‘ä»¬åç«¯ä¸æƒ³ä¿ç•™è¿”å›çš„<code>zip</code>æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬æ˜¯ä»¥<code>æµ(Stream)</code>ä¼ é€’ç»™å‰ç«¯çš„ï¼Œé‚£æˆ‘ä»¬æ€ä¹ˆå®ç°åœ¨ä¸ªåŠŸèƒ½å‘¢ï¼Ÿ</p><p>å…¶å®ï¼Œè¿˜æ˜¯æŒºç®€å•çš„ã€‚ä¸»è¦æ˜¯åç«¯è®¾ç½®ä¸¤ä¸ªè¯·æ±‚å¤´ï¼Œåˆ†åˆ«æ˜¯<code>Content-Type</code>å’Œ<code>Content-Disposition</code>ï¼Œä¸€ä¸ªå‘Šè¯‰æµè§ˆå™¨æ˜¯ä»€ä¹ˆç±»å‹ï¼Œä¸€ä¸ªæ˜¯å‘Šè¯‰è¦ä»¥é™„ä»¶çš„å½¢å¼ä¸‹è½½ï¼Œå¹¶æŒ‡æ˜é»˜è®¤æ–‡ä»¶åã€‚</p><p><code>Content-Type</code>æˆ‘æƒ³å¤§å®¶éƒ½å¾ˆå¸¸è§äº†å§ï¼Œè€Œä¸”ä¹Ÿä¸ç”¨æˆ‘ä»¬å¤„ç†äº†ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬è®²è®²æ€ä¹ˆå¤„ç†<code>Content-Disposition</code>ï¼Œå³è·å–é»˜è®¤çš„æ–‡ä»¶åï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-07-05/batch-modify-filenames06.png" data-fancybox="group" data-caption="Content-Dispositionå“åº”å¤´" class="fancybox"><img alt="Content-Dispositionå“åº”å¤´" title="Content-Dispositionå“åº”å¤´" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-07-05/batch-modify-filenames06.png" class="lazyload"></a></p><p>ä»å›¾å¯ä»¥çœ‹å‡ºï¼Œå“åº”å¤´ä¿¡æ¯ä¸º<code>content-disposition: attachment; filename=&quot;files.zip&quot;</code>ã€‚çœ‹åˆ°è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬ç¬¬ä¸€çœ¼å¯èƒ½ä¼šæƒ³åˆ°é€šè¿‡<code>split</code>æ–¹æ³•åˆ†å‰²<code>=</code>ç„¶åä¸‹æ ‡å–<code>1</code>å°±å¯ä»¥è·å–æ–‡ä»¶åäº†ã€‚ä½†æ˜¯å‘ç°äº†å—ï¼Ÿæˆ‘ä»¬è·å–çš„æ–‡ä»¶åæ˜¯<code>&quot;files.zip&quot;</code>ï¼Œä¸æˆ‘ä»¬æƒ³è¦çš„ç»“æœä¸åŒï¼Œè™½ç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ‡å‰²æ¥å®ç°è·å–åˆ°<code>files.zip</code>ï¼Œä½†æ˜¯å‡è®¾æœ‰ä¸€å¤©æœåŠ¡å™¨è¿”å›çš„ä¸å¸¦<code>&quot;</code>å°±ä¸é€šç”¨äº†ã€‚</p><p>é‚£æ€ä¹ˆåŠå‘¢ï¼Ÿæ²¡é”™å•¦ï¼Œå°±æ˜¯é€šè¿‡æ­£åˆ™å¹¶æ­é…å­—ç¬¦ä¸²çš„<code>replace</code>æ–¹æ³•æ¥è·å–å•¦~~å½“ç„¶ï¼Œæ­£åˆ™ä¸æ˜¯æœ¬ç¯‡çš„é‡ç‚¹ï¼Œæ‰€ä»¥å°±ä¸è®²æ­£åˆ™æ€ä¹ˆå†™äº†ï¼Œæ¥ä¸‹æ¥ä¹¦å†™æˆ‘ä»¬çš„æ–¹æ³•ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–content-dispositionå“åº”å¤´çš„é»˜è®¤æ–‡ä»¶å</span></span><br><span class="line"><span class="keyword">const</span> getFileName = <span class="function">(<span class="params">str</span>) =&gt;</span> str.replace(<span class="regexp">/^.*filename="?([^"]+)"?.*$/</span>, <span class="string">"$1"</span>);</span><br><span class="line"><span class="keyword">const</span> str = <span class="string">`content-disposition: attachment; filename=files.zip`</span>;</span><br><span class="line"><span class="keyword">const</span> doubleStr = <span class="string">`content-disposition: attachment; filename="files.zip"`</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(getFileName(str)); <span class="comment">// files.zip</span></span><br><span class="line"><span class="built_in">console</span>.log(getFileName(doubleStr)); <span class="comment">// files.zip</span></span><br></pre></td></tr></table></figure></div><p>çœ‹è¾“å‡ºçš„æ˜¯ä¸æ˜¯å’Œé¢„æœŸçš„ä¸€æ ·ï¼Ÿå¦‚æœä¸€æ ·ï¼Œè¿™é‡Œå°±å®ç°äº†æˆ‘ä»¬çš„è·å–ç”¨æˆ·åçš„æ–¹æ³•äº†ï¼Œä¸»è¦ç”¨åˆ°çš„å°±æ˜¯<code>æ­£åˆ™</code>å’Œ<code>replace</code>çš„ç‰¹æ®Šå˜é‡å</p><blockquote><p>psï¼šä¸çŸ¥é“<code>repalce</code>çš„<strong>æåŸºï¼ˆé«˜çº§ï¼‰</strong>ç”¨æ³•çš„è¯·çœ‹<a href="https://gatings.cn/2019-01-09/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%96%B9%E6%B3%95%E7%9A%84%E6%80%BB%E7%BB%93%E5%92%8C%E4%BD%BF%E7%94%A8/#newSubStr-%E7%9A%84%E7%89%B9%E6%AE%8A%E5%8F%98%E9%87%8F%E5%90%8D">è¯·ç‚¹å‡»æˆ‘</a>ï¼Œè¿™é‡Œå°±ä¸é˜è¿°å•¦</p></blockquote><p>å½“ç„¶ï¼Œå†™åˆ°è¿™é‡Œå…¶å®å¦‚æœæ˜¯<code>get</code>è¯·æ±‚ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šé»˜è®¤å°±ä¸‹è½½æ–‡ä»¶äº†ï¼Œæˆ‘ä»¬ä¹Ÿä¸ç”¨è·å–æ–‡ä»¶åã€‚ä½†æ˜¯æˆ‘ä»¬æ˜¯<code>post</code>è¯·æ±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¤„ç†è¿™ä¸€ç³»åˆ—çš„ä¸œè¥¿ï¼Œå¹¶ä¸”æœŸå¾…<code>responseType</code>æ˜¯<code>blob</code>ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å†™ä¸€ä¸‹å‰ç«¯æ€ä¹ˆè¯·æ±‚åç«¯å¹¶ä¸‹è½½æ–‡ä»¶çš„ã€‚</p><p>æ—¢ç„¶è¦å†™å‰ç«¯ä»£ç ï¼Œé‚£ä¹ˆå°±è¦å…ˆå’Œåç«¯çº¦å®šæ¥å£æ˜¯ä»€ä¹ˆï¼Œè¿™é‡Œå› ä¸ºåç«¯ä¹Ÿæ˜¯è‡ªå·±å†™çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æš‚ä¸”æŠŠæ¥å£å®šä¹‰ä¸º<code>http://localhost:3000/upload</code>ï¼Œåˆå› ä¸ºæˆ‘ä»¬è¿™é‡Œ<code>vue</code>çš„ç«¯å£åœ¨<code>8080</code>ï¼Œè‚¯å®šä¼šå’Œæˆ‘ä»¬çš„åç«¯è·¨åŸŸï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨<code>vue.config.js</code>ï¼Œé…ç½®ä¸€ä¸‹æˆ‘ä»¬çš„ä»£ç†ï¼Œå³ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// é™æ€èµ„æºå¯¼å…¥çš„è·¯å¾„</span></span><br><span class="line">  publicPath: <span class="string">"./"</span>,</span><br><span class="line">  <span class="comment">// è¾“å‡ºç›®å½•ï¼Œå› ä¸ºè¿™é‡Œæˆ‘ä»¬Nodeè®¾ç½®æœ¬ä¸Šçº§publicä¸ºé™æ€æœåŠ¡</span></span><br><span class="line">  <span class="comment">// å®é™…è®¾ç½®æˆkoa-staticè®¾ç½®batch-front-end/distä¸ºé™æ€ç›®å½•çš„è¯å°±ä¸è¦ä¿®æ”¹äº†</span></span><br><span class="line">  <span class="comment">// å…·ä½“çœ‹è‡ªå·±å˜é€š</span></span><br><span class="line">  outputDir: <span class="string">"../public"</span>,</span><br><span class="line">  <span class="comment">// ç”Ÿäº§ç¯å¢ƒä¸‹ä¸è¾“å‡º.mapæ–‡ä»¶</span></span><br><span class="line">  productionSourceMap: <span class="literal">false</span>,</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    <span class="comment">// è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">    open: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// é…ç½®ä»£ç†</span></span><br><span class="line">    proxy: &#123;</span><br><span class="line">      <span class="string">"/upload"</span>: &#123;</span><br><span class="line">        target: <span class="string">"http://localhost:3000"</span>,</span><br><span class="line">        <span class="comment">// å‘é€è¯·æ±‚å¤´ä¸­hostä¼šè®¾ç½®æˆtarget</span></span><br><span class="line">        changeOrigin: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// è·¯å¾„é‡å†™</span></span><br><span class="line">        pathRewrite: &#123;</span><br><span class="line">          <span class="string">"^/upload"</span>: <span class="string">"/upload"</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  css: &#123;</span><br><span class="line">    loaderOptions: &#123;</span><br><span class="line">      less: &#123;</span><br><span class="line">        javascriptEnabled: <span class="literal">true</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><p>è¿™æ ·å­æˆ‘ä»¬å°±å¯ä»¥è·¨åŸŸè¯·æ±‚æˆ‘ä»¬çš„æ¥å£å•¦ï¼Œæ—¢ç„¶è¯´åˆ°äº†ä¸‹è½½æ–‡ä»¶ï¼Œæˆ‘ä»¬å°±ç®€å•çœ‹ä¸‹<code>file-saver</code>æ˜¯æ€ä¹ˆä½¿ç”¨çš„ï¼Œä»<a href="https://www.npmjs.com/package/file-saver" target="_blank" rel="noopener">å®˜æ–¹å®ä¾‹</a>æ¥çœ‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; saveAs &#125; <span class="keyword">from</span> <span class="string">"file-saver"</span>;</span><br><span class="line"><span class="keyword">const</span> blob = <span class="keyword">new</span> Blob([<span class="string">"Hello, world!"</span>], &#123; <span class="attr">type</span>: <span class="string">"text/plain;charset=utf-8"</span> &#125;);</span><br><span class="line">saveAs(blob, <span class="string">"hello world.txt"</span>);</span><br></pre></td></tr></table></figure></div><p>ä»ç¤ºä¾‹æ¥çœ‹ï¼Œå®ƒå¯ä»¥ç›´æ¥ä¿å­˜<code>blob</code>ï¼Œå¹¶æŒ‡å®šæ–‡ä»¶åä¸º<code>hello world.txt</code>ï¼ŒçŸ¥é“è¿™ä¸ªä¹‹åæˆ‘ä»¬å°±å¯ä»¥ä¹¦å†™æˆ‘ä»¬çš„ä»£ç å•¦ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; saveAs &#125; <span class="keyword">from</span> <span class="string">"file-saver"</span>;</span><br><span class="line"><span class="keyword">this</span>.axios(&#123;</span><br><span class="line">  method: <span class="string">"post"</span>,</span><br><span class="line">  url: <span class="string">"/upload"</span>,</span><br><span class="line">  data,</span><br><span class="line">  <span class="comment">// é‡è¦ï¼Œå‘Šè¯‰æµè§ˆå™¨å“åº”çš„ç±»å‹ä¸ºblob</span></span><br><span class="line">  responseType: <span class="string">"blob"</span>,</span><br><span class="line">&#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> disposition = res.headers[<span class="string">"content-disposition"</span>];</span><br><span class="line">    <span class="comment">// è½¬æ¢ä¸ºBlobå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">let</span> file = <span class="keyword">new</span> Blob([res.data], &#123;</span><br><span class="line">      type: <span class="string">"application/zip"</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// ä¸‹è½½æ–‡ä»¶</span></span><br><span class="line">    saveAs(file, getFileName(disposition));</span><br><span class="line">    <span class="keyword">this</span>.$message.success(<span class="string">"ä¿®æ”¹æˆåŠŸ"</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.$message.error(<span class="string">"å‘ç”Ÿé”™è¯¯"</span>);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></div><p>åŸºæœ¬ä¸Šï¼Œè¿™æ ·å°±å¯ä»¥å®ç°ä¸‹è½½æ–‡ä»¶å•¦ï¼Œä¸‹é¢æ˜¯<code>FileSetting.vue</code>æºç ï¼Œä»…ä¾›å‚è€ƒï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a-row</span> <span class="attr">type</span>=<span class="string">"flex"</span> <span class="attr">:gutter</span>=<span class="string">"16"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a-col</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:key</span>=<span class="string">"key"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:span</span>=<span class="string">"setting.span"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-for</span>=<span class="string">"(setting, key) in fileSettings"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">"setting.isNum"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a-input-number</span></span></span><br><span class="line"><span class="tag">          <span class="attr">style</span>=<span class="string">"width:100%"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:placeholder</span>=<span class="string">"setting.placeholder"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:min</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-model</span>=<span class="string">"setting.value"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a-input</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:placeholder</span>=<span class="string">"setting.placeholder"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-model</span>=<span class="string">"setting.value"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">allowClear</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a-icon</span></span></span><br><span class="line"><span class="tag">            <span class="attr">slot</span>=<span class="string">"prefix"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:type</span>=<span class="string">"setting.type"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">style</span>=<span class="string">"color:rgba(0,0,0,.25)"</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">a-input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">a-col</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a-col</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a-button</span> @<span class="attr">click</span>=<span class="string">"serialNumVisible = !0"</span>&gt;</span></span><br><span class="line">        è‡ªå®šä¹‰åºå·</span><br><span class="line">      <span class="tag">&lt;/<span class="name">a-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">a-col</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a-col</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> @<span class="attr">click</span>=<span class="string">"handleModify"</span>&gt;</span></span><br><span class="line">        ç¡®å®šä¿®æ”¹</span><br><span class="line">      <span class="tag">&lt;/<span class="name">a-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">a-col</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">a-modal</span></span></span><br><span class="line"><span class="tag">      <span class="attr">title</span>=<span class="string">"è‡ªå®šä¹‰åºå·"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:visible</span>=<span class="string">"serialNumVisible"</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">cancel</span>=<span class="string">"serialNumVisible = !1"</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">ok</span>=<span class="string">"handleDiySerialNum"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a-form-model</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ref</span>=<span class="string">"diyForm"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:model</span>=<span class="string">"diyForm"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:rules</span>=<span class="string">"rules"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">labelAlign</span>=<span class="string">"left"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:label-col</span>=<span class="string">"&#123; span: 6 &#125;"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:wrapper-col</span>=<span class="string">"&#123; span: 18 &#125;"</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a-form-model-item</span> <span class="attr">label</span>=<span class="string">"è‡ªå®šä¹‰åºå·"</span> <span class="attr">prop</span>=<span class="string">"diySerial"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a-input</span></span></span><br><span class="line"><span class="tag">            <span class="attr">v-model</span>=<span class="string">"diyForm.diySerial"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥è‡ªå®šä¹‰åºå·"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">aria-placeholder</span>=<span class="string">"è¯·è¾“å…¥è‡ªå®šä¹‰åºå·"</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">a-form-model-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a-form-model-item</span> <span class="attr">label</span>=<span class="string">"è‡ªå®šä¹‰åˆ†éš”ç¬¦"</span> <span class="attr">prop</span>=<span class="string">"separator"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a-input</span></span></span><br><span class="line"><span class="tag">            <span class="attr">v-model</span>=<span class="string">"diyForm.separator"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥è‡ªå®šä¹‰åºå·åˆ†éš”ç¬¦(é»˜è®¤,)"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">aria-placeholder</span>=<span class="string">"è¯·è¾“å…¥è‡ªå®šä¹‰åºå·åˆ†éš”ç¬¦"</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">a-form-model-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a-form-model-item</span> <span class="attr">label</span>=<span class="string">"æ˜¯å¦å¯ç”¨è‡ªå®šä¹‰"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a-switch</span> <span class="attr">v-model</span>=<span class="string">"diyForm.diyEnable"</span> <span class="attr">:disabled</span>=<span class="string">"disabled"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">a-form-model-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">a-form-model</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">a-modal</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">a-row</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">  <span class="meta"><span class="meta-keyword">import</span> &#123;</span></span></span><br><span class="line"><span class="actionscript">    Row <span class="keyword">as</span> ARow,</span></span><br><span class="line"><span class="actionscript">    Col <span class="keyword">as</span> ACol,</span></span><br><span class="line"><span class="actionscript">    Icon <span class="keyword">as</span> AIcon,</span></span><br><span class="line"><span class="actionscript">    Input <span class="keyword">as</span> AInput,</span></span><br><span class="line"><span class="actionscript">    Switch <span class="keyword">as</span> ASwitch,</span></span><br><span class="line"><span class="actionscript">    Button <span class="keyword">as</span> AButton,</span></span><br><span class="line"><span class="actionscript">    InputNumber <span class="keyword">as</span> AInputNumber,</span></span><br><span class="line"><span class="actionscript">    FormModel <span class="keyword">as</span> AFormModel,</span></span><br><span class="line"><span class="javascript">  &#125; <span class="keyword">from</span> <span class="string">"ant-design-vue"</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123; saveAs &#125; <span class="keyword">from</span> <span class="string">"file-saver"</span>;</span></span><br><span class="line"><span class="actionscript">  <span class="comment">// æ˜¯å¦ç¬¦åˆé»˜è®¤åºå·è§„èŒƒ</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123; isDefaultSerialNum &#125; <span class="keyword">from</span> <span class="string">"@/utils/regexp"</span>;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> AFormModelItem = AFormModel.Item;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">  <span class="comment">// è·å–content-dispositionå“åº”å¤´çš„é»˜è®¤æ–‡ä»¶å</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> getFileName = <span class="function">(<span class="params">str</span>) =&gt;</span> str.replace(<span class="regexp">/^.*filename="?([^"]+)"?.*$/</span>, <span class="string">"$1"</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">    name: <span class="string">"FileSetting"</span>,</span></span><br><span class="line">    props: &#123;</span><br><span class="line">      fileSettings: &#123;</span><br><span class="line"><span class="javascript">        type: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="actionscript">        required: <span class="literal">true</span>,</span></span><br><span class="line">      &#125;,</span><br><span class="line">      diyForm: &#123;</span><br><span class="line"><span class="javascript">        type: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="actionscript">        required: <span class="literal">true</span>,</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    components: &#123;</span><br><span class="line">      ARow,</span><br><span class="line">      ACol,</span><br><span class="line">      AIcon,</span><br><span class="line">      AInput,</span><br><span class="line">      ASwitch,</span><br><span class="line">      AButton,</span><br><span class="line">      AInputNumber,</span><br><span class="line">      AFormModel,</span><br><span class="line">      AFormModelItem,</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="actionscript">    inject: [<span class="string">"parent"</span>],</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// æ²¡æœ‰è‡ªå®šä¹‰åºå·æ—¶ä¸å¯æ“ä½œ</span></span></span><br><span class="line">    computed: &#123;</span><br><span class="line">      disabled() &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> !<span class="keyword">this</span>.diyForm.diySerial;</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line">        serialNumVisible: !1,</span><br><span class="line">        rules: &#123;</span><br><span class="line">          diySerial: [</span><br><span class="line">            &#123;</span><br><span class="line"><span class="actionscript">              required: <span class="literal">true</span>,</span></span><br><span class="line"><span class="actionscript">              message: <span class="string">"è¯·è¾“å…¥è‡ªå®šä¹‰åºå·"</span>,</span></span><br><span class="line"><span class="actionscript">              trigger: <span class="string">"blur"</span>,</span></span><br><span class="line">            &#125;,</span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      handleModify() &#123;</span><br><span class="line"><span class="actionscript">        <span class="comment">// è·å–å¡«å†™çš„åºå·</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> serialNum = <span class="keyword">this</span>.fileSettings.serialNum.value;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// å½“æ²¡æœ‰å¯ç”¨è‡ªå®šä¹‰æ—¶ï¼Œèµ°é»˜è®¤è§„åˆ™</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">if</span> (isDefaultSerialNum(serialNum) &amp;&amp; !<span class="keyword">this</span>.diyForm.enable) &#123;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">return</span> <span class="keyword">this</span>.$message.error(<span class="string">"è¯·è¾“å…¥æ­£ç¡®çš„åºå·ï¼Œæ ¼å¼ä¸ºçº¯æ•°å­—æˆ–çº¯å­—æ¯"</span>);</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> &#123; newFiles, oldFiles &#125; = <span class="keyword">this</span>.parent;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> data = <span class="keyword">new</span> FormData();</span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; oldFiles.length; i++) &#123;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">const</span> &#123; name &#125; = newFiles[i];</span></span><br><span class="line"><span class="actionscript">          data.append(<span class="string">"files"</span>, oldFiles[i]);</span></span><br><span class="line"><span class="actionscript">          data.append(<span class="string">"name"</span>, name);</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.axios(&#123;</span></span><br><span class="line"><span class="actionscript">          method: <span class="string">"post"</span>,</span></span><br><span class="line"><span class="actionscript">          url: <span class="string">"/upload"</span>,</span></span><br><span class="line">          data,</span><br><span class="line"><span class="actionscript">          responseType: <span class="string">"blob"</span>,</span></span><br><span class="line">        &#125;)</span><br><span class="line"><span class="javascript">          .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">const</span> disposition = res.headers[<span class="string">"content-disposition"</span>];</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// è½¬æ¢ä¸ºBlobå¯¹è±¡</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> file = <span class="keyword">new</span> Blob([res.data], &#123;</span></span><br><span class="line"><span class="actionscript">              type: <span class="string">"application/zip"</span>,</span></span><br><span class="line">            &#125;);</span><br><span class="line"><span class="actionscript">            <span class="comment">// ä¸‹è½½æ–‡ä»¶</span></span></span><br><span class="line">            saveAs(file, getFileName(disposition));</span><br><span class="line"><span class="actionscript">            <span class="keyword">this</span>.$message.success(<span class="string">"ä¿®æ”¹æˆåŠŸ"</span>);</span></span><br><span class="line">          &#125;)</span><br><span class="line"><span class="javascript">          .catch(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">this</span>.$message.error(<span class="string">"å‘ç”Ÿé”™è¯¯"</span>);</span></span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">      handleDiySerialNum() &#123;</span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.$refs.diyForm.validate(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span></span><br><span class="line">          if (!valid) &#123;</span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line">          &#125;</span><br><span class="line"><span class="actionscript">          <span class="keyword">this</span>.serialNumVisible = !<span class="number">1</span>;</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>è‡³æ­¤ï¼Œå’Œåç«¯äº¤äº’çš„é€»è¾‘åŸºæœ¬ä¸Šå·²ç»å†™å®Œäº†ï¼Œä½†æ˜¯- -æˆ‘ä»¬å¥½åƒè¿˜æ²¡æœ‰å†™å‰ç«¯é¡µé¢çš„å®é™…é€»è¾‘ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±å¼€å§‹å†™å‰ç«¯é€»è¾‘å•¦ï¼Œå¯èƒ½æ¯”è¾ƒå•°å—¦- -So SorryğŸ˜¥</p><blockquote><p>psï¼šwebpack æ˜¯å¼€å‘è§£å†³è·¨åŸŸé—®é¢˜ï¼Œçº¿ä¸Šè¯¥è·¨åŸŸè¿˜æ˜¯è¦è·¨åŸŸï¼Œæœ€å¥½çš„æ–¹æ³•æ˜¯<code>cors</code>æˆ–è€…<code>proxy</code>ï¼Œå†ä¸ç„¶å°±æ˜¯æ”¾åœ¨<code>node</code>çš„é™æ€æœåŠ¡é‡Œã€‚</p></blockquote><h2 id="ä¹¦å†™å‰ç«¯é€»è¾‘"><a href="#ä¹¦å†™å‰ç«¯é€»è¾‘" class="headerlink" title="ä¹¦å†™å‰ç«¯é€»è¾‘"></a>ä¹¦å†™å‰ç«¯é€»è¾‘</h2><p>ä»ä¹‹å‰çš„å›¾æ¥çœ‹ï¼Œå¾ˆæ˜¾ç„¶æˆ‘ä»¬çš„é€»è¾‘å°±æ˜¯å¤„ç†<code>æ–°æ–‡ä»¶åˆ—è¡¨</code>è¿™ä¸ªæ•°æ®ï¼Œè€Œè¿™ä¸ªæ•°æ®åˆ™æ˜¯æ ¹æ®é¡µé¢å…¶ä»–ç»„ä»¶çš„å€¼æ¥å®ç°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹‹å‰ç”¨äº†<strong>è®¡ç®—å±æ€§</strong>æ¥å®ç°ï¼Œä½†æ˜¯æˆ‘ä»¬é€»è¾‘å´è¿˜æ²¡å†™ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥å°±æ˜¯å¤„ç†è¿™ä¸ªæœ€é‡è¦çš„é€»è¾‘å•¦ã€‚</p><p>ä¸è¿‡å¥½åƒå†™å¥½äº†ç•Œé¢ï¼Œå´è¿˜æ²¡æœ‰è¯´ï¼Œæˆ‘æƒ³å®ç°ä»€ä¹ˆä¸œè¥¿ï¼Œæ‰€ä»¥ç®€å•çš„è¯´ä¸€ä¸‹æˆ‘ä»¬ç•Œé¢çš„äº¤äº’ï¼Œæˆ‘ä»¬å†å¼€å§‹å†™é€»è¾‘å§ã€‚</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-07-05/batch-modify-filenames07.png" data-fancybox="group" data-caption="å‰ç«¯äº¤äº’" class="fancybox"><img alt="å‰ç«¯äº¤äº’" title="å‰ç«¯äº¤äº’" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-07-05/batch-modify-filenames07.png" class="lazyload"></a></p><p>é€šè¿‡å›¾ç‰‡ï¼Œæˆ‘ä»¬å¤§æ¦‚å¯ä»¥çŸ¥é“æœ‰è¿™äº›æ“ä½œï¼š</p><ol><li><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è¾“å…¥æ–‡ä»¶åï¼Œæ‰¹é‡ä¿®æ”¹æ‰€æœ‰çš„æ–‡ä»¶å</p></li><li><p>é€šè¿‡åºå·ï¼Œè®©æ–‡ä»¶ååé¢æ·»åŠ åç¼€ï¼Œé»˜è®¤æ”¯æŒçº¯æ•°å­—å’Œçº¯å­—æ¯ï¼Œå³è¾“å…¥<code>test1+001</code>åˆ™è¾“å‡º<code>test1001</code></p></li><li><p>é€šè¿‡å¢é‡ï¼Œæˆ‘ä»¬å¯ä»¥è®©æ–‡ä»¶çš„åç¼€åŠ ä¸Šå¢é‡çš„å€¼ï¼Œå³åŠ è®¾å¢é‡ä¸º 2ï¼Œè¿™é‡Œçš„ä¸‹ä¸€ä¸ªå°±æ˜¯<code>test1+00(1+2)</code>ï¼Œä¸º<code>test1003</code></p></li><li><p>é€šè¿‡è¾“å…¥<code>éœ€è¦æ›¿æ¢çš„å­—ç¬¦-test</code>å’Œ<code>æ›¿æ¢çš„å­—ç¬¦-æµ‹è¯•</code>ï¼ŒæŠŠæ‰€æœ‰æ–‡ä»¶çš„åç§°ä¿®æ”¹æ›¿æ¢ä¸º<code>æµ‹è¯•1+001</code>ï¼Œå³<code>æµ‹è¯•1001</code></p></li><li><p>é€šè¿‡è¾“å…¥<code>éœ€è¦ä¿®æ”¹çš„åç¼€å-png</code>å’Œ<code>æ›¿æ¢çš„å­—ç¬¦-txt</code>å¹¶æ‰“å¼€ä¿®æ”¹å¼€å…³ï¼ŒæŠŠæ‰€æœ‰ç¬¦åˆ<code>png</code>åç¼€åçš„éƒ½ä¿®æ”¹ä¸º<code>txt</code>ï¼Œå› ä¸ºè¿™é‡Œåªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥ä¿®æ”¹ä¸º<code>æµ‹è¯•1001.txt</code>ï¼Œå³<code>test1001.png-&gt;æµ‹è¯•1001.png-&gt;æµ‹è¯•1001.txt</code></p></li></ol><p>è€Œå¯ç”¨è‡ªå®šä¹‰åºå·ä¹‹åï¼Œè¿˜æœ‰åç»­æ“ä½œï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-07-05/batch-modify-filenames07.png" data-fancybox="group" data-caption="å¯ç”¨è‡ªå®šä¹‰åºå·" class="fancybox"><img alt="å¯ç”¨è‡ªå®šä¹‰åºå·" title="å¯ç”¨è‡ªå®šä¹‰åºå·" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-07-05/batch-modify-filenames07.png" class="lazyload"></a></p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-07-05/batch-modify-filenames07.png" data-fancybox="group" data-caption="å‰ç«¯äº¤äº’" class="fancybox"><img alt="å‰ç«¯äº¤äº’" title="å‰ç«¯äº¤äº’" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-07-05/batch-modify-filenames07.png" class="lazyload"></a></p><ol start="6"><li><p>è¾“å…¥<code>g,a,t,i,n,g</code>è¿™ä¸ªè‡ªå®šä¹‰åºå·åŒ–æ—¶ï¼Œæˆ‘ä»¬çš„åºå·çš„å€¼å°±åº”è¯¥ä¸º<code>[&quot;g&quot;, &quot;a&quot;, &quot;t&quot;, &quot;i&quot;, &quot;n&quot;, &quot;g&quot;]</code>ä¸­çš„ä¸€ä¸ª</p></li><li><p>å½“æˆ‘ä»¬åºå·ä¸º<code>g</code>ä¸”å¢é‡ä¸º<code>2</code>æ—¶ï¼Œç¬¬ä¸€ä¸ªæ–‡ä»¶çš„åç¼€ä¸º<code>g</code>ï¼Œç¬¬äºŒä¸ªä¸º<code>t</code>ï¼Œå› ä¸º<code>g</code>ä¸ºåˆ—è¡¨çš„ç¬¬ä¸€ä¸ªï¼Œé‚£ä¹ˆä»–ä¸‹ä¸€ä¸ªçš„å°±ä¸º<code>1+2</code>ï¼Œå³åˆ—è¡¨çš„ç¬¬ä¸‰ä¸ªï¼Œä¹Ÿå°±æ˜¯<code>t</code></p></li><li><p>çº¯å­—æ¯åˆ†å°å†™å’Œå¤§å†™ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä¹Ÿéœ€è¦å¤„ç†ä¸€ä¸‹</p></li><li><p>æ–‡ä»¶å+åç¼€åä¸èƒ½ä¸º<code>.</code>ï¼Œå› ä¸ºåœ¨ pc ä¸Šæ˜¯åˆ›å»ºä¸äº†æ–‡ä»¶çš„</p></li></ol><p>çŸ¥é“è¿™ 9 ç‚¹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å†™æˆ‘ä»¬çš„ä»£ç å•¦ã€‚å…¶å®ä¸»è¦åˆ†ä¸ºå‡ å¤§å—ï¼š</p><ul><li><p>æ–‡ä»¶åçš„å¤„ç†</p></li><li><p>åç¼€åçš„å¤„ç†</p></li><li><p>è‡ªå®šä¹‰åºå·çš„å¤„ç†</p></li></ul><h3 id="æ€è€ƒä¸€ä¸‹-1"><a href="#æ€è€ƒä¸€ä¸‹-1" class="headerlink" title="æ€è€ƒä¸€ä¸‹"></a>æ€è€ƒä¸€ä¸‹</h3><p>è¿˜è®°å¾—æˆ‘ä»¬ä¹‹å‰çš„ç›®å½•ç»“æ„å—ï¼Ÿé‡Œé¢æœ‰ä¸€ä¸ª<code>utils(å·¥å…·åº“)</code>çš„æ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬å°±åœ¨è¿™é‡Œä¹¦å†™æˆ‘ä»¬çš„æ–¹æ³•ã€‚</p><p>å…ˆæ€è€ƒä¸€ä¸‹ï¼Œæˆ‘ä»¬è¿™äº›éƒ½æ˜¯é’ˆå¯¹å­—ç¬¦ä¸²çš„ï¼Œé‚£ä¹ˆç”¨ä»€ä¹ˆå¤„ç†å­—ç¬¦ä¸²æœ€åˆé€‚å‘¢ï¼Ÿè‚¯å®šæ˜¯æ­£åˆ™å•¦ã€‚</p><p>é¦–å…ˆå½“ç„¶æ˜¯ä¹¦å†™æˆ‘ä»¬å¸¸ç”¨çš„æ­£åˆ™å•¦ï¼Œä¸»è¦æœ‰é‚£ä¹ˆå‡ ä¸ªï¼š</p><ul><li><p>è·å–æ–‡ä»¶åå’Œæ‹“å±•å</p></li><li><p>åˆ¤æ–­æ˜¯ä¸æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œä¸ºç©ºä¸å¤„ç†</p></li><li><p>æ–‡ä»¶å+åç¼€åä¸èƒ½æ˜¯<code>.</code></p></li><li><p>åœ¨æ²¡æœ‰è‡ªå®šä¹‰åºå·çš„æƒ…å†µä¸‹ï¼Œæ˜¯å¦ç¬¦åˆçº¯å­—æ¯è¿™ç§æƒ…å†µï¼Œä¸»è¦ç”¨äºåŒºåˆ†çº¯æ•°å­—å’Œçº¯å­—æ¯è¿™ä¸¤ç§æƒ…å†µ</p></li><li><p>æ˜¯å¦ç¬¦åˆé»˜è®¤åºå·è§„èŒƒï¼ˆçº¯æ•°å­—æˆ–è€…çº¯å­—æ¯ï¼‰</p></li></ul><p>åœ¨<code>utils/regexp.js</code>ä¸­å†™ä¸Šï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŒ¹é…æ–‡ä»¶åå’Œæ‹“å±•å</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> extReg = <span class="regexp">/(.+)(\..+)$/</span>;</span><br><span class="line"><span class="comment">// æ˜¯å¦ä¸ºç©ºå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> isEmpty = <span class="regexp">/^\s*$/</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ•´ä¸ªæ–‡ä»¶å+åç¼€åä¸èƒ½æ˜¯ .</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; string &#125;</span></span>&#125; str æ–‡ä»¶å</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> testDot = <span class="function">(<span class="params">str</span>) =&gt;</span> <span class="regexp">/^\s*\.+\s*$/</span>.test(str);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åºå·æ˜¯å¦ä¸ºå­—æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; string &#125;</span></span>&#125; str åºå·</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> testWord = <span class="function">(<span class="params">str</span>) =&gt;</span> <span class="regexp">/^[a-zA-Z]+$/</span>.test(str);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ˜¯å¦ç¬¦åˆé»˜è®¤åºå·è§„èŒƒ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; string &#125;</span> </span>str åºå·</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123; object &#125;</span> </span>è¿”å›æ˜¯å¦ç¬¦åˆé»˜è®¤åºå·è§„èŒƒï¼ˆçº¯å­—æ¯/çº¯æ•°å­—ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> isDefaultSerialNum = <span class="function">(<span class="params">str</span>) =&gt;</span></span><br><span class="line">  !<span class="regexp">/(^\d+$)|(^[a-zA-Z]+$)/</span>.test(str) &amp;&amp; !isEmpty.test(str);</span><br></pre></td></tr></table></figure></div><p>ä¹¦å†™å®Œæ­£åˆ™åï¼Œå°±åˆ°äº†æˆ‘ä»¬çš„<code>utis/helpers.js</code>å¸®åŠ©å‡½æ•°äº†ï¼Œå¸®åŠ©å‡½æ•°ä¸»è¦æœ‰ä¸‰ä¸ªï¼Œåˆ†åˆ«åšäº†ä¸‰ä»¶äº‹ï¼š</p><ol><li><p>åˆ¤æ–­é¦–å­—æ¯æ˜¯ä¸æ˜¯å¤§å†™ï¼Œç”¨äºåŒºåˆ†<code>a</code>å’Œ<code>A</code>ï¼Œå› ä¸º<code>a</code>å’Œ<code>A</code>åºå·è¾“å‡ºçš„å†…å®¹å®Œå…¨ä¸åŒ</p></li><li><p>è®¡ç®—é»˜è®¤æƒ…å†µä¸­å­—æ¯åºå·å’Œè‡ªå®šä¹‰åºå·çš„å®é™…å€¼</p></li><li><p>ç”¨äºè½¬æ¢é»˜è®¤æƒ…å†µä¸­å­—æ¯åºå·å’Œè‡ªå®šä¹‰åºå·çš„å€¼</p></li></ol><p>é’ˆå¯¹ç¬¬ä¸€ç‚¹ï¼Œå…¶å®å¤§å®¶åº”è¯¥éƒ½çŸ¥é“æ€ä¹ˆå†™äº†å§ï¼Œä¹Ÿæ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬ç›´æ¥é€šè¿‡æ­£åˆ™å°±å¥½äº†ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ¤æ–­æ˜¯ä¸æ˜¯å¤§å†™å­—æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; string &#125;</span> </span>word =&gt; å­—æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123; boolean &#125;</span> </span>è¿”å›æ˜¯å¦å¤§å†™å­—æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> isUpper = <span class="function">(<span class="params">word</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="regexp">/^[A-Z]$/</span>.test(word[<span class="number">0</span>]);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><p><code>2ã€3</code>ç‚¹çš„è¯ï¼Œå¯èƒ½ä¼šè§‰å¾—æ¯”è¾ƒæ‹—å£ï¼Œä¹Ÿæ¯”è¾ƒéš¾ç†è§£ã€‚ä¸æ€•ï¼Œæˆ‘ä¸¾ä¸ªä¾‹å­ä½ å°±ç†è§£äº†ã€‚</p><p>å‡è®¾æˆ‘ä»¬æ˜¯é»˜è®¤æ˜¯è¾“å…¥çš„æ˜¯çº¯å­—æ¯çš„æƒ…å†µï¼Œå¦‚æœè¾“å…¥<code>a</code>ï¼Œé‚£ä¹ˆè¾“å‡ºæ˜¯ä¸æ˜¯å°±æ˜¯<code>1</code>ï¼Œå³æ˜¯ç¬¬ä¸€ä¸ªå­—æ¯ï¼›è¾“å…¥<code>z</code>ï¼Œåˆ™æ˜¯<code>26</code>ã€‚åˆå› ä¸ºæˆ‘ä»¬æœ€åå¾—åˆ°çš„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠ<code>26</code>è¿™ä¸ªå€¼è½¬æ¢æˆ<code>z</code>ï¼Œå…¶å®å°±æ˜¯åç€æ¥ã€‚</p><p>ä¹ä¸€çœ‹ï¼Œæ˜¯ä¸æ˜¯å¾ˆåƒ<code>26è¿›åˆ¶</code>è½¬<code>10è¿›åˆ¶</code>ï¼Ÿå¯¹çš„ï¼Œæ²¡é”™ï¼Œå…¶å®å°±æ˜¯<code>26è¿›åˆ¶è½¬</code>æ¢æˆ<code>10è¿›åˆ¶</code>ã€‚é‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆè½¬æ¢å‘¢ï¼Ÿ</p><p>ç„¶åæˆ‘ä»¬ä¹Ÿè¯´è¿‡ï¼Œè¦æŠŠ<strong>å­—æ¯</strong>å…ˆè½¬æˆå®é™…çš„å€¼ï¼Œåœ¨è½¬æ¢æˆåè¿›åˆ¶åœ¨è¿›è¡Œä¸Šé¢çš„æ“ä½œã€‚</p><p>é‚£ä¹ˆæ€ä¹ˆè®¡ç®—åè¿›åˆ¶çš„å€¼å‘¢ï¼Ÿæ¯”å¦‚<code>baa</code>è½¬æˆåè¿›åˆ¶æ˜¯å¤šå°‘ï¼Ÿå®ƒçš„è¿ç®—è§„åˆ™æ˜¯è¿™æ ·çš„<code>baa = 26**2*2 + 26**1*1 + 26**0*1</code>,å³<code>1379</code>ï¼ŒçŸ¥é“è§„åˆ™ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å†™å‡ºä»¥ä¸‹çš„è®¡ç®—ä»£ç ï¼Œ</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªè¿ç»­çš„æ•´æ•°æ•°ç»„</span></span><br><span class="line"><span class="keyword">import</span> &#123; range &#125; <span class="keyword">from</span> <span class="string">"lodash"</span>;</span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ª[0-25]çš„æ•°ç»„ï¼Œå¹¶è½¬æ¢ä¸º[A-Z]æ•°ç»„ä¾›é»˜è®¤å­—æ¯åºå·ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">let</span> convertArr = range(<span class="number">26</span>).map(<span class="function">(<span class="params">i</span>) =&gt;</span> <span class="built_in">String</span>.fromCharCode(<span class="number">65</span> + i));</span><br><span class="line"><span class="keyword">const</span> serialNum = <span class="string">"baa"</span>,</span><br><span class="line">  complement = serialNum.length;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¡ç®—ç¬¬nä½26è¿›åˆ¶æ•°çš„åè¿›åˆ¶å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>range =&gt; 26è¿›åˆ¶æ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>val =&gt; å½“å‰å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>idx =&gt; å½“å‰çš„ä½ç½®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123; number &#125;</span> </span>ç¬¬nä½26è¿›åˆ¶æ•°çš„åè¿›åˆ¶å€¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> calculate = <span class="function">(<span class="params">range, val, idx</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> word = range.indexOf(val.toLocaleUpperCase());</span><br><span class="line">  <span class="keyword">return</span> word === <span class="number">-1</span> ? <span class="number">0</span> : (word + <span class="number">1</span>) * <span class="number">26</span> ** idx;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sum = [...serialNum].reduce(</span><br><span class="line">  (res, val, idx) =&gt; res + calculate(convertArr, val, complement - <span class="number">1</span> - idx),</span><br><span class="line">  <span class="number">0</span></span><br><span class="line">);</span><br><span class="line"><span class="built_in">console</span>.log(sum); <span class="comment">// 1379</span></span><br></pre></td></tr></table></figure></div><p>è¿™æ ·å­å°±è®¡ç®—å¥½äº†æˆ‘ä»¬çš„å€¼ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¯¹è¿™ä¸ªå€¼è¿›è¡Œè½¬æ¢ä¸ºå­—æ¯äº†ã€‚å› ä¸ºæˆ‘ä»¬ä¸æ˜¯ä» 0 å¼€å§‹ï¼Œè€Œæ˜¯ä» 1 å¼€å§‹ï¼Œæ‰€ä»¥æ¯ä¸€ä½çš„æ—¶å€™æˆ‘ä»¬åªéœ€è¦å‰çš„ä½è¿›è¡Œå‡ 1 æ“ä½œå³å¯ã€‚</p><blockquote><p>ps: ä¸çŸ¥é“<code>**</code>å¹‚è¿ç®—ç¬¦çš„ï¼Œå»ºè®®çœ‹çœ‹ es7ï¼Œæ¯”å¦‚<code>26 ** 3</code>ï¼Œå®ƒç›¸å½“äº Math.pow(26,3)ï¼Œå³<code>26 * 26 * 26</code></p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªè¿ç»­çš„æ•´æ•°æ•°ç»„</span></span><br><span class="line"><span class="keyword">import</span> &#123; range &#125; <span class="keyword">from</span> <span class="string">"lodash"</span>;</span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ª[0-25]çš„æ•°ç»„ï¼Œå¹¶è½¬æ¢ä¸º[A-Z]æ•°ç»„ä¾›é»˜è®¤å­—æ¯åºå·ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">let</span> convertArr = range(<span class="number">26</span>).map(<span class="function">(<span class="params">i</span>) =&gt;</span> <span class="built_in">String</span>.fromCharCode(<span class="number">65</span> + i));</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 26è¿›åˆ¶è½¬æ¢</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; number &#125;</span> </span>num =&gt; è½¬æ¢çš„å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; array &#125;</span> </span>range =&gt; è½¬æ¢çš„ç¼–ç </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123; string &#125;</span> </span>è¿”å›è½¬æ¢åçš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> convert = <span class="function">(<span class="params">num, range</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> word = <span class="string">""</span>,</span><br><span class="line">    len = range.length;</span><br><span class="line">  <span class="keyword">while</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    num--;</span><br><span class="line">    word = range[num % len] + word;</span><br><span class="line">    <span class="comment">// ~~ä½è¿ç®—å–æ•´</span></span><br><span class="line">    num = ~~(num / len);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> word;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(convert(<span class="number">1379</span>, convertArr)); <span class="comment">// BAA</span></span><br></pre></td></tr></table></figure></div><p>æ‰€ä»¥æœ€ç»ˆçš„<code>utils/helpers.js</code>æ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ¤æ–­æ˜¯ä¸æ˜¯å¤§å†™å­—æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; string &#125;</span> </span>word =&gt; å­—æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123; boolean &#125;</span> </span>è¿”å›æ˜¯å¦å¤§å†™å­—æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> isUpper = <span class="function">(<span class="params">word</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="regexp">/^[A-Z]$/</span>.test(word[<span class="number">0</span>]);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿›åˆ¶è½¬æ¢</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; number &#125;</span> </span>num =&gt; è½¬æ¢çš„å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; array &#125;</span> </span>range =&gt; è½¬æ¢çš„ç¼–ç </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123; string &#125;</span> </span>è¿”å›è½¬æ¢åçš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> convert = <span class="function">(<span class="params">num, range</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ²¡æœ‰rangeçš„æ—¶å€™å³ä¸ºæ•°å­—ï¼Œæ•°å­—æˆ‘ä»¬ä¸éœ€è¦å¤„ç†</span></span><br><span class="line">  <span class="keyword">if</span> (!range) <span class="keyword">return</span> num;</span><br><span class="line">  <span class="keyword">let</span> word = <span class="string">""</span>,</span><br><span class="line">    len = range.length;</span><br><span class="line">  <span class="keyword">while</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    num--;</span><br><span class="line">    word = range[num % len] + word;</span><br><span class="line">    num = ~~(num / len);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> word;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¡ç®—ç¬¬nä½è¿›åˆ¶æ•°çš„åè¿›åˆ¶å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>range =&gt; è¿›åˆ¶æ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>val =&gt; å½“å‰å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>idx =&gt; å½“å‰çš„ä½ç½®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123; number &#125;</span> </span>ç¬¬nä½è¿›åˆ¶æ•°çš„åè¿›åˆ¶å€¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> calculate = <span class="function">(<span class="params">range, val, idx</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> word = range.indexOf(val);</span><br><span class="line">  <span class="keyword">const</span> len = range.length;</span><br><span class="line">  <span class="keyword">return</span> word === <span class="number">-1</span> ? <span class="number">0</span> : (word + <span class="number">1</span>) * len ** idx;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><p>è¿™é‡Œæˆ‘æŠŠ<code>range</code>ä½œä¸ºå‚æ•°ä¼ è¿‡æ¥æˆ‘æƒ³å¤§å®¶åº”è¯¥èƒ½ç†è§£å§ï¼Ÿå› ä¸ºå…¶å®<code>è‡ªå®šä¹‰åºå·</code>å’Œ<code>é»˜è®¤çš„å­—æ¯åºå·</code>çš„å¤„ç†æ˜¯ä¸€æ ·ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ç›´æ¥ä¼ å…¥<code>range</code>å°±å¯ä»¥å¤„ç†<strong>è‡ªå®šä¹‰</strong>å’Œ<strong>çº¯å­—æ¯</strong>è¿™ç§æƒ…å†µäº†ã€‚</p><p>æ— éå°±æ˜¯<code>nè¿›åˆ¶</code>è½¬<code>åè¿›åˆ¶</code>çš„æ“ä½œï¼Œè®¡ç®—è§„åˆ™ä¹ŸåŒç†ã€‚ã€‚ã€‚</p><p>ä¸è¿‡å†™åˆ°è¿™é‡Œï¼Œå¯èƒ½è¦éª‚æˆ‘äº†- -è¿™ä¸å°±æ˜¯æŠŠ<code>baa</code>è½¬ä¸º<code>1379</code>ï¼Œç„¶åå†æŠŠ<code>1379</code>è½¬å›<code>BAA</code>ï¼Œå‹æ ¹å°±æ²¡æœ‰åšä»€ä¹ˆæ“ä½œå•Šï¼Ÿâ”â”(ï¿£ãƒ¼ï¿£*|||â”â”</p><p>å°å‚»ç“œï¼Œå…¶å®ä¸æ˜¯çš„ï¼Œè¿™é‡Œæˆ‘ä»¬åªæ˜¯ç”¨ä¸€ä¸ª<code>baa</code>ä½œä¸ºæ¼”ç¤ºï¼Œå‡è®¾æˆ‘ä»¬æœ‰å¤šä¸ªæ–‡ä»¶ï¼Œä¸å°±æ˜¯éœ€è¦<strong>å®ƒå®é™…çš„å€¼+å¢é‡</strong>æ¥è®¡ç®—äº†å—ï¼Œå¤§æ¦‚å°±æ˜¯ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¼ªä»£ç ...</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getNewFileList</span>(<span class="params">fileList, serialNum, increment, range</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// èµ·å§‹åºå·</span></span><br><span class="line">  <span class="keyword">let</span> start = [...serialNum].reduce(</span><br><span class="line">    (res, val, idx) =&gt; res + calculate(convertArr, val, complement - <span class="number">1</span> - idx),</span><br><span class="line">    <span class="number">0</span></span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> fileList.map(<span class="function">(<span class="params">file</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// å¾—å‡ºåç¼€</span></span><br><span class="line">    <span class="keyword">const</span> suffer = convert(start, range);</span><br><span class="line">    <span class="comment">// æ ¹æ®incrementå¢é‡è‡ªå¢</span></span><br><span class="line">    start += increment;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      ...file,</span><br><span class="line">      name: file.name + suffer,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬åŸºæœ¬ä¸Šå¯¹åºå·å¤„ç†å·²ç»å®Œæˆäº†ï¼Œå‰©ä¸‹æ¥å°±æ˜¯æ¯”è¾ƒç®€å•çš„äº†ï¼Œä¹Ÿå°±æ˜¯å¯¹<strong>æ–‡ä»¶å</strong>å’Œ<strong>åç¼€å</strong>è¿›è¡Œå¤„ç†ã€‚è¿˜è®°å¾—æˆ‘ä»¬ä¹‹å‰å®šä¹‰çš„æ­£åˆ™ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ˜¯ä½¿ç”¨å®ƒçš„æ—¶å€™äº†ã€‚</p><h3 id="å¤„ç†æ–‡ä»¶åå’Œåç¼€å"><a href="#å¤„ç†æ–‡ä»¶åå’Œåç¼€å" class="headerlink" title="å¤„ç†æ–‡ä»¶åå’Œåç¼€å"></a>å¤„ç†æ–‡ä»¶åå’Œåç¼€å</h3><p>å…ˆä¹¦å†™æˆ‘ä»¬è§‰å¾—æ¯”è¾ƒå®¹æ˜“å¤„ç†çš„æ–¹æ³•ï¼Œæ¯”å¦‚<code>è·å–æ–‡ä»¶å’Œæ–‡ä»¶åç¼€å</code>å’Œ<code>æ ¹æ®æŒ‡å®šå­—ç¬¦æ›¿æ¢æ–‡ä»¶å</code>ï¼Œåœ¨<code>utils/index.js</code>æ–‡ä»¶ä¹¦å†™å¦‚ä¸‹ä»£ç ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; extReg &#125; <span class="keyword">from</span> <span class="string">"./regexp"</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–æ–‡ä»¶å’Œæ–‡ä»¶åç¼€å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; string &#125;</span> </span>filename åŸå§‹æ–‡ä»¶å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123; array &#125;</span> </span>è¿”å›çš„æ–‡ä»¶å’Œæ–‡ä»¶åç¼€å</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> splitFilename = <span class="function">(<span class="params">filename</span>) =&gt;</span></span><br><span class="line">  filename.replace(extReg, <span class="string">"$1,$2"</span>).split(<span class="string">","</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ›¿æ¢æ–‡ä»¶å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; string &#125;</span> </span>filename æ–‡ä»¶å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; string &#125;</span> </span>preReplaceWord éœ€è¦æ›¿æ¢çš„å­—ç¬¦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; string &#125;</span> </span>replaceWord æ›¿æ¢çš„å­—ç¬¦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123; string &#125;</span> </span>è¿”å›æ›¿æ¢åçš„æ–‡ä»¶å</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> replaceFilename = <span class="function">(<span class="params">filename, preReplaceWord, replaceWord</span>) =&gt;</span></span><br><span class="line">  filename.replace(preReplaceWord, replaceWord);</span><br></pre></td></tr></table></figure></div><p>è¿˜è®°å¾—æˆ‘ä»¬ä¹‹å‰çš„<code>fileSettings</code>è¿™ä¸ªé…ç½®å—ï¼Ÿä»–æœ‰å¾ˆå¤šä¸€ä¸ªå¯¹è±¡ï¼Œè€Œæˆ‘ä»¬åªéœ€è¦è·å–åˆ°è¿™å¯¹è±¡ä¸‹çš„<code>value</code>å€¼ï¼Œä½†æ˜¯ä¸€ä¸ªä¸ª<strong>è§£æ„èµ‹å€¼</strong>æ¯”è¾ƒéº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥å†™ä¸€ä¸ªæ–¹æ³•åœ¨è·å–åˆ°å®ƒçš„<code>value</code>å€¼åœ¨ç»“æ„èµ‹å€¼ï¼Œå³ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–æ–‡ä»¶åè®¾ç½®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; Object &#125;</span> </span>fileSettings æ–‡ä»¶åè®¾ç½®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> getFileSetting = <span class="function">(<span class="params">fileSettings</span>) =&gt;</span></span><br><span class="line">  <span class="built_in">Object</span>.values(fileSettings).map(<span class="function">(<span class="params">setting</span>) =&gt;</span> setting.value);</span><br><span class="line"><span class="keyword">const</span> fileSettings = &#123;</span><br><span class="line">  filename: &#123;</span><br><span class="line">    value: <span class="string">"test"</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  serialNum: &#123;</span><br><span class="line">    value: <span class="string">"aaa"</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> [filename, serialNum] = getFileSetting(fileSettings);</span><br><span class="line"><span class="built_in">console</span>.log(filename, serialNum); <span class="comment">// test aaa</span></span><br></pre></td></tr></table></figure></div><p>è¿™æ ·å­å°±èƒ½å¾ˆæ–¹ä¾¿çš„<strong>è§£æ„èµ‹å€¼</strong>äº†,å†ç„¶åå°±æ˜¯æ ¹æ®<strong>è¾“å…¥çš„åç¼€åè·å¾—æ–°çš„åç¼€å</strong>ï¼Œè¿™é‡Œæœ‰ä¸ªæš´åŠ›çš„é…ç½®ï¼Œæ‰€ä»¥å•ç‹¬æ‹¿å‡ºæ¥è®²è®²ã€‚</p><p>å› ä¸ºæˆ‘ä»¬éœ€è¦å¯¹<code>*</code>è¿™ä¸ªå­—ç¬¦ä¸²è¿›è¡Œå…¨å±€çš„æ›¿æ¢ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦å¯¹<code>åç¼€å</code>ï¼Œæ¯”å¦‚<code>png</code>ï¼›æˆ–è€…<code>ç‚¹+åç¼€å</code>ï¼Œæ¯”å¦‚<code>.png</code>ã€‚è¿™ä¸¤ç§æƒ…å†µå¤„ç†ã€‚æ‰€ä»¥ä»£ç æ˜¯ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; startsWith &#125; <span class="keyword">from</span> <span class="string">"lodash"</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®è¾“å…¥çš„åç¼€åï¼Œè·å–ä¿®æ”¹æ–‡ä»¶åçš„çš„åç¼€å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; array &#125;</span> </span>fileExt =&gt; æ–‡ä»¶åç¼€åæ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123; array &#125;</span> </span>[oldExt, newExt] =&gt; è¿”å›æ–‡ä»¶çš„åç¼€å</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> getFileExt = <span class="function">(<span class="params">fileExt</span>) =&gt;</span></span><br><span class="line">  <span class="comment">// å¦‚æœ i ä¸å­˜åœ¨ï¼Œè¿”å›""</span></span><br><span class="line">  <span class="comment">// å¦‚æœ i æ˜¯ä»¥ "." å¼€å¤´çš„è¿”å›iï¼Œå³'.png'è¿”å›'.png'</span></span><br><span class="line">  <span class="comment">// å¦‚æœ i === "*" çš„è¿”å›iï¼Œå³'*'è¿”å›'*'</span></span><br><span class="line">  <span class="comment">// å¦‚æœæ˜¯ i æ˜¯ 'png'ï¼Œåˆ™è¿”å› '.png'</span></span><br><span class="line">  fileExt.map(<span class="function">(<span class="params">i</span>) =&gt;</span></span><br><span class="line">    i ? (startsWith(i, <span class="string">"."</span>) || i === <span class="string">"*"</span> ? i : <span class="string">"."</span> + i) : <span class="string">""</span></span><br><span class="line">  );</span><br></pre></td></tr></table></figure></div><blockquote><p>psï¼šæä¸€ç‚¹ï¼Œå¦‚æœä¸çŸ¥é“<code>startsWith</code>è¿™ä¸ªæ–¹æ³•çš„ï¼Œå»ºè®®é˜…è¯»<a href="https://gatings.cn/2019-01-09/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%96%B9%E6%B3%95%E7%9A%84%E6%80%BB%E7%BB%93%E5%92%8C%E4%BD%BF%E7%94%A8/#startsWith">å­—ç¬¦ä¸²çš„æ–¹æ³•çš„æ€»ç»“å’Œä½¿ç”¨</a>ï¼Œå½“ç„¶æˆ‘è¿™é‡Œç”¨çš„æ˜¯<code>lodash</code>çš„<code>startsWith</code>ï¼Œä½†å®é™…ä¸Šä¸€æ ·çš„</p></blockquote><p>è¿™é‡Œä»£ç ç¿»è¯‘æˆä¸­æ–‡å°±æ˜¯ï¼š</p><ol><li><p>å¦‚æœ<code>åç¼€å</code>ä¸å­˜åœ¨ï¼Œè¿”å›<code>&quot;&quot;(ç©ºå­—ç¬¦ä¸²)</code></p></li><li><p>å¦‚æœ<code>åç¼€å</code>æ˜¯ä»¥<code>.</code>å¼€å¤´çš„è¿”å›<code>åç¼€å</code>ï¼Œå³<code>.png</code>è¿”å›<code>.png</code></p></li><li><p>å¦‚æœ<code>åç¼€å</code>æ˜¯<code>*</code> çš„è¿”å›<code>*</code>ï¼Œå³<code>*</code>è¿”å›<code>*</code></p></li><li><p>å¦‚æœæ˜¯<code>åç¼€å</code>ä¸æ˜¯ä»¥<code>.</code>å¼€å¤´çš„è¿”å›<code>png</code>ï¼Œåˆ™è¿”å›<code>.png</code></p></li></ol><p>å†™å®Œè·å–<code>åç¼€å</code>ä¹‹åå°±æ˜¯ä¿®æ”¹å•¦ï¼Œè¿™é‡Œå•ç‹¬æ‹¿å‡ºæ¥è°ˆä¸»è¦ä¹Ÿæ˜¯å› ä¸ºæœ‰ä¸ªå°å‘ï¼Œå› ä¸ºæœ‰äº›æ–‡ä»¶æ¯”è¾ƒå¥‡è‘©ï¼Œä»–æ˜¯<code>.+åå­—</code>ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸¸å¸¸è§åˆ°çš„<code>.gitignore</code>æ–‡ä»¶</p><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦é’ˆå¯¹è¿™ç§<code>.+åå­—</code>è¿™ç±»å‹çš„æ–‡ä»¶è¿›è¡Œä¸€ä¸ªåŒºåˆ†ï¼Œå³æ²¡æœ‰<code>åç¼€å</code>çš„æ–‡ä»¶çš„å¤„ç†ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–ä¿®æ”¹åçš„åç¼€å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; string &#125;</span> </span>fileExt =&gt; åŒ¹é…çš„æ–‡ä»¶åç¼€å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; string &#125;</span> </span>oldExt =&gt; æ‰€æœ‰æ–‡ä»¶åç¼€å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; string &#125;</span> </span>newExt =&gt; ä¿®æ”¹åæ–‡ä»¶åç¼€å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; boolean &#125;</span> </span>enable =&gt; æ˜¯å¦å¯ç”¨ä¿®æ”¹åç¼€å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123; string &#125;</span> </span>è¿”å›ä¿®æ”¹åçš„åç¼€å</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> getNewFileExt = <span class="function">(<span class="params">fileExt, oldExt, newExt, enable</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> ((oldExt === <span class="string">"*"</span> || fileExt === oldExt) &amp;&amp; enable) &#123;</span><br><span class="line">    <span class="keyword">return</span> newExt;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// é¿å…æ²¡æœ‰åç¼€åçš„bugï¼Œæ¯”å¦‚ .gitignore</span></span><br><span class="line">    <span class="keyword">return</span> fileExt || <span class="string">""</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><p>å†™åˆ°è¿™é‡Œï¼ŒåŸºæœ¬ä¸Šé€»è¾‘è¦å†™å®Œäº†ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªæœ€æœ€æœ€å°çš„é—®é¢˜ï¼Œå°±æ˜¯ä»–å¯èƒ½ä¼šè¾“å…¥<code>001</code>ï¼Œè€Œæˆ‘ä»¬ä¹‹å‰çš„ä»£ç ä¼šæŠŠ<code>001</code>è½¬ä¸ºæ•°å­—ï¼Œå³ä¼šç›´æ¥è½¬ä¸º<code>1</code>ã€‚è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆè®©ä»–è¿˜æ˜¯å­—ç¬¦ä¸²å½¢å¼ï¼Œä½†æ˜¯è¿˜æ˜¯æŒ‰ç…§æ•°å­—è®¡ç®—å‘¢ï¼Ÿ</p><blockquote><p>psï¼šå› ä¸ºè½¬æ¢å€¼éœ€è¦+å¢é‡ï¼Œä¸å¯èƒ½ç”¨å­—ç¬¦ä¸²ç›¸åŠ çš„ï¼Œæ‰€ä»¥å¿…é¡»è½¬æˆæ•°å­—</p></blockquote><p>æ‰€ä»¥è¿™é‡Œå°±è¦éœ€è¦ç”¨åˆ°<code>es6</code>çš„<code>padStart</code>æ–¹æ³•å•¦ï¼Œé€šè¿‡ä»–æ¥è¿›è¡Œ<code>åºå·</code>çš„è¡¥ä½ï¼Œç„¶åæŠŠä¹‹å‰çš„æ–¹æ³•æ•´ç†ä¸‹ï¼Œå®šä¹‰ä¸º<code>getOptions</code>å‡½æ•°ï¼Œè·å–é€šç”¨çš„é…ç½®ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; range, padStart &#125; <span class="keyword">from</span> <span class="string">"lodash"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; testWord &#125; <span class="keyword">from</span> <span class="string">"./regexp"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; calculate, isUpper &#125; <span class="keyword">from</span> <span class="string">"./helpers"</span>;</span><br><span class="line"><span class="keyword">let</span> convertArr = range(<span class="number">26</span>).map(<span class="function">(<span class="params">i</span>) =&gt;</span> <span class="built_in">String</span>.fromCharCode(<span class="number">65</span> + i));</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  è·å–èµ·å§‹ä½ç½®ã€è¡¥ä½å­—ç¬¦å’Œè‡ªå®šä¹‰æ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; string &#125;</span> </span>serialNum æ–‡ä»¶åºå·</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; number &#125;</span> </span>complement éœ€è¦è¡¥çš„ä½æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; array &#125;</span> </span>range è‡ªå®šä¹‰åºå·æ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123; object &#125;</span> </span>è¿”å›èµ·å§‹ä½ç½®ã€è¡¥ä½å­—ç¬¦å’Œè‡ªå®šä¹‰æ•°ç»„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> getOptions = <span class="function">(<span class="params">serialNum, complement, range</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// èµ·å§‹åºå·çš„å€¼ï¼Œè¡¥ä½åºå·</span></span><br><span class="line">  <span class="keyword">let</span> start, padNum;</span><br><span class="line">  <span class="comment">// å­—æ¯å’Œè‡ªå®šä¹‰åºå·çš„æƒ…å†µ</span></span><br><span class="line">  <span class="keyword">if</span> (testWord(serialNum) || range) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!range) &#123;</span><br><span class="line">      <span class="comment">// è½¬æ¢å¤§å°å†™</span></span><br><span class="line">      <span class="keyword">if</span> (!isUpper(serialNum[<span class="number">0</span>])) &#123;</span><br><span class="line">        convertArr = convertArr.map(<span class="function">(<span class="params">str</span>) =&gt;</span> str.toLocaleLowerCase());</span><br><span class="line">      &#125;</span><br><span class="line">      range = convertArr;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è¡¥ä½å­—ç¬¦</span></span><br><span class="line">    padNum = range[<span class="number">0</span>];</span><br><span class="line">    start = [...serialNum].reduce(</span><br><span class="line">      (res, val, idx) =&gt; res + calculate(range, val, complement - <span class="number">1</span> - idx),</span><br><span class="line">      <span class="number">0</span></span><br><span class="line">    );</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// çº¯æ•°å­—çš„æƒ…å†µ</span></span><br><span class="line">    start = serialNum ? ~~serialNum : <span class="literal">NaN</span>;</span><br><span class="line">    <span class="comment">// è¡¥ä½å­—ç¬¦</span></span><br><span class="line">    padNum = <span class="string">"0"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    start,</span><br><span class="line">    padNum,</span><br><span class="line">    convertArr: range,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123; start, padNum &#125; = getOptions(<span class="string">"001"</span>, <span class="number">3</span>);</span><br><span class="line"><span class="built_in">console</span>.log(padStart(convert(start) + <span class="string">""</span>, <span class="number">3</span>, padNum)); <span class="comment">// 001</span></span><br></pre></td></tr></table></figure></div><blockquote><p>å¦‚æœä¸çŸ¥é“<code>padStart</code>è¿™ä¸ªæ–¹æ³•çš„ï¼Œå»ºè®®é˜…è¯»<a href="https://gatings.cn/2019-01-09/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%96%B9%E6%B3%95%E7%9A%84%E6%80%BB%E7%BB%93%E5%92%8C%E4%BD%BF%E7%94%A8/#padStart">å­—ç¬¦ä¸²çš„æ–¹æ³•çš„æ€»ç»“å’Œä½¿ç”¨</a>ï¼Œå½“ç„¶æˆ‘è¿™é‡Œç”¨çš„æ˜¯<code>lodash</code>çš„<code>padStart</code>ï¼Œä½†å®é™…ä¸Šä¸€æ ·çš„</p></blockquote><p>å†™å¥½è¿™ä¸€å¯¹æ–¹æ³•ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°åˆšåˆšé‚£ä¸ª<strong>ä¼ªä»£ç </strong>äº†ï¼Œè€Œæˆ‘ä»¬æœ€ç»ˆ<code>vue</code>é‡Œé¢ä¹Ÿå°±éœ€è¦è¿™ä¸€ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥ç›´æ¥å¯¼å‡ºå°±è¡Œäº†ã€‚</p><p><code>utils/index.js</code>æœ€ç»ˆä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  extReg,</span><br><span class="line">  testWord,</span><br><span class="line">  isDefaultSerialNum,</span><br><span class="line">  isEmpty,</span><br><span class="line">  testDot,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">"./regexp"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; calculate, isUpper, convert &#125; <span class="keyword">from</span> <span class="string">"./helpers"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; range, padStart, startsWith &#125; <span class="keyword">from</span> <span class="string">"lodash"</span>;</span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ª[0-25]çš„æ•°ç»„ï¼Œå¹¶è½¬æ¢ä¸º[A-Z]æ•°ç»„ä¾›é»˜è®¤å­—æ¯åºå·ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">let</span> convertArr = range(<span class="number">26</span>).map(<span class="function">(<span class="params">i</span>) =&gt;</span> <span class="built_in">String</span>.fromCharCode(<span class="number">65</span> + i));</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–ä¿®æ”¹åçš„åç¼€å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; string &#125;</span> </span>fileExt =&gt; åŒ¹é…çš„æ–‡ä»¶åç¼€å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; string &#125;</span> </span>oldExt =&gt; æ‰€æœ‰æ–‡ä»¶åç¼€å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; string &#125;</span> </span>newExt =&gt; ä¿®æ”¹åæ–‡ä»¶åç¼€å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; boolean &#125;</span> </span>enable =&gt; æ˜¯å¦å¯ç”¨ä¿®æ”¹åç¼€å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123; string &#125;</span> </span>è¿”å›ä¿®æ”¹åçš„åç¼€å</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> getNewFileExt = <span class="function">(<span class="params">fileExt, oldExt, newExt, enable</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> ((oldExt === <span class="string">"*"</span> || fileExt === oldExt) &amp;&amp; enable) &#123;</span><br><span class="line">    <span class="keyword">return</span> newExt;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// é¿å…æ²¡æœ‰åç¼€åçš„bug</span></span><br><span class="line">    <span class="keyword">return</span> fileExt || <span class="string">""</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®è¾“å…¥çš„åç¼€åï¼Œè·å–ä¿®æ”¹æ–‡ä»¶åçš„çš„åç¼€å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; array &#125;</span> </span>fileExt =&gt; æ–‡ä»¶åç¼€åæ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123; array &#125;</span> </span>[oldExt, newExt] =&gt; è¿”å›æ–‡ä»¶çš„åç¼€å</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> getFileExt = <span class="function">(<span class="params">fileExt</span>) =&gt;</span></span><br><span class="line">  <span class="comment">// å¦‚æœ i ä¸å­˜åœ¨ï¼Œè¿”å›""</span></span><br><span class="line">  <span class="comment">// å¦‚æœ i æ˜¯ä»¥ "." å¼€å¤´çš„è¿”å›iï¼Œå³'.png'è¿”å›'.png'</span></span><br><span class="line">  <span class="comment">// å¦‚æœ i === "*" çš„è¿”å›iï¼Œå³'*'è¿”å›'*'</span></span><br><span class="line">  <span class="comment">// å¦‚æœæ˜¯ i æ˜¯ 'png'ï¼Œåˆ™è¿”å› '.png'</span></span><br><span class="line">  fileExt.map(<span class="function">(<span class="params">i</span>) =&gt;</span></span><br><span class="line">    i ? (startsWith(i, <span class="string">"."</span>) || i === <span class="string">"*"</span> ? i : <span class="string">"."</span> + i) : <span class="string">""</span></span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–æ–‡ä»¶å’Œæ–‡ä»¶åç¼€å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; string &#125;</span> </span>filename åŸå§‹æ–‡ä»¶å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123; array &#125;</span> </span>è¿”å›çš„æ–‡ä»¶å’Œæ–‡ä»¶åç¼€å</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> splitFilename = <span class="function">(<span class="params">filename</span>) =&gt;</span></span><br><span class="line">  filename.replace(extReg, <span class="string">"$1,$2"</span>).split(<span class="string">","</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ›¿æ¢æ–‡ä»¶å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; string &#125;</span> </span>filename æ–‡ä»¶å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; string &#125;</span> </span>preReplaceWord éœ€è¦æ›¿æ¢çš„å­—ç¬¦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; string &#125;</span> </span>replaceWord æ›¿æ¢çš„å­—ç¬¦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123; string &#125;</span> </span>è¿”å›æ›¿æ¢åçš„æ–‡ä»¶å</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> replaceFilename = <span class="function">(<span class="params">filename, preReplaceWord, replaceWord</span>) =&gt;</span></span><br><span class="line">  filename.replace(preReplaceWord, replaceWord);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–æ–‡ä»¶åè®¾ç½®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; Object &#125;</span> </span>fileSettings æ–‡ä»¶åè®¾ç½®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> getFileSetting = <span class="function">(<span class="params">fileSettings</span>) =&gt;</span></span><br><span class="line">  <span class="built_in">Object</span>.values(fileSettings).map(<span class="function">(<span class="params">setting</span>) =&gt;</span> setting.value);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  è·å–èµ·å§‹ä½ç½®ã€è¡¥ä½å­—ç¬¦å’Œè‡ªå®šä¹‰æ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; string &#125;</span> </span>serialNum æ–‡ä»¶åºå·</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; number &#125;</span> </span>complement éœ€è¦è¡¥çš„ä½æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; array &#125;</span> </span>range è‡ªå®šä¹‰åºå·æ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123; object &#125;</span> </span>è¿”å›èµ·å§‹ä½ç½®ã€è¡¥ä½å­—ç¬¦å’Œè‡ªå®šä¹‰æ•°ç»„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> getOptions = <span class="function">(<span class="params">serialNum, complement, range</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// èµ·å§‹åºå·çš„å€¼ï¼Œè¡¥ä½åºå·</span></span><br><span class="line">  <span class="keyword">let</span> start, padNum;</span><br><span class="line">  <span class="comment">// å­—æ¯å’Œè‡ªå®šä¹‰åºå·çš„æƒ…å†µ</span></span><br><span class="line">  <span class="keyword">if</span> (testWord(serialNum) || range) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!range) &#123;</span><br><span class="line">      <span class="comment">// è½¬æ¢å¤§å°å†™</span></span><br><span class="line">      <span class="keyword">if</span> (!isUpper(serialNum[<span class="number">0</span>])) &#123;</span><br><span class="line">        convertArr = convertArr.map(<span class="function">(<span class="params">str</span>) =&gt;</span> str.toLocaleLowerCase());</span><br><span class="line">      &#125;</span><br><span class="line">      range = convertArr;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è¡¥ä½å­—ç¬¦</span></span><br><span class="line">    padNum = range[<span class="number">0</span>];</span><br><span class="line">    start = [...serialNum].reduce(</span><br><span class="line">      (res, val, idx) =&gt; res + calculate(range, val, complement - <span class="number">1</span> - idx),</span><br><span class="line">      <span class="number">0</span></span><br><span class="line">    );</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// çº¯æ•°å­—çš„æƒ…å†µ</span></span><br><span class="line">    start = serialNum ? ~~serialNum : <span class="literal">NaN</span>;</span><br><span class="line">    <span class="comment">// è¡¥ä½å­—ç¬¦</span></span><br><span class="line">    padNum = <span class="string">"0"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    start,</span><br><span class="line">    padNum,</span><br><span class="line">    convertArr: range,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–æ–‡ä»¶å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; string &#125;</span> </span>filename æ—§æ–‡ä»¶å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; string &#125;</span> </span>newFilename æ–°æ–‡ä»¶å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123; string &#125;</span> </span>è¿”å›æœ€ç»ˆçš„æ–‡ä»¶å</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> getFileName = <span class="function">(<span class="params">filename, newFilename</span>) =&gt;</span></span><br><span class="line">  isEmpty.test(newFilename) ? filename : newFilename;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®é…ç½®ï¼Œè·å–ä¿®æ”¹åçš„æ–‡ä»¶å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; array &#125;</span> </span>fileList åŸæ–‡ä»¶</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; object &#125;</span> </span>fileSettings æ–‡ä»¶åè®¾ç½®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; array &#125;</span> </span>extArr ä¿®æ”¹çš„åç¼€å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; boolean &#125;</span> </span>enable æ˜¯å¦å¯ç”¨ä¿®æ”¹åç¼€å</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123; array &#125;</span> </span>ä¿®æ”¹åçš„æ–‡ä»¶å</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">getNewFileList</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  fileList,</span></span></span><br><span class="line"><span class="function"><span class="params">  fileSettings,</span></span></span><br><span class="line"><span class="function"><span class="params">  extArr,</span></span></span><br><span class="line"><span class="function"><span class="params">  enable,</span></span></span><br><span class="line"><span class="function"><span class="params">  range</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [</span><br><span class="line">    newFilename,</span><br><span class="line">    serialNum,</span><br><span class="line">    increment,</span><br><span class="line">    preReplaceWord,</span><br><span class="line">    replaceWord,</span><br><span class="line">  ] = getFileSetting(fileSettings);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¦‚æœä¸ç¬¦åˆé»˜è®¤åºå·è§„åˆ™ï¼Œåˆ™ä¸æ”¹å</span></span><br><span class="line">  <span class="keyword">if</span> (isDefaultSerialNum(serialNum) &amp;&amp; !range) &#123;</span><br><span class="line">    <span class="keyword">return</span> fileList;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// è·å–æ–‡ä»¶ä¿®æ”¹çš„åç¼€å</span></span><br><span class="line">  <span class="keyword">const</span> [oldExt, newExt] = getFileExt(extArr);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¡¥ä½ï¼Œæ¯”å¦‚è¾“å…¥çš„æ˜¯001 è¡¥ä½å°±æ˜¯00</span></span><br><span class="line">  <span class="keyword">const</span> padLen = serialNum.length;</span><br><span class="line">  <span class="comment">// è·å–å¼€å§‹</span></span><br><span class="line">  <span class="keyword">let</span> &#123; start, padNum, convertArr &#125; = getOptions(serialNum, padLen, range);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> fileList.map(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// è·å–æ–‡ä»¶åå’Œåç¼€å</span></span><br><span class="line">    <span class="keyword">let</span> [oldFileName, fileExt] = splitFilename(item.name);</span><br><span class="line">    <span class="comment">// è·å–ä¿®æ”¹åçš„æ–‡ä»¶å</span></span><br><span class="line">    <span class="keyword">let</span> filename = replaceFilename(</span><br><span class="line">      getFileName(oldFileName, newFilename),</span><br><span class="line">      preReplaceWord,</span><br><span class="line">      replaceWord</span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// è·å–ä¿®æ”¹åçš„åç¼€å</span></span><br><span class="line">    fileExt = getNewFileExt(fileExt, oldExt, newExt, enable);</span><br><span class="line">    <span class="keyword">const</span> suffix =</span><br><span class="line">      (padLen &amp;&amp; padStart(convert(start, convertArr) + <span class="string">""</span>, padLen, padNum)) ||</span><br><span class="line">      <span class="string">""</span>;</span><br><span class="line">    filename += suffix;</span><br><span class="line">    start += increment;</span><br><span class="line">    <span class="comment">// æ–‡ä»¶å+åç¼€åä¸èƒ½æ˜¯.</span></span><br><span class="line">    <span class="keyword">let</span> name = testDot(filename + fileExt) ? item.name : filename + fileExt;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      ...item,</span><br><span class="line">      basename: filename,</span><br><span class="line">      name,</span><br><span class="line">      ext: fileExt,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>çœ‹åˆ°è¿™é‡Œï¼Œä½ ä¼šå‘ç°ï¼Œæˆ‘å¤šæ•°æ–¹æ³•åªåšä¸€ä»¶äº‹ï¼Œé€šå¸¸ä¹Ÿå»ºè®®åªåšä¸€ä»¶äº‹ï¼ˆå•ä¸€èŒè´£åŸåˆ™ï¼‰ï¼Œè¿™æ ·æœ‰åˆ©äºé™ä½ä»£ç å¤æ‚åº¦å’Œé™ä½ç»´æŠ¤æˆæœ¬ã€‚å¸Œæœ›å¤§å®¶ä¹Ÿèƒ½å…»æˆè¿™æ ·çš„å¥½ä¹ æƒ¯å“¦~~ ğŸ˜</p><blockquote><p>psï¼šå‡½æ•°åº”è¯¥åšä¸€ä»¶äº‹ï¼Œåšå¥½è¿™ä»¶äº‹ï¼Œåªåšè¿™ä¸€ä»¶äº‹ã€‚ â€”ä»£ç æ•´æ´ä¹‹é“</p></blockquote><h2 id="ä¼˜åŒ–ç›¸å…³"><a href="#ä¼˜åŒ–ç›¸å…³" class="headerlink" title="ä¼˜åŒ–ç›¸å…³"></a>ä¼˜åŒ–ç›¸å…³</h2><h3 id="é¢„åŠ è½½-preload-å’Œé¢„å¤„ç†-prefetch"><a href="#é¢„åŠ è½½-preload-å’Œé¢„å¤„ç†-prefetch" class="headerlink" title="é¢„åŠ è½½(preload)å’Œé¢„å¤„ç†(prefetch)"></a>é¢„åŠ è½½(preload)å’Œé¢„å¤„ç†(prefetch)</h3><p><code>preload</code>ä¸<code>prefetch</code>ä¸åŒçš„åœ°æ–¹å°±æ˜¯å®ƒä¸“æ³¨äºå½“å‰çš„é¡µé¢ï¼Œå¹¶ä»¥é«˜ä¼˜å…ˆçº§åŠ è½½èµ„æºï¼Œ<code>prefetch</code>ä¸“æ³¨äºä¸‹ä¸€ä¸ªé¡µé¢å°†è¦åŠ è½½çš„èµ„æºå¹¶ä»¥ä½ä¼˜å…ˆçº§åŠ è½½ã€‚åŒæ—¶ä¹Ÿè¦æ³¨æ„<code>preload</code>å¹¶ä¸ä¼šé˜»å¡<code>window</code>çš„<code>onload</code>äº‹ä»¶ã€‚</p><p>å³<code>preload</code>åŠ è½½èµ„æºä¸€èˆ¬æ˜¯å½“å‰é¡µé¢éœ€è¦çš„ï¼Œ <code>prefetch</code>ä¸€èˆ¬æ˜¯å…¶å®ƒé¡µé¢æœ‰å¯èƒ½ç”¨åˆ°çš„èµ„æºã€‚</p><p>æ˜ç™½è¿™ç‚¹åï¼Œå°±æ˜¯åœ¨<code>vue.config.js</code>å†™æˆ‘ä»¬çš„é…ç½®äº†ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// ...ä¸€å †ä¹‹å‰é…ç½®</span></span><br><span class="line">  chainWebpack(config) &#123;</span><br><span class="line">    <span class="comment">// å»ºè®®æ‰“å¼€é¢„åŠ è½½ï¼Œå®ƒå¯ä»¥æé«˜ç¬¬ä¸€å±çš„é€Ÿåº¦</span></span><br><span class="line">    config.plugin(<span class="string">"preload"</span>).tap(<span class="function"><span class="params">()</span> =&gt;</span> [</span><br><span class="line">      &#123;</span><br><span class="line">        rel: <span class="string">"preload"</span>,</span><br><span class="line">        <span class="comment">// to ignore runtime.js</span></span><br><span class="line">        <span class="comment">// https://github.com/vuejs/vue-cli/blob/dev/packages/@vue/cli-service/lib/config/app.js#L171</span></span><br><span class="line">        fileBlacklist: [<span class="regexp">/\.map$/</span>, /hot-update\.js$/, /runtime\..*\.js$/],</span><br><span class="line">        include: <span class="string">"initial"</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ]);</span><br><span class="line">    <span class="comment">// å»é™¤é¢„è¯»å–ï¼Œå› ä¸ºå¦‚æœé¡µé¢è¿‡å¤šï¼Œä¼šé€ æˆæ— æ„ä¹‰çš„è¯·æ±‚</span></span><br><span class="line">    config.plugins.delete(<span class="string">"prefetch"</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><blockquote><p>psï¼šä¼˜åŒ–ç½‘ç«™æ€§èƒ½çš„ <code>pre å®¶æ—</code>è¿˜æœ‰<code>dns-prefetch</code>ã€<code>prerender</code>å’Œ<code>preconnect</code>ï¼Œæœ‰å…´è¶£çš„å¯ä»¥è¿›ä¸€æ­¥äº†è§£</p></blockquote><h3 id="æå–-runtime-js"><a href="#æå–-runtime-js" class="headerlink" title="æå– runtime.js"></a>æå– runtime.js</h3><p>å› ä¸ºæ‰“åŒ…ç”Ÿæˆçš„<code>runtime.js</code>éå¸¸çš„å°ï¼Œä½†è¿™ä¸ªæ–‡ä»¶åˆç»å¸¸ä¼šæ”¹å˜ï¼Œå®ƒçš„<code>http</code>è€—æ—¶è¿œå¤§äºå®ƒçš„æ‰§è¡Œæ—¶é—´äº†ï¼Œæ‰€ä»¥å»ºè®®ä¸è¦å°†å®ƒå•ç‹¬æ‹†åŒ…ï¼Œè€Œæ˜¯å°†å®ƒå†…è”åˆ°æˆ‘ä»¬çš„<code>index.html</code>ä¹‹ä¸­ï¼Œé‚£ä¹ˆåˆ™éœ€è¦ä½¿ç”¨åˆ°<code>script-ext-html-webpack-plugin</code>è¿™ä¸ªæ’ä»¶ï¼Œæˆ‘ä»¬å®‰è£…ä¸€ä¸‹ï¼ŒåŒæ ·æ˜¯å¼€å‘ä¾èµ–<code>-D</code>ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i script-ext-html-webpack-plugin -D</span><br></pre></td></tr></table></figure></div><p>æ¥ä¸‹æ¥å°±æ˜¯åœ¨<code>vue.config.js</code>å†™æˆ‘ä»¬çš„é…ç½®äº†ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> isProduction = process.env.NODE_ENV !== <span class="string">"development"</span>;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// ...ä¸€å †ä¹‹å‰é…ç½®</span></span><br><span class="line">  chainWebpack(config) &#123;</span><br><span class="line">     <span class="comment">// åªåœ¨ç”Ÿæˆç¯å¢ƒä½¿ç”¨</span></span><br><span class="line">     config.when(isProduction, (config) =&gt; &#123;</span><br><span class="line">      <span class="comment">// html-webpack-pluginçš„å¢å¼ºåŠŸèƒ½</span></span><br><span class="line">      <span class="comment">// æ‰“åŒ…ç”Ÿæˆçš„ runtime.jséå¸¸çš„å°ï¼Œä½†è¿™ä¸ªæ–‡ä»¶åˆç»å¸¸ä¼šæ”¹å˜ï¼Œå®ƒçš„ http è€—æ—¶è¿œå¤§äºå®ƒçš„æ‰§è¡Œæ—¶é—´äº†ï¼Œæ‰€ä»¥å»ºè®®ä¸è¦å°†å®ƒå•ç‹¬æ‹†åŒ…ï¼Œè€Œæ˜¯å°†å®ƒå†…è”åˆ°æˆ‘ä»¬çš„ index.html ä¹‹ä¸­</span></span><br><span class="line">      <span class="comment">// inline çš„name å’Œä½  runtimeChunk çš„ nameä¿æŒä¸€è‡´</span></span><br><span class="line">      config</span><br><span class="line">        .plugin(<span class="string">"ScriptExtHtmlWebpackPlugin"</span>)</span><br><span class="line">        .after(<span class="string">"html"</span>)</span><br><span class="line">        .use(<span class="string">"script-ext-html-webpack-plugin"</span>, [</span><br><span class="line">          &#123;</span><br><span class="line">            inline: <span class="regexp">/runtime\..*\.js$/</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        ])</span><br><span class="line">        .end();</span><br><span class="line">      <span class="comment">// å•ç‹¬æ‰“åŒ…runtime</span></span><br><span class="line">      config.optimization.runtimeChunk(<span class="string">"single"</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><h3 id="å¯¹ç¬¬ä¸‰æ–¹åº“è¿›è¡Œæ‹†åŒ…"><a href="#å¯¹ç¬¬ä¸‰æ–¹åº“è¿›è¡Œæ‹†åŒ…" class="headerlink" title="å¯¹ç¬¬ä¸‰æ–¹åº“è¿›è¡Œæ‹†åŒ…"></a>å¯¹ç¬¬ä¸‰æ–¹åº“è¿›è¡Œæ‹†åŒ…</h3><p>å®é™…ä¸Šé»˜è®¤æˆ‘ä»¬ä¼šå°†æ‰€æœ‰çš„ç¬¬ä¸‰æ–¹åŒ…æ‰“åŒ…åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸Šï¼Œè¿™æ ·çš„æ–¹å¼å¯è¡Œå—ï¼Ÿå®é™…ä¸Šè‚¯å®šæ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºå°†ç¬¬ä¸‰æ–¹åº“ä¸€å—æ‰“åŒ…ï¼Œåªè¦æœ‰ä¸€ä¸ªåº“æˆ‘ä»¬å‡çº§æˆ–è€…å¼•å…¥ä¸€ä¸ªæ–°åº“ï¼Œè¿™ä¸ªæ–‡ä»¶å°±ä¼šå˜åŠ¨,é‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶çš„å˜åŠ¨æ€§ä¼šå¾ˆé«˜,å¹¶ä¸é€‚åˆé•¿æœŸç¼“å­˜ï¼Œè¿˜æœ‰ä¸€ç‚¹ï¼Œæˆ‘ä»¬è¦æé«˜é¦–é¡µåŠ è½½é€Ÿåº¦ï¼Œç¬¬ä¸€è¦åŠ¡æ˜¯å‡å°‘é¦–é¡µåŠ è½½ä¾èµ–çš„ä»£ç é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç¬¬ä¸‰æ–¹åº“è¿›è¡Œæ‹†åŒ…ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  publicPath: <span class="string">"./"</span>,</span><br><span class="line">  outputDir: <span class="string">"../public"</span>,</span><br><span class="line">  productionSourceMap: <span class="literal">false</span>,</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    open: <span class="literal">true</span>,</span><br><span class="line">    proxy: &#123;</span><br><span class="line">      <span class="string">"/upload"</span>: &#123;</span><br><span class="line">        target: <span class="string">"http://localhost:3000"</span>,</span><br><span class="line">        changeOrigin: <span class="literal">true</span>,</span><br><span class="line">        pathRewrite: &#123;</span><br><span class="line">          <span class="string">"^/upload"</span>: <span class="string">"/upload"</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  css: &#123;</span><br><span class="line">    loaderOptions: &#123;</span><br><span class="line">      less: &#123;</span><br><span class="line">        javascriptEnabled: <span class="literal">true</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  chainWebpack(config) &#123;</span><br><span class="line">      <span class="comment">// æ‹†åˆ†æ¨¡å—</span></span><br><span class="line">      config.optimization.splitChunks(&#123;</span><br><span class="line">        chunks: <span class="string">"all"</span>,</span><br><span class="line">        cacheGroups: &#123;</span><br><span class="line">          libs: &#123;</span><br><span class="line">            name: <span class="string">"chunk-libs"</span>, <span class="comment">// è¾“å‡ºåå­—</span></span><br><span class="line">            test: <span class="regexp">/[\\/]node_modules[\\/]/</span>, <span class="comment">// åŒ¹é…ç›®å½•</span></span><br><span class="line">            priority: <span class="number">10</span>, <span class="comment">// ä¼˜å…ˆçº§</span></span><br><span class="line">            chunks: <span class="string">"initial"</span>, <span class="comment">// ä»å…¥å£æ¨¡å—è¿›è¡Œæ‹†åˆ†</span></span><br><span class="line">          &#125;,</span><br><span class="line">          antDesign: &#123;</span><br><span class="line">            name: <span class="string">"chunk-antd"</span>, <span class="comment">// å°†antdæ‹†åˆ†ä¸ºå•ä¸ªåŒ…</span></span><br><span class="line">            priority: <span class="number">20</span>, <span class="comment">// æƒé‡éœ€è¦å¤§äºlibså’Œappï¼Œå¦åˆ™å°†æ‰“åŒ…æˆlibsæˆ–app</span></span><br><span class="line">            test: <span class="regexp">/[\\/]node_modules[\\/]_?ant-design-vue(.*)/</span>, <span class="comment">// ä¸ºäº†é€‚åº”cnpm</span></span><br><span class="line">          &#125;,</span><br><span class="line">          commons: &#123;</span><br><span class="line">            name: <span class="string">"chunk-commons"</span>,</span><br><span class="line">            test: resolve(<span class="string">"src/components"</span>),</span><br><span class="line">            minChunks: <span class="number">3</span>,</span><br><span class="line">            priority: <span class="number">5</span>,</span><br><span class="line">            reuseExistingChunk: <span class="literal">true</span>, <span class="comment">// å¤ç”¨å…¶ä»–chunkå†…å·²æ‹¥æœ‰çš„æ¨¡å—</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><h3 id="å…¶ä»–ä¼˜åŒ–"><a href="#å…¶ä»–ä¼˜åŒ–" class="headerlink" title="å…¶ä»–ä¼˜åŒ–"></a>å…¶ä»–ä¼˜åŒ–</h3><p>å½“ç„¶å…¶å®è¿˜æœ‰å¾ˆå¤šçš„ä¼˜åŒ–æ–¹å¼ï¼Œæˆ‘ä»¬è¿™é‡Œæ²¡æœ‰æåŠï¼Œæ¯”å¦‚ï¼š</p><ol><li><p>(ä¼ª)æœåŠ¡ç«¯æ¸²æŸ“ï¼Œé€šè¿‡<code>prerender-spa-plugin</code>åœ¨æœ¬åœ°æ¨¡æ‹Ÿæµè§ˆå™¨ç¯å¢ƒ,é¢„å…ˆæ‰§è¡Œæˆ‘ä»¬çš„æ‰“åŒ…æ–‡ä»¶,è¿™æ ·é€šè¿‡è§£æå°±å¯ä»¥è·å–é¦–å±çš„ HTML,åœ¨æ­£å¸¸ç¯å¢ƒä¸­,æˆ‘ä»¬å°±å¯ä»¥è¿”å›é¢„å…ˆè§£æå¥½çš„ HTML äº†ã€‚</p></li><li><p>FMP(é¦–æ¬¡æœ‰æ„ä¹‰ç»˜åˆ¶)ï¼Œé€šè¿‡<code>vue-skeleton-webpack-plugin</code>åˆ¶ä½œä¸€ä»½<code>Skeleton</code>éª¨æ¶å±</p></li><li><p>ä½¿ç”¨<code>cdn</code></p></li><li><p>å…¶å®ƒç­‰ç­‰â€¦</p></li></ol><h1 id="ç¼–å†™åç«¯"><a href="#ç¼–å†™åç«¯" class="headerlink" title="ç¼–å†™åç«¯"></a>ç¼–å†™åç«¯</h1><p>æœ€åï¼Œåˆ°äº†ç¼–å†™åç«¯äº†ï¼Œä¸ºäº†ç¬¦åˆ<code>MVC</code>çš„å¼€å‘æ¨¡å¼ï¼Œè¿™é‡Œæˆ‘ä»¬åˆ›å»ºäº†<code>controllers</code>æ–‡ä»¶å¤¹å¤„ç†æˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ï¼Œå…·ä½“ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">|-- batch-modify-filenames</span><br><span class="line">    â”œâ”€batch-front-end     # å‰ç«¯é¡µé¢</span><br><span class="line">    â”œâ”€utils               # å·¥å…·åº“</span><br><span class="line">    |   â””index.js</span><br><span class="line">    â”œâ”€uploads             # å­˜æ”¾ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶</span><br><span class="line">    â”œâ”€routes              # åç«¯è·¯ç”±ï¼ˆæ¥å£ï¼‰</span><br><span class="line">    |   â”œâ”€index.js        # è·¯ç”±å…¥å£æ–‡ä»¶</span><br><span class="line">    |   â””upload.js        # ä¸Šä¼ æ¥å£è·¯ç”±</span><br><span class="line">    â”œâ”€controllers         # æ¥å£æ§åˆ¶å™¨ï¼Œå¤„ç†æ®å…·ä½“æ“ä½œ</span><br><span class="line">    |      â””upload.js     # ä¸Šä¼ æ¥å£æ§åˆ¶å™¨</span><br><span class="line">    â”œâ”€package.json        # ä¾èµ–æ–‡ä»¶</span><br><span class="line">    â”œâ”€package-lock.json   # ä¾èµ–æ–‡ä»¶ç‰ˆæœ¬é”</span><br><span class="line">    â”œâ”€app.js              # å¯åŠ¨æ–‡ä»¶</span><br></pre></td></tr></table></figure></div><p>å› ä¸ºè¿™æ¬¡æˆ‘ä»¬çš„åç«¯åªæœ‰ä¸€ä¸ªæ¥å£ï¼Œè€Œ<code>koa-router</code>çš„ä½¿ç”¨ä¹Ÿååˆ†ç®€å•ï¼Œæ‰€ä»¥æˆ‘åªä¼šè®²æˆ‘è§‰å¾—ç›¸å¯¹æœ‰ç”¨çš„ä¸œè¥¿ ï¼ˆï¼›Â´Ğ´ ï½€ï¼‰ã‚ï¼ˆå› ä¸ºå†è®²ä¸‹å»ï¼Œç¯‡å¹…å°±å¤ªé•¿äº†ï¼‰</p><h2 id="è·¯ç”±çš„ä½¿ç”¨"><a href="#è·¯ç”±çš„ä½¿ç”¨" class="headerlink" title="è·¯ç”±çš„ä½¿ç”¨"></a>è·¯ç”±çš„ä½¿ç”¨</h2><p><code>koa-router</code>ä½¿ç”¨éå¸¸ç®€å•ï¼Œæˆ‘ä»¬åœ¨<code>routes/upload.js</code>ä¹¦å†™å¦‚ä¸‹ä»£ç ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥æ§åˆ¶å™¨</span></span><br><span class="line"><span class="keyword">const</span> &#123; upload &#125; = <span class="built_in">require</span>(<span class="string">"../controllers/upload"</span>);</span><br><span class="line"><span class="comment">// å¯¼å…¥è·¯ç”±</span></span><br><span class="line"><span class="keyword">const</span> Router = <span class="built_in">require</span>(<span class="string">"koa-router"</span>);</span><br><span class="line"><span class="comment">// è®¾ç½®è·¯ç”±å‰ç¼€ä¸º upload</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  prefix: <span class="string">"/upload"</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// postè¯·æ±‚ï¼Œè¯·æ±‚åœ°å€ä¸º ip + å‰ç¼€ + '/'ï¼Œå³'/upload/'</span></span><br><span class="line">router.post(<span class="string">"/"</span>, upload);</span><br><span class="line"><span class="comment">// å¯¼å‡ºè·¯ç”±</span></span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure></div><p>è¿™æ ·å­å°±æ˜¯å†™äº†ä¸€ä¸ªæ¥å£äº†ï¼Œä½ å¯ä»¥å…ˆå°†<code>upload</code>ç†è§£ä¸ºä¸€ä¸ªç©ºæ–¹æ³•ï¼Œä»€ä¹ˆéƒ½ä¸åšï¼Œåªè¿”å›<code>è¯·æ±‚æˆåŠŸ</code>,å³<code>ctx.body=&quot;è¯·æ±‚æˆåŠŸ&quot;</code></p><blockquote><p>ä¸Šæ–‡ä¸­é—´ä»¶é‚£é‡Œæœ‰è¯´ï¼Œ<code>upload</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸º<code>ä¸Šä¸‹æ–‡</code>ï¼Œä¸ç†è§£çš„ç¿»é˜…å‰é¢å†…å®¹ã€‚</p></blockquote><p>ä¸ºäº†æ–¹ä¾¿ä»¥åæˆ‘ä»¬å¯¼å…¥æ¥å£ï¼Œè€Œä¸éœ€è¦æ¯ä¸ª<code>route</code>éƒ½è°ƒç”¨ä¸€æ¬¡<code>app.use(route.routes()).use(route.allowedMethods())</code>ï¼Œæˆ‘åœ¨<code>routes/index.js</code>ï¼ˆå³å…¥å£æ–‡ä»¶ï¼‰ï¼Œä¹¦å†™äº†ä¸€ä¸ªæ–¹æ³•ï¼Œè®©ä»–å¯ä»¥è‡ªåŠ¨å¼•å…¥é™¤<code>index.js</code>çš„å…¶ä»–æ–‡ä»¶ï¼Œä¹‹åæˆ‘ä»¬åªéœ€è¦æ–°å»ºæ¥å£æ–‡ä»¶å°±å¯ä»¥è€Œä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å¯¼å…¥äº†ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; resolve &#125; = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"><span class="comment">// ç”¨äºè·å–æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">const</span> glob = <span class="built_in">require</span>(<span class="string">"glob"</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function">(<span class="params">app</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è·å–å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œé™¤äº†è‡ªå·±</span></span><br><span class="line">  glob.sync(resolve(__dirname, <span class="string">"!(index).js"</span>)).forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ·»åŠ è·¯ç”±</span></span><br><span class="line">    <span class="keyword">const</span> route = <span class="built_in">require</span>(item);</span><br><span class="line">    app.use(route.routes()).use(route.allowedMethods());</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><h2 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h2><h3 id="ä¸ºå•¥ä½¿ç”¨-koa-body-è€Œä¸æ˜¯-koa-bodyparserï¼Ÿ"><a href="#ä¸ºå•¥ä½¿ç”¨-koa-body-è€Œä¸æ˜¯-koa-bodyparserï¼Ÿ" class="headerlink" title="ä¸ºå•¥ä½¿ç”¨ koa-body è€Œä¸æ˜¯ koa-bodyparserï¼Ÿ"></a>ä¸ºå•¥ä½¿ç”¨ koa-body è€Œä¸æ˜¯ koa-bodyparserï¼Ÿ</h3><p>å› ä¸º<code>koa-bodyparser</code>ä¸æ”¯æŒæ–‡ä»¶ä¸Šä¼ ï¼Œæƒ³è¦æ–‡ä»¶ä¸Šä¼ è¿˜å¿…é¡»å®‰è£…<code>koa-multer</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œç›´æ¥ä½¿ç”¨<code>koa-body</code>ä¸€åŠ³æ°¸é€¸ã€‚</p><h3 id="æ–‡ä»¶ä¸Šä¼ ä¼˜åŒ–"><a href="#æ–‡ä»¶ä¸Šä¼ ä¼˜åŒ–" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ ä¼˜åŒ–"></a>æ–‡ä»¶ä¸Šä¼ ä¼˜åŒ–</h3><p>å¾ˆæ˜¾ç„¶ï¼Œæˆ‘ä»¬ä¸Šä¼ çš„æ–‡ä»¶éƒ½åœ¨<code>uploads</code>ç›®å½•ä¸‹ï¼Œå¦‚æœæ—¥ç§¯æœˆç´¯ï¼Œè¿™ä¸ªç›®å½•æ–‡ä»¶ä¼šè¶Šæ¥è¶Šå¤šã€‚ä½†åŒä¸€ç›®å½•ä¸‹æ–‡ä»¶æ•°é‡è¿‡å¤šçš„æ—¶å€™ï¼Œå°±ä¼šå½±å“æ–‡ä»¶è¯»å†™æ€§èƒ½ï¼Œè¿™æ ·å­æ˜¯æˆ‘ä»¬æœ€ä¸æƒ³çœ‹åˆ°çš„äº†ã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥ä¼˜åŒ–è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿå½“ç„¶æ˜¯æœ‰çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ–‡ä»¶ä¸Šä¼ å‰çš„è¿›è¡Œä¸€äº›æ“ä½œï¼Œæ¯”å¦‚<strong>æ ¹æ®æ—¥æœŸ</strong>åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç„¶åæŠŠæ–‡ä»¶ä¿å­˜åœ¨<strong>å½“å‰æ—¥æœŸ</strong>çš„æ–‡ä»¶å¤¹ä¸‹ã€‚</p><p>è¿™æ ·æ—¢å¯ä»¥ä¿è¯æ€§èƒ½ï¼Œåˆä¸ä¼šå¯¼è‡´æ–‡ä»¶å¤¹çš„å±‚æ¬¡è¿‡æ·±ã€‚è€Œ<code>koa-body</code>åˆšåˆ°åˆæœ‰æä¾›<code>onFileBegin</code>è¿™ä¸ªå‡½æ•°æ¥å®ç°æˆ‘ä»¬çš„éœ€æ±‚ï¼Œé—²è¯ä¸å¤šè¯´äº†ï¼Œå¼€å§‹å†™ä»£ç å§</p><blockquote><p>psï¼šä¸å»ºè®®å±‚æ¬¡å¤ªæ·±ï¼Œå¦‚æœå±‚æ¬¡è¿‡æ·±ä¹Ÿä¼šå½±å“æ€§èƒ½çš„- -</p></blockquote><p>ä¸ºäº†æ›´å¥½çš„å®ç°æˆ‘ä»¬çš„éœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦å°è£…äº†ä¸¤ä¸ªåŸºæœ¬çš„å·¥å…·æ–¹æ³•ã€‚</p><ol><li><p>æ ¹æ®æ—¥æœŸï¼Œç”Ÿæˆæ–‡ä»¶å¤¹åç§°</p></li><li><p>æ£€æŸ¥æ–‡ä»¶å¤¹è·¯å¾„æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶å¤¹</p></li></ol><p>å³<code>utils/index.js</code>ä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”Ÿæˆæ–‡ä»¶å¤¹åç§°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> getUploadDirName = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">  <span class="keyword">let</span> month = date.getMonth() + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;date.getFullYear()&#125;</span><span class="subst">$&#123;month&#125;</span><span class="subst">$&#123;date.getDate()&#125;</span>`</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç¡®å®šç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œ å¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºç›®å½•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>pathStr =&gt; æ–‡ä»¶å¤¹è·¯å¾„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> confirmPath = <span class="function">(<span class="params">dirname</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!fs.existsSync(dirname)) &#123;</span><br><span class="line">    <span class="keyword">if</span> (confirmPath(path.dirname(dirname))) &#123;</span><br><span class="line">      fs.mkdirSync(dirname);</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  getUploadDirName,</span><br><span class="line">  confirmPath,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><p>å†™å®Œå·¥å…·å‡½æ•°åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¤„ç†æˆ‘ä»¬çš„<code>koa-body</code>è¿™ä¸ªä¸­é—´ä»¶å•¦ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">"koa"</span>);</span><br><span class="line"><span class="comment">// uuidï¼Œç”Ÿæˆä¸é‡å¤çš„æ–‡ä»¶å</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">v4</span>: uuid &#125; = <span class="built_in">require</span>(<span class="string">"uuid"</span>);</span><br><span class="line"><span class="comment">// å·¥å…·å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> &#123; getUploadDirName, confirmPath &#125; = <span class="built_in">require</span>(<span class="string">"./utils/"</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa();</span><br><span class="line"><span class="comment">// è§£æpostè¯·æ±‚ï¼Œ</span></span><br><span class="line"><span class="keyword">const</span> koaBody = <span class="built_in">require</span>(<span class="string">"koa-body"</span>);</span><br><span class="line"><span class="comment">// å¤„ç†postè¯·æ±‚çš„ä¸­é—´ä»¶</span></span><br><span class="line">app.use(</span><br><span class="line">  koaBody(&#123;</span><br><span class="line">    multipart: <span class="literal">true</span>, <span class="comment">// æ”¯æŒæ–‡ä»¶ä¸Šä¼ </span></span><br><span class="line">    formidable: &#123;</span><br><span class="line">      maxFieldsSize: <span class="number">10</span> * <span class="number">1024</span> * <span class="number">1024</span>, <span class="comment">// è®¾ç½®ä¸Šä¼ æ–‡ä»¶å¤§å°æœ€å¤§é™åˆ¶ï¼Œé»˜è®¤2M</span></span><br><span class="line">      keepExtensions: <span class="literal">true</span>, <span class="comment">// ä¿æŒæ‹“å±•å</span></span><br><span class="line">      uploadDir: resolve(__dirname, <span class="string">`uploads`</span>),</span><br><span class="line">      <span class="comment">// æ–‡ä»¶ä¸Šä¼ å‰çš„ä¸€äº›è®¾ç½®æ“ä½œ</span></span><br><span class="line">      onFileBegin(name, file) &#123;</span><br><span class="line">        <span class="comment">// ç”Ÿæˆæ–‡ä»¶å¤¹</span></span><br><span class="line">        <span class="comment">// æœ€ç»ˆè¦ä¿å­˜åˆ°çš„æ–‡ä»¶å¤¹ç›®å½•</span></span><br><span class="line">        <span class="keyword">const</span> dirName = getUploadDirName();</span><br><span class="line">        <span class="comment">// ç”Ÿæˆæ–‡ä»¶å</span></span><br><span class="line">        <span class="keyword">const</span> fileName = uuid();</span><br><span class="line">        <span class="keyword">const</span> dir = resolve(__dirname, <span class="string">`uploads/<span class="subst">$&#123;dirName&#125;</span>`</span>);</span><br><span class="line">        <span class="comment">// æ£€æŸ¥æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨å¦‚æœä¸å­˜åœ¨åˆ™æ–°å»ºæ–‡ä»¶å¤¹</span></span><br><span class="line">        confirmPath(dir);</span><br><span class="line">        <span class="comment">// é‡æ–°è¦†ç›– file.path å±æ€§</span></span><br><span class="line">        file.path = join(dir, fileName);</span><br><span class="line">        <span class="comment">// ä¾¿äºåç»­ä¸­é—´ä»¶ä½¿ç”¨</span></span><br><span class="line">        <span class="comment">// app.context.uploadPath = `$&#123;dirName&#125;/$&#123;fileName&#125;`;</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></div><blockquote><p>psï¼š é’ˆå¯¹äº<code>uuid</code>çš„ç‰ˆæœ¬é—®é¢˜ï¼Œå»ºè®®çœ‹ï¼š<a href="https://www.zhihu.com/question/34876910" target="_blank" rel="noopener">UUID æ˜¯å¦‚ä½•ä¿è¯å”¯ä¸€æ€§çš„ï¼Ÿ</a>ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯<code>v4</code>ç‰ˆæœ¬ï¼Œä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ä¸€ä¸ªç‰ˆæœ¬ã€‚ã€‚</p></blockquote><h2 id="æ–‡ä»¶ä¸‹è½½"><a href="#æ–‡ä»¶ä¸‹è½½" class="headerlink" title="æ–‡ä»¶ä¸‹è½½"></a>æ–‡ä»¶ä¸‹è½½</h2><p>å’Œä¹‹å‰è®²çš„ä¸€æ ·ï¼Œåç«¯åªéœ€è¦è®¾ç½®<code>Content-Type</code>å’Œ<code>Content-Disposition</code>è¿™ä¸¤ä¸ªå“åº”å¤´å°±å¯ä»¥å®ç°ä¸‹è½½äº†ã€‚ä½†æ˜¯<code>archiver</code>è¿™ä¸ªåº“æ­é…<code>Koa</code>è¿”å›æµç»™å‰ç«¯ï¼Œç¡®å®è®©æˆ‘æªæ‰‹ä¸åŠã€‚</p><p>æˆ‘å‚è€ƒäº†å®˜æ–¹<a href="https://github.com/archiverjs/node-archiver/blob/master/examples/express.js" target="_blank" rel="noopener">Express è¿™ä¸ªä¾‹å­</a>ï¼Œä½†æ˜¯å‘ç°åœ¨<code>Koa</code>èº«ä¸Šä¸é¡¶ç”¨ï¼Œäºæ˜¯æˆ‘å°±- -ä¸€ç›´ç¿»<code>issue</code>ï¼Œå‘ç°å¾ˆå¤šäººå’Œæˆ‘æœ‰åŒæ ·çš„é—®é¢˜ï¼Œæœ€åç»ˆäºåœ¨<code>stackoverflow</code>æ‰¾åˆ°äº†æƒ³è¦çš„ç­”æ¡ˆã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>new Stream.PassThrough()</code>åˆ›å»ºä¸€ä¸ªåŒå‘æµï¼Œè®©<code>archiver</code>é€šè¿‡<code>pipe</code>æŠŠæ•°æ®æµå†™å…¥åˆ°<code>åŒå‘æµ</code>é‡Œï¼Œå†é€šè¿‡<code>Koa</code>è¿”å›ç»™å‰ç«¯å³å¯ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼ˆ<code>controllers/upload.js</code>ï¼‰ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‹ç¼©æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">const</span> archiver = <span class="built_in">require</span>(<span class="string">"archiver"</span>);</span><br><span class="line"><span class="keyword">const</span> Stream = <span class="built_in">require</span>(<span class="string">"stream"</span>);</span><br><span class="line"><span class="comment">// åˆ¤æ–­æ˜¯å¦ä¸ºæ•°ç»„ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™è½¬ä¸ºæ•°ç»„</span></span><br><span class="line"><span class="keyword">const</span> isArray = <span class="function">(<span class="params">arr</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="built_in">Array</span>.isArray(arr)) &#123;</span><br><span class="line">    arr = [arr];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ä¸Šä¼ æ¥å£</span></span><br><span class="line">exports.upload = <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">  <span class="comment">// è·å–ä¸Šä¼ çš„æ–‡ä»¶</span></span><br><span class="line">  <span class="keyword">let</span> &#123; files &#125; = ctx.request.files;</span><br><span class="line">  <span class="comment">// è·å–ä¸Šä¼ çš„æ–‡ä»¶å</span></span><br><span class="line">  <span class="keyword">let</span> filenames = isArray(ctx.request.body.name);</span><br><span class="line">  <span class="comment">// å°†æ–‡ä»¶è½¬ä¸ºæ•°ç»„</span></span><br><span class="line">  files = isArray(files);</span><br><span class="line">  <span class="comment">// è®¾ç½®å“åº”å¤´ï¼Œå‘Šè¯‰æµè§ˆå™¨æˆ‘è¦ä¸‹è½½çš„æ–‡ä»¶å«åšfiles.zip</span></span><br><span class="line">  <span class="comment">// attachmentç”¨äºæµè§ˆå™¨æ–‡ä»¶ä¸‹è½½</span></span><br><span class="line">  ctx.attachment(<span class="string">"files.zip"</span>);</span><br><span class="line">  <span class="comment">// è®¾ç½®å“åº”å¤´çš„ç±»å‹</span></span><br><span class="line">  ctx.set(&#123; <span class="string">"Content-Type"</span>: <span class="string">"application/zip"</span> &#125;);</span><br><span class="line">  <span class="comment">// å®šä¹‰ä¸€ä¸ªåŒå‘æµ</span></span><br><span class="line">  <span class="keyword">const</span> stream = <span class="keyword">new</span> Stream.PassThrough();</span><br><span class="line">  <span class="comment">// æŠŠæµè¿”å›ç»™å‰ç«¯</span></span><br><span class="line">  ctx.body = stream;</span><br><span class="line">  <span class="comment">// å‹ç¼©æˆzip</span></span><br><span class="line">  <span class="keyword">const</span> archive = archiver(<span class="string">"zip"</span>, &#123;</span><br><span class="line">    zlib: &#123; <span class="attr">level</span>: <span class="number">9</span> &#125;, <span class="comment">// Sets the compression level.</span></span><br><span class="line">  &#125;);</span><br><span class="line">  archive.pipe(stream);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; files.length; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> path = files[i].path;</span><br><span class="line">    archive.file(path, &#123; <span class="attr">name</span>: filenames[i] &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  archive.finalize();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><p>è¿™ä¸ªå¤„ç†ä¹Ÿç‰¹åˆ«ç®€å•ï¼Œå°±æ˜¯æ ¹æ®å‰ç«¯ä¼ è¿‡æ¥çš„æ–‡ä»¶åï¼ŒæŠŠæ–‡ä»¶é‡å‘½åå³å¯ã€‚æœ€åæˆ‘ä»¬æ•´ç†ä¸€ä¸‹ï¼Œ<code>app.js</code>çš„ä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; resolve, join &#125; = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">"koa"</span>);</span><br><span class="line"><span class="comment">// è§£æpostè¯·æ±‚ï¼Œ</span></span><br><span class="line"><span class="keyword">const</span> koaBody = <span class="built_in">require</span>(<span class="string">"koa-body"</span>);</span><br><span class="line"><span class="comment">// é™æ€æœåŠ¡å™¨</span></span><br><span class="line"><span class="keyword">const</span> serve = <span class="built_in">require</span>(<span class="string">"koa-static"</span>);</span><br><span class="line"><span class="comment">// uuidï¼Œç”Ÿæˆä¸é‡å¤çš„æ–‡ä»¶å</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">v4</span>: uuid &#125; = <span class="built_in">require</span>(<span class="string">"uuid"</span>);</span><br><span class="line"><span class="comment">// å·¥å…·å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> &#123; getUploadDirName, confirmPath &#125; = <span class="built_in">require</span>(<span class="string">"./utils/"</span>);</span><br><span class="line"><span class="comment">// åˆå§‹åŒ–è·¯ç”±</span></span><br><span class="line"><span class="keyword">const</span> initRoutes = <span class="built_in">require</span>(<span class="string">"./routes"</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤„ç†postè¯·æ±‚çš„ä¸­é—´ä»¶</span></span><br><span class="line">app.use(</span><br><span class="line">  koaBody(&#123;</span><br><span class="line">    multipart: <span class="literal">true</span>, <span class="comment">// æ”¯æŒæ–‡ä»¶ä¸Šä¼ </span></span><br><span class="line">    formidable: &#123;</span><br><span class="line">      maxFieldsSize: <span class="number">10</span> * <span class="number">1024</span> * <span class="number">1024</span>, <span class="comment">// è®¾ç½®ä¸Šä¼ æ–‡ä»¶å¤§å°æœ€å¤§é™åˆ¶ï¼Œé»˜è®¤2M</span></span><br><span class="line">      keepExtensions: <span class="literal">true</span>, <span class="comment">// ä¿æŒæ‹“å±•å</span></span><br><span class="line">      uploadDir: resolve(__dirname, <span class="string">`uploads`</span>),</span><br><span class="line">      <span class="comment">// æ–‡ä»¶ä¸Šä¼ å‰çš„ä¸€äº›è®¾ç½®æ“ä½œ</span></span><br><span class="line">      onFileBegin(name, file) &#123;</span><br><span class="line">        <span class="comment">// æœ€ç»ˆè¦ä¿å­˜åˆ°çš„æ–‡ä»¶å¤¹ç›®å½•</span></span><br><span class="line">        <span class="keyword">const</span> dirName = getUploadDirName();</span><br><span class="line">        <span class="keyword">const</span> fileName = uuid();</span><br><span class="line">        <span class="keyword">const</span> dir = resolve(__dirname, <span class="string">`uploads/<span class="subst">$&#123;dirName&#125;</span>`</span>);</span><br><span class="line">        <span class="comment">// æ£€æŸ¥æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨å¦‚æœä¸å­˜åœ¨åˆ™æ–°å»ºæ–‡ä»¶å¤¹</span></span><br><span class="line">        confirmPath(dir);</span><br><span class="line">        <span class="comment">// é‡æ–°è¦†ç›– file.path å±æ€§</span></span><br><span class="line">        file.path = join(dir, fileName);</span><br><span class="line">        <span class="comment">// ä¾¿äºåç»­ä¸­é—´ä»¶ä½¿ç”¨</span></span><br><span class="line">        <span class="comment">// app.context.uploadPath = `$&#123;dirName&#125;/$&#123;fileName&#125;`;</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br><span class="line"><span class="comment">// é™æ€æœåŠ¡å™¨</span></span><br><span class="line">app.use(</span><br><span class="line">  serve(resolve(__dirname, <span class="string">"public"</span>), &#123;</span><br><span class="line">    maxage: <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br><span class="line"><span class="comment">// åˆå§‹åŒ–è·¯ç”±</span></span><br><span class="line">initRoutes(app);</span><br><span class="line">app.listen(<span class="number">3000</span>, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`listen successd`</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`æœåŠ¡å™¨è¿è¡Œäº http://localhost:<span class="subst">$&#123;<span class="number">3000</span>&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><p>åˆ°è¿™é‡Œï¼ŒåŸºæœ¬ä¸Šæœ¬æ¬¡æœ¬ç« å°±ç»“æŸäº†ã€‚å½“ç„¶ï¼Œå…¶å®æˆ‘ä»¬å‰ç«¯ç•Œé¢è¿˜å¯ä»¥åšçš„æ›´åŠ å¯æ§ä¸€ç‚¹çš„ï¼Œæ¯”å¦‚æˆ‘å¯ä»¥ä¿®æ”¹<code>æ–°æ–‡ä»¶åˆ—è¡¨</code>çš„æŸä¸ªæ–‡ä»¶ï¼Œä½¿ä»–å¯ä»¥å•ç‹¬è‡ªå®šä¹‰è€Œä¸æ ¹æ®æˆ‘ä»¬çš„é…ç½®èµ°ï¼Œè€Œæ ¹æ®ç”¨æˆ·è¾“å…¥çš„è‡ªå®šä¹‰åç§°èµ°ã€‚ä¸è¿‡ï¼Œè¿™ä¸ªå°±ç•™ç»™å„ä½å½“ä½œå°ä½œä¸šå•¦<del>~</del></p><p>é¡ºä¾¿æä¸€å˜´ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯åœ¨æµè§ˆå™¨ä¸Šæ“ä½œçš„ï¼Œæ²¡æœ‰æ“ä½œæ–‡ä»¶çš„æƒé™ï¼Œæ‰€ä»¥å†™èµ·æ¥ä¼šæ¯”è¾ƒéº»çƒ¦- -å¦‚æœç”¨<code>Electron</code>ç¼–å†™çš„è¯ï¼Œå°±æ–¹ä¾¿å¤šäº†ã€‚ğŸ˜</p><blockquote><p><a href="https://gitee.com/gating/demo/tree/master/batch-modify-filenames" target="_blank" rel="noopener">gitee åœ°å€</a>,<a href="https://github.com/GATING/demo/tree/master/batch-modify-filenames" target="_blank" rel="noopener">github åœ°å€</a></p></blockquote><h1 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h1><p>æ„Ÿè°¢å„ä½è§‚ä¼—è€çˆ·çš„è§‚çœ‹ O(âˆ©_âˆ©)O å¸Œæœ›ä½ èƒ½æœ‰æ‰€æ”¶è· ğŸ˜</p>]]></content>
      
      
      <categories>
          
          <category> å°å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nodeå®ç°æ–‡ä»¶å±æ€§æ‰¹é‡ä¿®æ”¹(æ—¶é—´å±æ€§)</title>
      <link href="/2020-06-17/node%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E5%B1%9E%E6%80%A7%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9/"/>
      <url>/2020-06-17/node%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E5%B1%9E%E6%80%A7%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªæ–‡ä»¶çš„<code>åˆ›å»ºæ—¶é—´</code>å’Œ<code>ä¿®æ”¹æ—¶é—´</code>æ˜¯ç³»ç»Ÿè‡ªå·±è®¾å®šçš„ï¼Œæˆ‘ä»¬ä¸èƒ½ä¿®æ”¹è¯¥çš„ã€‚ä½†æˆ‘ä»¬æœ‰æ—¶ä¸ºäº†æŸç§ç‰¹æ®Šéœ€è¦ï¼Œä¸ºäº†ä¸è®©åˆ«äººä¸€çœ¼çœ‹å‡ºæ–‡ä»¶å·²ç»ç»™ä¿®æ”¹äº†ï¼Œæˆ‘ä»¬åˆéœ€è¦ä¿®æ”¹æ–‡ä»¶çš„<code>åˆ›å»ºæ—¶é—´</code>å’Œ<code>ä¿®æ”¹æ—¶é—´</code>ã€‚é‚£ä¹ˆå¦‚ä½•ä¿®æ”¹æ–‡ä»¶å¤¹æ—¶é—´ï¼Œå¦‚ä½•ä¿®æ”¹æ–‡ä»¶çš„åˆ›å»ºæ—¶é—´ï¼Œå¦‚ä½•æ‰¹é‡ä¿®æ”¹æ–‡ä»¶çš„<code>åˆ›å»ºæ—¶é—´</code>ã€<code>ä¿®æ”¹æ—¶é—´</code>å’Œ<code>è®¿é—®æ—¶é—´</code>å‘¢ï¼Ÿåˆ«ç€æ€¥ï¼Œæ¥ä¸‹æ¥å°±å¸¦ä½ è‡ªå·±ä¿®æ”¹ä»–ä»¬ã€‚æ‰€ä»¥ï¼Œé—²è¯ä¸å¤šè¯´å•¦ï¼Œå¼€å§‹å†™æˆ‘ä»¬çš„ä»£ç å•¦~~</p><blockquote><p>psï¼šå°å·¥å…·æ¨è<a href="https://wwa.lanzous.com/iNDjKdqzg9e" target="_blank" rel="noopener">NewFileTime</a>ï¼Œä»¥ä¸Šç®€è¿°æ‘˜æŠ„äº<code>NewFileTime</code></p></blockquote><h1 id="ç®€å•çš„æ­å»ºä¸€ä¸‹"><a href="#ç®€å•çš„æ­å»ºä¸€ä¸‹" class="headerlink" title="ç®€å•çš„æ­å»ºä¸€ä¸‹"></a>ç®€å•çš„æ­å»ºä¸€ä¸‹</h1><ul><li><p>æ–°å»ºä¸€ä¸ª <code>files</code> ç›®å½•</p></li><li><p>åˆå§‹åŒ–ä¸€ä¸ª<code>node</code>é¡¹ç›®å·¥ç¨‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure></div></li></ul><p>çœ‹åˆ°è¿™é‡Œä½ ä¼šå‘ç°ï¼Œå…¶å®æˆ‘æ²¡æœ‰å®‰è£…ä¾èµ–ï¼Œæ˜¯å› ä¸ºåŸç”Ÿçš„åº“æœ‰è¿™ä¸ªè‡ªå¸¦çš„åŠŸèƒ½å—ï¼Ÿè¯´æ˜¯ä¹Ÿè¡Œï¼Œè¯´ä¸æ˜¯ä¹Ÿè¡Œã€‚åŸç”Ÿçš„<code>utimes</code>ç›®å‰æ”¯æŒä¿®æ”¹æ–‡ä»¶çš„<code>ä¿®æ”¹æ—¶é—´</code>å’Œ<code>è®¿é—®æ—¶é—´</code>ï¼Œä¸æ”¯æŒä¿®æ”¹æ–‡ä»¶çš„<code>åˆ›å»ºæ—¶é—´</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å€ŸåŠ©ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“æ¥ä¿®æ”¹ã€‚</p><h2 id="ä¸ºä»€ä¹ˆä¸ç›´æ¥å®‰è£…è¿™ä¸ªç¬¬ä¸‰æ–¹åº“å‘¢ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¸ç›´æ¥å®‰è£…è¿™ä¸ªç¬¬ä¸‰æ–¹åº“å‘¢ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¸ç›´æ¥å®‰è£…è¿™ä¸ªç¬¬ä¸‰æ–¹åº“å‘¢ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¸ç›´æ¥å®‰è£…è¿™ä¸ªç¬¬ä¸‰æ–¹åº“å‘¢ï¼Ÿ</h2><p>å› ä¸ºè¿™ä¸ªåº“æœ‰äº›è®¸ç‰¹æ®Šï¼Œåˆ†ä¸¤ç§æƒ…å†µï¼Œä¸€ä¸ªæ˜¯ä½ç‰ˆæœ¬<code>Node</code>å¯ä»¥ç›´æ¥å®‰è£…ï¼Œåœ¨æˆ‘æœ¬æœºçš„<code>Node13</code>ä¸Šè¿è¡Œåˆ™ä¼šå¤±è´¥ã€‚å…·ä½“åŸå› å˜›ï¼Œå¯ä»¥çœ‹çœ‹ä¸‹æ–¹çš„é“¾æ¥</p><blockquote><p>ps: <a href="https://github.com/ronomon/utimes/pull/8" target="_blank" rel="noopener">åŸå›  + è§£å†³æ–¹æ¡ˆ</a></p></blockquote><p>æ‰€ä»¥ï¼Œåœ¨ä½ç‰ˆæœ¬çš„<code>Node</code>æˆ‘ä»¬å¯ä»¥ç›´æ¥<code>npm install @ronomon/utimes</code>ï¼Œè€Œåœ¨ç‰ˆæœ¬ç›¸å¯¹è¾ƒé«˜çš„åˆ™éœ€è¦<code>npm i https://github.com/Jule-/utimes.git#napi-migration</code>å•¦</p><p>è¿™é‡Œä¹Ÿæä¸€å˜´ï¼Œå¦‚æœ<code>@ronomon/utimes</code>å®‰è£…å¤±è´¥çš„è¯ï¼Œæ˜¯å› ä¸ºè¿™äº›<code>åŸç”ŸNode</code>æ‹“å±•æ˜¯éœ€è¦ç¼–è¯‘çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯èƒ½éœ€è¦å®‰è£…<code>windows-build-tools</code>ï¼Œå³ä»¥ç®¡ç†å‘˜èº«ä»½å¯åŠ¨<code>PowerShell</code>å¹¶è¿è¡Œï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install --global windows-build-tools</span><br></pre></td></tr></table></figure></div><p>å®‰è£…å®Œä¾èµ–ä¹‹åå°±å¯ä»¥æ­£å¼å†™æˆ‘ä»¬çš„ä»£ç å•¦ï¼Œå…¶å®è¿™ä¸ªä»£ç ç›¸å¯¹ç®€å•ï¼Œå°±æ˜¯ç›´æ¥è°ƒç”¨å®ƒçš„<code>api</code>å°±å¥½äº†ã€‚</p><h1 id="ç®€å•çš„ä½¿ç”¨ä¸€ä¸‹"><a href="#ç®€å•çš„ä½¿ç”¨ä¸€ä¸‹" class="headerlink" title="ç®€å•çš„ä½¿ç”¨ä¸€ä¸‹"></a>ç®€å•çš„ä½¿ç”¨ä¸€ä¸‹</h1><ul><li><p>æ–°å»ºä¸€ä¸ª<code>test-files</code>æ–‡ä»¶å¤¹</p></li><li><p>åœ¨<code>test-files</code>æ–‡ä»¶å¤¹æ–°å»º<code>1.txt</code>æ–‡ä»¶ä¾›æˆ‘ä»¬æµ‹è¯•</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-17/utimes02.jpg" data-fancybox="group" data-caption="1.txtæ–‡ä»¶" class="fancybox"><img alt="1.txtæ–‡ä»¶" title="1.txtæ–‡ä»¶" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-17/utimes02.jpg" class="lazyload"></a></p></li><li><p>ç¼–å†™å¦‚ä¸‹ä»£ç ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥ utimes</span></span><br><span class="line"><span class="keyword">const</span> &#123; utimes &#125; = <span class="built_in">require</span>(<span class="string">"@ronomon/utimes"</span>);</span><br><span class="line">utimes(</span><br><span class="line">  <span class="string">"./test-files/1.txt"</span>,</span><br><span class="line">  <span class="comment">// åˆ›å»ºæ—¶é—´</span></span><br><span class="line">  +<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"2010/01/01"</span>),</span><br><span class="line">  <span class="comment">// ä¿®æ”¹æ—¶é—´</span></span><br><span class="line">  +<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"2010/01/02"</span>),</span><br><span class="line">  <span class="comment">// è®¿é—®æ—¶é—´</span></span><br><span class="line">  +<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"2010/01/03"</span>),</span><br><span class="line">  (err) =&gt; &#123;</span><br><span class="line">    <span class="comment">//  ä¿®æ”¹æˆåŠŸçš„å›è°ƒ</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`success`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure></div></li><li><p>è¿è¡Œä»£ç ï¼Œ<code>node app.js</code>ï¼Œæ˜¯éƒ½å‘ç°æ—¥æœŸå‘ç”Ÿäº†æ”¹å˜å‘¢ï¼Ÿ</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-17/utimes02.jpg" data-fancybox="group" data-caption="1.txtæ–‡ä»¶" class="fancybox"><img alt="1.txtæ–‡ä»¶" title="1.txtæ–‡ä»¶" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-17/utimes02.jpg" class="lazyload"></a></p></li></ul><p>çœ‹åˆ°è¿™é‡Œä½ ä»¥ä¸ºæ˜¯ä¸æ˜¯å†™å®Œäº†ï¼Œå…¶å®ä¹Ÿå·®ä¸å¤šäº† ğŸ˜ï¼Œä¸è¿‡æˆ‘å½“ç„¶ä¸ä¼šè®©ä½ æ”¶è·è¿™ä¹ˆå°‘çš„ï¼Œè‡³å°‘æˆ‘ä»¬å¯ä»¥çœ‹çœ‹æˆ‘ä»¬è¿™ä¸ªæœ€æœ€æœ€ç®€å•çš„ä¾‹å­çš„ç¼ºç‚¹ï¼Œæ¯”å¦‚ä»£ç æ²¡æœ‰<code>Promise</code>åŒ–ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å°è£…ä¸€ä¸‹<code>utimes</code></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>path =&gt; è·¯å¾„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>btime =&gt; åˆ›å»ºæ—¶é—´ï¼Œä¸ä¼ å³ä¸ä¿®æ”¹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>mtime =&gt; ä¿®æ”¹æ—¶é—´ï¼Œä¸ä¼ å³ä¸ä¿®æ”¹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>atime =&gt; è®¿é—®æ—¶é—´ï¼Œä¸ä¼ å³ä¸ä¿®æ”¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> utimesPromise = <span class="function">(<span class="params">path, btime, mtime, atime</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    utimes(path, btime, mtime, atime, (err) =&gt; (err ? reject(err) : resolve()));</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><p>å½“ç„¶- -ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯<code>Node</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦å¸¸è§„çš„ç”¨<code>new Promise</code>å°è£…ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å†…ç½®çš„<code>util</code>è¿™ä¸ªå·¥å…·ä¸­çš„<code>promisify</code>æ–¹æ³•å°è£…å³å¯</p><blockquote><p>util.promisify æ˜¯åœ¨ node.js 8.x ç‰ˆæœ¬ä¸­æ–°å¢çš„ä¸€ä¸ªå·¥å…·ï¼Œç”¨äºå°†è€å¼çš„ <code>Error first callback</code> è½¬æ¢ä¸º <code>Promise</code> å¯¹è±¡ï¼Œè®©è€é¡¹ç›®æ”¹é€ å˜å¾—æ›´ä¸ºè½»æ¾ã€‚åœ¨å®˜æ–¹æ¨å‡ºè¿™ä¸ªå·¥å…·ä¹‹å‰ï¼Œæ°‘é—´å·²ç»æœ‰å¾ˆå¤šç±»ä¼¼çš„å·¥å…·äº†ï¼Œæ¯”å¦‚ <code>es6-promisify</code>ã€<code>thenify</code>ã€<code>bluebird.promisify</code>ã€‚ä»¥åŠå¾ˆå¤šå…¶ä»–ä¼˜ç§€çš„å·¥å…·ï¼Œéƒ½æ˜¯å®ç°äº†è¿™æ ·çš„åŠŸèƒ½ï¼Œå¸®åŠ©æˆ‘ä»¬åœ¨å¤„ç†è€é¡¹ç›®çš„æ—¶å€™ï¼Œä¸å¿…è´¹ç¥å°†å„ç§ä»£ç ä½¿ç”¨ <code>Promise</code> å†é‡æ–°å®ç°ä¸€éã€‚</p></blockquote><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬çš„å°è£…åˆå˜å¾—æ›´åŠ ç®€å•äº†ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; promisify &#125; = <span class="built_in">require</span>(<span class="string">"util"</span>);</span><br><span class="line"><span class="keyword">const</span> utimesPromise = promisify(utimes);</span><br></pre></td></tr></table></figure></div><p>ä¹‹å‰çš„ä»£ç å°±å¯ä»¥æ”¹å†™æˆä¹‹å‰æˆ‘ä»¬é‚£æ ·çš„è‡ªæ‰§è¡Œ<code>Async Function</code>äº†ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line">(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">await</span> utimesPromise(</span><br><span class="line">    <span class="string">"./test-files/1.txt"</span>,</span><br><span class="line">    <span class="comment">// åˆ›å»ºäº‹ä»¶</span></span><br><span class="line">    +<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"2010/01/01"</span>),</span><br><span class="line">    <span class="comment">// ä¿®æ”¹æ—¶é—´</span></span><br><span class="line">    +<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"2010/01/02"</span>),</span><br><span class="line">    <span class="comment">// è®¿é—®æ—¶é—´</span></span><br><span class="line">    +<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"2010/01/03"</span>)</span><br><span class="line">  );</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></div><p>å†™åˆ°è¿™é‡Œï¼Œä½ ä¼šå‘ç°å…¶å®æˆ‘ä»¬æ ¹æœ¬æ²¡æœ‰åšæ‰¹é‡ä¿®æ”¹ï¼Œæ˜¯å› ä¸ºæœ‰äº†ä¹‹å‰çš„ç»éªŒï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡<code>glob</code>è¿™ä¸ªå·¥å…·è·å–æ‰€æœ‰çš„è·¯å¾„ï¼Œæ ¹æœ¬ä¸è¦æˆ‘ä»¬æ“å¿ƒï¼Œå†™èµ·æ¥ä¹Ÿååˆ†ç®€å•ï¼Œæ‰€ä»¥æˆ‘æ‰“ç®—æœ€åå†æ¥å†™</p><ul><li><p>å®‰è£…<code>glob</code></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i glob -S</span><br></pre></td></tr></table></figure></div></li><li><p>å¤šå»ºå‡ ä¸ªæ–‡ä»¶ç”¨äºæµ‹è¯•æˆ‘ä»¬çš„ä»£ç </p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-17/utimes03.jpg" data-fancybox="group" data-caption="åˆ›å»ºæ–‡ä»¶" class="fancybox"><img alt="åˆ›å»ºæ–‡ä»¶" title="åˆ›å»ºæ–‡ä»¶" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-17/utimes03.jpg" class="lazyload"></a></p><p>å¾—å‡ºä¸‹é¢åˆ—è¡¨ï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-17/utimes04.jpg" data-fancybox="group" data-caption="åˆ›å»ºæ–‡ä»¶" class="fancybox"><img alt="åˆ›å»ºæ–‡ä»¶" title="åˆ›å»ºæ–‡ä»¶" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-17/utimes04.jpg" class="lazyload"></a></p></li><li><p>ä¿®æ”¹æˆ‘ä»¬çš„ä»£ç ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; utimes &#125; = <span class="built_in">require</span>(<span class="string">"@ronomon/utimes"</span>);</span><br><span class="line"><span class="keyword">const</span> glob = <span class="built_in">require</span>(<span class="string">"glob"</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; promisify &#125; = <span class="built_in">require</span>(<span class="string">"util"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>path =&gt; è·¯å¾„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>btime =&gt; åˆ›å»ºæ—¶é—´ï¼Œä¸ä¼ å³ä¸ä¿®æ”¹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>mtime =&gt; ä¿®æ”¹æ—¶é—´ï¼Œä¸ä¼ å³ä¸ä¿®æ”¹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>atime =&gt; è®¿é—®æ—¶é—´ï¼Œä¸ä¼ å³ä¸ä¿®æ”¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> utimesPromise = promisify(utimes);</span><br><span class="line"></span><br><span class="line">(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> paths = glob.sync(<span class="string">"./test-files/**"</span>);</span><br><span class="line">  <span class="keyword">const</span> len = paths.length;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">await</span> utimesPromise(</span><br><span class="line">      paths[i],</span><br><span class="line">      +<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"2010/01/01"</span>),</span><br><span class="line">      +<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"2010/01/02"</span>),</span><br><span class="line">      +<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"2010/01/04"</span>)</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></div></li><li><p>å¾—å‡ºç»“æœ</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-17/utimes05.jpg" data-fancybox="group" data-caption="è¿è¡Œç»“æœ" class="fancybox"><img alt="è¿è¡Œç»“æœ" title="è¿è¡Œç»“æœ" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-17/utimes05.jpg" class="lazyload"></a></p></li></ul><p>è¿™æ ·å­å°±é€’å½’äº†æˆ‘ä»¬æ‰€æœ‰çš„æ–‡ä»¶å¤¹è·Ÿå­æ–‡ä»¶äº†è¿›è¡Œä¿®æ”¹äº†ï¼Œæœ¬æ¥æƒ³ç€åœ¨åŠ è½½åå­—ä¿®æ”¹çš„ï¼Œä½†è‹¦äº- -æ²¡æœ‰ç•Œé¢ï¼Œç¯‡å¹…ä¹Ÿè¿‡é•¿ï¼Œå°±ç•™ç€è¿‡å‡ å¤©å†å†™äº†ã€‚</p><blockquote><p><a href="https://gitee.com/gating/demo/tree/master/files" target="_blank" rel="noopener">gitee åœ°å€</a>,<a href="https://github.com/GATING/demo/tree/master/files" target="_blank" rel="noopener">github åœ°å€</a></p></blockquote><h1 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h1><p>æ„Ÿè°¢å„ä½è§‚ä¼—è€çˆ·çš„è§‚çœ‹ O(âˆ©_âˆ©)O å¸Œæœ›ä½ èƒ½æœ‰æ‰€æ”¶è· ğŸ˜</p>]]></content>
      
      
      <categories>
          
          <category> å°å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nodeå®ç°æ‰¹é‡ä¿®æ”¹å›¾ç‰‡å°ºå¯¸</title>
      <link href="/2020-06-12/node%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E5%B0%BA%E5%AF%B8%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9/"/>
      <url>/2020-06-12/node%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E5%B0%BA%E5%AF%B8%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å¤§å®¶åœ¨å·¥ä½œä¸­è‚¯å®šæœ‰æ²¡æœ‰é‡åˆ°è¿‡å›¾ç‰‡å°ºå¯¸å’Œæˆ‘ä»¬è¦æ±‚çš„å°ºå¯¸ä¸ä¸€è‡´çš„æƒ…å†µå§ï¼Ÿé€šå¸¸æˆ‘ä»¬ä¼šåœ¨ç½‘ä¸Šæ‰¾ä¸€ä¸‹æ‰¾åœ¨çº¿çš„æˆ–è€…ä¸‹è½½ä¸€ä¸ªå°å·¥å…·ï¼Œå†æˆ–è€…é€šè¿‡<code>ps</code>çš„æ‰¹å¤„ç†è§£å†³ã€‚ä½†æ˜¯ï¼Œä½œä¸º<code>ç¨‹åºçŒ¿</code>ï¼Œå½“ç„¶è¿˜æ˜¯é€šè¿‡ä»£ç æ¥è§£å†³è¿™ç§å°é—®é¢˜å•¦ã€‚æ‰€ä»¥ï¼Œé—²è¯ä¸å¤šè¯´å•¦ï¼Œå¼€å§‹å†™æˆ‘ä»¬çš„ä»£ç å•¦~~</p><h1 id="ç®€å•çš„æ­å»ºä¸€ä¸‹"><a href="#ç®€å•çš„æ­å»ºä¸€ä¸‹" class="headerlink" title="ç®€å•çš„æ­å»ºä¸€ä¸‹"></a>ç®€å•çš„æ­å»ºä¸€ä¸‹</h1><ul><li><p>æ–°å»ºä¸€ä¸ª <code>canvas-image-resize</code> ç›®å½•</p></li><li><p>åˆå§‹åŒ–ä¸€ä¸ª<code>node</code>é¡¹ç›®å·¥ç¨‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure></div></li><li><p>å®‰è£…ä¾èµ–ï¼Œè¿™é‡Œä¸»è¦ç”¨åˆ°äº†ä¸‰ä¸ªä¾èµ–ï¼Œåˆ†åˆ«æ˜¯<code>å¤„ç†å›¾ç‰‡</code>ã€<code>æ‰¹é‡å¤„ç†æ–‡ä»¶</code>ã€<code>å‹ç¼©æˆzipæ–‡ä»¶</code></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i canvas glob archiver -S</span><br></pre></td></tr></table></figure></div><p>æ²¡é”™ï¼Œè¿™é‡Œæˆ‘ä»¬åˆç”¨åˆ°äº†<code>canvas</code>è¿™ä¸ªåº“ï¼ŒæƒŠä¸æƒŠå–œï¼Œæ„ä¸æ„å¤– ğŸ˜‚</p></li></ul><h1 id="ç®€å•çš„ä½¿ç”¨ä¸€ä¸‹"><a href="#ç®€å•çš„ä½¿ç”¨ä¸€ä¸‹" class="headerlink" title="ç®€å•çš„ä½¿ç”¨ä¸€ä¸‹"></a>ç®€å•çš„ä½¿ç”¨ä¸€ä¸‹</h1><p>åŒæ ·ï¼Œæœ‰äº†å‰é¢æˆ‘ä»¬ä½¿ç”¨<code>canvas</code>çš„ç»éªŒï¼Œä¹¦å†™è¿™ä¸ªä»£ç åº”è¯¥é—®é¢˜ä¹Ÿä¸å¤§ï¼Œä¸»è¦æ˜¯å¯¹<code>api</code>çš„ç†Ÿç»ƒé—®é¢˜</p><p>æŸ¥çœ‹æ–‡æ¡£æˆ‘ä»¬ä¸éš¾å‘ç°ï¼Œ<code>drawImage</code>çš„ç¬¬å››å’Œç¬¬äº”ä¸ªå‚æ•°å°±æ˜¯è®¾ç½®å›¾ç‰‡çš„å®½é«˜ï¼ŒçŸ¥é“è¿™ä¸ªä¹‹åï¼Œæˆ‘ä»¬ä¹¦å†™ä»£ç å°±ç®€å•ä¸å°‘äº†</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">drawImage(image: Canvas|Image, <span class="attr">dx</span>: number, <span class="attr">dy</span>: number, <span class="attr">dw</span>: number, <span class="attr">dh</span>: number): <span class="keyword">void</span></span><br></pre></td></tr></table></figure></div><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬çš„ä»£ç å¤§æ¦‚å¦‚ä¸‹ï¼Œ</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºå†™å…¥æµ</span></span><br><span class="line"><span class="keyword">const</span> &#123; createWriteStream &#125; = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"><span class="comment">// è·å–æ–‡ä»¶å</span></span><br><span class="line"><span class="keyword">const</span> &#123; basename &#125; = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"><span class="comment">// å‹ç¼©æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">const</span> archiver = <span class="built_in">require</span>(<span class="string">"archiver"</span>);</span><br><span class="line"><span class="comment">// å¯¼å…¥canvasåº“ï¼Œç”¨äºè£å‰ªå›¾ç‰‡</span></span><br><span class="line"><span class="keyword">const</span> &#123; createCanvas, loadImage &#125; = <span class="built_in">require</span>(<span class="string">"canvas"</span>);</span><br><span class="line"><span class="comment">// æ‰¹é‡è·å–è·¯å¾„</span></span><br><span class="line"><span class="keyword">const</span> glob = <span class="built_in">require</span>(<span class="string">"glob"</span>);</span><br><span class="line">!<span class="function">(<span class="params"><span class="keyword">async</span> (</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> paths = glob.sync(<span class="string">"./images/*"</span>);</span><br><span class="line">  <span class="comment">// å‹ç¼©æˆzip</span></span><br><span class="line">  <span class="keyword">const</span> archive = archiver(<span class="string">"zip"</span>, &#123;</span><br><span class="line">    zlib: &#123; <span class="attr">level</span>: <span class="number">9</span> &#125;, <span class="comment">// Sets the compression level.</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// è¾“å‡ºåˆ°å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„ image-resize.zip</span></span><br><span class="line">  <span class="keyword">const</span> output = createWriteStream(__dirname + <span class="string">"/image-resize.zip"</span>);</span><br><span class="line">  archive.pipe(output);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; paths.length; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> path = paths[i];</span><br><span class="line">    <span class="keyword">const</span> image = <span class="keyword">await</span> loadImage(path);</span><br><span class="line">    <span class="keyword">const</span> &#123; width, height &#125; = image;</span><br><span class="line">    <span class="keyword">const</span> options = [width, height].map(<span class="function">(<span class="params">item</span>) =&gt;</span> item / <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">const</span> canvas = createCanvas(...options);</span><br><span class="line">    <span class="keyword">const</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">    ctx.drawImage(image, <span class="number">0</span>, <span class="number">0</span>, ...options);</span><br><span class="line">    archive.append(canvas.toBuffer(), &#123; <span class="attr">name</span>: <span class="string">`<span class="subst">$&#123;basename(path)&#125;</span>`</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  archive.finalize();</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></div><p>ä»ä¸Šé¢ä»£ç å¯ä»¥çœ‹å‡ºï¼Œè¿™é‡Œæˆ‘åªæ˜¯å¯¹å®½é«˜è¿›è¡Œäº†ç¼©æ”¾ä¸€å€ï¼Œæ²¡æœ‰åšæ›´å¤šçš„é…ç½®ï¼Œä¸ºäº†ä»£ç çš„å¥å£®æ€§ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸‹æˆ‘ä»¬çš„<code>options</code>ï¼Œä½¿å¾—æ•´ä¸ªç¨‹åºå¯ä»¥è‡ªå®šä¹‰å®½é«˜ã€å¯ä»¥æ ¹æ®å®½åº¦è¿›è¡Œç¼©æ”¾ã€æ ¹æ®é«˜åº¦è¿›è¡Œç¼©æ”¾</p><p>å®šä¹‰ä¸€ä¸‹æˆ‘ä»¬å¯é…ç½®çš„å‚æ•°ï¼ŒåŸºæœ¬é…ç½®æ˜¯è¿™æ ·çš„:</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// è‡ªå®šä¹‰å®½åº¦ï¼Œä¼ ä¸€ä¸ªæ ¹æ®å®½åº¦ç­‰æ¯”ç¼©æ”¾</span></span><br><span class="line">  width: <span class="string">""</span>,</span><br><span class="line">  <span class="comment">// è‡ªå®šä¹‰é«˜åº¦ï¼Œä¼ ä¸€ä¸ªæ ¹æ®é«˜åº¦ç­‰æ¯”ç¼©æ”¾</span></span><br><span class="line">  height: <span class="string">""</span>,</span><br><span class="line">  <span class="comment">// æ ¹æ®å®½åº¦ç­‰æ¯”ç¼©æ”¾ï¼Œä¼˜å…ˆçº§æ›´é«˜</span></span><br><span class="line">  isWidth: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">// æ ¹æ®é«˜åº¦ç­‰æ¯”ç¼©æ”¾</span></span><br><span class="line">  isHeight: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">// å®½é«˜æ•´ä½“ç¼©æ”¾</span></span><br><span class="line">  scale: <span class="number">1</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><blockquote><p>psï¼šå› ä¸ºæˆ‘ä»¬æš‚æ—¶æ²¡æœ‰å›¾å½¢ç•Œé¢ï¼Œæ‰€ä»¥å°±å®šä¹‰ä¸€ä¸ª<code>config.js</code>æ¥æ¨¡æ‹Ÿæˆ‘ä»¬çš„æ’ä»¶å•¦</p></blockquote><p>æ‰€ä»¥ï¼Œåœ¨å½“å‰ç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ª<code>config.js</code>ï¼Œä¹¦å†™ä¸Šæˆ‘ä»¬é‚£äº›é…ç½®ï¼Œç„¶ååœ¨<code>app.js</code>å¯¼å…¥ä¸‹ï¼ŒåŸºæœ¬ä»£ç å°±å˜æˆäº†å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ....</span></span><br><span class="line"><span class="comment">// å¯¼å…¥é…ç½®æ–‡ä»¶ï¼ˆç”¨æˆ·ä¼ è¿‡æ¥çš„é…ç½®ï¼‰</span></span><br><span class="line"><span class="keyword">const</span> config = <span class="built_in">require</span>(<span class="string">"./config"</span>);</span><br><span class="line"><span class="comment">// æ ¹æ®é…ç½®è·å–å®½é«˜</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getOptions</span>(<span class="params">options, config</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ä¹¦å†™é…ç½®ç›¸å…³çš„ä»£ç ï¼Œé»˜è®¤ç¼©æ”¾ä¸¤å€</span></span><br><span class="line">  <span class="keyword">return</span> options.map(<span class="function">(<span class="params">item</span>) =&gt;</span> item / <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line">!<span class="function">(<span class="params"><span class="keyword">async</span> (</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//  ....</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; paths.length; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> path = paths[i];</span><br><span class="line">    <span class="keyword">const</span> image = <span class="keyword">await</span> loadImage(path);</span><br><span class="line">    <span class="keyword">const</span> &#123; width, height &#125; = image;</span><br><span class="line">    <span class="keyword">const</span> options = getOptions(&#123; width, height &#125;, config);</span><br><span class="line">    <span class="keyword">const</span> canvas = createCanvas(...options);</span><br><span class="line">    <span class="keyword">const</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">    ctx.drawImage(image, <span class="number">0</span>, <span class="number">0</span>, ...options);</span><br><span class="line">    archive.append(canvas.toBuffer(), &#123; <span class="attr">name</span>: <span class="string">`<span class="subst">$&#123;basename(path)&#125;</span>`</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//  ....</span></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></div><p>ç„¶åæ ¹æ®æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶æ¥å†™é€»è¾‘çš„è¯ï¼Œå¤§æ¦‚ä¼šå‡ºç°å¦‚ä¸‹é€»è¾‘ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®é…ç½®è·å–å®½é«˜</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getOptions</span>(<span class="params">options, config</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [sourceWidth, sourceHeight] = options;</span><br><span class="line">  <span class="keyword">const</span> &#123; width, height, isWidth, isHeight, scale &#125; = config;</span><br><span class="line">  <span class="keyword">if</span> (width === <span class="number">0</span> || height === <span class="number">0</span>) <span class="keyword">return</span> [<span class="number">0</span>, <span class="number">0</span>];</span><br><span class="line">  <span class="keyword">if</span> (width &amp;&amp; height) &#123;</span><br><span class="line">    <span class="keyword">if</span> (isWidth) &#123;</span><br><span class="line">      <span class="keyword">return</span> [width, (sourceHeight * width * scale) / sourceWidth];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (isHeight) &#123;</span><br><span class="line">      <span class="keyword">return</span> [(sourceWidth * height * scale) / sourceHeight, height];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> [width / scale, height / scale];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (width &amp;&amp; !height) &#123;</span><br><span class="line">    <span class="keyword">return</span> [width, (sourceHeight * width * scale) / sourceWidth];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (height &amp;&amp; !width) &#123;</span><br><span class="line">    <span class="keyword">return</span> [(sourceWidth * height * scale) / sourceHeight, height];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> options.map(<span class="function">(<span class="params">item</span>) =&gt;</span> item / scale);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>å‘ç°äº†å—ï¼Ÿæ˜¯ä¸æ˜¯æ„Ÿè§‰å¾ˆä¹±ï¼Ÿå°±ç®—æˆ‘ä»¬æŠŠä¸€äº›å…¬æœ‰éƒ¨åˆ†æå–å‡ºæ¥æ”¹å†™å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®é…ç½®è·å–å®½é«˜</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getOptions</span>(<span class="params">options, config</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [sourceWidth, sourceHeight] = options;</span><br><span class="line">  <span class="keyword">const</span> &#123; width, height, isWidth, isHeight, scale &#125; = config;</span><br><span class="line">  <span class="keyword">if</span> (width === <span class="number">0</span> || height === <span class="number">0</span>) <span class="keyword">return</span> [<span class="number">0</span>, <span class="number">0</span>];</span><br><span class="line">  <span class="keyword">const</span> widthOfOptions = [</span><br><span class="line">    width * scale,</span><br><span class="line">    (sourceHeight * width * scale) / sourceWidth,</span><br><span class="line">  ];</span><br><span class="line">  <span class="keyword">const</span> heightOfOptions = [</span><br><span class="line">    (sourceWidth * height * scale) / sourceHeight,</span><br><span class="line">    height * scale,</span><br><span class="line">  ];</span><br><span class="line">  <span class="keyword">if</span> (width &amp;&amp; height) &#123;</span><br><span class="line">    <span class="keyword">if</span> (isWidth) &#123;</span><br><span class="line">      <span class="keyword">return</span> widthOfOptions;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (isHeight) &#123;</span><br><span class="line">      <span class="keyword">return</span> heightOfOptions;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> [width / scale, height / scale];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (width &amp;&amp; !height) &#123;</span><br><span class="line">    <span class="keyword">return</span> widthOfOptions;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (height &amp;&amp; !width) &#123;</span><br><span class="line">    <span class="keyword">return</span> heightOfOptions;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> options.map(<span class="function">(<span class="params">item</span>) =&gt;</span> item / scale);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>å…¶å®å°±ç®—ç»è¿‡æˆ‘ä»¬è¿™ä¹ˆä¼˜åŒ–ï¼Œå…¶å®çœ‹èµ·æ¥ä¹Ÿä¸æ˜¯ç‰¹åˆ«ä¼˜é›…ï¼Œä¸çŸ¥é“å¤§å®¶æ˜¯å¦è¿˜è®°å¾—æˆ‘ä¹‹å‰çš„ä¸€ç¯‡æ–‡ç«  <a href="https://gatings.cn/2020-01-17/%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BAWindow%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/#%E4%BD%BF%E7%94%A8Map%E4%BB%A3%E6%9B%BFif-else">ä»é›¶æ­å»º Window å‰ç«¯å¼€å‘ç¯å¢ƒ</a>ï¼Œè¿™é‡Œè¯´è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>ä½¿ç”¨ Map ä»£æ›¿ if/else</code>ï¼Œè®©æˆ‘ä»¬çš„ä»£ç å˜å¾—æ›´ä¼˜é›…ï¼Œå¯è¯»æ€§ä¹Ÿæ›´å¥½ã€‚æ‰€ä»¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±é€šè¿‡ <code>Map</code> æ¥æ”¹å†™æˆ‘ä»¬çš„ä»£ç å§</p><blockquote><p>ps: å¦‚æœåˆ¤æ–­ç®€å•ï¼Œå…¶å®ç”¨<code>{}</code>å¯¹è±¡ä¹Ÿå¯ä»¥ï¼Œè¿™é‡Œåªæ˜¯ç”¨<code>Map</code>åšä¸ªå»¶ç”³</p></blockquote><h2 id="æ€è€ƒä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆç”¨-Map-æ›´å¥½å‘¢ï¼Ÿ"><a href="#æ€è€ƒä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆç”¨-Map-æ›´å¥½å‘¢ï¼Ÿ" class="headerlink" title="æ€è€ƒä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆç”¨ Map æ›´å¥½å‘¢ï¼Ÿ"></a>æ€è€ƒä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆç”¨ Map æ›´å¥½å‘¢ï¼Ÿ</h2><p>è¯´åˆ°è¿™ä¸ªï¼Œå°±ä¸å¾—ä¸è¯´ Map å¯¹è±¡å’Œ Object çš„åŒºåˆ«äº†ï¼Œä»–ä¸¤æœ‰ä¸å°‘è¯­æ³•ä¸Šçš„åŒºåˆ«ï¼Œæ¯”å¦‚<code>Map</code>è·å–å€¼éœ€è¦<code>get(key)</code>,è®¾ç½®å€¼éœ€è¦<code>set(key,value)</code>ï¼Œä½†æ˜¯è¿™äº›åŒºåˆ«ä¸åœ¨æˆ‘ä»¬è®¨è®ºçš„èŒƒå›´å†…ï¼Œæˆ‘ä»¬è¯´è¯´ä»–ä¸¤æœ€ä¸»è¦ä¹Ÿæ˜¯æœ€é‡è¦çš„åŒºåˆ«ï¼š</p><ul><li>ä¸€ä¸ªå¯¹è±¡çš„é”®åªèƒ½æ˜¯å­—ç¬¦ä¸²æˆ–è€… Symbolsï¼Œä½†ä¸€ä¸ª Map çš„é”®å¯ä»¥æ˜¯ä»»æ„å€¼ã€‚</li><li>Map è‡ªèº«æœ‰ size å±æ€§ï¼Œå¯ä»¥è‡ªå·±ç»´æŠ¤è‡ªå·±çš„ sizeï¼Œè€Œå¯¹è±¡çš„é”®å€¼å¯¹ä¸ªæ•°åªèƒ½æ‰‹åŠ¨ç¡®è®¤ã€‚</li></ul><h2 id="ä¼˜åŒ–ä»£ç "><a href="#ä¼˜åŒ–ä»£ç " class="headerlink" title="ä¼˜åŒ–ä»£ç "></a>ä¼˜åŒ–ä»£ç </h2><p>çŸ¥é“äº†ä»–ä¸¤çš„åŒºåˆ«åï¼Œæˆ‘ä»¬å°±å¯ä»¥è¾¹å†™ä»£ç å•¦~~åˆšåˆšè¯´åˆ°ï¼Œ<code>Map</code>çš„<code>key</code>å¯æ˜¯æ˜¯ä»»æ„å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æ­£åˆ™ç±»å‹(<code>RegExp</code>)æ¥ä½œä¸ºæˆ‘ä»¬çš„<code>key</code>äº†ï¼Œè€Œæ­£æ˜¯å› ä¸ºæœ‰äº†æ­£åˆ™ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„åˆ¤æ–­å°±æœ‰äº†æ— é™å¯èƒ½ï¼Œå¯ä»¥é€‚åº”å„ç§æƒ…å†µã€‚</p><h3 id="æ€è€ƒä¸€ä¸‹æ€ä¹ˆé€šè¿‡æ­£åˆ™æ¥å®ç°æˆ‘ä»¬çš„ä»£ç å‘¢ï¼Ÿ"><a href="#æ€è€ƒä¸€ä¸‹æ€ä¹ˆé€šè¿‡æ­£åˆ™æ¥å®ç°æˆ‘ä»¬çš„ä»£ç å‘¢ï¼Ÿ" class="headerlink" title="æ€è€ƒä¸€ä¸‹æ€ä¹ˆé€šè¿‡æ­£åˆ™æ¥å®ç°æˆ‘ä»¬çš„ä»£ç å‘¢ï¼Ÿ"></a>æ€è€ƒä¸€ä¸‹æ€ä¹ˆé€šè¿‡æ­£åˆ™æ¥å®ç°æˆ‘ä»¬çš„ä»£ç å‘¢ï¼Ÿ</h3><p>é¦–å…ˆæˆ‘ä»¬å¯ä»¥å…ˆè§‚å¯Ÿä¸‹æˆ‘ä»¬ä¹‹å‰<code>if/else</code>è¿™ä¸ªç‰ˆæœ¬çš„ä»£ç ï¼Œæœ€å…ˆåˆ¤æ–­çš„æ˜¯ä¸æ˜¯æœ‰æ²¡æœ‰å®½é«˜ï¼Œå³å®½é«˜æ˜¯å¦ä¸º 0ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¿™ä¸ªæ¡ä»¶æŠŠæˆ‘ä»¬çš„åˆ¤æ–­æ”¹ä¸ºå¸ƒå°”å€¼ï¼Œå› ä¸º<code>js</code>æ˜¯å¼±ç±»å‹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥ç”¨<code>0</code>æˆ–è€…<code>1</code>æ¥è¡¨ç¤ºäº†ï¼Œåˆå› ä¸ºè¿™é‡Œå­˜åœ¨ä¸ä¼ åˆ™æ ¹æ®ä¼ çš„å€¼ç¼©æ”¾çš„æƒ…å†µï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é¢å¤–åˆ¤æ–­å½“ä»–ä¸º<code>ç©ºå­—ç¬¦ä¸²</code>æ—¶å–<code>01</code>ä¹‹å¤–çš„æ•°å­—ï¼Œè¿™é‡Œæˆ‘å–çš„æ˜¯<code>2</code>ã€‚</p><p>è¿™é‡Œå¯èƒ½æœ‰ç‚¹ç»•å£ï¼Œæˆ‘ä¸¾ä¸¤ä¸ªä¾‹å­å¤§å®¶å¯èƒ½å°±å°±æ‡‚äº†ï¼Œå‡å¦‚æˆ‘ä»¬ä¼ å…¥çš„æ•°æ®ä¸ºé»˜è®¤æ•°æ®ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// è‡ªå®šä¹‰å®½åº¦ï¼Œä¼ ä¸€ä¸ªæ ¹æ®å®½åº¦ç­‰æ¯”ç¼©æ”¾</span></span><br><span class="line">  width: <span class="string">""</span>,</span><br><span class="line">  <span class="comment">// è‡ªå®šä¹‰é«˜åº¦ï¼Œä¼ ä¸€ä¸ªæ ¹æ®é«˜åº¦ç­‰æ¯”ç¼©æ”¾</span></span><br><span class="line">  height: <span class="string">""</span>,</span><br><span class="line">  <span class="comment">// æ ¹æ®å®½åº¦ç­‰æ¯”ç¼©æ”¾ï¼Œä¼˜å…ˆçº§æ›´é«˜</span></span><br><span class="line">  isWidth: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">// æ ¹æ®é«˜åº¦ç­‰æ¯”ç¼©æ”¾</span></span><br><span class="line">  isHeight: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">// å®½é«˜æ•´ä½“ç¼©æ”¾</span></span><br><span class="line">  scale: <span class="number">1</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><p>é‚£ä¹ˆå¾—å‡ºçš„å­—ç¬¦ä¸²å°±æ˜¯<code>22001</code>ï¼Œå‡è®¾æˆ‘ä»¬ä¼ å…¥äº†å®½åº¦ï¼Œå³æ•°æ®ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// è‡ªå®šä¹‰å®½åº¦ï¼Œä¼ ä¸€ä¸ªæ ¹æ®å®½åº¦ç­‰æ¯”ç¼©æ”¾</span></span><br><span class="line">  width: <span class="number">1920</span>,</span><br><span class="line">  <span class="comment">// è‡ªå®šä¹‰é«˜åº¦ï¼Œä¼ ä¸€ä¸ªæ ¹æ®é«˜åº¦ç­‰æ¯”ç¼©æ”¾</span></span><br><span class="line">  height: <span class="string">""</span>,</span><br><span class="line">  <span class="comment">// æ ¹æ®å®½åº¦ç­‰æ¯”ç¼©æ”¾ï¼Œä¼˜å…ˆçº§æ›´é«˜</span></span><br><span class="line">  isWidth: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">// æ ¹æ®é«˜åº¦ç­‰æ¯”ç¼©æ”¾</span></span><br><span class="line">  isHeight: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">// å®½é«˜æ•´ä½“ç¼©æ”¾</span></span><br><span class="line">  scale: <span class="number">1</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><p>é‚£ä¹ˆå¾—å‡ºçš„å­—ç¬¦ä¸²å°±æ˜¯<code>12001</code>ï¼Œçœ‹åˆ°è¿™é‡Œå¤§å®¶åº”è¯¥æ‡‚äº†å§ï¼Ÿæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦åˆ¤æ–­<code>config</code>è¿™ä¸ªé…ç½®çš„<code>value</code>å€¼æ¥ç”Ÿæˆæˆ‘ä»¬çš„å­—ç¬¦ä¸²å³å¯ï¼Œå³å¾—å‡ºå¦‚ä¸‹ä»£ç </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–configå­—ç¬¦ä¸²ï¼Œå³ä¼ å…¥äº†å°±æ˜¯trueï¼Œå³1ï¼Œæ²¡ä¼ å°±æ˜¯0ï¼Œä¸ºç©ºå­—ç¬¦ä¸²å°±æ˜¯2</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getConfigStr</span>(<span class="params">config</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.values(config).map(<span class="function">(<span class="params">el</span>) =&gt;</span> (el === <span class="string">""</span> ? <span class="string">"2"</span> : <span class="built_in">Number</span>(!!el)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><blockquote><p>psï¼šå¦‚æœä¸æ‡‚ï¼Œè¯·è¯„è®ºè¯´å‡ºæ¥ï¼Œæˆ‘çœ‹åˆ°ä¼šç¬¬ä¸€æ—¶é—´å›å¤çš„ã€‚ã€‚ã€‚</p></blockquote><h4 id="æ‹“å±•é˜…è¯»ï¼šobject-å±æ€§çš„è¾“å‡ºé¡ºåºæ˜¯æ— åºçš„é—®é¢˜äº†è§£"><a href="#æ‹“å±•é˜…è¯»ï¼šobject-å±æ€§çš„è¾“å‡ºé¡ºåºæ˜¯æ— åºçš„é—®é¢˜äº†è§£" class="headerlink" title="æ‹“å±•é˜…è¯»ï¼šobject å±æ€§çš„è¾“å‡ºé¡ºåºæ˜¯æ— åºçš„é—®é¢˜äº†è§£"></a>æ‹“å±•é˜…è¯»ï¼šobject å±æ€§çš„è¾“å‡ºé¡ºåºæ˜¯æ— åºçš„é—®é¢˜äº†è§£</h4><blockquote><p>æ‹“å±•é˜…è¯»ï¼š<a href="https://zhuanlan.zhihu.com/p/40601459" target="_blank" rel="noopener">5 åˆ†é’Ÿå½»åº•ç†è§£ Object.keys</a></p></blockquote><h3 id="æ­£å¼ç¼–å†™ä¼˜åŒ–åçš„ä»£ç "><a href="#æ­£å¼ç¼–å†™ä¼˜åŒ–åçš„ä»£ç " class="headerlink" title="æ­£å¼ç¼–å†™ä¼˜åŒ–åçš„ä»£ç "></a>æ­£å¼ç¼–å†™ä¼˜åŒ–åçš„ä»£ç </h3><p>é€šè¿‡ä¸Šé¢çš„æ€è€ƒï¼Œæˆ‘ä»¬åŸºæœ¬åˆ†æå‡ºäº†æˆ‘ä»¬çš„ä»£ç éœ€è¦æ€ä¹ˆå†™ï¼Œå¦‚ä½•å†™ï¼Œæˆ‘æƒ³å¤§å®¶åº”è¯¥å¾ˆå®¹æ˜“å°±èƒ½ä¹¦å†™å‡ºæ¥äº†ï¼Œè¿™é‡Œè¿˜æ˜¯è´´ä¸€ä¸‹æˆ‘çš„ï¼ˆä»…ä¾›å‚è€ƒï¼‰ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–configå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getConfigStr</span>(<span class="params">config</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.values(config).map(<span class="function">(<span class="params">el</span>) =&gt;</span> (el === <span class="string">""</span> ? <span class="string">"2"</span> : <span class="built_in">Number</span>(!!el)));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ ¹æ®é…ç½®è·å–å®½é«˜</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getOptions</span>(<span class="params">options, config</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [sourceWidth, sourceHeight] = options;</span><br><span class="line">  <span class="keyword">const</span> &#123; width, height, scale &#125; = config;</span><br><span class="line">  <span class="keyword">const</span> widthOfOptions = [</span><br><span class="line">    width * scale,</span><br><span class="line">    (sourceHeight * width * scale) / sourceWidth,</span><br><span class="line">  ];</span><br><span class="line">  <span class="keyword">const</span> heightOfOptions = [</span><br><span class="line">    (sourceWidth * height * scale) / sourceHeight,</span><br><span class="line">    height * scale,</span><br><span class="line">  ];</span><br><span class="line">  <span class="keyword">const</span> configStr = getConfigStr(config);</span><br><span class="line">  <span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">    [<span class="regexp">/^0|^\d0/</span>, [<span class="number">0</span>, <span class="number">0</span>]],</span><br><span class="line">    [<span class="regexp">/^1\d1|^1[0|2]0/</span>, widthOfOptions],</span><br><span class="line">    [<span class="regexp">/^\d101|^210/</span>, heightOfOptions],</span><br><span class="line">    [<span class="regexp">/^1100/</span>, [width / scale, height / scale]],</span><br><span class="line">    [<span class="regexp">/^2&#123;2&#125;\d&#123;2&#125;1/</span>, options.map(<span class="function">(<span class="params">item</span>) =&gt;</span> item / scale)],</span><br><span class="line">  ]);</span><br><span class="line">  <span class="keyword">return</span> [...map].find(<span class="function">(<span class="params">[key]</span>) =&gt;</span> key.test(configStr.join(<span class="string">""</span>)))[<span class="number">1</span>] || options;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><blockquote><p>ps: è¿™é‡Œä½¿ç”¨äº†æ­£åˆ™ï¼Œå¦‚æœæœ‰å¯¹æ­£åˆ™ä¸å¤ªäº†è§£çš„ï¼Œå»ºè®®å¯ä»¥å»çœ‹ä¸‹æ­£åˆ™ï¼Œå› ä¸ºæ­£åˆ™å¯¹å­—ç¬¦ä¸²çš„å¤„ç†æœ‰ç€æå¤§çš„æ„ä¹‰ï¼Œä»¥æå¤§ç¨‹åº¦ä¸Šæ–¹ä¾¿äº†æˆ‘ä»¬çš„å¼€å‘</p></blockquote><p>ä¹Ÿè®¸ä½ çœ‹åˆ°è¿™é‡Œï¼Œä½ å°±ä¼šåƒï¼Œä½ è¿™é‡Œå†™çš„ä¸æ˜¯æ¯”ä»¥å‰æ›´å¤æ‚äº†å—ï¼Ÿè¿˜ç”¨äº†è¿™äº›çœ‹ä¸å¤ªæ‡‚çš„<code>æ­£åˆ™</code>ï¼Œå¯è¯»æ€§å°±æ›´å·®äº†ã€‚ã€‚ã€‚</p><p>ä½†æ˜¯å…¶å®æˆ‘è¿™é‡Œåªæ˜¯æƒ³å¼•ç”³å‡º<code>ä½¿ç”¨ Map ä»£æ›¿ if/else</code>è¿™ä¸ªæ€æƒ³ï¼ˆæ€è·¯ï¼‰ï¼Œé€šè¿‡è¿™ä¸ªä¾‹å­ï¼Œæˆ‘æƒ³ä»¥åæˆ‘ä»¬å†™çš„ä»£ç ä¹Ÿå¯ä»¥ä½¿ç”¨<code>Map</code>ä¹¦å†™å‡ºè®©æˆ‘ä»¬æ›´å¥½ç»´æŠ¤çš„ä»£ç äº†</p><blockquote><p><a href="https://gitee.com/gating/demo/tree/master/canvas-image-resize" target="_blank" rel="noopener">gitee åœ°å€</a>,<a href="https://github.com/GATING/demo/tree/master/canvas-image-resize" target="_blank" rel="noopener">github åœ°å€</a></p></blockquote><h1 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h1><p>æ„Ÿè°¢å„ä½è§‚ä¼—è€çˆ·çš„è§‚çœ‹ O(âˆ©_âˆ©)O å¸Œæœ›ä½ èƒ½æœ‰æ‰€æ”¶è· ğŸ˜</p>]]></content>
      
      
      <categories>
          
          <category> å°å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> node </tag>
            
            <tag> node-canvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nodeå®ç°å›¾ç‰‡å››å‘¨å¡«å……é€æ˜åŒºåŸŸ</title>
      <link href="/2020-06-10/node%E5%9B%BE%E7%89%87%E5%9B%9B%E5%91%A8%E5%A1%AB%E5%85%85%E9%80%8F%E6%98%8E%E5%8C%BA%E5%9F%9F/"/>
      <url>/2020-06-10/node%E5%9B%BE%E7%89%87%E5%9B%9B%E5%91%A8%E5%A1%AB%E5%85%85%E9%80%8F%E6%98%8E%E5%8C%BA%E5%9F%9F/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ä¸çŸ¥é“ä½ ä»¬æœ‰æ²¡æœ‰é‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œå†™å°ç¨‹åºçš„æ—¶å€™ï¼Œæ–‡æ¡£é‡Œé¢æ¨èçš„ tabbar å›¾æ ‡æ˜¯ <code>81 * 81</code>ï¼Œä½†æ˜¯å®é™…æ•ˆæœå›¾ç‰‡åˆåå¤§ï¼Œè€Œä¸”é…ç½®é¡¹ä¹Ÿæ²¡æœ‰å¯è°ƒèŠ‚çš„é…ç½®ã€‚é‚£ä¹ˆæ€ä¹ˆæ ·è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿä¸€èˆ¬éƒ½æ˜¯æ‰¾ UI å°å§å§æŠŠ icon å››è¾¹æ·»åŠ é€æ˜å¡«å……æ¥è°ƒæ•´ icon å¤§å°çš„ã€‚</p><p>ä½†æ˜¯å¦‚æœæ²¡æœ‰ ui å°å§å§çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¦å¦‚ä½•è§£å†³å‘¢ï¼Ÿè™½ç„¶å¯ä»¥é€šè¿‡<code>ps</code>çš„æ‰¹å¤„ç†è§£å†³ï¼Œä½†æ¯•ç«Ÿæˆ‘ä»¬æ˜¯<code>ç¨‹åºçŒ¿</code>ï¼Œå½“ç„¶æ˜¯é€šè¿‡ä»£ç æ¥è§£å†³è¿™ç§å°é—®é¢˜å•¦ã€‚æ‰€ä»¥ï¼Œé—²è¯ä¸å¤šè¯´å•¦ï¼Œå¼€å§‹å†™æˆ‘ä»¬çš„ä»£ç å•¦</p><h1 id="ç®€å•æ­å»ºä¸€ä¸‹"><a href="#ç®€å•æ­å»ºä¸€ä¸‹" class="headerlink" title="ç®€å•æ­å»ºä¸€ä¸‹"></a>ç®€å•æ­å»ºä¸€ä¸‹</h1><ul><li><p>æ–°å»ºä¸€ä¸ª <code>canvas-blank-area</code> ç›®å½•</p></li><li><p>åˆå§‹åŒ–ä¸€ä¸ª<code>node</code>é¡¹ç›®å·¥ç¨‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure></div></li><li><p>å®‰è£…ä¾èµ–ï¼Œè¿™é‡Œä¸»è¦ç”¨åˆ°äº†ä¸‰ä¸ªä¾èµ–ï¼Œåˆ†åˆ«æ˜¯<code>å¤„ç†å›¾ç‰‡</code>ã€<code>æ‰¹é‡å¤„ç†æ–‡ä»¶</code>ã€<code>å‹ç¼©æˆzipæ–‡ä»¶</code></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i canvas glob archiver -S</span><br></pre></td></tr></table></figure></div></li></ul><p>æ˜¯ä¸æ˜¯å¾ˆçœ¼ç†Ÿï¼Œè¿™ä¾èµ–å’Œæˆ‘ä¹‹å‰çš„é‚£ç¯‡<a href="https://gatings.cn/2020-03-11/node%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E5%88%86%E5%89%B2/">node å®ç°å›¾ç‰‡åˆ†å‰²</a>åšå®¢ä¸€æ¨¡ä¸€æ ·å—ï¼Ÿæ²¡é”™ï¼Œå°±æ˜¯ä¸€æ‘¸ä¸€æ ·ï¼Œæˆ‘ä»¬å†æ¬¡é€šè¿‡ <code>canvas</code>è¿™ä¸ªåº“æ¥å¤„ç†æˆ‘ä»¬çš„å°éœ€æ±‚ã€‚</p><blockquote><p>ä¸å¾—ä¸è¯´è¿™ä¸ª<code>canvas</code>åº“çœŸçš„æ˜¯æŒºå¥½ç”¨çš„ã€‚</p></blockquote><h1 id="ç®€å•çš„ä½¿ç”¨ä¸€ä¸‹"><a href="#ç®€å•çš„ä½¿ç”¨ä¸€ä¸‹" class="headerlink" title="ç®€å•çš„ä½¿ç”¨ä¸€ä¸‹"></a>ç®€å•çš„ä½¿ç”¨ä¸€ä¸‹</h1><p>æœ‰äº†ä¸Šä¸€ç¯‡æˆ‘ä»¬ä½¿ç”¨<code>canvas</code>çš„ç»éªŒï¼Œå…¶å®ä¹¦å†™ä»£ç å¯¹äºæˆ‘ä»¬æ¥è¯´åº”è¯¥æ˜¯ä¸éš¾äº†ï¼Œæˆ‘ä»¬çœ‹çœ‹æˆ‘å®ç°çš„æ•ˆæœï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-10/blank-area.png" data-fancybox="group" data-caption="nodeå›¾ç‰‡å››å‘¨å¡«å……é€æ˜åŒºåŸŸ" class="fancybox"><img alt="nodeå›¾ç‰‡å››å‘¨å¡«å……é€æ˜åŒºåŸŸ" title="nodeå›¾ç‰‡å››å‘¨å¡«å……é€æ˜åŒºåŸŸ" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-10/blank-area.png" class="lazyload"></a></p><p>çœ‹åˆ°è¿™é‡Œï¼Œæ˜¯ä¸æ˜¯æƒ³è·ƒè·ƒæ¬²è¯•å•¦ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å°è¯•å†™ä¸€ä¸‹æˆ‘ä»¬çš„ä»£ç </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºå†™å…¥æµ</span></span><br><span class="line"><span class="keyword">const</span> &#123; createWriteStream &#125; = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"><span class="comment">// è·å–æ–‡ä»¶å</span></span><br><span class="line"><span class="keyword">const</span> &#123; basename &#125; = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"><span class="comment">// å‹ç¼©æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">const</span> archiver = <span class="built_in">require</span>(<span class="string">"archiver"</span>);</span><br><span class="line"><span class="comment">// å¯¼å…¥canvasåº“ï¼Œç”¨äºè£å‰ªå›¾ç‰‡</span></span><br><span class="line"><span class="keyword">const</span> &#123; createCanvas, loadImage &#125; = <span class="built_in">require</span>(<span class="string">"canvas"</span>);</span><br><span class="line"><span class="comment">// æ‰¹é‡è·å–è·¯å¾„</span></span><br><span class="line"><span class="keyword">const</span> glob = <span class="built_in">require</span>(<span class="string">"glob"</span>);</span><br><span class="line">!<span class="function">(<span class="params"><span class="keyword">async</span> (</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> paths = glob.sync(<span class="string">"./images/*"</span>);</span><br><span class="line">  <span class="comment">// å‹ç¼©æˆzip</span></span><br><span class="line">  <span class="keyword">const</span> archive = archiver(<span class="string">"zip"</span>, &#123;</span><br><span class="line">    zlib: &#123; <span class="attr">level</span>: <span class="number">9</span> &#125;, <span class="comment">// Sets the compression level.</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// è¾“å‡ºåˆ°å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„ blank-area.zip</span></span><br><span class="line">  <span class="keyword">const</span> output = createWriteStream(__dirname + <span class="string">"/blank-area.zip"</span>);</span><br><span class="line">  archive.pipe(output);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; paths.length; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> path = paths[i];</span><br><span class="line">    <span class="keyword">const</span> image = <span class="keyword">await</span> loadImage(path);</span><br><span class="line">    <span class="keyword">const</span> &#123; width, height &#125; = image;</span><br><span class="line">    <span class="keyword">const</span> canvas = createCanvas(<span class="number">81</span>, <span class="number">81</span>);</span><br><span class="line">    <span class="keyword">const</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">    ctx.drawImage(image, (<span class="number">81</span> - width) / <span class="number">2</span>, (<span class="number">81</span> - height) / <span class="number">2</span>);</span><br><span class="line">    archive.append(canvas.toBuffer(), &#123; <span class="attr">name</span>: <span class="string">`<span class="subst">$&#123;basename(path)&#125;</span>`</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  archive.finalize();</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></div><p>è¿™ä¹ˆä¸€çœ‹ï¼Œæ˜¯ä¸æ˜¯æ¯”æˆ‘ä»¬ä¹‹å‰é‚£ä¸ªåˆ†å‰²å›¾ç‰‡çš„ä»£ç ç®€å•å¤šäº†ï¼Œæˆ‘ç›¸ä¿¡å°ä¼™ä¼´ä»¬è‚¯å®šæ—©å°±è‡ªå·±å†™å‡ºæ¥å•¦~~ğŸ˜Š</p><p>æœ€åï¼Œè·‘ä¸€ä¸‹æˆ‘ä»¬å†™çš„ç¨‹åºï¼Œå½“å‰ç›®å½•å°±ä¼šå¤šå‡ºäº†ä¸€ä¸ª <code>blank-area.zip</code> çš„å‹ç¼©åŒ…ï¼Œè§£å‹å‡ºæ¥å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„å›¾ç‰‡å•¦ ğŸ˜Š</p><blockquote><p><a href="https://gitee.com/gating/demo/tree/master/canvas-blank-area" target="_blank" rel="noopener">gitee åœ°å€</a>,<a href="https://github.com/GATING/demo/tree/master/canvas-blank-area" target="_blank" rel="noopener">github åœ°å€</a></p></blockquote><h1 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h1><p>æ„Ÿè°¢å„ä½è§‚ä¼—è€çˆ·çš„è§‚çœ‹ O(âˆ©_âˆ©)O</p>]]></content>
      
      
      <categories>
          
          <category> å°å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> node </tag>
            
            <tag> node-canvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰‹æŠŠæ‰‹æ•™ä½ å†™ä¸€ä¸ªç¬¦åˆè‡ªå·±éœ€æ±‚çš„å°ç¨‹åºæ—¥å†ç»„ä»¶</title>
      <link href="/2020-06-08/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E5%86%99%E4%B8%80%E4%B8%AA%E7%AC%A6%E5%90%88%E8%87%AA%E5%B7%B1%E9%9C%80%E6%B1%82%E7%9A%84%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%97%A5%E5%8E%86%E7%BB%84%E4%BB%B6/"/>
      <url>/2020-06-08/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E5%86%99%E4%B8%80%E4%B8%AA%E7%AC%A6%E5%90%88%E8%87%AA%E5%B7%B1%E9%9C%80%E6%B1%82%E7%9A%84%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%97%A5%E5%8E%86%E7%BB%84%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ç”Ÿæ´»ä¸­ä¼šæœ‰å„ç§æ‰“å¡çš„æƒ…å†µï¼Œæ¯”å¦‚ keep çš„è¿åŠ¨æ‰“å¡ã€å•è¯çš„å­¦ä¹ æ‰“å¡å’Œå„ç§ç­¾åˆ°æ‰“å¡æˆ–è€…é…’åº—çš„å…¥ä½æ—¶é—´é€‰æ‹©ï¼Œè¿™æ—¶å€™å°±éœ€è¦æˆ‘ä»¬ä¹¦å†™ä¸€ä¸ªæ—¥å†ç»„ä»¶æ¥å¤„ç†æˆ‘ä»¬è¿™ç§éœ€æ±‚ã€‚</p><p>ä½†æ˜¯æ›´å¤šæ—¶å€™ï¼Œæˆ‘ä»¬éƒ½æ˜¯ç½‘ä¸Šæ‰¾ä¸€ä¸ªæ’ä»¶ç›´æ¥å¥—ç”¨äº†ï¼Œæœ‰æ²¡æœ‰æƒ³è¿‡è‡ªå·±å®ç°ä¸€ä¸‹å‘¢ï¼Ÿå¦‚æœæœ‰ï¼Œä½†æ˜¯æ„Ÿè§‰ä¸å¤ªä¼šçš„è¯ï¼Œæ¥ä¸‹æ¥è·Ÿç€æˆ‘ä¸€èµ·å®ç°ç¬¦åˆè‡ªå·±éœ€æ±‚çš„æ—¥å†å§</p><h1 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h1><p>å› ä¸ºæˆ‘ä»¬æ˜¯å°ç¨‹åºæ—¥å†å˜›ï¼Œæ‰€ä»¥å¿…ä¸å¯å°‘çš„è‚¯å®šæ˜¯å¾®ä¿¡å¼€å‘è€…å·¥å…·å•¦ã€‚é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">|-- calendar</span><br><span class="line">    |-- app.js</span><br><span class="line">    |-- app.json</span><br><span class="line">    |-- app.wxss</span><br><span class="line">    |-- project.config.json</span><br><span class="line">    |-- sitemap.json</span><br><span class="line">    |-- components</span><br><span class="line">    |   |-- calendar</span><br><span class="line">    |       |-- index.js</span><br><span class="line">    |       |-- index.json</span><br><span class="line">    |       |-- index.wxml</span><br><span class="line">    |       |-- index.wxss</span><br><span class="line">    |-- pages</span><br><span class="line">        |-- index</span><br><span class="line">            |-- index.js</span><br><span class="line">            |-- index.json</span><br><span class="line">            |-- index.wxml</span><br><span class="line">            |-- index.wxss</span><br></pre></td></tr></table></figure></div><p>ä½¿ç”¨ <code>git</code> ä¸‹è½½ç©ºç™½æ¨¡æ¿:</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b calendar  https://gitee.com/gating/demo.git</span><br></pre></td></tr></table></figure></div><blockquote><p>ps: ä¸‹é¢æ­¥éª¤æœ‰ç‚¹å•°å—¦ï¼Œå¦‚æœçœ‹ç›®å½•ç»“æ„å°±èƒ½æ‡‚çš„è¯å°±ä¸éœ€è¦è·Ÿç€æ­¥éª¤å•¦</p></blockquote><ol><li><p>æ–°å»ºä¸€ä¸ªåä¸º<code>calendar</code>çš„ç©ºæ–‡ä»¶å¤¹</p></li><li><p>æ‰“å¡<code>å¾®ä¿¡å¼€å‘è€…å·¥å…·</code>ï¼Œæ–°å¢é¡¹ç›®ï¼Œé€‰ä¸­åˆšåˆšåˆ›å»ºçš„<code>calendar</code>æ–‡ä»¶å¤¹ï¼Œå¼€å‘æ¨¡å¼é€‰ä¸­å°ç¨‹åºï¼ŒAppID ä½¿ç”¨æµ‹è¯•å·å³å¯ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š<br><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-08/calendar01.jpg" data-fancybox="group" data-caption="æ–°å»ºcalendaré¡¹ç›®" class="fancybox"><img alt="æ–°å»ºcalendaré¡¹ç›®" title="æ–°å»ºcalendaré¡¹ç›®" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-08/calendar01.jpg" class="lazyload"></a></p></li><li><p>åˆ›å»ºå®Œåï¼Œå¼€å‘è€…å·¥å…·ä¼šé»˜è®¤å¸®æˆ‘ä»¬ç”Ÿæˆé»˜è®¤çš„ä»£ç ï¼Œæˆ‘ä»¬åœ¨å½“å‰æ–‡ä»¶å¤¹æ–°å¢<code>components</code>æ–‡ä»¶å®¶ï¼Œå†åœ¨<code>components</code>æ–‡ä»¶å¤¹ä¸­æ–°å¢<code>calendar</code>æ–‡ä»¶å¤¹ï¼Œå†ä»å½“å‰æ–‡ä»¶å¤¹æ–°å¢åä¸º<code>index</code>çš„ç»„ä»¶ï¼Œå¦‚å›¾ï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-08/calendar02.jpg" data-fancybox="group" data-caption="æ–°å»ºcalendarç»„ä»¶" class="fancybox"><img alt="æ–°å»ºcalendarç»„ä»¶" title="æ–°å»ºcalendarç»„ä»¶" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-08/calendar02.jpg" class="lazyload"></a></p></li></ol><blockquote><p>ps:å› ä¸ºå¼€å‘è€…å·¥å…·ä¼šé»˜è®¤ç”Ÿæˆåˆå§‹ä»£ç ï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨ä»–åˆ›å»ºç»„ä»¶æ¯”è¾ƒæ–¹ä¾¿</p></blockquote><ol start="4"><li>åˆ é™¤ä¸€äº›å’Œæœ¬æ¬¡åšæ–‡æ— å…³çš„ä»£ç ï¼Œæ¯”å¦‚<code>app.js</code>ä¸­çš„æœ¬åœ°ç¼“å­˜èƒ½åŠ›ï¼Œå…·ä½“å‚è€ƒç©ºç™½æ¨¡æ¿</li></ol><h1 id="ç¼–å†™ä»£ç "><a href="#ç¼–å†™ä»£ç " class="headerlink" title="ç¼–å†™ä»£ç "></a>ç¼–å†™ä»£ç </h1><p>æ¥ä¸‹æ¥ç¼–å†™ä»£ç éƒ¨åˆ†æˆ‘ä»¬ç›´æ¥åœ¨<code>VSCode</code>ç¼–å†™ï¼Œå› ä¸º<code>å¾®ä¿¡å¼€å‘è€…å·¥å…·</code>å®åœ¨å¤ªã€‚ã€‚ã€‚- -æ‰€ä»¥è¿˜æ˜¯ä½¿ç”¨<code>VSCode</code>ç¼–å†™æ¯”è¾ƒåˆé€‚</p><h2 id="æ€è€ƒä¸€ä¸‹"><a href="#æ€è€ƒä¸€ä¸‹" class="headerlink" title="æ€è€ƒä¸€ä¸‹"></a>æ€è€ƒä¸€ä¸‹</h2><p>æƒ³è¦å®ç°æ—¥å†ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“å‡ ä¸ªå°çŸ¥è¯†ï¼š</p><ol><li><p>æ ¹æ®å¸¸è¯†ï¼Œæˆ‘ä»¬çŸ¥é“ä¸€ä¸ªæœˆæœ€å°‘æœ‰ 28 å¤©ï¼Œæœ€å¤šæœ‰ 31 å¤©ï¼Œä¸€å‘¨æœ‰ 7 å¤©ï¼Œé‚£ä¹ˆå°±å¯ä»¥æœ‰ 5 æ’ï¼Œä½†å¦‚æœæœ‰ä¸€ä¸ªæœˆçš„ç¬¬ä¸€å¤©ä¸ºæ˜ŸæœŸå…­ä¸”å½“æœˆæœ‰ 31 å¤©ï¼Œé‚£ä¹ˆä»–å°±ä¼šæœ‰ 6 æ’æ ¼å­æ‰å¯¹ã€‚æ¯”å¦‚<code>2020å¹´8æœˆ</code>ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-08/calendar03.jpg" data-fancybox="group" data-caption="2020å¹´8æœˆ" class="fancybox"><img alt="2020å¹´8æœˆ" title="2020å¹´8æœˆ" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-08/calendar03.jpg" class="lazyload"></a></p></li></ol><p>2) æˆ‘ä»¬éœ€è¦çŸ¥é“ï¼Œå½“æœˆçš„ç¬¬ä¸€å¤©æ˜¯å‘¨å‡ </p><p>3) æˆ‘ä»¬éœ€è¦çŸ¥é“ï¼Œå½“æœˆæœ‰å¤šå°‘å¤©</p><p>4) æœ€é‡è¦çš„æ˜¯å°ç¨‹åºæ²¡æœ‰ DOM æ“ä½œæ¦‚å¿µï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½åŠ¨æ€å¾€å½“æœˆç¬¬ä¸€å¤©æ’å…¥æ ¼å­ï¼Œæ‰€ä»¥åªèƒ½æ ¹æ®ç¬¬ä¸€å¤©æ˜¯å‘¨å‡ å¾ªç¯æ’å…¥æ ¼å­</p><p>çŸ¥é“ä»¥ä¸Šå››ç‚¹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç¼–å†™æˆ‘ä»¬çš„ä»£ç å•¦</p><p>é¦–å…ˆï¼Œç¬¬äºŒç¬¬ä¸‰ç‚¹æ˜¯æœ€ç®€å•çš„ï¼Œæˆ‘å…ˆä¹¦å†™ç¬¬äºŒç¬¬ä¸‰ç‚¹ï¼Œæ€ä¹ˆè·å–å½“å‰æ˜¯å‘¨å‡ å‘¢ï¼Ÿå…¶å®<code>js</code>çš„<code>Date</code>å¯¹è±¡ç›´æ¥æœ‰ç°æˆçš„æ–¹æ³•ï¼Œæˆ‘ä»¬ç›´æ¥æ‹¿æ¥ç”¨å°±å¥½äº†</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">"ä»Šå¤©æ˜¯æ˜ŸæœŸ"</span> + <span class="keyword">new</span> <span class="built_in">Date</span>().getDay());</span><br></pre></td></tr></table></figure></div><p>æˆ‘æƒ³æœ‰ç‚¹å°éš¾åº¦çš„æ˜¯ç¬¬ä¸‰ç‚¹ï¼Œè·å–å½“æœˆæœ‰å¤šå°‘å¤©ï¼Œå› ä¸ºä½ æƒ³ï¼Œå…¶ä»–çš„æœˆä»½çš„å¤©æ•°æ˜¯å›ºå®šçš„ï¼Œå”¯ç‹¬ 2 æœˆï¼Œåœ¨å¹³å¹´å’Œé—°å¹´çš„ä¸åŒå¹´ä»½ä¸­ï¼Œ2 æœˆçš„å¤©æ•°ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ç®€å•çš„æ–¹æ³•è·å–å½“æœˆæœ‰å¤šå°‘å¤©å‘¢ï¼Œå…¶å®ä¹Ÿæ˜¯æœ‰çš„ï¼Œ<code>Date</code>å®ä¾‹ä¸­çš„<code>getDate</code>å°±å¯ä»¥å®ç°æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœäº†</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–ä¸€ä¸ªæœˆæœ‰å¤šå°‘å¤©</span></span><br><span class="line"><span class="keyword">const</span> getMonthDays = <span class="function">(<span class="params">year, month</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> days = <span class="keyword">new</span> <span class="built_in">Date</span>(year, month + <span class="number">1</span>, <span class="number">0</span>).getDate();</span><br><span class="line">  <span class="keyword">return</span> days;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><p>æˆ‘ä»¬é€šè¿‡ <code>Date</code> çš„ç¬¬ä¸‰ä¸ªå‚æ•°ä¼  0 å°±å¯ä»¥è·å–ä¸Šä¸ªæœˆçš„æœ€åä¸€å¤©ï¼Œæœ€åé€šè¿‡ <code>getDate()</code> è·å–å®ƒçš„æ—¥æœŸå°±å¯ä»¥å¯¹åº”æˆ‘ä»¬å½“æœˆçš„å¤©æ•°ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦æˆ‘ä»¬è‡ªå·±å¤„ç†å¹³å¹´å’Œé—°å¹´çš„ 2 æœˆæœ‰å¤šå°‘å¤©äº†</p><blockquote><p>æ˜¯ä¸æ˜¯åˆå­¦åˆ°äº†å°çŸ¥è¯†ç‚¹å‘¢ï¼Ÿ</p></blockquote><p>è§£å†³äº† 2.3 ä¸¤ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾€ä¸‹ä¹¦å†™æˆ‘ä»¬çš„æ—¥å†äº†ã€‚</p><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œå°ç¨‹åºè§„å®šå®½åº¦ä¸º<code>750rpx</code>(<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxss.html" target="_blank" rel="noopener">å°ºå¯¸å•ä½</a>)ï¼Œè€Œæˆ‘ä»¬çš„ä¸€å‘¨æœ‰ 7 å¤©ï¼Œå³ 7 æ ¼ï¼Œé‚£ä¹ˆå°±æ˜¯æ¯ä¸ªæ ¼å­çš„å®½åº¦ä¸º<code>107rpx</code>ï¼Œä¸å»ºè®®ä½¿ç”¨å°æ•°ï¼Œå› ä¸º rpx è®¡ç®—çš„æ—¶å€™ï¼Œé‡åˆ°å°æ•°ä¼šå­˜åœ¨å°‘é‡åå·®ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<code>flex</code>å¸ƒå±€è§£å†³ã€‚</p><p>æ‰€ä»¥æ¥ä¸‹æ¥å°±å¯ä»¥å†™æˆ‘ä»¬çš„å¸ƒå±€å’Œç”Ÿæˆæˆ‘ä»¬çš„æ•°æ®å•¦ï¼Œä»ä¸Šé¢æˆ‘ä»¬åˆ†æäº†ï¼Œæˆ‘ä»¬æœ‰ 6 æ’æ ¼å­ï¼Œä¸€æ’æœ‰ 7 ä¸ªï¼Œä¹Ÿå°±æ˜¯ä¸€å…± 42 ä¸ªæ ¼å­ã€‚å³éœ€è¦éå† 42 æ¬¡</p><p>å…ˆå®šä¹‰ä¸€ä¸‹æˆ‘ä»¬æ‰€éœ€è¦çš„æ•°æ®ï¼Œä¾¿äºæˆ‘ä»¬åç»­æ“ä½œï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">json</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"dataStr"</span>: <span class="string">"2020/06/08"</span>,</span><br><span class="line">    <span class="attr">"day"</span>: <span class="string">"08"</span>,</span><br><span class="line">    <span class="attr">"month"</span>: <span class="string">"08"</span>,</span><br><span class="line">    <span class="attr">"otherMonth"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"today"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"year"</span>: <span class="number">2020</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></div><blockquote><p>è¿™é‡Œæˆ‘åªå®šä¹‰ä¸ªå‡ ä¸ªç®€å•çš„åŸºæœ¬æ•°æ®ï¼Œå¦‚æœæœ‰ä¸åŒçš„ä¸šåŠ¡åœºæ™¯å¯ä»¥è‡ªè¡Œæ·»åŠ åŸºç¡€æ•°æ®</p></blockquote><h3 id="å°-tips"><a href="#å°-tips" class="headerlink" title="å° tips"></a>å° tips</h3><p>IOS ç«¯çš„æ—¥æœŸæ ¼å¼å¿…é¡»ä¸º<code>/</code>æ‰å¯ä»¥è½¬åŒ–ä¸ºæ—¥æœŸæ ¼å¼ï¼Œæ¯”å¦‚<code>2018/07/08</code>ï¼Œè€Œ<code>2018-07-08</code>åˆ™è¿”å›<code>Invalid Date</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠ<code>-</code>éƒ½æ›¿æ¢ä¸º<code>/</code>ã€‚</p><p>ä¸å•å•æ˜¯å°ç¨‹åºï¼Œå¾®ä¿¡å…¬ä¼—å·ï¼Œsafari éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><h2 id="æ­£å¼å¼€å§‹ç¼–å†™ä»£ç "><a href="#æ­£å¼å¼€å§‹ç¼–å†™ä»£ç " class="headerlink" title="æ­£å¼å¼€å§‹ç¼–å†™ä»£ç "></a>æ­£å¼å¼€å§‹ç¼–å†™ä»£ç </h2><p>é‚£ä¹ˆå°±å¯ä»¥å†™æˆ‘ä»¬çš„ js ä»£ç äº†ï¼Œåœ¨ <code>components -&gt; calendar</code>ç›®å½•ä¸‹æ–°å»º<code>utils.js</code>æ–‡ä»¶ï¼Œä¹¦å†™æˆ‘ä»¬åˆ›å»ºæ•°æ®çš„åŸºç¡€æ–¹æ³•ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–å½“æœˆæœ‰å¤šå°‘å¤©</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String | Number&#125;</span> </span>year =&gt; å¹´</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String | Number&#125;</span> </span>month =&gt; æœˆ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> getMonthDays = <span class="function">(<span class="params">year, month</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> days = <span class="keyword">new</span> <span class="built_in">Date</span>(year, month + <span class="number">1</span>, <span class="number">0</span>).getDate();</span><br><span class="line">  <span class="keyword">return</span> days;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¡¥0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String | Number&#125;</span> <span class="variable">num</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> toDou = <span class="function">(<span class="params">num</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> num &gt; <span class="number">9</span> ? num : <span class="string">"0"</span> + num;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è½¬æ¢ä¸ºæ—¥æœŸæ ¼å¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> <span class="variable">date</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> transformDate = <span class="function">(<span class="params">date</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!(date <span class="keyword">instanceof</span> <span class="built_in">Date</span>)) &#123;</span><br><span class="line">    date = <span class="keyword">new</span> <span class="built_in">Date</span>(date);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> date;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–å½“å‰æ—¥æœŸçš„å¹´æœˆæ—¥</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>date =&gt; æ—¥æœŸå¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> getDateObj = <span class="function">(<span class="params">date</span>) =&gt;</span> &#123;</span><br><span class="line">  date = transformDate(date);</span><br><span class="line">  <span class="keyword">var</span> year = date.getFullYear();</span><br><span class="line">  <span class="keyword">var</span> month = date.getMonth() + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">var</span> day = date.getDate();</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    year,</span><br><span class="line">    month,</span><br><span class="line">    day,</span><br><span class="line">    dataStr: <span class="string">`<span class="subst">$&#123;year&#125;</span>/<span class="subst">$&#123;toDou(month)&#125;</span>/<span class="subst">$&#123;toDou(day)&#125;</span>`</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–å½“æœˆ1å·çš„æ—¶é—´æˆ³</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Date&#125;</span> </span>date =&gt; æ—¥æœŸå¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> startOfMonth = <span class="function">(<span class="params">date</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> date.setDate(<span class="number">1</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–ä»Šå¤©ï¼Œå¯¼å‡ºä¾›ç»„ä»¶ä½œä¸ºé»˜è®¤å€¼ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">const</span> &#123; dataStr &#125; = getDateObj(<span class="keyword">new</span> <span class="built_in">Date</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”Ÿæˆæ—¥å†æ•°æ®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Date&#125;</span> </span>date =&gt; æ—¥æœŸå¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> getDate = <span class="function">(<span class="params">date</span>) =&gt;</span> &#123;</span><br><span class="line">  date = transformDate(date);</span><br><span class="line">  <span class="comment">// è®¡ç®—éœ€è¦è¡¥çš„æ ¼å­</span></span><br><span class="line">  <span class="keyword">let</span> dist;</span><br><span class="line">  <span class="keyword">const</span> &#123; year, month &#125; = getDateObj(date);</span><br><span class="line">  <span class="comment">// è·å–å½“æœˆæœ‰å¤šå°‘å¤©</span></span><br><span class="line">  <span class="keyword">const</span> days = getMonthDays(year, month - <span class="number">1</span>);</span><br><span class="line">  <span class="comment">// è·å–å½“å‰æ—¥æœŸæ˜¯æ˜ŸæœŸå‡ </span></span><br><span class="line">  <span class="keyword">let</span> currentDate = <span class="keyword">new</span> <span class="built_in">Date</span>(startOfMonth(date)).getDay();</span><br><span class="line">  <span class="comment">// ä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œä¸€å‘¨çš„ç¬¬ä¸€å¤©æ—¶æ˜ŸæœŸå¤©ï¼Œè€Œæˆ‘ä»¬åšçš„æ—¥å†æ˜ŸæœŸå¤©æ˜¯æ”¾åœ¨æœ€åçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œéœ€è¦æ”¹ä¸€ä¸‹å€¼</span></span><br><span class="line">  <span class="keyword">if</span> (currentDate == <span class="number">0</span>) &#123;</span><br><span class="line">    currentDate = <span class="number">7</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  dist = currentDate - <span class="number">1</span>;</span><br><span class="line">  currentDate -= <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">const</span> res = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">42</span>; i++) &#123;</span><br><span class="line">    <span class="comment">// æ˜¯å¦ä¸æ˜¯å½“å‰æœˆ</span></span><br><span class="line">    <span class="keyword">const</span> otherMonth = i &gt;= dist + days || i &lt;= currentDate;</span><br><span class="line">    <span class="keyword">const</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(year, month - <span class="number">1</span>, -currentDate + i);</span><br><span class="line">    <span class="keyword">const</span> dateObj = getDateObj(date);</span><br><span class="line">    res.push(&#123;</span><br><span class="line">      ...dateObj,</span><br><span class="line">      today: dataStr === dateObj.dataStr,</span><br><span class="line">      otherMonth,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  getMonthDays,</span><br><span class="line">  toDou,</span><br><span class="line">  getDateObj,</span><br><span class="line">  startOfMonth,</span><br><span class="line">  getDate,</span><br><span class="line">  dataStr,</span><br><span class="line">  transformDate,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><p>è¿™é‡Œä»£ç éƒ½æ¯”è¾ƒç®€å•ï¼Œæ³¨é‡Šä¹Ÿæœ‰å†™ï¼Œæ‰€ä»¥å°±ä¸è¯¦ç»†è§£é‡Šäº†ï¼Œå¦‚æœ‰é—®é¢˜å°±è¯„è®ºï¼Œæˆ‘çœ‹åˆ°ä¼šç¬¬ä¸€æ—¶é—´å›å¤çš„ã€‚ã€‚ã€‚ã€‚</p><p>åœ¨ <code>components -&gt; calendar -&gt; index.js</code> å¼•å…¥ä¸€ä¸‹ <code>utils.js</code> æ–‡ä»¶ï¼Œç„¶ååœ¨<code>created</code>è¿™ä¸ªç”Ÿå‘½å‘¨æœŸæ‰“å°ä¸€ä¸‹æˆ‘ä»¬çš„åŸºç¡€æ•°æ®ï¼Œçœ‹æ˜¯å¦ç¬¦åˆé¢„æœŸï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-08/calendar04.jpg" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-08/calendar04.jpg" class="lazyload"></a></p><p>å¦‚æœä½ æ‰“å°çš„å’Œæˆ‘æ‰“å°çš„ä¸€è‡´ï¼Œé‚£ä¹ˆå°±å¯ä»¥æ„‰å¿«çš„å†™æˆ‘ä»¬ç»„ä»¶çš„ç•Œé¢å•¦ ğŸ˜„</p><p>å› ä¸ºå¸ƒå±€å¤§å¤šæ•°éƒ½æ˜¯æ ·å¼æ–¹é¢çš„é—®é¢˜ï¼Œè¿™é‡Œå°±ä¸å¤šè®²è§£å•¦ï¼Œæˆ‘æƒ³å¤§å®¶åº”è¯¥éƒ½ä¼šçš„ï¼Œæ‰€ä»¥è¿™é‡Œç›´æ¥ç²˜è´´ä»£ç å•¦ï¼Œä¸»è¦éƒ¨åˆ†æˆ‘å°±è®²è§£ä¸€ä¸‹</p><p><code>index.wxml</code>ä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">xml</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"calendar-wrapper"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"calendar-controller"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"calendar-picker"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"arrow left"</span> <span class="attr">bindtap</span>=<span class="string">"prevMonth"</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">picker</span></span></span><br><span class="line"><span class="tag">        <span class="attr">mode</span>=<span class="string">'date'</span></span></span><br><span class="line"><span class="tag">        <span class="attr">fields</span>=<span class="string">'month'</span></span></span><br><span class="line"><span class="tag">        <span class="attr">end</span>=<span class="string">"2999-12-31"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">start</span>=<span class="string">"1970-01-01"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">value</span>=<span class="string">"&#123;&#123;monthFormat&#125;&#125;"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">bindchange</span>=<span class="string">"dateChange"</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"month-format"</span>&gt;</span>&#123;&#123;monthFormat&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">picker</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"arrow right"</span> <span class="attr">bindtap</span>=<span class="string">"nextMonth"</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"calendar-header"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"item"</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123;week&#125;&#125;"</span> <span class="attr">wx:key</span>=<span class="string">"*this"</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"calendar-container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"item &#123;&#123;item.today?'today':''&#125;&#125; &#123;&#123;item.otherMonth?'other-month':''&#125;&#125;"</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123;calendar&#125;&#125;"</span> <span class="attr">wx:key</span>=<span class="string">"dataStr"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item.day&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p><code>index.wxss</code>ä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">css</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.calendar-container</span>,</span><br><span class="line"><span class="selector-class">.calendar-controller</span>,</span><br><span class="line"><span class="selector-class">.calendar-header</span>,</span><br><span class="line"><span class="selector-class">.calendar-picker</span>,</span><br><span class="line"><span class="selector-class">.calendar-container</span> <span class="selector-class">.item</span>,</span><br><span class="line"><span class="selector-class">.calendar-header</span> <span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">line-height</span>: normal;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.calendar-container</span>,</span><br><span class="line"><span class="selector-class">.calendar-controller</span>,</span><br><span class="line"><span class="selector-class">.calendar-header</span> &#123;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-around;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.calendar-container</span> <span class="selector-class">.item</span>,</span><br><span class="line"><span class="selector-class">.calendar-header</span> <span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">107</span>rpx;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">80</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.calendar-header</span> <span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#666</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.calendar-container</span> <span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#111</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.calendar-container</span> <span class="selector-class">.item</span><span class="selector-class">.other-month</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#999</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.calendar-container</span> <span class="selector-class">.item</span><span class="selector-class">.today</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#6190e8</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">600</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.calendar-picker</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">30</span>rpx;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#111</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20</span>rpx <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.month-format</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">30</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.arrow</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10</span>rpx <span class="number">15</span>rpx;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#f7f8fc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.arrow</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">14</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">14</span>rpx;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">4</span>rpx solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">border-left</span>: <span class="number">4</span>rpx solid <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.arrow</span><span class="selector-class">.left</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(-<span class="number">45deg</span>) <span class="built_in">rotate</span>(-<span class="number">47deg</span>) <span class="built_in">skew</span>(<span class="number">5deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.arrow</span><span class="selector-class">.right</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(-<span class="number">135deg</span>) <span class="built_in">rotate</span>(-<span class="number">47deg</span>) <span class="built_in">skew</span>(<span class="number">5deg</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p><code>index.js</code>ä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// components/calendar/index.js</span></span><br><span class="line"><span class="keyword">const</span> &#123; getDate, dataStr, getDateObj &#125; = <span class="built_in">require</span>(<span class="string">"./utils"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getDateStr = <span class="function">(<span class="params">dataStr</span>) =&gt;</span> dataStr.slice(<span class="number">0</span>, <span class="number">-3</span>).replace(<span class="string">"/"</span>, <span class="string">"-"</span>);</span><br><span class="line">Component(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  properties: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç»„ä»¶çš„åˆå§‹æ•°æ®</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  data: &#123;</span><br><span class="line">    week: [<span class="string">"ä¸€"</span>, <span class="string">"äºŒ"</span>, <span class="string">"ä¸‰"</span>, <span class="string">"å››"</span>, <span class="string">"äº”"</span>, <span class="string">"å…­"</span>, <span class="string">"æ—¥"</span>],</span><br><span class="line">    calendar: getDate(<span class="keyword">new</span> <span class="built_in">Date</span>()),</span><br><span class="line">    monthFormat: getDateStr(dataStr),</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    dateChange(e) &#123;</span><br><span class="line">      <span class="keyword">const</span> monthFormat = e.detail.value;</span><br><span class="line">      <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">        monthFormat,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ä¸Šä¸ªæœˆæ—¥æœŸ</span></span><br><span class="line">    prevMonth() &#123;</span><br><span class="line">      <span class="keyword">const</span> [year, month] = <span class="keyword">this</span>.data.monthFormat.split(<span class="string">"-"</span>);</span><br><span class="line">      <span class="keyword">const</span> &#123; dataStr &#125; = getDateObj(</span><br><span class="line">        <span class="keyword">new</span> <span class="built_in">Date</span>(year, month, <span class="number">1</span>).setMonth(month - <span class="number">2</span>)</span><br><span class="line">      );</span><br><span class="line">      <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">        monthFormat: getDateStr(dataStr),</span><br><span class="line">        calendar: getDate(<span class="keyword">new</span> <span class="built_in">Date</span>(dataStr)),</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ä¸‹ä¸ªæœˆæ—¥æœŸ</span></span><br><span class="line">    nextMonth() &#123;</span><br><span class="line">      <span class="keyword">const</span> [year, month] = <span class="keyword">this</span>.data.monthFormat.split(<span class="string">"-"</span>);</span><br><span class="line">      <span class="keyword">const</span> &#123; dataStr &#125; = getDateObj(<span class="keyword">new</span> <span class="built_in">Date</span>(year, month, <span class="number">1</span>));</span><br><span class="line">      <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">        monthFormat: getDateStr(dataStr),</span><br><span class="line">        calendar: getDate(<span class="keyword">new</span> <span class="built_in">Date</span>(dataStr)),</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;&#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><blockquote><p>è¿™é‡Œçš„ä¸»è¦è¿·æƒ‘ç‚¹å°±æ˜¯æœˆä»½ï¼Œå› ä¸ºæˆ‘ä»¬å¾—åˆ°çš„æœˆä»½æ˜¯è½¬æ¢åçš„ï¼ˆå³æœˆä»½+1ï¼‰ï¼Œè€Œ<code>js</code>ä¸­çš„æœˆä»½æ˜¯ä» 0 å¼€å§‹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è·å–ä¸Šä¸ªæœˆçš„æ—¶å€™æœˆä»½å°±éœ€è¦<code>-2</code>æ‰èƒ½å®ç°æˆ‘ä»¬è¦çš„æ•ˆæœï¼Œè€Œè·å–ä¸‹ä¸ªæœˆçš„æ—¶å€™ï¼Œå› ä¸ºæœ¬èº«æˆ‘ä»¬æœˆä»½æœ¬èº«å°±<code>+1</code>äº†ï¼Œæ‰€ä»¥ä¸éœ€è¦è¿›è¡Œæ“ä½œã€‚</p></blockquote><p>ä¹¦å†™å®Œæˆå¸ƒå±€åï¼Œå¤§æ¦‚ä¼šå¾—å‡ºä¸‹é¢è¿™ä¸ªæ—¥å†ï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-08/calendar05.jpg" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-08/calendar05.jpg" class="lazyload"></a></p><p>å†™åˆ°è¿™é‡Œï¼Œå…¶å®æ•´ä¸ªæ—¥å†çš„é›å½¢å·²ç»å‡ºæ¥äº†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>picker</code>æ¢ï¼Œå¯ä»¥é€šè¿‡ç‚¹å‡»åˆ‡æ¢ï¼Œä¹Ÿç®—ä¸€ä¸ªç›¸å¯¹å¯ä»¥ä½¿ç”¨çš„æ—¥å†ç»„ä»¶å•¦ ğŸ˜</p><p>ä½†æ˜¯å…¶å®è¿˜æ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œæ¯•ç«Ÿï¼Œæˆ‘ä»¬è¿<strong>æ‰‹åŠ¿å·¦å³æ»‘åŠ¨åˆ‡æ¢æ—¥å†</strong>è¿™ä¸ªåŠŸèƒ½éƒ½æ²¡æœ‰ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥å°±å®Œå–„æˆ‘ä»¬è¿™ä¸ªæ—¥å†å§</p><h2 id="æ— ç¼æ»‘åŠ¨æ€è€ƒ"><a href="#æ— ç¼æ»‘åŠ¨æ€è€ƒ" class="headerlink" title="æ— ç¼æ»‘åŠ¨æ€è€ƒ"></a>æ— ç¼æ»‘åŠ¨æ€è€ƒ</h2><p>ä½ æƒ³ï¼Œæ—¢ç„¶è¦åšå·¦å³æ»‘åŠ¨åˆ‡æ¢äº†ï¼Œè‚¯å®šå¾—æ— ç¼å§ï¼Ÿæ—¢ç„¶å¾—æ— ç¼ï¼Œè‚¯å®šä¸èƒ½ç”Ÿæˆå¤šä»½å§ï¼Ÿé‚£ä¹ˆæ€ä¹ˆæ‰èƒ½ç”¨æœ€å°‘çš„ DOM åšåˆ°æ— ç¼å‘¢ï¼Ÿç­”æ¡ˆæ˜¯æˆ‘ä»¬åªéœ€è¦åœ¨æˆ‘ä»¬å¯è§†èŒƒå›´å†…ç”Ÿæˆ DOM ç»“æ„å³å¯ï¼Œå³æˆ‘ä»¬çš„å¯è§†èŒƒå›´å°±æ˜¯ä¸‰ä»½ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-08/calendar06.gif" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-08/calendar06.gif" class="lazyload"></a></p><p>æ—¢ç„¶è¯´åˆ°äº†<strong>å·¦å³æ»‘åŠ¨</strong>ï¼Œè‚¯å®šå°‘ä¸äº†æˆ‘ä»¬å¼ºå¤§çš„<code>swiper</code>ç»„ä»¶å•¦ï¼Œæˆ‘ä»¬è¿™æ¬¡çš„æ—¥å†ç»„ä»¶å°±æ˜¯å»ºç«‹åœ¨<code>swiper</code>ç»„ä»¶ä¸‹å®ç°çš„,æ—¢ç„¶ç”¨åˆ°äº†<code>swiper</code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„å¸ƒå±€è‚¯å®šéœ€è¦è¿›è¡Œå°æ”¹ï¼Œæ•°æ®ç»“æ„ä¹Ÿæ˜¯ï¼Œéœ€è¦è¿›è¡Œå°æ”¹åŠ¨ã€‚</p><p>åˆšæ‰è¯´äº†ï¼Œæˆ‘ä»¬çš„å¯æ˜¯èŒƒå›´æ˜¯ä¸‰ä»½ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„æ•°æ®ç»“æ„å°±å˜æˆäº†é•¿åº¦ä¸ºä¸‰çš„æ•°ç»„ï¼Œå³ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"calendarArr"</span>: [calendar, calendar, calendar]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>ç•Œé¢ä¹Ÿæ˜¯ï¼Œæˆ‘ä»¬æ–°å¢ä¸€ä¸ª<code>swiper</code>ç»„ä»¶ï¼Œç„¶åéå†<code>calendarArr</code>è¿™ä¸ªæ•°æ®ï¼Œ</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">xml</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"calendar-wrapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"calendar-controller"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"calendar-picker"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"arrow left"</span> <span class="attr">bindtap</span>=<span class="string">"prevMonth"</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">picker</span></span></span><br><span class="line"><span class="tag">          <span class="attr">mode</span>=<span class="string">'date'</span></span></span><br><span class="line"><span class="tag">          <span class="attr">fields</span>=<span class="string">'month'</span></span></span><br><span class="line"><span class="tag">          <span class="attr">end</span>=<span class="string">"2999-12-31"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">start</span>=<span class="string">"1970-01-01"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">value</span>=<span class="string">"&#123;&#123;monthFormat&#125;&#125;"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">bindchange</span>=<span class="string">"dateChange"</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"month-format"</span>&gt;</span>&#123;&#123;monthFormat&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">picker</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"arrow right"</span> <span class="attr">bindtap</span>=<span class="string">"nextMonth"</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"calendar-header"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"item"</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123;week&#125;&#125;"</span> <span class="attr">wx:key</span>=<span class="string">"*this"</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper</span></span></span><br><span class="line"><span class="tag">      <span class="attr">circular</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"calendar-swiper"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">current</span>=<span class="string">"&#123;&#123;current&#125;&#125;"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">duration</span>=<span class="string">"&#123;&#123;duration&#125;&#125;"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">vertical</span>=<span class="string">"&#123;&#123;isVertical&#125;&#125;"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">skip-hidden-item-layout</span></span></span><br><span class="line"><span class="tag">      <span class="attr">bindchange</span>=<span class="string">"swiperChange"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">bindanimationfinish</span>=<span class="string">"swiperAnimateFinish"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">bindtouchstart</span>=<span class="string">"swipeTouchStart"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">bindtouchend</span>=<span class="string">"swipeTouchEnd"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123;calendarArr&#125;&#125;"</span> <span class="attr">wx:for-item</span>=<span class="string">"calendar"</span> <span class="attr">wx:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"calendar-container"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"item &#123;&#123;item.today?'today':''&#125;&#125; &#123;&#123;item.otherMonth?'other-month':''&#125;&#125;"</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123;calendar&#125;&#125;"</span> <span class="attr">wx:key</span>=<span class="string">"dataStr"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item.day&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>æ ·å¼çš„è¯ï¼Œå› ä¸º<code>swiper</code>ç»„ä»¶æœ‰é»˜è®¤æ ·å¼ï¼Œé«˜åº¦æ˜¯<code>150px</code>ï¼Œè€Œæˆ‘ä»¬è¿™é‡Œ<code>6 * 80rpx</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸‹å®ƒçš„é»˜è®¤æ ·å¼ï¼Œå³æ·»åŠ ä¸‹é¢çš„ css å³å¯:</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">css</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.calendar-swiper</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">480</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>ä¹‹åå°±æ˜¯ä¹¦å†™æˆ‘ä»¬çš„é€»è¾‘å•¦ï¼Œä»å¸ƒå±€å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç”¨äº†<code>touchstart</code>å’Œ<code>touchend</code>ï¼Œæœ¬æ„å…¶å®å°±æ˜¯åˆ¤æ–­æˆ‘ä»¬æ˜¯å‘å·¦æ»‘è¿˜æ˜¯å‘å³æ»‘ï¼ˆå‘ä¸Šåˆ’è¿˜æ˜¯å‘ä¸‹æ»‘ï¼‰ï¼Œæ¥åˆ‡æ¢æˆ‘ä»¬çš„æœˆä»½</p><h2 id="å¦‚ä½•åŒºåˆ†å·¦æ»‘å³æ»‘ï¼ˆä¸Šæ»‘ä¸‹æ»‘ï¼‰"><a href="#å¦‚ä½•åŒºåˆ†å·¦æ»‘å³æ»‘ï¼ˆä¸Šæ»‘ä¸‹æ»‘ï¼‰" class="headerlink" title="å¦‚ä½•åŒºåˆ†å·¦æ»‘å³æ»‘ï¼ˆä¸Šæ»‘ä¸‹æ»‘ï¼‰"></a>å¦‚ä½•åŒºåˆ†å·¦æ»‘å³æ»‘ï¼ˆä¸Šæ»‘ä¸‹æ»‘ï¼‰</h2><ol><li><p>éœ€è¦å®šä¸¤ä¸ªå˜é‡ä¾›æˆ‘ä»¬åŒºåˆ†æ˜¯æ»‘åŠ¨çš„æ–¹å‘ï¼Œä¸€ä¸ªæ˜¯<code>swipeStartPoint</code>,ä¸€ä¸ªæ˜¯<code>isPrevMonth</code></p></li><li><p>æ—¢ç„¶æˆ‘ä»¬è¯´åˆ°äº†æ— ç¼ï¼Œé‚£ä¹ˆè‚¯å®šç”¨æˆ·å°±ä¼šæ»‘åŠ¨å¤šæ¬¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿéœ€è¦ä¸€ä¸ªå€¼æ¥è®¡ç®—ç”¨æˆ·æ»‘åŠ¨çš„æ¬¡æ•°ï¼Œæˆ‘ä»¬å®šä¹‰ä¸º<code>changeCount</code></p></li><li><p>è¿™ç‚¹ä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€ç”¨é€šè¿‡å½“å‰æˆ‘ä»¬æ»‘åŠ¨åˆ°ç¬¬å‡ ä¸ª<code>swiper-item</code>ï¼Œæ¥ä¿®æ”¹æˆ‘ä»¬çš„ä¸Šä¸ªæœˆå’Œä¸‹ä¸ªæœˆçš„æ•°æ®ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“ï¼Œå½“å‰çš„<code>swiper-item</code>è‚¯å®šæ˜¯ä¸­é—´çš„é‚£ä¸ªæœˆä»½ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿéœ€è¦ä¸€ä¸ªå˜é‡æ¥æ ‡è®°æˆ‘ä»¬å½“å‰çš„æ˜¯ç¬¬å‡ ä¸ªï¼Œæˆ‘ä»¬å®šä¹‰ä¸º<code>currentSwiperIndex</code>ï¼Œé’ˆå¯¹äºè¿™é‡Œçš„é€»è¾‘ï¼Œæˆ‘ä»¬ä¸¾ä¸ªä¾‹å­ï¼š</p></li></ol><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‡è®¾æˆ‘ä»¬ç°åœ¨æ˜¯6æœˆï¼Œé‚£ä¹ˆæ•°æ®å°±æ˜¯</span></span><br><span class="line"><span class="keyword">let</span> calendar = [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>];</span><br><span class="line"><span class="comment">// é‚£ä¹ˆæˆ‘ä»¬çš„ currentSwiperIndex è¿™æ—¶æ˜¯ç­‰äº1çš„</span></span><br><span class="line"><span class="comment">// å‡è®¾æˆ‘æ»‘åŠ¨äº†äº”æœˆï¼ŒcurrentSwiperIndex è¿™æ—¶å˜æˆ0äº†,æˆ‘ä»¬çš„æœˆä»½è¿˜æ˜¯ä¸å˜</span></span><br><span class="line"><span class="comment">// ä½†æ˜¯æˆ‘ä»¬çš„é€»è¾‘å°±å‘ç”Ÿæ”¹å˜äº†</span></span><br><span class="line"><span class="comment">// è¿™æ—¶å€™çš„ä¸Šä¸ªæœˆå˜æˆäº†7ï¼Œä¸‹ä¸ªæœˆå˜æˆ6ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ currentSwiperIndex çš„å€¼æ¥åŠ¨æ€ä¿®æ”¹ä»–ï¼Œå³</span></span><br><span class="line">calendar = [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>];</span><br><span class="line"><span class="comment">// åŠä¼ªä»£ç </span></span><br><span class="line"><span class="keyword">const</span> calendarArr = [];</span><br><span class="line"><span class="keyword">const</span> now = getDate(currentDate);</span><br><span class="line"><span class="keyword">const</span> prev = getDate(<span class="keyword">this</span>.getPrevMonth(dataStr));</span><br><span class="line"><span class="keyword">const</span> next = getDate(<span class="keyword">this</span>.getNextMonth(dataStr));</span><br><span class="line"><span class="keyword">const</span> prevIndex = currentSwiperIndex === <span class="number">0</span> ? <span class="number">2</span> : currentSwiperIndex - <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> nextIndex = currentSwiperIndex === <span class="number">2</span> ? <span class="number">0</span> : currentSwiperIndex + <span class="number">1</span>;</span><br><span class="line">calendarArr[prevIndex] = prev;</span><br><span class="line">calendarArr[nextIndex] = next;</span><br><span class="line">calendarArr[currentSwiperIndex] = now;</span><br></pre></td></tr></table></figure></div><p>ç†æ¸…æ¥šä¸Šé¢æ‰€æœ‰çš„ï¼ŒåŸºæœ¬ä¸Šæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹é‡æ„æˆ‘ä»¬çš„ä»£ç äº†</p><h2 id="æ­£å¼ä¹¦å†™æˆ‘ä»¬å¯æ»‘åŠ¨çš„æ—¥å†ç»„ä»¶"><a href="#æ­£å¼ä¹¦å†™æˆ‘ä»¬å¯æ»‘åŠ¨çš„æ—¥å†ç»„ä»¶" class="headerlink" title="æ­£å¼ä¹¦å†™æˆ‘ä»¬å¯æ»‘åŠ¨çš„æ—¥å†ç»„ä»¶"></a>æ­£å¼ä¹¦å†™æˆ‘ä»¬å¯æ»‘åŠ¨çš„æ—¥å†ç»„ä»¶</h2><p>å…ˆå®šä¹‰æˆ‘ä»¬ä¹‹å‰çš„æ‰€è¯´çš„å˜é‡ï¼Œå’Œå¤„ç†è¿™äº›å˜é‡çš„æ–¹æ³•</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å½“å‰çš„ç´¢å¼•å€¼ï¼Œå¿…é¡»ä»ç¬¬ä¸€ä¸ªå¼€å§‹ï¼Œå› ä¸ºè¿™æ ·æˆ‘ä»¬æ‰èƒ½å®ç°è§†é‡å†…çš„æ— ç¼</span></span><br><span class="line"><span class="keyword">let</span> currentSwiperIndex = <span class="number">1</span>,</span><br><span class="line">  generateDate = dataStr, <span class="comment">// å½“å‰æ—¶é—´</span></span><br><span class="line">  swipeStartPoint = <span class="number">0</span>, <span class="comment">// æ»‘åŠ¨çš„åæ ‡</span></span><br><span class="line">  isPrevMonth = <span class="literal">false</span>, <span class="comment">// æ˜¯å¦å‘å³æ»‘åŠ¨</span></span><br><span class="line">  changeCount = <span class="number">0</span>; <span class="comment">// æ»‘åŠ¨çš„æ¬¡æ•°</span></span><br><span class="line"></span><br><span class="line">Component(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="comment">// è®¾ç½®å½“å‰çš„ç´¢å¼•å€¼</span></span><br><span class="line">    swiperChange(e) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; current, source &#125; = e.detail;</span><br><span class="line">      <span class="keyword">if</span> (source === <span class="string">"touch"</span>) &#123;</span><br><span class="line">        currentSwiperIndex = current;</span><br><span class="line">        changeCount += <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// è·å–æ‰‹æŒ‡åˆšæŒ‰ä¸‹çš„åæ ‡</span></span><br><span class="line">    swipeTouchStart(e) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; clientY, clientX &#125; = e.changedTouches[<span class="number">0</span>];</span><br><span class="line">      swipeStartPoint = <span class="keyword">this</span>.data.isVertical ? clientY : clientX;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// è·å–æ‰‹æŒ‡æ¾å¼€æ—¶çš„åæ ‡</span></span><br><span class="line">    swipeTouchEnd(e) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; clientY, clientX &#125; = e.changedTouches[<span class="number">0</span>];</span><br><span class="line">      isPrevMonth = <span class="keyword">this</span>.data.isVertical</span><br><span class="line">        ? clientY - swipeStartPoint &gt; <span class="number">0</span></span><br><span class="line">        : clientX - swipeStartPoint &gt; <span class="number">0</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><p>ç„¶åå®šä¹‰ä¸€ä¸ªå¤„ç†æˆ‘ä»¬æ—¥å†æ•°æ®çš„æ–¹æ³•ï¼Œå› ä¸ºæˆ‘ä»¬æ—¥å†æ–¹æ³•æ˜¯æ¯ä¸ªæ—¶é—´éƒ½éœ€è¦ä½¿ç”¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å®šä¹‰ä¸ªå…¬ç”¨çš„æ–¹æ³•ï¼Œ</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Component(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="comment">// è®¾ç½®ä¸Šä¸ªæœˆçš„æ—¶é—´</span></span><br><span class="line">    getPrevMonth(monthFormat) &#123;</span><br><span class="line">      <span class="keyword">const</span> [year, month] = monthFormat.split(<span class="regexp">/\-|\//</span>);</span><br><span class="line">      <span class="keyword">const</span> &#123; dataStr &#125; = getDateObj(</span><br><span class="line">        <span class="keyword">new</span> <span class="built_in">Date</span>(year, month, <span class="number">1</span>).setMonth(month - <span class="number">2</span>)</span><br><span class="line">      );</span><br><span class="line">      <span class="keyword">return</span> dataStr;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// è®¾ç½®ä¸‹ä¸ªæœˆçš„æ—¶é—´</span></span><br><span class="line">    getNextMonth(monthFormat) &#123;</span><br><span class="line">      <span class="keyword">const</span> [year, month] = monthFormat.split(<span class="regexp">/\-|\//</span>);</span><br><span class="line">      <span class="keyword">const</span> &#123; dataStr &#125; = getDateObj(<span class="keyword">new</span> <span class="built_in">Date</span>(year, month, <span class="number">1</span>));</span><br><span class="line">      <span class="keyword">return</span> dataStr;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ç”Ÿæˆæ—¥å†æ•°ç»„</span></span><br><span class="line">    generatorCalendar(date) &#123;</span><br><span class="line">      <span class="keyword">const</span> calendarArr = [];</span><br><span class="line">      <span class="comment">// è½¬æ¢ä¸º Date å®ä¾‹</span></span><br><span class="line">      <span class="keyword">const</span> currentDate = transformDate(date);</span><br><span class="line">      <span class="comment">// è·å–å½“å‰æ—¶é—´çš„æ—¥å†æ•°æ®</span></span><br><span class="line">      <span class="keyword">const</span> now = getDate(currentDate);</span><br><span class="line">      <span class="comment">// è·å–å½“å‰æ—¶é—´çš„å­—ç¬¦ä¸²</span></span><br><span class="line">      <span class="keyword">const</span> &#123; dataStr &#125; = getDateObj(currentDate);</span><br><span class="line">      <span class="comment">// è·å–ä¸Šä¸ªæœˆçš„æ—¥å†æ•°æ®</span></span><br><span class="line">      <span class="keyword">const</span> prev = getDate(<span class="keyword">this</span>.getPrevMonth(dataStr));</span><br><span class="line">      <span class="comment">// è·å–ä¸‹ä¸ªæœˆçš„æ—¥å†æ•°æ®</span></span><br><span class="line">      <span class="keyword">const</span> next = getDate(<span class="keyword">this</span>.getNextMonth(dataStr));</span><br><span class="line">      <span class="comment">// è®¾ç½®æ—¥å†æ•°æ®</span></span><br><span class="line">      <span class="keyword">const</span> prevIndex = currentSwiperIndex === <span class="number">0</span> ? <span class="number">2</span> : currentSwiperIndex - <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">const</span> nextIndex = currentSwiperIndex === <span class="number">2</span> ? <span class="number">0</span> : currentSwiperIndex + <span class="number">1</span>;</span><br><span class="line">      calendarArr[prevIndex] = prev;</span><br><span class="line">      calendarArr[nextIndex] = next;</span><br><span class="line">      calendarArr[currentSwiperIndex] = now;</span><br><span class="line">      <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">        calendarArr,</span><br><span class="line">        monthFormat: getDateStr(dataStr),</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><blockquote><p>ps: å› ä¸ºè¿™é‡Œä¸Šä¸‹æœˆä»½ä¹Ÿå¯ä»¥å…¬ç”¨ï¼Œæ‰€ä»¥å•ç‹¬æå–å‡ºæ¥ä¾›å…¶ä»–æ–¹æ³•ä½¿ç”¨</p></blockquote><p>æœ€åï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨åŠ¨ç”»ç»“æŸçš„æ—¶å€™è®¾ç½®æ—¥å†æ•°æ®å³å¯ï¼Œå³ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Component(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="comment">// åŠ¨ç”»ç»“æŸåè®©æ»‘åŠ¨çš„æ¬¡æ•°ç½®0</span></span><br><span class="line">    swiperAnimateFinish() &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; year, month &#125; = getDateObj(generateDate);</span><br><span class="line">      <span class="keyword">const</span> monthDist = isPrevMonth ? -changeCount : changeCount;</span><br><span class="line">      generateDate = <span class="keyword">new</span> <span class="built_in">Date</span>(year, month + monthDist - <span class="number">1</span>);</span><br><span class="line">      <span class="comment">// æ¸…ç©ºæ»‘åŠ¨æ¬¡æ•°</span></span><br><span class="line">      changeCount = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">this</span>.generatorCalendar(generateDate);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><p>æ•´åˆèµ·æ¥å°±æ˜¯ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// components/calendar/index.js</span></span><br><span class="line"><span class="keyword">const</span> &#123; getDate, dataStr, getDateObj, transformDate &#125; = <span class="built_in">require</span>(<span class="string">"./utils"</span>);</span><br><span class="line"><span class="keyword">const</span> getDateStr = <span class="function">(<span class="params">dataStr</span>) =&gt;</span> dataStr.slice(<span class="number">0</span>, <span class="number">7</span>).replace(<span class="string">"/"</span>, <span class="string">"-"</span>);</span><br><span class="line"><span class="comment">// å½“å‰çš„ç´¢å¼•å€¼ï¼Œå¿…é¡»ä»ç¬¬ä¸€ä¸ªå¼€å§‹ï¼Œå› ä¸ºè¿™æ ·æˆ‘ä»¬æ‰èƒ½å®ç°è§†é‡å†…çš„æ— ç¼</span></span><br><span class="line"><span class="keyword">let</span> currentSwiperIndex = <span class="number">1</span>,</span><br><span class="line">  generateDate = dataStr, <span class="comment">// å½“å‰æ—¶é—´</span></span><br><span class="line">  swipeStartPoint = <span class="number">0</span>, <span class="comment">// æ»‘åŠ¨çš„åæ ‡</span></span><br><span class="line">  isPrevMonth = <span class="literal">false</span>, <span class="comment">// æ˜¯å¦å‘å³æ»‘åŠ¨</span></span><br><span class="line">  changeCount = <span class="number">0</span>; <span class="comment">// æ»‘åŠ¨çš„æ¬¡æ•°</span></span><br><span class="line">Component(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç»„ä»¶çš„å±æ€§åˆ—è¡¨</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  properties: &#123;</span><br><span class="line">    duration: &#123;</span><br><span class="line">      type: <span class="built_in">String</span>,</span><br><span class="line">      value: <span class="number">500</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    isVertical: &#123;</span><br><span class="line">      type: <span class="built_in">Boolean</span>,</span><br><span class="line">      value: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç»„ä»¶çš„åˆå§‹æ•°æ®</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  data: &#123;</span><br><span class="line">    week: [<span class="string">"ä¸€"</span>, <span class="string">"äºŒ"</span>, <span class="string">"ä¸‰"</span>, <span class="string">"å››"</span>, <span class="string">"äº”"</span>, <span class="string">"å…­"</span>, <span class="string">"æ—¥"</span>],</span><br><span class="line">    current: <span class="number">1</span>,</span><br><span class="line">    calendarArr: [],</span><br><span class="line">    monthFormat: getDateStr(dataStr),</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç»„ä»¶çš„æ–¹æ³•åˆ—è¡¨</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="comment">// è®¾ç½®ä¸Šä¸ªæœˆçš„æ—¶é—´</span></span><br><span class="line">    getPrevMonth(monthFormat) &#123;</span><br><span class="line">      <span class="keyword">const</span> [year, month] = monthFormat.split(<span class="regexp">/\-|\//</span>);</span><br><span class="line">      <span class="keyword">const</span> &#123; dataStr &#125; = getDateObj(</span><br><span class="line">        <span class="keyword">new</span> <span class="built_in">Date</span>(year, month, <span class="number">1</span>).setMonth(month - <span class="number">2</span>)</span><br><span class="line">      );</span><br><span class="line">      <span class="keyword">return</span> dataStr;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// è®¾ç½®ä¸‹ä¸ªæœˆçš„æ—¶é—´</span></span><br><span class="line">    getNextMonth(monthFormat) &#123;</span><br><span class="line">      <span class="keyword">const</span> [year, month] = monthFormat.split(<span class="regexp">/\-|\//</span>);</span><br><span class="line">      <span class="keyword">const</span> &#123; dataStr &#125; = getDateObj(<span class="keyword">new</span> <span class="built_in">Date</span>(year, month, <span class="number">1</span>));</span><br><span class="line">      <span class="keyword">return</span> dataStr;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ç”Ÿæˆæ—¥å†æ•°ç»„</span></span><br><span class="line">    generatorCalendar(date) &#123;</span><br><span class="line">      <span class="keyword">const</span> calendarArr = [];</span><br><span class="line">      <span class="comment">// è½¬æ¢ä¸º Date å®ä¾‹</span></span><br><span class="line">      <span class="keyword">const</span> currentDate = transformDate(date);</span><br><span class="line">      <span class="comment">// è·å–å½“å‰æ—¶é—´çš„æ—¥å†æ•°æ®</span></span><br><span class="line">      <span class="keyword">const</span> now = getDate(currentDate);</span><br><span class="line">      <span class="comment">// è·å–å½“å‰æ—¶é—´çš„å­—ç¬¦ä¸²</span></span><br><span class="line">      <span class="keyword">const</span> &#123; dataStr &#125; = getDateObj(currentDate);</span><br><span class="line">      <span class="comment">// è·å–ä¸Šä¸ªæœˆçš„æ—¥å†æ•°æ®</span></span><br><span class="line">      <span class="keyword">const</span> prev = getDate(<span class="keyword">this</span>.getPrevMonth(dataStr));</span><br><span class="line">      <span class="comment">// è·å–ä¸‹ä¸ªæœˆçš„æ—¥å†æ•°æ®</span></span><br><span class="line">      <span class="keyword">const</span> next = getDate(<span class="keyword">this</span>.getNextMonth(dataStr));</span><br><span class="line">      <span class="comment">// è®¾ç½®æ—¥å†æ•°æ®</span></span><br><span class="line">      <span class="keyword">const</span> prevIndex = currentSwiperIndex === <span class="number">0</span> ? <span class="number">2</span> : currentSwiperIndex - <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">const</span> nextIndex = currentSwiperIndex === <span class="number">2</span> ? <span class="number">0</span> : currentSwiperIndex + <span class="number">1</span>;</span><br><span class="line">      calendarArr[prevIndex] = prev;</span><br><span class="line">      calendarArr[nextIndex] = next;</span><br><span class="line">      calendarArr[currentSwiperIndex] = now;</span><br><span class="line">      <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">        calendarArr,</span><br><span class="line">        monthFormat: getDateStr(dataStr),</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="comment">// é€šçŸ¥çˆ¶ç»„ä»¶</span></span><br><span class="line">      <span class="keyword">this</span>.triggerEvent(<span class="string">"change"</span>, <span class="keyword">this</span>.data.monthFormat);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// è®¾ç½®å½“å‰çš„ç´¢å¼•å€¼</span></span><br><span class="line">    swiperChange(e) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; current, source &#125; = e.detail;</span><br><span class="line">      <span class="keyword">if</span> (source === <span class="string">"touch"</span>) &#123;</span><br><span class="line">        currentSwiperIndex = current;</span><br><span class="line">        changeCount += <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// åŠ¨ç”»ç»“æŸåè®©æ»‘åŠ¨çš„æ¬¡æ•°ç½®0</span></span><br><span class="line">    swiperAnimateFinish() &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; year, month &#125; = getDateObj(generateDate);</span><br><span class="line">      <span class="keyword">const</span> monthDist = isPrevMonth ? -changeCount : changeCount;</span><br><span class="line">      generateDate = <span class="keyword">new</span> <span class="built_in">Date</span>(year, month + monthDist - <span class="number">1</span>);</span><br><span class="line">      <span class="comment">// æ¸…ç©ºæ»‘åŠ¨æ¬¡æ•°</span></span><br><span class="line">      changeCount = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">this</span>.generatorCalendar(generateDate);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// è·å–æ‰‹æŒ‡åˆšæŒ‰ä¸‹çš„åæ ‡</span></span><br><span class="line">    swipeTouchStart(e) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; clientY, clientX &#125; = e.changedTouches[<span class="number">0</span>];</span><br><span class="line">      swipeStartPoint = <span class="keyword">this</span>.data.isVertical ? clientY : clientX;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// è·å–æ‰‹æŒ‡æ¾å¼€æ—¶çš„åæ ‡</span></span><br><span class="line">    swipeTouchEnd(e) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; clientY, clientX &#125; = e.changedTouches[<span class="number">0</span>];</span><br><span class="line">      isPrevMonth = <span class="keyword">this</span>.data.isVertical</span><br><span class="line">        ? clientY - swipeStartPoint &gt; <span class="number">0</span></span><br><span class="line">        : clientX - swipeStartPoint &gt; <span class="number">0</span>;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    dateChange(e) &#123;</span><br><span class="line">      <span class="keyword">const</span> monthFormat = e.detail.value;</span><br><span class="line">      <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">        monthFormat,</span><br><span class="line">      &#125;);</span><br><span class="line">      generateDate = getDateStr(monthFormat);</span><br><span class="line">      <span class="keyword">this</span>.generatorCalendar(generateDate);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸Šä¸ªæœˆæ—¥æœŸ</span></span><br><span class="line">    prevMonth() &#123;</span><br><span class="line">      <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">        monthFormat: <span class="keyword">this</span>.getPrevMonth(<span class="keyword">this</span>.data.monthFormat),</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">this</span>.generatorCalendar(<span class="keyword">this</span>.data.monthFormat);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ä¸‹ä¸ªæœˆæ—¥æœŸ</span></span><br><span class="line">    nextMonth() &#123;</span><br><span class="line">      <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">        monthFormat: <span class="keyword">this</span>.getNextMonth(<span class="keyword">this</span>.data.monthFormat),</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">this</span>.generatorCalendar(<span class="keyword">this</span>.data.monthFormat);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  ready() &#123;</span><br><span class="line">    <span class="keyword">this</span>.generatorCalendar(generateDate);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><p>é¡µé¢ä¸­ä½¿ç”¨ï¼Œ</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">xml</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">calendar</span> <span class="attr">bindchange</span>=<span class="string">"calendarChange"</span>&gt;</span><span class="tag">&lt;/<span class="name">calendar</span>&gt;</span></span><br></pre></td></tr></table></figure></div><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  calendarChange(e) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e.detail);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><p>å†™åˆ°è¿™é‡Œï¼Œå…¶å®åŸºæœ¬ä¸Šæ•´ä¸ªæ—¥å†å°±å·²ç»å®Œæˆäº†ï¼Œä½†ä¹Ÿè®¸ä½ ä¼šè¯´ï¼Œå…¶å®è¿˜æœ‰å¾ˆå¤šåŠŸèƒ½æ²¡æœ‰å®Œå–„ï¼Œæ¯”å¦‚:</p><ul><li><p>è·³è½¬åˆ°æŒ‡å®šåˆ°æ—¶é—´</p></li><li><p>èŒƒå›´é€‰æ‹©</p></li><li><p>ç‚¹å‡»æ ‡è®°æ—¶é—´ç­‰ç­‰</p></li><li><p>â€¦</p></li></ul><p>å…¶å®æˆ‘è§‰å¾—å¤šæ•°æ˜¯è®¾ç½®æ ·å¼é—®é¢˜ï¼Œæ¯”å¦‚æ ‡è®°æ—¶é—´è¿™ä¸ªåŠŸèƒ½ï¼Œå…¶å®æœ‰è¿™ä¸ªåŸºç¡€çš„ä¾‹å­ï¼Œæˆ‘æƒ³å¤§å®¶å¾€é‡Œé¢åŠ åŠŸèƒ½åº”è¯¥éƒ½å¯ä»¥å®ç°çš„ï¼Œæ‰€ä»¥æˆ‘å°±ä¸ä¸€æ­¥ä¸€æ­¥çš„å¾€é‡Œé¢å†™äº†</p><p>å¦‚æœåç»­æœ‰æ—¶é—´æˆ‘ä¼šå¾€è¿™ä¸ªé¡¹ç›®å¤šåŠ ä¸€ä¸‹æ–°åŠŸèƒ½çš„</p><blockquote><p><a href="https://gitee.com/gating/demo/tree/master/calendar" target="_blank" rel="noopener">gitee åœ°å€</a>,<a href="https://github.com/GATING/demo/tree/master/calendar" target="_blank" rel="noopener">github åœ°å€</a></p></blockquote><h1 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h1><p>æ„Ÿè§‰å„ä½è§‚ä¼—è€çˆ·çš„è§‚çœ‹ï¼Œå¸Œæœ›ä½ èƒ½æœ‰æ‰€æ”¶è· ğŸ˜</p>]]></content>
      
      
      <categories>
          
          <category> å°ç¨‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Charlesï¼ˆé’èŠ±ç“·/èŠ±ç“¶ï¼‰çš„åŸºæœ¬ä½¿ç”¨</title>
      <link href="/2020-06-04/Charles%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
      <url>/2020-06-04/Charles%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>Charles å…¶å®æ˜¯ä¸€æ¬¾ä»£ç†æœåŠ¡å™¨ï¼Œé€šè¿‡æˆä¸ºç”µè„‘æˆ–è€…æµè§ˆå™¨çš„ä»£ç†ï¼Œç„¶åæˆªå–è¯·æ±‚å’Œè¯·æ±‚ç»“æœè¾¾åˆ°åˆ†ææŠ“åŒ…çš„ç›®çš„ã€‚å…¶æ¬¡è¯¥è½¯ä»¶æ˜¯ç”¨ Java å†™çš„ï¼Œèƒ½å¤Ÿåœ¨ Windowsï¼ŒMacï¼ŒLinux ä¸Šä½¿ç”¨ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯æŠ“åŒ…ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æŠ“åŒ…ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æŠ“åŒ…ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æŠ“åŒ…ï¼Ÿ</h2><p>æŠ“åŒ…ï¼ˆpacket captureï¼‰å°±æ˜¯å°†ç½‘ç»œä¼ è¾“å‘é€ä¸æ¥æ”¶çš„æ•°æ®åŒ…è¿›è¡Œæˆªè·ã€é‡å‘ã€ç¼–è¾‘ã€è½¬å­˜ç­‰æ“ä½œï¼Œä¹Ÿç”¨æ¥æ£€æŸ¥ç½‘ç»œå®‰å…¨ã€‚æŠ“åŒ…ä¹Ÿç»å¸¸è¢«ç”¨æ¥è¿›è¡Œæ•°æ®æˆªå–ç­‰ã€‚</p><h1 id="Charles-ä¸»è¦åŠŸèƒ½"><a href="#Charles-ä¸»è¦åŠŸèƒ½" class="headerlink" title="Charles ä¸»è¦åŠŸèƒ½"></a>Charles ä¸»è¦åŠŸèƒ½</h1><ul><li>æ”¯æŒ SSL ä»£ç†ã€‚å¯ä»¥æˆªå–åˆ†æ SSL çš„è¯·æ±‚ã€‚</li><li>æ”¯æŒæµé‡æ§åˆ¶ã€‚å¯ä»¥æ¨¡æ‹Ÿæ…¢é€Ÿç½‘ç»œä»¥åŠç­‰å¾…æ—¶é—´ï¼ˆlatencyï¼‰è¾ƒé•¿çš„è¯·æ±‚ã€‚</li><li>æ”¯æŒé‡å‘ç½‘ç»œè¯·æ±‚ï¼Œæ–¹ä¾¿åç«¯è°ƒè¯•ã€‚</li><li>æ”¯æŒä¿®æ”¹ç½‘ç»œè¯·æ±‚å‚æ•°ã€‚</li><li>æ”¯æŒç½‘ç»œè¯·æ±‚çš„æˆªè·å¹¶åŠ¨æ€ä¿®æ”¹ã€‚</li></ul><blockquote><p>PSï¼šCharles æ˜¯æ”¶è´¹è½¯ä»¶ï¼Œå¯ä»¥å…è´¹è¯•ç”¨ 30 å¤©ã€‚è¯•ç”¨æœŸè¿‡åï¼Œæœªä»˜è´¹çš„ç”¨æˆ·ä»ç„¶å¯ä»¥ç»§ç»­ä½¿ç”¨ï¼Œä½†æ˜¯æ¯æ¬¡ä½¿ç”¨æ—¶é—´ä¸èƒ½è¶…è¿‡ 30 åˆ†é’Ÿï¼Œå¹¶ä¸”å¯åŠ¨æ—¶å°†ä¼šæœ‰ 10 ç§’ç§çš„å»¶æ—¶ã€‚</p></blockquote><h1 id="å¼€å§‹æŠ“åŒ…"><a href="#å¼€å§‹æŠ“åŒ…" class="headerlink" title="å¼€å§‹æŠ“åŒ…"></a>å¼€å§‹æŠ“åŒ…</h1><p>é»˜è®¤ï¼Œä»–ä¼šæŠŠç”µè„‘è®¾ç½®ä¸ºä»£ç†ï¼Œè¿™æ ·ä½ ä¼šå‘ç°ï¼Œä½ é€šè¿‡æµè§ˆå™¨è¯·æ±‚åˆ°ç½‘å€éƒ½ä¼šå‡ºç°åœ¨è¿™é‡Œã€‚<br>é€šå¸¸ç‚¹å‡»æŸä¸€ä¸ªç½‘å€åï¼Œä½ ä¼šå‘ç°å³è¾¹ä¼šå‡ºç°è¿™ä¸ªç½‘å€è¯·æ±‚çš„å¤§æ¦‚ä¿¡æ¯ï¼Œç‚¹å‡»å…·ä½“çš„è¯·æ±‚åä¼šå‡ºç° request å’Œ response ç­‰ä¿¡æ¯<br>ä½†æ˜¯ä½ ä¼šå‘ç° <code>https</code> éƒ½æ˜¯ <code>unknown</code> ï¼Œè¿™æ—¶å€™å°±éœ€è¦æˆ‘ä»¬å®‰è£…è¯ä¹¦å•¦ã€‚</p><h2 id="å®‰è£…-ssl-ca-è¯ä¹¦"><a href="#å®‰è£…-ssl-ca-è¯ä¹¦" class="headerlink" title="å®‰è£… ssl ca è¯ä¹¦"></a>å®‰è£… ssl ca è¯ä¹¦</h2><ul><li>é…ç½® Charles è¯ä¹¦ï¼›é€‰æ‹© help â€”&gt; SSL Proxying -&gt; install Charles Root Certificateï¼Œå°±ä¼šå‡ºç°å¦‚ä¸‹ç•Œé¢</li></ul><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles01.png" data-fancybox="group" data-caption="å®‰è£… ssl ca è¯ä¹¦" class="fancybox"><img alt="å®‰è£… ssl ca è¯ä¹¦" title="å®‰è£… ssl ca è¯ä¹¦" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles01.png" class="lazyload"></a></p><ul><li>ç‚¹å‡»å®‰è£…è¯ä¹¦å†ç‚¹å‡»ï¼Œå®‰è£…åœ¨â€œå—ä¿¡ä»»çš„æ ¹è¯ä¹¦é¢å‘æœºæ„â€ ï¼Œè¿™ä¸€æ­¥ååˆ†é‡è¦ï¼Œå¦‚ä¸åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œåˆ™ä¸èƒ½æŠ“å– https è¯·æ±‚</li></ul><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles02.png" data-fancybox="group" data-caption="å®‰è£… ssl ca è¯ä¹¦" class="fancybox"><img alt="å®‰è£… ssl ca è¯ä¹¦" title="å®‰è£… ssl ca è¯ä¹¦" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles02.png" class="lazyload"></a></p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles03.png" data-fancybox="group" data-caption="å®‰è£… ssl ca è¯ä¹¦" class="fancybox"><img alt="å®‰è£… ssl ca è¯ä¹¦" title="å®‰è£… ssl ca è¯ä¹¦" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles03.png" class="lazyload"></a></p><p>ä¹‹åæ— è„‘ä¸‹ä¸€æ­¥å°±å®‰è£…å®Œæˆå•¦</p><h2 id="é…ç½®-SSL-Proxy-Settings"><a href="#é…ç½®-SSL-Proxy-Settings" class="headerlink" title="é…ç½® SSL Proxy Settings"></a>é…ç½® SSL Proxy Settings</h2><p>æ·»åŠ ä¸Šè¯ä¹¦åï¼Œä¼šå‘ç°è¿˜æ˜¯ä¸èƒ½æŠ“å– <code>https</code> è¯·æ±‚ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰é…ç½® <code>ssl</code> çš„ä»£ç†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬é…ç½®ä¸€ä¸‹<br>åœ¨ Proxy -&gt; SSL Proxy Settingsï¼Œç„¶åé€‰æ‹© Enable SSL Proxyingï¼Œåœ¨ç‚¹å‡» Add</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles04.png" data-fancybox="group" data-caption="é…ç½® SSL Proxy Settings" class="fancybox"><img alt="é…ç½® SSL Proxy Settings" title="é…ç½® SSL Proxy Settings" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles04.png" class="lazyload"></a></p><blockquote><p>ps: é€šå¸¸ https é»˜è®¤ç«¯å£å°±æ˜¯ 443ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬é€šè¿‡åŒ¹é…ç¬¦ *:443 å°±å¯ä»¥æŠ“å–å¤§éƒ¨åˆ†çš„ https è¯·æ±‚äº†</p></blockquote><h3 id="æ‰“å¼€ç™¾åº¦"><a href="#æ‰“å¼€ç™¾åº¦" class="headerlink" title="æ‰“å¼€ç™¾åº¦"></a>æ‰“å¼€ç™¾åº¦</h3><p>æœç´¢ä¸€ä¸‹ 12306 å°±ä¼šå‡ºç°ç™¾åº¦æ ¹æ® 12306 æŸ¥è¯¢å…³è”çš„ä¸‹æ‹‰åˆ—è¡¨è¯·æ±‚äº†</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles05.png" data-fancybox="group" data-caption="æ‰“å¼€ç™¾åº¦" class="fancybox"><img alt="æ‰“å¼€ç™¾åº¦" title="æ‰“å¼€ç™¾åº¦" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles05.png" class="lazyload"></a></p><p>åˆ°è¿™é‡Œï¼ŒåŸºæœ¬çš„ <code>https</code> æŠ“åŒ…å°±å¯ä»¥ä½¿ç”¨äº†<br>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¿æ¥çœŸæœºè¿›è¡ŒçœŸæœºçš„æŠ“åŒ…ä½“éªŒã€‚ã€‚ã€‚</p><h2 id="æ‰‹æœºå®‰è£…è¯ä¹¦"><a href="#æ‰‹æœºå®‰è£…è¯ä¹¦" class="headerlink" title="æ‰‹æœºå®‰è£…è¯ä¹¦"></a>æ‰‹æœºå®‰è£…è¯ä¹¦</h2><p><strong>é¦–å…ˆï¼Œæ‰‹æœºå’Œç”µè„‘éœ€è¦åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘æ‰å¯ä»¥è¿›è¡ŒæŠ“åŒ…</strong></p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles06.png" data-fancybox="group" data-caption="æ‰‹æœºå®‰è£…è¯ä¹¦" class="fancybox"><img alt="æ‰‹æœºå®‰è£…è¯ä¹¦" title="æ‰‹æœºå®‰è£…è¯ä¹¦" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles06.png" class="lazyload"></a></p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles07.png" data-fancybox="group" data-caption="æ‰‹æœºå®‰è£…è¯ä¹¦" class="fancybox"><img alt="æ‰‹æœºå®‰è£…è¯ä¹¦" title="æ‰‹æœºå®‰è£…è¯ä¹¦" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles07.png" class="lazyload"></a></p><p>è¿™é‡Œä¼šå‘Šè¯‰æˆ‘ä»¬ï¼Œç”¨æ‰‹æœºæµè§ˆå™¨æ‰“å¼€ <a href="http://chls.pro/ssl" target="_blank" rel="noopener">chls.pro/ssl</a> å°±å¯ä»¥å®‰è£…è¯ä¹¦äº†<br>å…ˆæ‰‹åŠ¨é…ç½®ä¸‹ä»£ç†ï¼Œæ‰“å¼€ <code>WIFI</code>ï¼Œè®¾ç½®ï¼Œä»£ç†å¡«å†™åˆšåˆšçš„ ip åœ°å€ï¼Œå…·ä½“å¦‚å›¾ï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles08.jpg" data-fancybox="group" data-caption="æ‰‹æœºå®‰è£…è¯ä¹¦" class="fancybox"><img alt="æ‰‹æœºå®‰è£…è¯ä¹¦" title="æ‰‹æœºå®‰è£…è¯ä¹¦" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles08.jpg" class="lazyload"></a></p><p>æ‰“å¼€åä¼šå‡ºç°æ˜¯å¦å…è®¸è®¾å¤‡è¿æ¥ <code>Charles</code>ï¼Œç‚¹å‡» <code>allow</code> å³å¯<br><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles09.png" data-fancybox="group" data-caption="æ‰‹æœºå®‰è£…è¯ä¹¦" class="fancybox"><img alt="æ‰‹æœºå®‰è£…è¯ä¹¦" title="æ‰‹æœºå®‰è£…è¯ä¹¦" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles09.png" class="lazyload"></a></p><p>æ‰‹æœºç«¯è®¿é—® <a href="http://chls.pro/ssl" target="_blank" rel="noopener">chls.pro/ssl</a>,ä¸‹è½½è¯ä¹¦å°±å¯ä»¥å®‰è£…äº†</p><p>è¿™é‡Œè¿˜æ˜¯ä»¥ç™¾åº¦ä¸ºä¾‹ï¼Œæ‰‹æœºè®¿é—®ç™¾åº¦ä¹‹åå†æ¬¡æœç´¢ <code>12306</code>, åŒæ ·ä¼šå‡ºç°ä¸‹é¢çš„ä¸‹æ‹‰åˆ—è¡¨ï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles10.jpg" data-fancybox="group" data-caption="æ‰‹æœºå®‰è£…è¯ä¹¦" class="fancybox"><img alt="æ‰‹æœºå®‰è£…è¯ä¹¦" title="æ‰‹æœºå®‰è£…è¯ä¹¦" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles10.jpg" class="lazyload"></a></p><p><code>Charles</code> å°±ä¼šæˆªå–æˆ‘ä»¬è¯·æ±‚è¿™ä¸ªåœ°å€çš„æ•°æ®ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles11.png" data-fancybox="group" data-caption="æ‰‹æœºå®‰è£…è¯ä¹¦" class="fancybox"><img alt="æ‰‹æœºå®‰è£…è¯ä¹¦" title="æ‰‹æœºå®‰è£…è¯ä¹¦" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles11.png" class="lazyload"></a></p><p>è¿™æ ·å­å°±å®ç°äº†æˆ‘ä»¬çš„çœŸæœºæŠ“åŒ…å•¦ã€‚</p><h3 id="å®‰å“ç«¯"><a href="#å®‰å“ç«¯" class="headerlink" title="å®‰å“ç«¯"></a>å®‰å“ç«¯</h3><blockquote><p>ps: å¯èƒ½æ˜¯å› ä¸ºæˆ‘è¿™é‡Œä¹‹å‰è£…è¿‡è¯ä¹¦äº†ï¼Œæ‰€ä»¥å¯ä»¥æŠ“åŒ…æˆåŠŸï¼Œå®é™…ä¸Šå®‰å“ 7.0 ä»¥ä¸Šå› ä¸ºä¸€äº›å®‰å…¨æ”¿ç­–ï¼Œä¸å…è®¸å°†è¯ä¹¦å®‰è£…åˆ°ä¿¡ä»»ç›®å½•ï¼Œæƒ³å®ç°æŠ“åŒ…åˆ™éœ€è¦å°†ä¸‹è½½çš„è¯ä¹¦å¤åˆ¶åˆ°/system/etc/security/cacerts/ç›®å½•</p></blockquote><p>è§£å†³æ¡ä»¶ï¼šæ‰‹æœºéœ€è¦ root</p><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://www.cnblogs.com/ilizhu/p/11175431.html" target="_blank" rel="noopener">Android9.0 é…ç½® charles çš„ https æŠ“åŒ…</a>,<a href="https://www.cnblogs.com/wangyuehome/p/11203771.html" target="_blank" rel="noopener">android 9.0 ä»¥ä¸Š charles https æŠ“åŒ…</a></p><blockquote><p>ps: openssl ç›´æ¥åœ¨ gitbash å°±å¯ä»¥ä½¿ç”¨äº†ï¼Œæ‰€ä»¥ä¸Šé¢çš„æ“ä½œç›´æ¥åœ¨ gitbash å³å¯</p></blockquote><h3 id="ios-ç«¯"><a href="#ios-ç«¯" class="headerlink" title="ios ç«¯"></a>ios ç«¯</h3><p>ios é…ç½®æ¯”å®‰å“ç®€å•äº†è®¸å¤šï¼Œå®‰è£…å®Œååªéœ€è¦åœ¨ wifi ä¸­è®¾ç½®ä»£ç†ï¼Œåœ¨ä¹‹å æ‰“å¼€è®¾ç½® -&gt; å…³äºæœ¬æœº -&gt; è¯ä¹¦ä¿¡ä»»è®¾ç½®ï¼Œæ‰“å¼€å®Œå…¨ä¿¡ä»»å¼€å…³ã€‚å°±å¯ä»¥æŠ“åŒ…äº†ã€‚</p><blockquote><p>psï¼šå› ä¸ºæ‰‹æœºæŠ“åŒ…ï¼Œæˆªå›¾ä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥ä¸‹é¢ç”¨ pc æ¥è®²è§£å…¶ä»–å†…å®¹ï¼Œå®é™…ä½¿ç”¨æ˜¯ä¸€æ ·çš„</p></blockquote><h1 id="Throttle-Setting-æ¨¡æ‹Ÿç½‘é€Ÿ"><a href="#Throttle-Setting-æ¨¡æ‹Ÿç½‘é€Ÿ" class="headerlink" title="Throttle Setting æ¨¡æ‹Ÿç½‘é€Ÿ"></a>Throttle Setting æ¨¡æ‹Ÿç½‘é€Ÿ</h1><p>æœ‰æ—¶å€™åœ¨å¼€å‘çš„æ—¶å€™æˆ‘ä»¬æƒ³è¦æ¨¡æ‹Ÿä¸€ä¸‹ç½‘ç»œæ…¢çš„æƒ…å†µï¼Œè¿™æ—¶å€™ Charles ä»–æ˜¯å¯ä»¥å¸®åŠ©åˆ°ä½ çš„ï¼Œåœ¨ Proxy -&gt; Throttle Settingï¼Œç„¶åé€‰æ‹© Enable Throttlingï¼Œåœ¨ Throttle Preset ä¸‹é€‰æ‹©ç½‘ç»œç±»å‹å³å¯ï¼Œå…·ä½“è®¾ç½®ä½ å¯ä»¥è‡ªè¡Œæ‹¿æã€‚</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles12.png" data-fancybox="group" data-caption="Throttle Setting æ¨¡æ‹Ÿç½‘é€Ÿ" class="fancybox"><img alt="Throttle Setting æ¨¡æ‹Ÿç½‘é€Ÿ" title="Throttle Setting æ¨¡æ‹Ÿç½‘é€Ÿ" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles12.png" class="lazyload"></a></p><h1 id="Breakpoints-æ–­ç‚¹"><a href="#Breakpoints-æ–­ç‚¹" class="headerlink" title="Breakpoints æ–­ç‚¹"></a>Breakpoints æ–­ç‚¹</h1><p>åœ¨ <code>Charles</code> å‘èµ·ä¸€ä¸ªè¯·æ±‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯å¯ä»¥ç»™æŸä¸ªè¯·æ±‚æ‰“ä¸€ä¸ªæ–­ç‚¹çš„ï¼Œç„¶åæ¥è§‚å¯Ÿæˆ–è€…ä¿®æ”¹è¯·æ±‚æˆ–è€…è¿”å›çš„å†…å®¹ï¼Œä½†æ˜¯åœ¨è¿™è¿‡ç¨‹ä¸­è¦æ³¨æ„è¯·æ±‚çš„è¶…æ—¶æ—¶é—´é—®é¢˜ã€‚è¦é’ˆå¯¹æŸä¸€ä¸ªè¯·æ±‚è®¾ç½®æ–­ç‚¹ï¼Œåªéœ€è¦åœ¨è¿™ä¸ªè¯·æ±‚ç½‘å€å³å‡»é€‰æ‹© Breakpoints å°±å¯ä»¥æ–­ç‚¹æŸä¸€ä¸ªè¯·æ±‚äº†ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬ä»¥ç®€ä¹¦çš„å³ä¾§æ¨èä½œè€…ä¸ºä¾‹ï¼Œ</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles13.png" data-fancybox="group" data-caption="Breakpoints æ–­ç‚¹" class="fancybox"><img alt="Breakpoints æ–­ç‚¹" title="Breakpoints æ–­ç‚¹" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles13.png" class="lazyload"></a></p><p>å³é”®ï¼Œæ‰“ä¸Šæ–­ç‚¹ï¼Œåˆ·æ–°ä¸€ä¸‹</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles14.png" data-fancybox="group" data-caption="Breakpoints æ–­ç‚¹" class="fancybox"><img alt="Breakpoints æ–­ç‚¹" title="Breakpoints æ–­ç‚¹" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles14.png" class="lazyload"></a></p><p>é€šè¿‡å³ä¾§çš„ Edit Request å°±å¯ä»¥ä¿®æ”¹æˆ‘ä»¬çš„è¯·æ±‚å‚æ•°å•¦</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles15.png" data-fancybox="group" data-caption="Breakpoints æ–­ç‚¹" class="fancybox"><img alt="Breakpoints æ–­ç‚¹" title="Breakpoints æ–­ç‚¹" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles15.png" class="lazyload"></a></p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬æŠŠ <code>count</code> ä¿®æ”¹ä¸º 2ï¼Œåˆ™é¡µé¢è¿”å›çš„æ•°æ®åªæœ‰ä¸¤æ¡äº†</p><h1 id="Rewrite-Settings-å†…å®¹æ›¿æ¢"><a href="#Rewrite-Settings-å†…å®¹æ›¿æ¢" class="headerlink" title="Rewrite Settings å†…å®¹æ›¿æ¢"></a>Rewrite Settings å†…å®¹æ›¿æ¢</h1><p>æœ‰æ—¶å€™æˆ‘ä»¬ä¼šæµ‹ä¸€ä¸‹è¯·æ±‚çš„å‚æ•°ä¸åŒä¼šå¸¦æ¥ä¸åŒçš„è¿”å›ç»“æœä»¥æµ‹è¯•æ˜¯å¦è¾¾åˆ°ä¸šåŠ¡éœ€æ±‚ï¼Œæˆ–è€…éœ€è¦ä¸åŒçš„è¿”å›ç»“æœæ¥éªŒè¯æˆ‘ä»¬å¯¹æ•°æ®çš„å¤„ç†æ˜¯å¦æ­£ç¡®ï¼Œè¿™æ—¶å€™éœ€è¦åå°çš„åŒäº‹é…åˆï¼Œä½†æ˜¯æœ‰äº† <code>Charles</code>ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±æŠŠæ§æ¥å£è¿”å›æ¥çš„å†…å®¹ï¼Œæ¯”å¦‚æ•°æ®çš„ç©ºä¸å¦ï¼Œæ•°æ®çš„é•¿çŸ­ç­‰ç­‰ã€‚</p><blockquote><p>å†æˆ–è€…ï¼Œä¿®æ”¹åˆ«äººçš„ app é‡Œé¢æ¥å£çš„è¿”å›å€¼ï¼Œä¾›åšä¸€äº›è‡ªå·±æƒ³åšçš„äº‹ ğŸ˜</p></blockquote><p>å‡» Tools -&gt; Rewrite Settings , å°±å¯ä»¥ä½¿ç”¨æˆ‘ä»¬çš„å†…å®¹æ›¿æ¢äº†ï¼ŒåŒæ ·æ˜¯ä»¥å…¨éƒ¨æ¸ é“è¿™ä¸ªæ¥å£ä¸ºä¾‹<br>ç‚¹å‡» enableï¼Œå¯ç”¨è¯¥åŠŸèƒ½ï¼ˆäº‹å…ˆå¤åˆ¶å¥½æ¥å£é“¾æ¥ï¼‰ï¼Œç‚¹å‡» Add æ·»åŠ ä¸€ä¸ªé‡å†™é…ç½®ï¼Œè¿™é‡Œå‘½åä¸º <code>Test</code></p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles16.png" data-fancybox="group" data-caption="Rewrite Settings å†…å®¹æ›¿æ¢" class="fancybox"><img alt="Rewrite Settings å†…å®¹æ›¿æ¢" title="Rewrite Settings å†…å®¹æ›¿æ¢" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles16.png" class="lazyload"></a></p><p>ç‚¹å‡»å³ä¸‹ add æŒ‰é’®ï¼Œé€‰ä¸­ body ï¼Œè®¾ç½®è¦ä¿®æ”¹çš„å­—ç¬¦ï¼Œä¿®æ”¹å³å¯</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles17.png" data-fancybox="group" data-caption="Rewrite Settings å†…å®¹æ›¿æ¢" class="fancybox"><img alt="Rewrite Settings å†…å®¹æ›¿æ¢" title="Rewrite Settings å†…å®¹æ›¿æ¢" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles17.png" class="lazyload"></a></p><p>è¿™é‡Œæœ‰ä¸ªå°é—®é¢˜ï¼Œå› ä¸ºæˆ‘ä»¬ä¿®æ”¹çš„æ˜¯ä¸­æ–‡ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨è¿”å›çš„æ•°æ® Header ä¸­ Content-Type å­—æ®µå£°æ˜ charset=UTF-8ã€‚å³ï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles18.png" data-fancybox="group" data-caption="Rewrite Settings å†…å®¹æ›¿æ¢" class="fancybox"><img alt="Rewrite Settings å†…å®¹æ›¿æ¢" title="Rewrite Settings å†…å®¹æ›¿æ¢" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles18.png" class="lazyload"></a></p><p>ä¿®æ”¹å®Œæˆåï¼Œæˆ‘ä»¬çœ‹ä¸‹ç•Œé¢çš„å˜åŒ–ï¼Œæ˜¯ä¸æ˜¯æ‰€æœ‰ <code>ä¹”æ±‰ç«¥</code> éƒ½å˜æˆäº† <code>ç£¨è¹­å…ˆç”Ÿ</code> å•Š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles19.png" data-fancybox="group" data-caption="Rewrite Settings å†…å®¹æ›¿æ¢" class="fancybox"><img alt="Rewrite Settings å†…å®¹æ›¿æ¢" title="Rewrite Settings å†…å®¹æ›¿æ¢" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles19.png" class="lazyload"></a></p><h1 id="Map-Remote-è¯·æ±‚é‡å®šå‘"><a href="#Map-Remote-è¯·æ±‚é‡å®šå‘" class="headerlink" title="Map Remote è¯·æ±‚é‡å®šå‘"></a>Map Remote è¯·æ±‚é‡å®šå‘</h1><p>æ±‚é‡å®šå‘çš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå¼€å‘ä¸­ä¸€èˆ¬éƒ½æ˜¯æµ‹è¯•ç¯å¢ƒï¼Œå¦‚æœæˆ‘ä»¬æƒ³å¯¹æ¯”ä¸€ä¸‹å’Œçº¿ä¸Šç‰ˆæœ¬çš„åŒºåˆ«çš„è¯ï¼Œå¯ä»¥è®²æµ‹è¯•çš„è¯·æ±‚é‡å®šå‘åˆ°æ­£å¼ç¯å¢ƒä¸‹ã€‚åœ¨é€‰æ‹© Tools -&gt; Map Remote ä¸‹ï¼š</p><blockquote><p>ps: å…¶å®è¿™ä¸ªå’Œé‡å†™ä½œç”¨ç±»ä¼¼ï¼Œä½†æ˜¯æ¯”é‡å†™é€‚ç”¨æ€§æ›´å¹¿ï¼Œè€Œä¸”æ›´å¯æ§</p></blockquote><p>å’Œ Rewrite æ“ä½œç±»ä¼¼ï¼Œæˆ‘ä»¬åŒæ ·éœ€è¦ç‚¹å‡» enable ï¼Œä¹‹åè¾“å…¥æˆ‘ä»¬éœ€è¦é‡å®šå‘çš„åœ°å€</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles20.png" data-fancybox="group" data-caption="Map Remote è¯·æ±‚é‡å®šå‘" class="fancybox"><img alt="Map Remote è¯·æ±‚é‡å®šå‘" title="Map Remote è¯·æ±‚é‡å®šå‘" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles20.png" class="lazyload"></a></p><p>æ˜ å°„æ•°æ®å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">json</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"users"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"id"</span>: <span class="number">5796592</span>,</span><br><span class="line">      <span class="attr">"slug"</span>: <span class="string">"86b81ed8e35c"</span>,</span><br><span class="line">      <span class="attr">"nickname"</span>: <span class="string">"ç£¨è¹­å…ˆç”Ÿ"</span>,</span><br><span class="line">      <span class="attr">"avatar_source"</span>: <span class="string">"https://cdn.jsdelivr.net/gh/GATING/blog_imgs@master/blog/avatar.png"</span>,</span><br><span class="line">      <span class="attr">"total_likes_count"</span>: <span class="number">200044</span>,</span><br><span class="line">      <span class="attr">"total_wordage"</span>: <span class="number">36871100</span>,</span><br><span class="line">      <span class="attr">"is_following_user"</span>: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"total_count"</span>: <span class="number">41931</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>è¿™é‡Œä¸»è¦ä¿®æ”¹äº†ç¬¬ä¸€ä¸ªæ•°æ®ï¼Œæˆ‘ä»¬çœ‹çœ‹æ•ˆæœ</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles21.png" data-fancybox="group" data-caption="Map Remote è¯·æ±‚é‡å®šå‘" class="fancybox"><img alt="Map Remote è¯·æ±‚é‡å®šå‘" title="Map Remote è¯·æ±‚é‡å®šå‘" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-06-04/charles21.png" class="lazyload"></a></p><p>å‘ç°ï¼Œæ•°æ®çš„ç¡®å‘ç”Ÿäº†æ”¹å˜ï¼Œä¹Ÿå®ç°äº†æˆ‘ä»¬çš„ç›®çš„</p><h1 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h1><p>æ„Ÿè°¢å„ä½è§‚ä¼—è€çˆ·çš„è§‚çœ‹å•¦ï¼ŒCharles è¿˜æœ‰ä¸€äº›å…¶ä»–çš„å¦™ç”¨ã€‚å°±ç­‰ç€å„ä½æ…¢æ…¢çš„å»å‘æ˜å§ï¼</p>]]></content>
      
      
      <categories>
          
          <category> æŠ“åŒ…å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Charles </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”¨vueå®ç°ä¸€ä¸ªç®€å•çš„æ—¶é—´å±å¹•</title>
      <link href="/2020-03-14/%E7%94%A8vue%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E6%97%B6%E9%97%B4%E5%B1%8F%E5%B9%95/"/>
      <url>/2020-03-14/%E7%94%A8vue%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E6%97%B6%E9%97%B4%E5%B1%8F%E5%B9%95/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å»å¹´ç”¨äº†ä¸€ä¸ªå°çš„ <code>app</code>ï¼Œå«åš <code>ä¸€ä¸ªæœ¨å‡½</code>ï¼Œæœ¬æ¥æƒ³ç€ç”¨æ¥åšåŠ¨ç”»ä¼˜åŒ–å°±åˆ æ‰äº†çš„ï¼Œä¸è¿‡çœ‹åˆ°ä»–æœ‰ä¸ªæ—¶é—´å±å¹•çš„å°å·¥å…·ï¼Œå°±ç‚¹è¿›å»çœ‹äº†ä¸‹ï¼Œè§‰å¾—æŒºå¥½ç©çš„ï¼Œå°±æƒ³ç€èƒ½ä¸èƒ½è‡ªå·±å®ç°ä¸€ä¸‹ã€‚</p><blockquote><p>ps: é—²è¯ä¸å¤šè¯´ï¼Œå…ˆä¸Šä¾‹å­<a href="https://gating.gitee.io/demo/vue-time/" target="_blank" rel="noopener">ç‚¹æˆ‘æŸ¥çœ‹</a>,è§‰å¾—æ²¡å•¥æ„æ€çš„å°±ä¸éœ€è¦å†å¾€ä¸‹çœ‹äº†</p></blockquote><h1 id="ç®€å•çš„æ­å»ºä¸€ä¸‹"><a href="#ç®€å•çš„æ­å»ºä¸€ä¸‹" class="headerlink" title="ç®€å•çš„æ­å»ºä¸€ä¸‹"></a>ç®€å•çš„æ­å»ºä¸€ä¸‹</h1><p>åˆå§‹åŒ–ä¸€ä¸ª <code>vue</code> é¡¹ç›®</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vue create vue-time</span><br></pre></td></tr></table></figure></div><p>ç„¶åæ— è„‘ä¸‹ä¸€æ­¥å°±å¥½äº†ï¼ˆå›è½¦ï¼‰ï¼Œè¿™é‡Œæˆ‘æ‰“ç®—ç”¨ <code>scss</code> æ–¹ä¾¿æˆ‘ä»¬ä¹¦å†™æ ·å¼ ï¼Œæ‰€ä»¥åˆ›å»ºå®Œæˆåï¼Œæˆ‘ä»¬åœ¨å®‰è£…ä¸‹ <code>scss</code></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd vue-time</span><br><span class="line">npm i sass-loader node-sass -D</span><br></pre></td></tr></table></figure></div><blockquote><p>ps: å¦‚æœç½‘ç»œä¸å¥½ï¼Œå°±æ¢ä¸‹æºæˆ–è€…ç”¨ <code>cnpm</code> å§</p></blockquote><h2 id="æ–°å»ºæ—¶é—´å±å¹•ç»„ä»¶"><a href="#æ–°å»ºæ—¶é—´å±å¹•ç»„ä»¶" class="headerlink" title="æ–°å»ºæ—¶é—´å±å¹•ç»„ä»¶"></a>æ–°å»ºæ—¶é—´å±å¹•ç»„ä»¶</h2><p>åœ¨ <code>components</code> ç›®å½•ä¸‹æ–°å»º <code>TimeScreen.vue</code> æ–‡ä»¶ï¼Œç„¶åé€šè¿‡ <code>vbase</code> æŒ‡ä»¤ç”Ÿæˆç”Ÿæˆä¸€ä¸ªæœ€åŸºç¡€çš„ <code>vue</code> ä»£ç ç‰‡æ®µ</p><blockquote><p>ps: <code>vbase</code> æ˜¯ <code>vscode</code> ä¸­ vue ä»£ç ç‰‡æ®µçš„ä¸€ä¸ªæ’ä»¶</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">    name: <span class="string">"TimeScreen"</span>,</span></span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"scss"</span> <span class="attr">scoped</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></div><h2 id="æ€è€ƒä¸€ä¸‹ï¼Œå¦‚ä½•åšæ—¶é—´åˆ‡æ¢çš„åŠ¨ç”»"><a href="#æ€è€ƒä¸€ä¸‹ï¼Œå¦‚ä½•åšæ—¶é—´åˆ‡æ¢çš„åŠ¨ç”»" class="headerlink" title="æ€è€ƒä¸€ä¸‹ï¼Œå¦‚ä½•åšæ—¶é—´åˆ‡æ¢çš„åŠ¨ç”»"></a>æ€è€ƒä¸€ä¸‹ï¼Œå¦‚ä½•åšæ—¶é—´åˆ‡æ¢çš„åŠ¨ç”»</h2><p>emmmâ€¦ ä¸çŸ¥æ˜¯å¦æœ‰çœ‹è¿‡æˆ‘ä¹‹å‰çš„ä¸€ç¯‡æ–‡ç« <a href="https://gatings.cn/2018-06-14/%E7%94%A8jq%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%8D%95%E4%B8%AAspan%E4%B8%BA%E5%8D%95%E4%B8%AA%E7%9A%84%E6%95%B0%E5%AD%97%E5%8A%A8%E7%94%BB/">ç”¨ jq å®ç°çš„å•ä¸ª span ä¸ºå•ä¸ªçš„æ•°å­—åŠ¨ç”»</a>ï¼Œæ²¡é”™ï¼Œå…¶å®æˆ‘ä»¬å®ç°çš„æ€è·¯ï¼Œå’Œè¿™é‡ŒåŸºæœ¬ä¸€æ ·ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬å°±åˆ†æåˆ†ææˆ‘ä»¬è¯¥æ€ä¹ˆæ¥å®ç°äº†å§</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦æ˜ç¡®ä¸€ä¸‹ï¼Œè¦æœ‰å¤šå°‘ä¸ª <code>span</code>ï¼Œä¼—æ‰€å‘¨çŸ¥ï¼Œä¸€å¤©æœ€åå°±æ˜¯<strong>23:59:59</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰€éœ€è¦çš„ <code>span</code> æ•°ç»„ä¸º <code>[3, 10, 0, 6, 10, 0, 6, 10]</code></p><blockquote><p>ps: ä¸­é—´çš„ <code>:</code> æ˜¯åªéœ€è¦ä¸€ä¸ª <code>span</code> çš„</p></blockquote><p>å› ä¸ºå¸ƒå±€ä¸æ˜¯æˆ‘ä»¬è¦å°†çš„é‡ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±æƒ³æƒ³æˆ‘ä»¬è¯¥æ€ä¹ˆè·å–æˆ‘ä»¬éœ€è¦çš„ä¸œè¥¿ã€‚æ¯”å¦‚ï¼Œæ€ä¹ˆè·å–åˆ°<code>Saturday 14 March</code>,æ€ä¹ˆè·å–åˆ°å½“å‰æ—¶é—´</p><p>ä¼—æ‰€å‘¨çŸ¥å•¦ï¼Œæˆ‘ä»¬çŸ¥é“ <code>js</code> ä¸­æä¾›äº† <code>Date</code> è¿™ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»–å¯ä»¥è·å–æˆ‘ä»¬æƒ³è¦çš„ä¸œè¥¿ï¼ŒåºŸè¯ä¸å¤šè¯´äº†ï¼Œå¼€å§‹å†™ä»£ç å§ã€‚</p><p>æ–°å»º <code>utils</code> ç›®å½•ï¼Œåœ¨è¯¥ç›®å½•ä¸‹æ–°å»º <code>time.js</code> æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æœˆä»½</span></span><br><span class="line"><span class="keyword">const</span> months = [</span><br><span class="line">  <span class="string">"January"</span>,</span><br><span class="line">  <span class="string">"February"</span>,</span><br><span class="line">  <span class="string">"March"</span>,</span><br><span class="line">  <span class="string">"April"</span>,</span><br><span class="line">  <span class="string">"May"</span>,</span><br><span class="line">  <span class="string">"June"</span>,</span><br><span class="line">  <span class="string">"July"</span>,</span><br><span class="line">  <span class="string">"August"</span>,</span><br><span class="line">  <span class="string">"September"</span>,</span><br><span class="line">  <span class="string">"October"</span>,</span><br><span class="line">  <span class="string">"November"</span>,</span><br><span class="line">  <span class="string">"December"</span>,</span><br><span class="line">];</span><br><span class="line"><span class="comment">// æ˜ŸæœŸ</span></span><br><span class="line"><span class="keyword">const</span> weekday = [</span><br><span class="line">  <span class="string">"Sunday"</span>,</span><br><span class="line">  <span class="string">"Monday"</span>,</span><br><span class="line">  <span class="string">"Tuesday"</span>,</span><br><span class="line">  <span class="string">"Wednesday"</span>,</span><br><span class="line">  <span class="string">"Thursday"</span>,</span><br><span class="line">  <span class="string">"Friday"</span>,</span><br><span class="line">  <span class="string">"Saturday"</span>,</span><br><span class="line">];</span><br><span class="line"><span class="comment">// è·å–æ—¥æœŸ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getTime</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">  <span class="keyword">const</span> days = date.getDate();</span><br><span class="line">  <span class="keyword">const</span> month = date.getMonth();</span><br><span class="line">  <span class="keyword">const</span> day = date.getDay();</span><br><span class="line">  <span class="keyword">const</span> hours = toDou(date.getHours());</span><br><span class="line">  <span class="keyword">const</span> minutes = toDou(date.getMinutes());</span><br><span class="line">  <span class="keyword">const</span> seconds = toDou(date.getSeconds());</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    date: <span class="string">`<span class="subst">$&#123;weekday[day]&#125;</span> <span class="subst">$&#123;days&#125;</span> <span class="subst">$&#123;months[month]&#125;</span>`</span>,</span><br><span class="line">    time: <span class="string">`<span class="subst">$&#123;hours&#125;</span>:<span class="subst">$&#123;minutes&#125;</span>:<span class="subst">$&#123;seconds&#125;</span>`</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è½¬æˆä¸¤ä½ eg: 6 =&gt; 06</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toDou</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> num = ~~str;</span><br><span class="line">  <span class="keyword">return</span> num &gt; <span class="number">9</span> ? num : <span class="string">"0"</span> + str;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•ä¸€ä¸‹æˆ‘ä»¬å†™çš„æ–¹æ³•ï¼Œä¸Šçº¿è®°å¾—æ³¨é‡Šæ‰</span></span><br><span class="line"><span class="comment">// console.log(getTime()) // &#123;date: "Saturday 14 March", time: "18:53:40"&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> getTime;</span><br></pre></td></tr></table></figure></div><p>é€šè¿‡ä¸Šé¢ä»£ç ï¼Œæˆ‘ä»¬å°±å¾—åˆ°æˆ‘ä»¬éœ€è¦çš„æ ¼å¼å•¦ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å†™å¸ƒå±€å•¦ï¼Œä½†è¿™é‡Œä¸æ˜¯æˆ‘ä»¬çš„é‡ç‚¹ï¼Œæ‰€ä»¥ç•¥è¿‡</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">"time-container"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:class</span>=<span class="string">"&#123; dark: isDark &#125;"</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">click</span>=<span class="string">"toggleClass"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:date</span>=<span class="string">"date"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"time"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">"(str, idx) in time"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">"time-num"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-if</span>=<span class="string">"str !== ':'"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:style</span>=<span class="string">"numStyle[idx]"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:key</span>=<span class="string">"idx"</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-for</span>=<span class="string">"(i, spanIdx) in haveSpan[idx]"</span> <span class="attr">:key</span>=<span class="string">"spanIdx"</span></span></span><br><span class="line"><span class="tag">            &gt;</span>&#123;&#123; i - 1 &#125;&#125;<span class="tag">&lt;/<span class="name">span</span></span></span><br><span class="line"><span class="tag">          &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>0<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"time-dist"</span> <span class="attr">v-else</span> <span class="attr">:key</span>=<span class="string">"idx"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; str &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> getTime <span class="keyword">from</span> <span class="string">"../utils/time"</span>;</span></span><br><span class="line"><span class="actionscript">  <span class="comment">// è®¾ç½®æ ·å¼</span></span></span><br><span class="line"><span class="actionscript">  <span class="function"><span class="keyword">function</span> <span class="title">setStyle</span><span class="params">(val)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> <span class="string">`transform: translateY(-<span class="subst">$&#123;~~val * <span class="number">100</span>&#125;</span>%)`</span>;</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="actionscript">  <span class="comment">// æ¯ä¸ªå­—çš„æ ·å¼</span></span></span><br><span class="line"><span class="actionscript">  <span class="function"><span class="keyword">function</span> <span class="title">numStyle</span><span class="params">(time)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> time.split(<span class="string">""</span>).map(<span class="function">(<span class="params">val</span>) =&gt;</span> setStyle(val));</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">    name: <span class="string">"TimeScreen"</span>,</span></span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="actionscript">      <span class="keyword">const</span> &#123; time, date &#125; = getTime();</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line">        isDark: 0,</span><br><span class="line">        time,</span><br><span class="line">        date,</span><br><span class="line">        numStyle: numStyle(time),</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line"><span class="actionscript">      <span class="comment">// åˆ‡æ¢æ ·å¼</span></span></span><br><span class="line">      toggleClass() &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.isDark = !<span class="keyword">this</span>.isDark;</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line"><span class="actionscript">      <span class="comment">// åˆ¤å•æœ‰å¤šå°‘ä¸ªSpan</span></span></span><br><span class="line"><span class="actionscript">      <span class="comment">// æ¯”è¾ƒå°æ—¶æ•°æœ€å¤š24å°æ—¶ï¼Œæ‰€ä»¥ç¬¬ä¸€ä½æœ€å¤šæ˜¯3ä¸ªï¼Œ0ã€1ã€2</span></span></span><br><span class="line"><span class="actionscript">      <span class="comment">// è¿™é‡Œä½¿ç”¨ freeze æ˜¯å› ä¸ºè¿™ä¸ªå€¼å·²ç»å›ºå®šï¼Œæ²¡æœ‰å¿…è¦è¿›è¡Œæ•°æ®åŠ«æŒ</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.haveSpan = <span class="built_in">Object</span>.freeze([<span class="number">3</span>, <span class="number">10</span>, <span class="number">0</span>, <span class="number">6</span>, <span class="number">10</span>, <span class="number">0</span>, <span class="number">6</span>, <span class="number">10</span>]);</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"scss"</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line">  %flexCenter &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    align-items: center;</span><br><span class="line">  &#125;</span><br><span class="line">  $timeColor: #d9d4d0;</span><br><span class="line">  $white: #fff;</span><br><span class="line"><span class="css">  <span class="selector-class">.time-container</span> &#123;</span></span><br><span class="line">    background: $white;</span><br><span class="line">    color: $timeColor;</span><br><span class="line">    position: absolute;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 100%;</span><br><span class="line">    max-width: 540px;</span><br><span class="line">    top: 0;</span><br><span class="line">    left: 50%;</span><br><span class="line">    transform: translateX(-50%);</span><br><span class="line"><span class="css">    &amp;<span class="selector-class">.dark</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">background</span>: <span class="selector-id">#000</span>;</span></span><br><span class="line">      color: $white;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    &amp;<span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line">      content: attr(date);</span><br><span class="line">      position: absolute;</span><br><span class="line">      color: $timeColor;</span><br><span class="line">      font-size: 18px;</span><br><span class="line">      line-height: 1;</span><br><span class="line">      transform: rotate(90deg);</span><br><span class="line">      bottom: 20%;</span><br><span class="line">      left: -48px;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="keyword">@extend</span> %flexCenter;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.time</span> &#123;</span></span><br><span class="line">      font-size: 70px;</span><br><span class="line">      transform: rotate(90deg);</span><br><span class="line">      position: relative;</span><br><span class="line">      height: 106px;</span><br><span class="line">      line-height: 106px;</span><br><span class="line">      overflow: hidden;</span><br><span class="line"><span class="css">      <span class="keyword">@extend</span> %flexCenter;</span></span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="selector-class">.time-num</span> &#123;</span></span><br><span class="line">        position: relative;</span><br><span class="line">        width: 100%;</span><br><span class="line">        height: 100%;</span><br><span class="line">        text-align: center;</span><br><span class="line">        text-shadow: 0 0 2px $white;</span><br><span class="line"><span class="css">        <span class="selector-tag">transition</span>: 0<span class="selector-class">.5s</span> <span class="selector-tag">all</span>;</span></span><br><span class="line">        span &#123;</span><br><span class="line">          display: block;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"><span class="css">      <span class="selector-class">.time-dist</span> &#123;</span></span><br><span class="line">        padding-bottom: 15px;</span><br><span class="line">        margin: 0 10px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>å†™åˆ°è¿™é‡Œï¼Œå…¶å®åŸºæœ¬çš„æ ·å­å·²ç»å‡ºæ¥äº†ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨åˆ°äº† <code>attr</code> å‡½æ•°ï¼Œç”¨æ¥å›é€‰æ‹©å…ƒç´ çš„å±æ€§å€¼ï¼Œè¿™ä¸ªå°æŠ€å·§åœ¨ä¸€äº›åœºæ™¯å¾ˆç”¨ç”¨å“¦ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬å¤šåŠ äº†ä¸€ä¸ª <code>&lt;span&gt;0&lt;/span&gt;</code> è¿™é‡Œä¸»è¦æ˜¯ä¸ºäº†æ— ç¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•åšåˆ°æ— ç¼å‘¢ï¼Ÿå³ï¼Œå½“æˆ‘ä»¬æ»šåŠ¨æœ€ä½ä¸‹çš„æ—¶å€™ï¼Œåœ¨<code>500ms</code>ä¹‹å†…è®©åŠ¨ç”»å–æ¶ˆã€‚</p><blockquote><p>ps: è¿™é‡Œçš„ <code>500ms</code> æ˜¯å› ä¸ºåŠ¨ç”»è®¾ç½®äº† <code>500ms</code>,æ‰€ä»¥éœ€è¦ç”¨ <code>1s - 500ms</code> å¾—å‡ºæ¥çš„<code>500ms</code>å“¦</p></blockquote><p>æ—¢ç„¶çŸ¥é“äº†åŸç†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¼€å§‹å†™æˆ‘ä»¬çš„ä»£ç äº†</p><p>é¦–å…ˆå®šä¹‰ä¸€ä¸‹æ¸…ç©ºåŠ¨ç”»ä¹‹åçš„æ ·å¼ï¼Œå³</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ¸…é™¤æ ·å¼</span></span><br><span class="line"><span class="keyword">const</span> style = <span class="string">"transform: translateY(0%);transition:0s all"</span>;</span><br></pre></td></tr></table></figure></div><p>é‚£ä¹ˆä»€ä¹ˆæ—¶å€™æ¸…ç©ºå‘¢ï¼Œå‰é¢ä¹Ÿè¯´äº†ï¼Œå½“æ»šåŠ¨åˆ°æœ€ä¸‹é¢çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯å½“ <code>time</code> è¿™ä¸ªå­—ç¬¦ä¸²æŸä¸ªä¸º <code>0</code> çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±è¦æ¸…ç©ºäº†ï¼Œæ‰€ä»¥</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">this</span>.time.split(<span class="string">""</span>).forEach(<span class="function">(<span class="params">val, idx</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// å½“ val ä¸º 0 æ—¶ï¼Œè¯´æ˜å·²ç»æ»šåˆ°æœ€åº•ä¸‹ï¼Œè¿™é‡Œéœ€è¦æ¸…é™¤åŠ¨ç”»ï¼Œå¹¶è®©ä»–å›åˆ°æœ€é¡¶ä¸Šæ¥å®ç°æ— ç¼</span></span><br><span class="line">    <span class="keyword">if</span> (val == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.numStyle[idx] !== style) &#123;</span><br><span class="line">            <span class="comment">// 500msåæ¸…é™¤å½“å‰è¿™ä¸ªspançš„åŠ¨ç”»</span></span><br><span class="line">            <span class="keyword">this</span>.removeAnimate(idx);</span><br><span class="line">            <span class="comment">// è®¾ç½®æ ·å¼</span></span><br><span class="line">            <span class="keyword">this</span>.numStyle[idx] = setStyle(<span class="keyword">this</span>.haveSpan[idx]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.numStyle[idx] = setStyle(val);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¸…é™¤åŠ¨ç”»</span></span><br><span class="line">removeAnimate(idx) &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.numStyle[idx] = style;</span><br><span class="line">        <span class="keyword">this</span>.numStyle = [...this.numStyle];</span><br><span class="line">    &#125;, <span class="number">500</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>æœ€åï¼Œå°±æ˜¯å†™ä¸€ä¸ªç®€å•çš„å®šæ—¶å™¨å•¦ï¼Œæˆ‘æƒ³è¿™åº”è¯¥éš¾ä¸å€’å„ä½å°ä¼™ä¼´å•¦ï¼Œæ‰€ä»¥æˆ‘å°±ä¸è¯¦è§£å•¦ï¼Œå°±è´´ä¸€ä¸‹ä»£ç </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">"time-container"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:class</span>=<span class="string">"&#123; dark: isDark &#125;"</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">click</span>=<span class="string">"toggleClass"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:date</span>=<span class="string">"date"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"time"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">"(str, idx) in time"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">"time-num"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-if</span>=<span class="string">"str !== ':'"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:style</span>=<span class="string">"numStyle[idx]"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:key</span>=<span class="string">"idx"</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-for</span>=<span class="string">"(i, spanIdx) in haveSpan[idx]"</span> <span class="attr">:key</span>=<span class="string">"spanIdx"</span></span></span><br><span class="line"><span class="tag">            &gt;</span>&#123;&#123; i - 1 &#125;&#125;<span class="tag">&lt;/<span class="name">span</span></span></span><br><span class="line"><span class="tag">          &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>0<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"time-dist"</span> <span class="attr">v-else</span> <span class="attr">:key</span>=<span class="string">"idx"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; str &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> getTime <span class="keyword">from</span> <span class="string">"../utils/time"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">  <span class="comment">// æ¸…é™¤æ ·å¼</span></span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> style = <span class="string">"transform: translateY(0%);transition:0s all"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">  <span class="comment">// è®¾ç½®æ ·å¼</span></span></span><br><span class="line"><span class="actionscript">  <span class="function"><span class="keyword">function</span> <span class="title">setStyle</span><span class="params">(val)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> <span class="string">`transform: translateY(-<span class="subst">$&#123;~~val * <span class="number">100</span>&#125;</span>%)`</span>;</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="actionscript">  <span class="comment">// æ¯ä¸ªå­—çš„æ ·å¼</span></span></span><br><span class="line"><span class="actionscript">  <span class="function"><span class="keyword">function</span> <span class="title">numStyle</span><span class="params">(time)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">// è¿™é‡Œç­‰äº0åˆ™æ¸…é™¤æ ·å¼ï¼Œé¿å…0ç‚¹æ—¶ï¼Œæœ‰å¥‡æ€ªçš„bug</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> time.split(<span class="string">""</span>).map(<span class="function">(<span class="params">val</span>) =&gt;</span> (val == <span class="string">"0"</span> ? style : setStyle(val)));</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">    name: <span class="string">"TimeScreen"</span>,</span></span><br><span class="line">    data() &#123;</span><br><span class="line"><span class="actionscript">      <span class="comment">// è·å–æ—¶é—´</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> &#123; time, date &#125; = getTime();</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line">        isDark: 0,</span><br><span class="line">        time,</span><br><span class="line">        date,</span><br><span class="line">        numStyle: numStyle(time),</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line"><span class="actionscript">      <span class="comment">// æ›´æ–°æ ·å¼</span></span></span><br><span class="line">      updateStyle() &#123;</span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.time.split(<span class="string">""</span>).forEach(<span class="function">(<span class="params">val, idx</span>) =&gt;</span> &#123;</span></span><br><span class="line">          if (val == 0) &#123;</span><br><span class="line"><span class="actionscript">            <span class="keyword">if</span> (<span class="keyword">this</span>.numStyle[idx] !== style) &#123;</span></span><br><span class="line"><span class="actionscript">              <span class="keyword">this</span>.removeAnimate(idx);</span></span><br><span class="line"><span class="actionscript">              <span class="keyword">this</span>.numStyle[idx] = setStyle(<span class="keyword">this</span>.haveSpan[idx]);</span></span><br><span class="line">            &#125;</span><br><span class="line"><span class="actionscript">          &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">this</span>.numStyle[idx] = setStyle(val);</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line"><span class="actionscript">      <span class="comment">// åˆ‡æ¢æ ·å¼</span></span></span><br><span class="line">      toggleClass() &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.isDark = !<span class="keyword">this</span>.isDark;</span></span><br><span class="line">      &#125;,</span><br><span class="line"><span class="actionscript">      <span class="comment">// æ¸…é™¤æ ·å¼</span></span></span><br><span class="line">      removeAnimate(idx) &#123;</span><br><span class="line"><span class="javascript">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">this</span>.numStyle[idx] = style;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">this</span>.numStyle = [...this.numStyle];</span></span><br><span class="line">        &#125;, 500);</span><br><span class="line">      &#125;,</span><br><span class="line"><span class="actionscript">      <span class="comment">// æ¯ç§’æ›´æ–°æ—¶é—´</span></span></span><br><span class="line">      updateTime() &#123;</span><br><span class="line"><span class="actionscript">        <span class="keyword">const</span> &#123; time, date &#125; = getTime();</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.time = time;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.date = date;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.updateStyle();</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line"><span class="actionscript">      <span class="comment">// åˆ¤å•æœ‰å¤šå°‘ä¸ªSpan</span></span></span><br><span class="line"><span class="actionscript">      <span class="comment">// æ¯”è¾ƒå°æ—¶æ•°æœ€å¤š24å°æ—¶ï¼Œæ‰€ä»¥ç¬¬ä¸€ä½æœ€å¤šæ˜¯3ä¸ªï¼Œ0ã€1ã€2</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.haveSpan = <span class="built_in">Object</span>.freeze([<span class="number">3</span>, <span class="number">10</span>, <span class="number">0</span>, <span class="number">6</span>, <span class="number">10</span>, <span class="number">0</span>, <span class="number">6</span>, <span class="number">10</span>]);</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// å®šæ—¶å™¨</span></span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.timer = <span class="literal">null</span>;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line"><span class="actionscript">      <span class="comment">// è§¦å‘å®šæ—¶å™¨</span></span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.timer = setInterval(<span class="keyword">this</span>.updateTime, <span class="number">1000</span>);</span></span><br><span class="line">    &#125;,</span><br><span class="line">    destroyed() &#123;</span><br><span class="line"><span class="actionscript">      <span class="comment">// æ¸…é™¤å®šæ—¶å™¨</span></span></span><br><span class="line"><span class="actionscript">      clearInterval(<span class="keyword">this</span>.timer);</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"scss"</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line">  %flexCenter &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    align-items: center;</span><br><span class="line">  &#125;</span><br><span class="line">  $timeColor: #d9d4d0;</span><br><span class="line">  $white: #fff;</span><br><span class="line"><span class="css">  <span class="selector-class">.time-container</span> &#123;</span></span><br><span class="line">    background: $white;</span><br><span class="line">    color: $timeColor;</span><br><span class="line">    position: absolute;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 100%;</span><br><span class="line">    max-width: 540px;</span><br><span class="line">    top: 0;</span><br><span class="line">    left: 50%;</span><br><span class="line">    transform: translateX(-50%);</span><br><span class="line"><span class="css">    &amp;<span class="selector-class">.dark</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">background</span>: <span class="selector-id">#000</span>;</span></span><br><span class="line">      color: $white;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    &amp;<span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line">      content: attr(date);</span><br><span class="line">      position: absolute;</span><br><span class="line">      color: $timeColor;</span><br><span class="line">      font-size: 18px;</span><br><span class="line">      line-height: 1;</span><br><span class="line">      transform: rotate(90deg);</span><br><span class="line">      bottom: 20%;</span><br><span class="line">      left: -48px;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="keyword">@extend</span> %flexCenter;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.time</span> &#123;</span></span><br><span class="line">      font-size: 70px;</span><br><span class="line">      transform: rotate(90deg);</span><br><span class="line">      position: relative;</span><br><span class="line">      height: 106px;</span><br><span class="line">      line-height: 106px;</span><br><span class="line">      overflow: hidden;</span><br><span class="line"><span class="css">      <span class="keyword">@extend</span> %flexCenter;</span></span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="selector-class">.time-num</span> &#123;</span></span><br><span class="line">        position: relative;</span><br><span class="line">        width: 100%;</span><br><span class="line">        height: 100%;</span><br><span class="line">        text-align: center;</span><br><span class="line">        text-shadow: 0 0 2px $white;</span><br><span class="line"><span class="css">        <span class="selector-tag">transition</span>: 0<span class="selector-class">.5s</span> <span class="selector-tag">all</span>;</span></span><br><span class="line">        span &#123;</span><br><span class="line">          display: block;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"><span class="css">      <span class="selector-class">.time-dist</span> &#123;</span></span><br><span class="line">        padding-bottom: 15px;</span><br><span class="line">        margin: 0 10px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></div><h1 id="æœ€åçš„æœ€å"><a href="#æœ€åçš„æœ€å" class="headerlink" title="æœ€åçš„æœ€å"></a>æœ€åçš„æœ€å</h1><p>æ„Ÿè°¢å„ä½è§‚ä¼—è€çˆ·çš„è§‚çœ‹å•¦ O(âˆ©_âˆ©)Oï¼Œå¸Œæœ›å¤§å®¶å¯ä»¥ä¸€èµ·è¿›æ­¥</p>]]></content>
      
      
      <categories>
          
          <category> å°ç‰¹æ•ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nodeå®ç°å›¾ç‰‡åˆ†å‰²</title>
      <link href="/2020-03-11/node%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E5%88%86%E5%89%B2/"/>
      <url>/2020-03-11/node%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E5%88%86%E5%89%B2/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ€è¿‘ï¼Œå¥³ç‹å¤§å¤§æ—¥å¸¸æ‰¾æˆ‘å¼„å›¾ç‰‡ï¼Œæœ¬æ¥ä¹‹å‰æˆ‘ä¸€ç›´æ˜¯ ps å¸®ä»–å¼„å¾—ï¼Œåæ¥- -ï¼Œps ä¸èƒ½åˆ†å‰²è¿‡é•¿çš„å›¾ç‰‡ï¼Œæˆ‘å°±æƒ³æƒ³èƒ½ä¸èƒ½é€šè¿‡ä»£ç æ¥å¸®ä»–å®ç°å¥½äº†ã€‚</p><p>ç»è¿‡æˆ‘åœ¨<code>npm</code>æœç´¢ä¸€ç•ªï¼Œå‘ç°æ²¡æœ‰ä¸€ä¸ªçº¯ä»£ç å±‚é¢çš„<code>high tools</code>æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œç´¢æ€§å°±è‡ªå·±é€šè¿‡<code>node-canvas</code>è¿™ä¸ªåº“å¼„ä¸ªå°ä¾‹å­å‡ºæ¥ï¼Œè‡ªå·±ä½¿ç”¨å¥½äº†</p><blockquote><p>gm è¿™ä¸ªåº“æ˜¯å¯ä»¥å®ç°çš„ï¼Œä½†æ˜¯ä»–éœ€è¦é¢å¤–å®‰è£…ä¸¤ä¸ªå·¥å…·ï¼Œæ‰€ä»¥- -æˆ‘å°±æ”¾å¼ƒäº†</p></blockquote><h1 id="ç®€å•æ­å»ºä¸€ä¸‹"><a href="#ç®€å•æ­å»ºä¸€ä¸‹" class="headerlink" title="ç®€å•æ­å»ºä¸€ä¸‹"></a>ç®€å•æ­å»ºä¸€ä¸‹</h1><ul><li><p>æ–°å»ºä¸€ä¸ª clip ç›®å½•</p></li><li><p>åˆå§‹åŒ–ä¸€ä¸ª<code>node</code>é¡¹ç›®å·¥ç¨‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure></div></li><li><p>å®‰è£…ä¾èµ–ï¼Œè¿™é‡Œä¸»è¦ç”¨åˆ°äº†ä¸¤ä¸ªä¸ªä¾èµ–ï¼Œåˆ†åˆ«æ˜¯<code>å¤„ç†å›¾ç‰‡</code>ã€<code>å‹ç¼©æˆzipæ–‡ä»¶</code></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm i canvas archiver -S</span><br></pre></td></tr></table></figure></div></li></ul><h1 id="ç®€å•çš„ä½¿ç”¨ä¸€ä¸‹"><a href="#ç®€å•çš„ä½¿ç”¨ä¸€ä¸‹" class="headerlink" title="ç®€å•çš„ä½¿ç”¨ä¸€ä¸‹"></a>ç®€å•çš„ä½¿ç”¨ä¸€ä¸‹</h1><p>é¦–å…ˆï¼Œå…ˆè¯´è¯´æˆ‘çš„éœ€æ±‚ï¼Œä¸‹é¢æ˜¯ä¸€å¼ åä¸º <code>clip.png</code> çš„å›¾ç‰‡ï¼Œ</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-03-11/clip.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-03-11/clip.png" class="lazyload"></a></p><p>æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯æŠŠä»–å‡åˆ†ä¸º 3 ç­‰åˆ†ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å°è¯•å†™ä¸€ä¸‹æˆ‘ä»¬çš„ä»£ç </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºå†™å…¥æµ</span></span><br><span class="line"><span class="keyword">const</span> &#123; createWriteStream &#125; = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"><span class="comment">// å¯¼å…¥å‹ç¼©æ–‡ä»¶åº“</span></span><br><span class="line"><span class="keyword">const</span> archiver = <span class="built_in">require</span>(<span class="string">"archiver"</span>);</span><br><span class="line"><span class="comment">// å¯¼å…¥canvasåº“ï¼Œç”¨äºè£å‰ªå›¾ç‰‡</span></span><br><span class="line"><span class="keyword">const</span> &#123; createCanvas, loadImage &#125; = <span class="built_in">require</span>(<span class="string">"canvas"</span>);</span><br><span class="line">!<span class="function">(<span class="params"><span class="keyword">async</span> (</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// åŠ è½½å›¾ç‰‡</span></span><br><span class="line">  <span class="keyword">const</span> image = <span class="keyword">await</span> loadImage(<span class="string">"./clip.png"</span>);</span><br><span class="line">  <span class="comment">// è·å–å›¾ç‰‡å®½é«˜</span></span><br><span class="line">  <span class="keyword">const</span> &#123; width, height &#125; = image;</span><br><span class="line">  <span class="comment">// åˆ›å»ºç­‰å®½ç™»é«˜çš„canvas</span></span><br><span class="line">  <span class="keyword">const</span> mainCanvas = createCanvas(width, height);</span><br><span class="line">  <span class="comment">// è·å–canvasä¸Šä¸‹æ–‡</span></span><br><span class="line">  <span class="keyword">const</span> ctx = mainCanvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">  <span class="comment">// ç»˜å›¾</span></span><br><span class="line">  ctx.drawImage(image, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  <span class="comment">// å‹ç¼©æˆzip</span></span><br><span class="line">  <span class="keyword">const</span> archive = archiver(<span class="string">"zip"</span>, &#123;</span><br><span class="line">    zlib: &#123; <span class="attr">level</span>: <span class="number">9</span> &#125;, <span class="comment">// Sets the compression level.</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// è¾“å‡ºåˆ°å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„ clip.zip</span></span><br><span class="line">  <span class="keyword">const</span> output = createWriteStream(__dirname + <span class="string">"/clip.zip"</span>);</span><br><span class="line">  archive.pipe(output);</span><br><span class="line">  <span class="comment">// æ˜ç¡®æˆ‘ä»¬éœ€è¦å‚ç›´åˆ†å‰²æˆå‡ ä»½</span></span><br><span class="line">  <span class="keyword">const</span> num = <span class="number">3</span>;</span><br><span class="line">  <span class="comment">// è·å–ä¸€ä»½çš„é«˜åº¦</span></span><br><span class="line">  <span class="keyword">const</span> oneHeight = height / num;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä»½è£å‰ªçš„canvas</span></span><br><span class="line">    <span class="keyword">let</span> clipCanvas = createCanvas(width, oneHeight);</span><br><span class="line">    <span class="comment">// è·å–canvasä¸Šä¸‹æ–‡</span></span><br><span class="line">    <span class="keyword">const</span> clipCtx = clipCanvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">    <span class="comment">// é€šè¿‡ clipCtx è£å‰ª mainCanvas</span></span><br><span class="line">    clipCtx.drawImage(</span><br><span class="line">      mainCanvas,</span><br><span class="line">      <span class="number">0</span>,</span><br><span class="line">      oneHeight * i,</span><br><span class="line">      width,</span><br><span class="line">      oneHeight,</span><br><span class="line">      <span class="number">0</span>,</span><br><span class="line">      <span class="number">0</span>,</span><br><span class="line">      width,</span><br><span class="line">      oneHeight</span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// æ”¾åˆ°å‹ç¼©å™¨é‡Œ</span></span><br><span class="line">    archive.append(clipCanvas.toBuffer(), &#123; <span class="attr">name</span>: <span class="string">`<span class="subst">$&#123;i + <span class="number">1</span>&#125;</span>.png`</span> &#125;);</span><br><span class="line">    <span class="comment">// ä¸»åŠ¨é‡Šæ”¾å†…å­˜</span></span><br><span class="line">    clipCanvas = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  archive.finalize();</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></div><p>è·‘ä¸€ä¸‹æˆ‘ä»¬å†™çš„ç¨‹åºï¼Œä½ ä¼šæƒŠå¥‡çš„å‘ç°ï¼Œç›®å½•ä¸‹å¤šäº†ä¸€ä¸ª<code>clip.zip</code>çš„å‹ç¼©åŒ…ï¼Œè§£å‹å‡ºæ¥å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„å›¾ç‰‡å•¦</p><p>çœ‹åˆ°è¿™é‡Œï¼Œå…¶å®æˆ‘ä»¬å·²ç»å®ç°æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœäº†ï¼Œä½†æ˜¯ä½ ä¼šå‘ç°æˆ‘ä»¬åªæ˜¯å®ç°äº†æ°´å¹³çš„åˆ‡å‰²ï¼Œå¦‚ä½•å®ç°å‚ç›´çš„å‘¢ï¼Ÿ</p><p>ä¹Ÿè®¸ä½ ä¼šè¯´ï¼ŒåŠ ä¸ªåˆ¤æ–­ä¸å°±å¥½äº†ï¼Ÿ</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‚ç›´åˆ‡å‰²...ä¼ªä»£ç </span></span><br><span class="line"><span class="keyword">if</span> (direction === <span class="string">"vertical"</span>) &#123;</span><br><span class="line">  <span class="comment">// è·å–ä¸€ä»½çš„é«˜åº¦</span></span><br><span class="line">  <span class="keyword">const</span> oneHeight = height / num;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> clipCanvas = createCanvas(width, oneHeight);</span><br><span class="line">    <span class="comment">// ...... å’Œä¸Šé¢ä¸€è‡´</span></span><br><span class="line">    clipCtx.drawImage(</span><br><span class="line">      mainCanvas,</span><br><span class="line">      <span class="number">0</span>,</span><br><span class="line">      oneHeight * i,</span><br><span class="line">      width,</span><br><span class="line">      oneHeight,</span><br><span class="line">      <span class="number">0</span>,</span><br><span class="line">      <span class="number">0</span>,</span><br><span class="line">      width,</span><br><span class="line">      oneHeight</span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// ......</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> oneWidth = width / num;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> clipCanvas = createCanvas(oneWidth, height);</span><br><span class="line">    <span class="comment">// ...... å’Œä¸Šé¢ä¸€è‡´</span></span><br><span class="line">    clipCtx.drawImage(</span><br><span class="line">      mainCanvas,</span><br><span class="line">      oneWidth * i,</span><br><span class="line">      <span class="number">0</span>,</span><br><span class="line">      width,</span><br><span class="line">      oneHeight,</span><br><span class="line">      <span class="number">0</span>,</span><br><span class="line">      <span class="number">0</span>,</span><br><span class="line">      width,</span><br><span class="line">      oneHeight</span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// ......</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>çš„ç¡®ï¼Œè¿™æ ·å†™æ˜¯å¯ä»¥ï¼Œä½†æ˜¯ä¼šä¸ä¼šè§‰å¾—å¾ˆä¸ä¼˜é›…ï¼Ÿé‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥æ‰¾æ‰¾è§„å¾‹ï¼ŒæŠŠä»–å°è£…æˆä¸€ä»½å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šå¯ä»¥çš„</p><p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥æ–°å»ºä¸€ä¸ªæ•°ç»„é…ç½®,ç”¨æ¥åˆ¤æ–­æˆ‘ä»¬ä¼ é€’çš„å‚æ•°æ¥åˆ¤æ–­æ˜¯ <code>width/num</code> è¿˜æ˜¯ <code>height/num</code>,é—²è¯ä¸å¤šå°‘äº†ï¼Œå¼€å§‹å†™æˆ‘ä»¬çš„ä»£ç æŠŠ</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºå†™å…¥æµ</span></span><br><span class="line"><span class="keyword">const</span> &#123; createWriteStream &#125; = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"><span class="comment">// å‹ç¼©æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">const</span> archiver = <span class="built_in">require</span>(<span class="string">"archiver"</span>);</span><br><span class="line"><span class="comment">// æ‰¹é‡è£å‰ª</span></span><br><span class="line"><span class="keyword">const</span> &#123; createCanvas, loadImage &#125; = <span class="built_in">require</span>(<span class="string">"canvas"</span>);</span><br><span class="line"><span class="comment">// åˆ‡å‰²æ–¹å‘é…ç½®</span></span><br><span class="line"><span class="keyword">const</span> directionConfig = [<span class="string">"vertical"</span>, <span class="string">"horizontal"</span>];</span><br><span class="line">!<span class="function">(<span class="params"><span class="keyword">async</span> (</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> image = <span class="keyword">await</span> loadImage(<span class="string">"./clip.png"</span>);</span><br><span class="line">  <span class="keyword">const</span> &#123; width, height &#125; = image;</span><br><span class="line">  <span class="keyword">const</span> mainCanvas = createCanvas(width, height);</span><br><span class="line">  <span class="keyword">const</span> ctx = mainCanvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">  ctx.drawImage(image, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  <span class="comment">// å‹ç¼©æˆzip</span></span><br><span class="line">  <span class="keyword">const</span> archive = archiver(<span class="string">"zip"</span>, &#123;</span><br><span class="line">    zlib: &#123; <span class="attr">level</span>: <span class="number">9</span> &#125;, <span class="comment">// Sets the compression level.</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">const</span> output = createWriteStream(__dirname + <span class="string">"/clip.zip"</span>);</span><br><span class="line">  archive.pipe(output);</span><br><span class="line">  <span class="keyword">const</span> clip = clipNumImage(&#123; <span class="attr">canvas</span>: mainCanvas, width, height &#125;, <span class="number">3</span>);</span><br><span class="line">  clip.forEach(<span class="function">(<span class="params">img, idx</span>) =&gt;</span> &#123;</span><br><span class="line">    archive.append(img, &#123; <span class="attr">name</span>: <span class="string">`<span class="subst">$&#123;idx + <span class="number">1</span>&#125;</span>.png`</span> &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">  archive.finalize();</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clipNumImage</span>(<span class="params">options, num, direction = <span class="string">"horizontal"</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; canvas, ...canvasSize &#125; = options;</span><br><span class="line">  <span class="comment">// ç”Ÿæˆé…ç½®çš„å‚æ•°</span></span><br><span class="line">  <span class="keyword">let</span> directionIdx = getIdx(direction);</span><br><span class="line">  <span class="comment">// å…¬æœ‰é…ç½®</span></span><br><span class="line">  <span class="keyword">const</span> directionOptions = getOptions(canvasSize, directionIdx, num);</span><br><span class="line">  <span class="keyword">const</span> clip = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> clipCanvas = createCanvas(...directionOptions);</span><br><span class="line">    <span class="keyword">const</span> clipCtx = clipCanvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">    clipCtx.drawImage(</span><br><span class="line">      canvas,</span><br><span class="line">      ...directionOptions.map(<span class="function">(<span class="params">val, idx</span>) =&gt;</span></span><br><span class="line">        idx === directionIdx ? val * i : <span class="number">0</span></span><br><span class="line">      ),</span><br><span class="line">      ...directionOptions,</span><br><span class="line">      <span class="number">0</span>,</span><br><span class="line">      <span class="number">0</span>,</span><br><span class="line">      ...directionOptions</span><br><span class="line">    );</span><br><span class="line">    clip.push(clipCanvas.toBuffer());</span><br><span class="line">    clipCanvas = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> clip;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–ä¼ é€’è¿‡æ¥çš„æ˜¯å‚ç›´åˆ‡å‰²è¿˜æ˜¯æ°´å¹³åˆ‡å‰²</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getIdx</span>(<span class="params">direction</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> directionIdx = directionConfig.indexOf(direction);</span><br><span class="line">  <span class="keyword">if</span> (directionIdx === <span class="number">-1</span>) &#123;</span><br><span class="line">    directionIdx = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> directionIdx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è·å–åˆ‡å‰²å‚æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getOptions</span>(<span class="params">size, directionIdx, num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.values(size).map(<span class="function">(<span class="params">val, idx</span>) =&gt;</span></span><br><span class="line">    idx === directionIdx ? val / num : val</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>é€šè¿‡æ•°ç»„ï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰åˆ°æˆ‘ä»¬ä»£ç æ¯”ä»¥å‰æ›´åŠ ç®€æ´äº†å‘¢ï¼Ÿå¥½å•¦ï¼Œè¿™æ¬¡å° demo æˆ‘ä»¬ä¹Ÿå†™å®Œå•¦ï¼Œå¸Œæœ›ä½ é€šè¿‡è¿™ç¯‡æ–‡ç« ä¹Ÿå­¦ä¹ åˆ°ä¸€ç‚¹çŸ¥è¯†ã€‚æ„Ÿè°¢ä½ çš„è§‚çœ‹</p><blockquote><p><a href="https://gitee.com/gating/demo/tree/master/canvas-clip-image" target="_blank" rel="noopener">gitee åœ°å€</a>,<a href="https://github.com/GATING/demo/tree/master/canvas-clip-image" target="_blank" rel="noopener">github åœ°å€</a></p></blockquote><blockquote><p>ps: å¯¹äº†ï¼Œè¿˜æœ‰ä¸€ä¸ªé•¿å›¾åˆ‡å‰²å™¨ï¼Œä¸å†™ä»£ç çš„è¯ï¼Œç›´æ¥ä¸‹è½½ç”¨ä¹Ÿæ˜¯æå¥½çš„,<a href="https://www.lanzous.com/ia59nfc" target="_blank" rel="noopener">ç‚¹æˆ‘ä¸‹è½½</a></p></blockquote><h1 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h1><p>æ„Ÿè°¢å„ä½è§‚ä¼—è€çˆ·çš„è§‚çœ‹ O(âˆ©_âˆ©)O</p>]]></content>
      
      
      <categories>
          
          <category> å°å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> node </tag>
            
            <tag> node-canvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows10å¼€å¯Ubuntuå­ç³»ç»Ÿå¹¶æ­å»ºDockerç¯å¢ƒ</title>
      <link href="/2020-02-25/Windows10%E5%BC%80%E5%90%AFUbuntu%E5%AD%90%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BADocker%E7%8E%AF%E5%A2%83%20-%20%E5%89%AF%E6%9C%AC/"/>
      <url>/2020-02-25/Windows10%E5%BC%80%E5%90%AFUbuntu%E5%AD%90%E7%B3%BB%E7%BB%9F%E5%B9%B6%E6%90%AD%E5%BB%BADocker%E7%8E%AF%E5%A2%83%20-%20%E5%89%AF%E6%9C%AC/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å¾ˆæ—©å°±å¬è¯´å¾®è½¯æœ‰ä¸ªåŸºäº<code>Ubuntu</code>çš„å­ç³»ç»Ÿï¼Œä¸€ç›´ä¹Ÿæ²¡æœºä¼šå°è¯•ä¸€ä¸‹ï¼Œä¹‹å‰ä¹Ÿåªæ˜¯ç”¨<code>VMware</code>å®‰è£…ï¼Œä½†æ˜¯è¿˜è¦å•ç‹¬å®‰è£…è½¯ä»¶ï¼Œå®‰è£…é•œåƒï¼Œä¸€ç‚¹éƒ½ä¸fitï¼Œæ‰€ä»¥å°±çæŠ˜è…¾ä¸‹ï¼ˆä¹Ÿæ˜¯å› ä¸ºæœ€è¿‘æœ‰ç©ºï¼‰ã€‚</p><h1 id="æ­å»ºUbuntuå­ç³»ç»Ÿ"><a href="#æ­å»ºUbuntuå­ç³»ç»Ÿ" class="headerlink" title="æ­å»ºUbuntuå­ç³»ç»Ÿ"></a>æ­å»ºUbuntuå­ç³»ç»Ÿ</h1><h2 id="wslæ˜¯ä»€ä¹ˆ"><a href="#wslæ˜¯ä»€ä¹ˆ" class="headerlink" title="wslæ˜¯ä»€ä¹ˆ"></a>wslæ˜¯ä»€ä¹ˆ</h2><p>é€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿï¼ˆè‹±è¯­ï¼šWindows Subsystem for Linuxï¼Œç®€ç§°WSLï¼‰æ˜¯ä¸€ä¸ªä¸ºåœ¨Windows 10å’ŒWindows Server 2019ä¸Šèƒ½å¤ŸåŸç”Ÿè¿è¡ŒLinuxäºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆELFæ ¼å¼ï¼‰çš„å…¼å®¹å±‚ã€‚</p><p>ç®€å•çš„è¯´ï¼Œå°±æ˜¯åœ¨<code>window</code>ä¸Šå®‰è£…äº†ä¸ª<code>Linux</code></p><h2 id="å®‰è£…wsl"><a href="#å®‰è£…wsl" class="headerlink" title="å®‰è£…wsl"></a>å®‰è£…wsl</h2><ol><li><p>å¼€å¯å¼€å‘è€…æ¨¡å¼</p><p>ä¾æ¬¡æ‰“å¼€ è®¾ç½® -&gt; æ›´æ–°å’Œå®‰å…¨ -&gt; å¼€å‘è€…é€‰é¡¹ -&gt; å¼€å‘äººå‘˜æ¨¡å¼</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-02-25/wsl01.jpg" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-02-25/wsl01.jpg" class="lazyload"></a></p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-02-25/wsl02.jpg" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-02-25/wsl02.jpg" class="lazyload"></a></p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-02-25/wsl03.jpg" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-02-25/wsl03.jpg" class="lazyload"></a></p></li></ol><ol start="2"><li><p>å¼€å¯windowså­ç³»ç»ŸåŠŸèƒ½</p><p>ä¾æ¬¡æ‰“å¼€ æ§åˆ¶é¢æ¿ -&gt; ç¨‹åº -&gt; å¯ç”¨æˆ–å…³é—­WindowsåŠŸèƒ½ -&gt; å¯ç”¨Windowså­ç³»ç»Ÿ</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-02-25/wsl04.jpg" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-02-25/wsl04.jpg" class="lazyload"></a></p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-02-25/wsl05.jpg" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-02-25/wsl05.jpg" class="lazyload"></a></p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-02-25/wsl06.jpg" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-02-25/wsl06.jpg" class="lazyload"></a></p></li></ol><ol start="3"><li><p>æ›´æ–°Windowsï¼Œé‡å¯</p></li><li><p>åœ¨Microsoft Storeä¸­æœç´¢Ubuntuï¼Œå¹¶å®‰è£…ï¼Œå¦‚å›¾ï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-02-25/wsl07.jpg" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-02-25/wsl07.jpg" class="lazyload"></a></p><p>å®‰è£…å®Œåï¼Œé»˜è®¤æ˜¯ä¸ªç»ˆç«¯ï¼Œå¦‚ä¸‹ï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-02-25/wsl08.jpg" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-02-25/wsl08.jpg" class="lazyload"></a></p></li></ol><h2 id="è¿›å…¥wsl"><a href="#è¿›å…¥wsl" class="headerlink" title="è¿›å…¥wsl"></a>è¿›å…¥wsl</h2><p>æ‰“å¼€<code>PowerShell</code>ï¼Œè¾“å…¥æŒ‡ä»¤<code>bash</code>å³å¯è¿›å…¥wslå­ç³»ç»Ÿã€‚é»˜è®¤æ˜¯<code>root</code>è´¦æˆ·ï¼Œæ— å¯†ç ã€‚</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-02-25/wsl09.jpg" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-02-25/wsl09.jpg" class="lazyload"></a></p><h1 id="Dockerç¯å¢ƒæ­å»º"><a href="#Dockerç¯å¢ƒæ­å»º" class="headerlink" title="Dockerç¯å¢ƒæ­å»º"></a>Dockerç¯å¢ƒæ­å»º</h1><p>ç”±äº<code>Ubuntu</code>é»˜è®¤çš„æºä¸‹è½½é€Ÿåº¦å¼‚å¸¸ç¼“æ…¢ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ›¿æ¢æˆå›½å†…é˜¿é‡Œäº‘çš„é•œåƒæºã€‚</p><h2 id="ç¡®è®¤é»˜è®¤æº"><a href="#ç¡®è®¤é»˜è®¤æº" class="headerlink" title="ç¡®è®¤é»˜è®¤æº"></a>ç¡®è®¤é»˜è®¤æº</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/apt/sources.list</span><br></pre></td></tr></table></figure></div><h2 id="ä¿®æ”¹é»˜è®¤æº"><a href="#ä¿®æ”¹é»˜è®¤æº" class="headerlink" title="ä¿®æ”¹é»˜è®¤æº"></a>ä¿®æ”¹é»˜è®¤æº</h2><ol><li><p>å¤‡ä»½é»˜è®¤æº</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo cp /etc/apt/sources.list /etc/apt/sources.list.20200225</span><br></pre></td></tr></table></figure></div></li><li><p>ç„¶å VIM æ‰“å¼€ï¼Œæ›¿æ¢</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/apt/sources.list</span><br><span class="line"></span><br><span class="line"><span class="meta">%</span><span class="bash">s/security.ubuntu/mirrors.aliyun/g</span></span><br><span class="line"><span class="meta">%</span><span class="bash">s/archive.ubuntu/mirrors.aliyun/g</span></span><br></pre></td></tr></table></figure></div></li></ol><h2 id="æ›´æ–°æº"><a href="#æ›´æ–°æº" class="headerlink" title="æ›´æ–°æº"></a>æ›´æ–°æº</h2><pre><code><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure></div></code></pre><h2 id="å®‰è£…Docker"><a href="#å®‰è£…Docker" class="headerlink" title="å®‰è£…Docker"></a>å®‰è£…Docker</h2><p>å› ä¸ºéƒ½çŸ¥é“çš„ç½‘ç»œåŸå› ,å®‰è£…æ—¶å¯èƒ½ä¼štimeoutç­‰å…¶ä»–æƒ…å†µ,æ‰€ä»¥æ¨èå¼ºçƒˆå»ºè®®ä½¿ç”¨å›½å†…æºï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p><ul><li><code>sudo apt-get remove docker docker-engine docker.io</code></li><li><code>sudo apt-get update</code></li><li><code>sudo apt-get install \ apt-transport-https \ ca-certificates \ curl \ software-properties-common</code></li><li><code>curl -fsSL https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu/gpg | sudo apt-key add -</code></li><li><code>sudo add-apt-repository \ &quot;deb [arch=amd64] https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu \ $(lsb_release -cs) \ stable&quot;</code></li><li><code>sudo apt-get update</code></li><li><code>sudo apt-get install docker-ce=18.06.1~ce~3-0~ubuntu</code></li></ul><blockquote><p>ps: å®‰è£…é«˜ç‰ˆæœ¬çš„<code>docker</code>å¥½åƒéƒ½ä¼šæŒ‚,æ‰€ä»¥æˆ‘ä»¬å®‰è£…åˆ°18.06.1çš„</p></blockquote><p>ä¸€é¡¿æ“ä½œä¹‹åï¼Œ<code>docker</code>å·²ç»å®‰è£…å®Œæˆ, ä½¿ç”¨ <code>docker version</code> å¯ä»¥æŸ¥çœ‹è¯¦ç»†çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œå¦‚å›¾ï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-02-25/wsl10.jpg" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-02-25/wsl10.jpg" class="lazyload"></a></p><p><strong>éšåå†ä»¥ç®¡ç†å‘˜å¯åŠ¨WSLæ§åˆ¶å°ï¼Œæ‰§è¡Œï¼š</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo cgroupfs-mount</span><br><span class="line">sudo service docker start</span><br></pre></td></tr></table></figure></div><p>æµ‹è¯•å®‰è£…ç»“æœå¦‚ä¸‹ï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-02-25/wsl11.jpg" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-02-25/wsl11.jpg" class="lazyload"></a></p><h2 id="æµ‹è¯•-Docker-æ˜¯å¦å®‰è£…æ­£ç¡®"><a href="#æµ‹è¯•-Docker-æ˜¯å¦å®‰è£…æ­£ç¡®" class="headerlink" title="æµ‹è¯• Docker æ˜¯å¦å®‰è£…æ­£ç¡®"></a>æµ‹è¯• Docker æ˜¯å¦å®‰è£…æ­£ç¡®</h2><p>æœ€åï¼Œå½“ç„¶è¦æµ‹è¯•ä¸€ä¸‹ï¼Œæˆ‘ä»¬å®‰è£…çš„docker æ˜¯å¦äº‰å–å•¦</p><p>ä½†æ˜¯å›½å†…ä» <code>Docker Hub</code> æ‹‰å–é•œåƒæœ‰æ—¶ä¼šé‡åˆ°å›°éš¾ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é…ç½®é•œåƒåŠ é€Ÿå™¨ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨<code>/etc/docker/daemon.json</code>ä¸­å†™å…¥å¦‚ä¸‹å†…å®¹ï¼ˆå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨è¯·æ–°å»ºè¯¥æ–‡ä»¶ï¼‰</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo vi &#x2F;etc&#x2F;docker&#x2F;daemon.json</span><br></pre></td></tr></table></figure></div><p>å†…å®¹å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">json</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"registry-mirrors"</span>: [</span><br><span class="line">    <span class="string">"https://dockerhub.azk8s.cn"</span>,</span><br><span class="line">    <span class="string">"https://hub-mirror.c.163.com"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"iptables"</span>:<span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>æ‰§è¡Œ <code>docker run hello-world</code>ï¼Œå¦‚æœè¾“å‡ºä¸‹åˆ—ä¿¡æ¯ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œdockerç»ˆäºæ­å»ºå®Œæˆå•¦ï¼Œå¯ä»¥æ„‰å¿«çš„ç©è€äº†</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-02-25/wsl12.jpg" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2020-02-25/wsl12.jpg" class="lazyload"></a></p><h3 id="dockeræ‰¹é‡åˆ é™¤å®¹å™¨ã€é•œåƒ"><a href="#dockeræ‰¹é‡åˆ é™¤å®¹å™¨ã€é•œåƒ" class="headerlink" title="dockeræ‰¹é‡åˆ é™¤å®¹å™¨ã€é•œåƒ"></a>dockeræ‰¹é‡åˆ é™¤å®¹å™¨ã€é•œåƒ</h3><ol><li>åˆ é™¤æ‰€æœ‰å®¹å™¨<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker rm `docker ps -a -q`</span><br></pre></td></tr></table></figure></div></li><li>åˆ é™¤æ‰€æœ‰é•œåƒ<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker rmi `docker images -q`</span><br></pre></td></tr></table></figure></div></li></ol><h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><p><a href="https://vuepress.mirror.docker-practice.com/install/ubuntu.html#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C" target="_blank" rel="noopener">Docker ä»å…¥é—¨åˆ°å®è·µ</a></p><p><a href="https://zhuanlan.zhihu.com/p/39187620" target="_blank" rel="noopener">WSLä¸­å®‰è£…Docker</a></p><p><a href="https://blog.csdn.net/weixin_42971644/article/details/99870601" target="_blank" rel="noopener">Windows 10 çš„Linuxå­ç³»ç»ŸWSLä¸‹å®‰è£…docker</a></p><h1 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h1><p>è¿˜çœŸæ˜¯é—²çš„è›‹ç–¼ï¼ŒçæŠ˜è…¾äº†æŒºä¹…çš„= =ï¼Œä¸è¿‡æœ€åå¥½åœ¨å¼„å¥½äº†ï¼Œä¹Ÿå¸Œæœ›å„ä½æ­å»ºç¯å¢ƒçš„æ—¶å€™å°‘ç‚¹å‘ï¼Œæ„Ÿè°¢å„ä½è§‚ä¼—è€çˆ·çš„è§‚çœ‹</p><blockquote><p>ps: æœ€åè¿˜æ˜¯å‘ç°<code>wsl</code>å…¼å®¹æ€§ä¸€èˆ¬å•Šï¼Œå±…ç„¶ä¸èƒ½è¿è¡Œ<code>moongo</code>â€¦</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»é›¶æ­å»ºWindowå‰ç«¯å¼€å‘ç¯å¢ƒ</title>
      <link href="/2020-01-17/%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BAWindow%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"/>
      <url>/2020-01-17/%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BAWindow%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ä½œä¸ºä¸€ä¸ªå°å‰ç«¯ï¼Œæ˜¯å¦å› ä¸ºæ­å»ºç¯å¢ƒçƒ¦æ¼è¿‡ï¼Œæ˜¯å¦å› ä¸º npm ç­‰å›½å¤–é•œåƒè¸©å‘è¿‡ï¼Œä¸è¦æ€•ï¼Œæ¥ä¸‹æ¥è·Ÿç€æˆ‘ä¸€æ­¥æ­¥æ­å»ºé€‚åˆè‡ªå·±çš„å¼€å‘ç¯å¢ƒå§ï¼ï¼ï¼</p><h1 id="node"><a href="#node" class="headerlink" title="node"></a>node</h1><p>è¿™ä¸ªä¸ç”¨è¯´äº†å§ï¼Œæˆ‘ä»¬ç»å¸¸å’Œä»–æ‰“äº¤é“ï¼Œæ— è®ºæ˜¯ <code>gulp</code>ã€<code>webpack</code>å’Œ<code>parcel</code>ç­‰æ‰“åŒ…å·¥å…·ï¼Œè¿˜æ˜¯å„ç§è„šæ‰‹æ¶çš„å·¥å…·ï¼Œéƒ½ç¦»ä¸å¼€<code>node</code>ç¯å¢ƒçš„æ”¯æŒï¼Œæ¥ä¸‹æ¥æˆ‘å°±ä»‹ç»ä¸€ä¸‹æˆ‘å¸¸ç”¨çš„ä¸€äº›å·¥å…·å’Œæ¨¡å—ã€‚</p><h2 id="nvm"><a href="#nvm" class="headerlink" title="nvm"></a>nvm</h2><p>ç®¡ç†<code>node</code>ç‰ˆæœ¬ï¼Œé€šè¿‡<code>nvm</code>æˆ‘ä»¬å¯ä»¥åŒæ—¶å®‰è£…/åˆ‡æ¢ä¸åŒçš„<code>node</code>ç‰ˆæœ¬</p><p>ä¸è¿‡,<code>nvm</code>ä¸æ”¯æŒ<code>window</code>ç‰ˆæœ¬,ä½†æ˜¯æœ‰æ›¿ä»£æ–¹æ¡ˆ,å°±æ˜¯<code>nvm-window</code>,å…·ä½“ä¸ºä»€ä¹ˆ<code>nvm</code>ä¸ºä½•ä¸æ”¯æŒ<code>windows</code>å¹³å°?è¿™é‡Œå°±ä¸åšè°ˆè®ºäº†â€¦</p><blockquote><p>ps: <a href="https://www.lanzous.com/i8prjed" target="_blank" rel="noopener">nvm-window ä¸‹è½½é“¾æ¥</a>ï¼Œå¦‚æœç½‘é€Ÿå¿«å°±ä¸éœ€è¦åœ¨è¿™é‡Œä¸‹è½½äº†ï¼Œ<a href="https://github.com/coreybutler/nvm-windows/releases" target="_blank" rel="noopener">github ä¸‹è½½é“¾æ¥</a>ï¼Œå»ºè®®ä¸‹è½½<code>nvm-setup.zip</code>ä¼šå¸®ä½ é…ç½®å¥½ç¯å¢ƒå˜é‡</p></blockquote><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>å¦‚æœæ²¡ä»€ä¹ˆç‰¹åˆ«è¦æ±‚ï¼Œæ— è„‘ä¸‹ä¸€æ­¥å³å¯</p><ol><li><p>å¦‚æœä¹‹å‰å·²å®‰è£…<code>node</code>,ä½œè€…çš„å»ºè®®æ˜¯å¸è½½åŸæœ‰çš„<code>node</code>ç‰ˆæœ¬,é¿å…å‘ç”Ÿå†²çª</p></li><li><p>é…ç½® setting.txt æ–‡ä»¶,ä¸»è¦æ˜¯é…ç½®ä¸ºå›½å†…é•œåƒæºé•œåƒæº<br>é…ç½®æ–‡ä»¶åœ¨ï¼šC:\Users\ç”¨æˆ·å\AppData\Roaming\nvm ä¸‹ï¼ˆå¦‚æœå’Œæˆ‘ä¸€ä¸‹ï¼Œæ— è„‘ä¸‹ä¸€æ­¥çš„è¯ï¼‰</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">node_mirror: https:&#x2F;&#x2F;npm.taobao.org&#x2F;mirrors&#x2F;node&#x2F;</span><br><span class="line">npm_mirror: https:&#x2F;&#x2F;npm.taobao.org&#x2F;mirrors&#x2F;npm&#x2F;</span><br></pre></td></tr></table></figure></div></li></ol><blockquote><p>ps: å¦‚æœé‡åˆ°<code>Powershell</code>ä¸‹ç¦æ­¢æ‰§è¡Œè„šæœ¬çš„é—®é¢˜,è¯·ç”¨ç®¡ç†å‘˜æ‰“å¼€<code>Powershell</code>æ‰§è¡Œ<code>set-ExecutionPolicy RemoteSigned</code>ï¼Œé€‰æ‹© y å³å¯</p></blockquote><h3 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h3><ol><li><p>å¯åˆ—å‡ºå·²å®‰è£…çš„ node ç‰ˆæœ¬ nvm list/nvm ls</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nvm ls</span><br></pre></td></tr></table></figure></div></li><li><p>å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ node nvm install<version>[arch]</version></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nvm install latest <span class="comment"># latestè¡¨ç¤ºå®‰è£…æœ€æ–°ç‰ˆ</span></span><br></pre></td></tr></table></figure></div><blockquote><p>ps: arch ä¸ºå¯é€‰çš„å¹³å°æ¶æ„é¡¹ï¼ˆ32 ä½/64 ä½ï¼‰ï¼Œï¼Œé»˜è®¤ä¸ºç³»ç»Ÿå¹³å°å¯¹åº”çš„ç‰ˆæœ¬ï¼Œè‹¥è®¾ç½®ä¸º allï¼Œåˆ™åŒæ—¶å®‰è£…ä¸¤ä¸ªç‰ˆæœ¬ã€‚</p></blockquote></li><li><p>å¸è½½æŒ‡å®šç‰ˆæœ¬ nvm uninstall<version></version></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nvm uninstall 13.6.0 <span class="comment"># latestè¡¨ç¤ºå®‰è£…æœ€æ–°ç‰ˆ</span></span><br></pre></td></tr></table></figure></div></li><li><p>è®¾ç½®é•œåƒæº nvm node_mirror<node_mirror_url></node_mirror_url></p><ul><li>è®¾ç½®<code>node</code>é•œåƒæº</li></ul><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nvm node_mirror https://npm.taobao.org/mirrors/node/</span><br></pre></td></tr></table></figure></div><ul><li>è®¾ç½®<code>npm</code>é•œåƒæº</li></ul><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nvm npm_mirror https://npm.taobao.org/mirrors/node/</span><br></pre></td></tr></table></figure></div></li></ol><h2 id="nrm"><a href="#nrm" class="headerlink" title="nrm"></a>nrm</h2><p>ä¼—æ‰€å‘¨çŸ¥çš„ä¸€ç‚¹ï¼Œ<code>npm</code> æ—¥å¸¸ä¼šæŒ‚æ‰ï¼Œè¿˜æ—¶ä¸æ—¶ä¸¢åŒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€æ¬¾åˆ‡æ¢æºçš„å·¥å…·ï¼Œæ¥å¸®æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><blockquote><p>ps: è™½ç„¶å¯ä»¥æ‰‹åŠ¨åˆ‡æ¢æºï¼Œä½†æ˜¯ç›¸å¯¹æ¥è®²è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œæ‰€ä»¥æ¨èä½¿ç”¨å·¥å…·æ¥å¸®æˆ‘ä»¬å®Œæˆè¿™ä»¶äº‹</p></blockquote><h3 id="å®‰è£"><a href="#å®‰è£" class="headerlink" title="å®‰è£"></a>å®‰è£</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g nrm</span><br></pre></td></tr></table></figure></div><h3 id="å¸¸ç”¨å‘½ä»¤-1"><a href="#å¸¸ç”¨å‘½ä»¤-1" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h3><ol><li><p>åˆ—å‡ºå½“å‰æ”¯æŒåˆ‡æ¢çš„æº</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nrm ls</span><br><span class="line"></span><br><span class="line">* npm -------- https://registry.npmjs.org/</span><br><span class="line">yarn ------- https://registry.yarnpkg.com/</span><br><span class="line">cnpm ------- http://r.cnpmjs.org/</span><br><span class="line">taobao ----- https://registry.npm.taobao.org/</span><br><span class="line">nj --------- https://registry.nodejitsu.com/</span><br><span class="line">npmMirror -- https://skimdb.npmjs.com/registry/</span><br><span class="line">edunpm ----- http://registry.enpmjs.org/</span><br></pre></td></tr></table></figure></div></li><li><p>ä½¿ç”¨ taobao æºä½œä¸ºé»˜è®¤çš„ npm æº</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nrm use taobao</span><br><span class="line">    Registry has been <span class="built_in">set</span> to: https://registry.npm.taobao.org/</span><br></pre></td></tr></table></figure></div></li><li><p>æµ‹è¯•æºé€Ÿåº¦</p><ul><li>æµ‹è¯•ä¸€ä¸ªæº</li></ul><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nrm <span class="built_in">test</span> npm</span><br></pre></td></tr></table></figure></div><ul><li>æµ‹è¯•æ‰€æœ‰æº</li></ul><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nrm <span class="built_in">test</span></span><br></pre></td></tr></table></figure></div></li><li><p>è®¿é—®æºçš„ä¸»é¡µ</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nrm home taobao</span><br></pre></td></tr></table></figure></div><blockquote><p>ps: æ­¤å‘½ä»¤ä¼šåœ¨é»˜è®¤æµè§ˆå™¨ä¸­æ‰“å¼€æ·˜å®æºçš„ä¸»é¡µï¼š<a href="https://registry.npm.taobao.org/" target="_blank" rel="noopener">https://registry.npm.taobao.org/</a></p></blockquote></li><li><p>æ·»åŠ /åˆªé™¤ ä¸€ä¸ªæº</p><ul><li>æ·»åŠ æºï¼šnrm add<registry><url>[home]ï¼Œhome å‚æ•°ä¸»è¦ç”¨äºè®¿é—®æºçš„ä¸»é¡µï¼ˆå¯é€‰ï¼‰</url></registry></li></ul><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nrm add gating http://npm.gatings.com/  http://gatings.cn/</span><br></pre></td></tr></table></figure></div><ul><li>åˆªé™¤æºï¼šnrm del<registry></registry></li></ul><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nrm del gating</span><br></pre></td></tr></table></figure></div><blockquote><p>ps: nrm del å‘½ä»¤ä¸èƒ½åˆ é™¤ nrm è‡ªå·±å†…ç½®çš„æºã€‚</p></blockquote></li></ol><h2 id="å®ç”¨æ¨¡å—æ¨è"><a href="#å®ç”¨æ¨¡å—æ¨è" class="headerlink" title="å®ç”¨æ¨¡å—æ¨è"></a>å®ç”¨æ¨¡å—æ¨è</h2><h3 id="anywhere"><a href="#anywhere" class="headerlink" title="anywhere"></a>anywhere</h3><p>æœ´çµå¤§ä½¬çš„ <code>anywhere</code>, éšæ—¶éšåœ°å¯ä»¥åˆ›å»ºä¸€ä¸ªé™æ€æœåŠ¡å™¨ï¼Œç”¨äºæŸ¥çœ‹ <code>vue</code> æˆ– <code>react</code> æ‰“åŒ…åçš„ä»£ç ï¼Œæˆ–è€…å±€åŸŸç½‘å†…èµ„æºå…±äº«</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i -g anywhere</span><br><span class="line">anywhere</span><br></pre></td></tr></table></figure></div><h3 id="cloc"><a href="#cloc" class="headerlink" title="cloc"></a>cloc</h3><p>å¿«é€Ÿç»Ÿè®¡æŸæ–‡ä»¶å¤¹ä¸‹ä»£ç çš„æ•°æ®é‡</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">bash</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i -g cloc</span><br><span class="line">cloc --exclude-dir=node_modules . --exclude-ext=json,html <span class="comment"># æ’é™¤node_modules,æ’é™¤json,htmlæ–‡ä»¶</span></span><br></pre></td></tr></table></figure></div><h1 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h1><p>è¿™ä¸ªä¹Ÿä¸ç”¨æˆ‘å¤šè¯´äº†å§ï¼Œç›®å‰ä¸–ç•Œä¸Šæœ€å…ˆè¿›çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼Œè¿™é‡Œå°±ä¸è¿‡å¤šè¯´æ˜äº†ï¼Œé‰´äºå„ä½åŒå­¦çš„ç½‘é€Ÿæ–‡æœ¬ï¼Œè¿™é‡Œå°±æ”¾ä¸€ä¸‹ä¸‹è½½é“¾æ¥ï¼Œå¦å¤–ï¼Œä¿®æ”¹<code>git bash</code>ä¸»é¢˜å¯ä»¥å‚è€ƒæˆ‘åšå®¢çš„è¿™ç¯‡æ–‡ç« :<a href="http://www.gatings.cn/%E8%AE%B0%E5%BD%95/2018/11/01/GitBash%E4%B8%BB%E9%A2%98%E9%A3%8E%E6%A0%BC/" target="_blank" rel="noopener">GitBash ä¸»é¢˜é£æ ¼</a></p><blockquote><p>ps: <a href="https://www.lanzous.com/i8prqgh" target="_blank" rel="noopener">Git è“å¥äº‘é“¾æ¥</a>,<a href="https://git-scm.com/" target="_blank" rel="noopener">Git å®˜ç½‘é“¾æ¥ï¼Œç½‘é€Ÿå¿«çš„å°ä¼™ä¼´å¯ä»¥åœ¨è¿™é‡Œä¸‹è½½</a>ï¼ŒåŒæ ·æ˜¯æ— è„‘ä¸‹ä¸€æ­¥å®‰è£…</p></blockquote><h1 id="VS-Code"><a href="#VS-Code" class="headerlink" title="VS Code"></a>VS Code</h1><p>ä¸ªäººè§‰å¾—æœ€é€‚åˆå‰ç«¯å¼€å‘çš„ä¸€æ¬¾ç¼–è¾‘å™¨äº†ï¼Œæ²¡æœ‰ä¹‹ä¸€</p><h2 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>è¿™ä¸ªå°±ä¸å¤šä»‹ç»äº†ï¼Œæ³¨æ„ä¿®æ”¹ä¸‹å®‰è£…è·¯å¾„å’Œæ·»åŠ  Code åˆ°ç¯å¢ƒå˜é‡å³å¯ã€‚</p><blockquote><p>ps: æ·»åŠ éƒ½ç¯å¢ƒå˜é‡ä¸»è¦æ˜¯ä¸ºäº†åœ¨ç»ˆç«¯è¾“å…¥ <code>code .</code> æˆ– <code>code xxx</code> å°±èƒ½ç›´æ¥æ‰“å¼€ç›®å½•æˆ–æ–‡ä»¶ã€‚</p></blockquote><h2 id="ç¼–ç¨‹å­—ä½“ï¼ˆFiraCodeï¼‰"><a href="#ç¼–ç¨‹å­—ä½“ï¼ˆFiraCodeï¼‰" class="headerlink" title="ç¼–ç¨‹å­—ä½“ï¼ˆFiraCodeï¼‰"></a>ç¼–ç¨‹å­—ä½“ï¼ˆFiraCodeï¼‰</h2><p><code>Fira Code</code>æ˜¯<code>Fira Mono</code>å­—ä½“çš„æ‰©å±•ï¼Œå…¶ä¸­åŒ…å«ä¸€ç»„ç”¨äºå¸¸è§ç¼–ç¨‹å¤šå­—ç¬¦ç»„åˆçš„è¿å­—ã€‚</p><p>æ¯”å¦‚æŠŠè¾“å…¥çš„ã€Œ!=ã€ç›´æ¥æ˜¾ç¤ºæˆã€Œâ‰ ã€æˆ–è€…æŠŠã€Œ&gt;=ã€å˜æˆã€Œâ‰¥ã€ç­‰ç­‰ï¼Œä»¥æ­¤æ¥æé«˜ä»£ç çš„å¯è¯»æ€§ã€‚</p><p>å†æ¯”å¦‚ï¼Œ..æˆ–//ï¼Œè¿å­—å…è®¸æˆ‘ä»¬æ ¡æ­£é—´è·ã€‚ä¸‹é¢æ˜¯å®˜æ–¹çš„å¯¹æ¯”å›¾</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/all_ligatures.png" data-fancybox="group" data-caption="FiraCode" class="fancybox"><img alt="FiraCode" title="FiraCode" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/all_ligatures.png" class="lazyload"></a></p><blockquote><p>ps: <a href="https://www.lanzous.com/i8prj1a" target="_blank" rel="noopener">FiraCode è“å¥äº‘é“¾æ¥</a>,<a href="https://github.com/tonsky/FiraCode/releases" target="_blank" rel="noopener">FiraCode å®˜æ–¹é“¾æ¥</a>,åŒä¸Šï¼Œç½‘é€Ÿæ…¢çš„å°±ä¸‹è½½è“å¥äº‘çš„å³å¯</p></blockquote><h2 id="å¿«æ·é”®"><a href="#å¿«æ·é”®" class="headerlink" title="å¿«æ·é”®"></a>å¿«æ·é”®</h2><p>ç†Ÿç»ƒä½¿ç”¨å¿«æ·é”®æ˜¯ç¨‹åºå‘˜çš„å¿…å¤‡æŠ€</p><h3 id="å¸¸ç”¨å¿«æ·é”®"><a href="#å¸¸ç”¨å¿«æ·é”®" class="headerlink" title="å¸¸ç”¨å¿«æ·é”®"></a>å¸¸ç”¨å¿«æ·é”®</h3><ol><li><code>ctrl + p</code> æ ¹æ®å…³é”®å­—å¿«é€Ÿæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶</li><li><code>ctrl + ,</code> æ‰“å¼€é…ç½®é¡¹</li><li><code>ctrl + d</code> å¿«é€Ÿé€‰å–å¤šä¸ªç›¸åŒçš„å†…å®¹å—</li><li><code>ctrl + h</code> é€‰å–æ‰€æœ‰ç›¸åŒçš„å†…å®¹å—</li><li><code>alt + é¼ æ ‡å·¦é”®</code> é€‰å–å¤šä¸ª</li><li><code>ctrl + g</code> è·³åˆ°æŒ‡å®šè¡Œ</li><li><code>ctrl + b</code> åˆ‡æ¢ä¾§è¾¹æ </li><li><code>shift + alt + ä¸Šä¸‹ç®­å¤´</code> å¤åˆ¶å½“å‰è¡Œ</li><li><code>ctrl + shift + k</code> å¿«é€Ÿåˆ é™¤è¡Œ</li><li><code>alt + æ•°å­—é”®</code> å¿«é€Ÿåˆ‡æ¢æ ‡ç­¾ï¼ˆæ•°å­—é”®ä¸æ˜¯å°é”®ç›˜çš„æ•°å­—é”®ï¼‰</li><li><code>shift + alt + f</code> ä»£ç è‡ªåŠ¨æ ¼å¼åŒ–</li><li><code>ctrl + shift + p</code> æ˜¾ç¤ºæ‰€æœ‰å‘½ä»¤</li><li><code>ctrl + tab</code> åˆ‡æ¢ä¸åŒçš„æ–‡ä»¶</li></ol><h3 id="ä¿®æ”¹å·¦ä¾§è¾¹æ å¿«æ·é”®"><a href="#ä¿®æ”¹å·¦ä¾§è¾¹æ å¿«æ·é”®" class="headerlink" title="ä¿®æ”¹å·¦ä¾§è¾¹æ å¿«æ·é”®"></a>ä¿®æ”¹å·¦ä¾§è¾¹æ å¿«æ·é”®</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang"></div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight"><table><tr><td class="code"><pre><span class="line">(&#123;</span><br><span class="line">  "key": "cmd+1",</span><br><span class="line">  "command": "workbench.view.explorer"</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"key"</span>: <span class="string">"cmd+2"</span>,</span><br><span class="line">  <span class="attr">"command"</span>: <span class="string">"workbench.view.search"</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"key"</span>: <span class="string">"cmd+3"</span>,</span><br><span class="line">  <span class="attr">"command"</span>: <span class="string">"workbench.view.scm"</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"key"</span>: <span class="string">"cmd+4"</span>,</span><br><span class="line">  <span class="attr">"command"</span>: <span class="string">"workbench.view.debug"</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"key"</span>: <span class="string">"cmd+5"</span>,</span><br><span class="line">  <span class="attr">"command"</span>: <span class="string">"workbench.view.extensions"</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"key"</span>: <span class="string">"ctrl+6"</span>,</span><br><span class="line">    <span class="attr">"command"</span>: <span class="string">"workbench.view.extension.gitlens"</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div><p>è¿™é‡Œä¸»è¦æ˜¯é’ˆå¯¹äºå’Œ<code>Chrome</code>åˆ‡æ¢ tab æ çš„å¿«æ·é”®ä¿æŒä¸€è‡´ï¼Œæ–¹ä¾¿è®°å¿†</p><blockquote><p>ps: <code>ctrl+6</code> æ˜¯å› ä¸ºæˆ‘å®‰è£…äº† <code>GitLens</code> è¿™ä¸ªæ‹“å±•ï¼Œå¯æ ¹æ®è‡ªå·±çš„éœ€æ±‚æŠŠæœ€åä¸€ä¸ªå»æ‰</p></blockquote><h2 id="æ’ä»¶æ¨è"><a href="#æ’ä»¶æ¨è" class="headerlink" title="æ’ä»¶æ¨è"></a>æ’ä»¶æ¨è</h2><p>è¿™é‡Œä»‹ç»ä¸€ä¸‹æˆ‘å¸¸ç”¨çš„æ’ä»¶</p><ul><li><code>Auto Close Tag</code> è‡ªåŠ¨é—­åˆ HTML æ ‡ç­¾</li><li><code>Auto Rename Tag</code> ä¿®æ”¹ HTML æ ‡ç­¾æ—¶,è‡ªåŠ¨ä¿®æ”¹åŒ¹é…çš„æ ‡ç­¾(è™½ç„¶æœ‰æ—¶å€™æœ‰ bug)</li><li><code>Bracket Pair Colorizer</code> ç”¨ä¸åŒé¢œè‰²é«˜äº®æ˜¾ç¤ºåŒ¹é…çš„æ‹¬å·</li><li><code>Code Spell checker</code> å•è¯æ‹¼å†™æ£€æŸ¥</li><li><code>GitLens</code> æ˜¾ç¤ºæ–‡ä»¶æœ€è¿‘çš„ commit å’Œä½œè€…ï¼Œæ˜¾ç¤ºå½“å‰è¡Œ commit ä¿¡æ¯</li><li><code>HTML CSS Support</code> css æç¤º</li><li><code>IntelliSense for css class names</code> html ä¸­ class è¾“å…¥æç¤º</li><li><code>JavaScript (ES6) code snippets</code> ES6 è¯­æ³•ä»£ç æ®µ</li><li><code>jQuery Code Snippets</code> jQuery è¯­æ³•ä»£ç ç‰‡æ®µ</li><li><code>npm Intellisense</code> å¯¼å…¥æ¨¡å—æ—¶ï¼Œæç¤ºå·²å®‰è£…æ¨¡å—åç§°</li><li><code>open in browser</code> æµè§ˆå™¨ä¸­æŸ¥çœ‹</li><li><code>Path Intellisense</code> è·¯å¾„å®Œæˆæç¤º</li><li><code>px2rem</code> px è½¬ remï¼Œä¸»è¦æ˜¯ç”¨ flexible.js å’Œå“åº”å¼åšé€‚é…ä½¿ç”¨</li><li><code>Settings Sync</code> åŒæ­¥è®¾ç½®å’Œæ’ä»¶åˆ° Gist,è¿˜å¯ä»¥åˆ†äº«ç¬¬ä¸‰æ–¹ Gist å…±ä»–äººåŒæ­¥ï¼ˆä¸‹è½½ï¼‰</li><li><code>vetur</code> Vue è¯­æ³•é«˜äº®</li><li><code>vscode-icons</code> æ–‡ä»¶å›¾æ ‡</li><li><code>Vue VSCode Snippets</code> vue çš„ä»£ç ç‰‡æ®µ</li><li><code>vscode wxml</code> VS Code æä¾› wxml è¯­æ³•æ”¯æŒåŠä»£ç ç‰‡æ®µ</li><li><code>WakaTime</code> è®°å½•ä½ ä¸€å¤©ç ä»£ç çš„æ—¶é—´</li></ul><blockquote><p>é™„ä¸Šä¸€ä»½ vsc æ’ä»¶æ•´ç†çš„ pdfï¼š<a href="https://www.lanzous.com/i8pua0d" target="_blank" rel="noopener">ç‚¹æˆ‘ä¸‹è½½</a></p></blockquote><h2 id="VSCode-è®¾ç½®"><a href="#VSCode-è®¾ç½®" class="headerlink" title="VSCode è®¾ç½®"></a>VSCode è®¾ç½®</h2><p>è¿™é‡Œé™„ä¸Šä¸ªäººçš„ <code>VSCode</code> è®¾ç½®,å¹¶ä¸”å·²ç»åŠ ä¸Šæ³¨é‡Š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">json</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// è‡ªåŠ¨ä¿å­˜</span></span><br><span class="line">  <span class="attr">"files.autoSave"</span>: <span class="string">"afterDelay"</span>,</span><br><span class="line">  <span class="attr">"fileheader.Author"</span>: <span class="string">"gating"</span>,</span><br><span class="line">  <span class="attr">"fileheader.LastModifiedBy"</span>: <span class="string">"gating"</span>,</span><br><span class="line">  <span class="comment">// æ§åˆ¶èµ„æºç®¡ç†å™¨æ˜¯å¦åœ¨æŠŠæ–‡ä»¶åˆ é™¤åˆ°åºŸçº¸ç¯“æ—¶è¿›è¡Œç¡®è®¤ã€‚</span></span><br><span class="line">  <span class="attr">"explorer.confirmDelete"</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">// å¯ç”¨åï¼ŒæŒ‰ä¸‹ TAB é”®ï¼Œå°†å±•å¼€ Emmet ç¼©å†™ã€‚</span></span><br><span class="line">  <span class="attr">"emmet.triggerExpansionOnTab"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// åœ¨é»˜è®¤ä¸æ”¯æŒ Emmet çš„è¯­è¨€ä¸­å¯ç”¨ Emmet ç¼©å†™åŠŸèƒ½ã€‚</span></span><br><span class="line">  <span class="attr">"emmet.includeLanguages"</span>: &#123;</span><br><span class="line">    <span class="attr">"javascript"</span>: <span class="string">"javascriptreact"</span>,</span><br><span class="line">    <span class="attr">"vue-html"</span>: <span class="string">"html"</span>,</span><br><span class="line">    <span class="attr">"vue"</span>: <span class="string">"html"</span>,</span><br><span class="line">    <span class="attr">"wxml"</span>: <span class="string">"html"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ä¸ºæŒ‡å®šçš„è¯­æ³•å®šä¹‰é…ç½®æ–‡ä»¶æˆ–ä½¿ç”¨å¸¦æœ‰ç‰¹å®šè§„åˆ™çš„é…ç½®æ–‡ä»¶ã€‚</span></span><br><span class="line">  <span class="attr">"emmet.syntaxProfiles"</span>: &#123;</span><br><span class="line">    <span class="attr">"vue-html"</span>: <span class="string">"html"</span>,</span><br><span class="line">    <span class="attr">"vue"</span>: <span class="string">"html"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// é…ç½®è¯­è¨€çš„æ–‡ä»¶å…³è”</span></span><br><span class="line">  <span class="attr">"files.associations"</span>: &#123;</span><br><span class="line">    <span class="attr">"*.wxss"</span>: <span class="string">"css"</span>,</span><br><span class="line">    <span class="attr">"*.html"</span>: <span class="string">"html"</span>,</span><br><span class="line">    <span class="attr">"*.wpy"</span>: <span class="string">"vue"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// æ§åˆ¶ç¼–è¾‘å™¨æ˜¯å¦æ˜¾ç¤ºæ§åˆ¶å­—ç¬¦ã€‚</span></span><br><span class="line">  <span class="attr">"editor.renderControlCharacters"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// è®¾ç½®vscodeé»˜è®¤çš„ç»ˆç«¯</span></span><br><span class="line">  <span class="attr">"terminal.integrated.shell.windows"</span>: <span class="string">"C:\\windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe"</span>,</span><br><span class="line">  <span class="attr">"px2rem.rootFontSize"</span>: <span class="number">75</span>,</span><br><span class="line">  <span class="attr">"px2rem.isNeedNotes"</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">// æ§åˆ¶åœ¨å°†è®¾ç½®ç¼–è¾‘ä¸º json æ—¶ï¼Œä½¿ç”¨æ‹†åˆ† json ç¼–è¾‘å™¨ã€‚</span></span><br><span class="line">  <span class="attr">"workbench.settings.useSplitJSON"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// ä½¿ç”¨ json æ–‡ä»¶ç¼–è¾‘å™¨ã€‚</span></span><br><span class="line">  <span class="attr">"workbench.settings.editor"</span>: <span class="string">"json"</span>,</span><br><span class="line">  <span class="comment">//  å½“åœ¨ VS Code ä¸­é‡å‘½åæˆ–ç§»åŠ¨æ–‡ä»¶æ—¶ï¼Œå§‹ç»ˆè‡ªåŠ¨æ›´æ–°è·¯å¾„ã€‚</span></span><br><span class="line">  <span class="attr">"javascript.updateImportsOnFileMove.enabled"</span>: <span class="string">"always"</span>,</span><br><span class="line">  <span class="attr">"vetur.format.defaultFormatter.html"</span>: <span class="string">"prettier"</span>,</span><br><span class="line">  <span class="attr">"html-css-class-completion.includeGlobPattern"</span>: <span class="string">"**/*.&#123;css,html,vue,jsx&#125;"</span>,</span><br><span class="line">  <span class="attr">"vetur.format.options.tabSize"</span>: <span class="number">4</span>,</span><br><span class="line">  <span class="comment">// é…ç½®å›¾æ ‡ä¸»é¢˜</span></span><br><span class="line">  <span class="attr">"workbench.iconTheme"</span>: <span class="string">"vscode-icons"</span>,</span><br><span class="line">  <span class="comment">// é…ç½®ç¼©æ”¾ç­‰çº§</span></span><br><span class="line">  <span class="attr">"window.zoomLevel"</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="comment">// é…ç½®ä¸»é¢˜</span></span><br><span class="line">  <span class="attr">"workbench.colorTheme"</span>: <span class="string">"Dracula"</span>,</span><br><span class="line">  <span class="comment">// é…ç½®å­—ä½“</span></span><br><span class="line">  <span class="attr">"editor.fontFamily"</span>: <span class="string">"Fira Code"</span>,</span><br><span class="line">  <span class="comment">// é…ç½®å­—ä½“è¿å­—ã€‚</span></span><br><span class="line">  <span class="attr">"editor.fontLigatures"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">"sync.gist"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="comment">// æ§åˆ¶æ˜¯å¦åœ¨æœç´¢ä¸­è·Ÿè¸ªç¬¦å·é“¾æ¥ã€‚</span></span><br><span class="line">  <span class="attr">"search.followSymlinks"</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">// æ§åˆ¶åœ¨èµ„æºç®¡ç†å™¨å†…æ‹–æ”¾ç§»åŠ¨æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ—¶æ˜¯å¦è¿›è¡Œç¡®è®¤ã€‚</span></span><br><span class="line">  <span class="attr">"explorer.confirmDragAndDrop"</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">// åœ¨ä¿å­˜æ—¶æ ¼å¼åŒ–æ–‡ä»¶ã€‚</span></span><br><span class="line">  <span class="attr">"editor.formatOnSave"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// è®¾ç½®è·¯å¾„åˆ«å</span></span><br><span class="line">  <span class="attr">"path-intellisense.mappings"</span>: &#123;</span><br><span class="line">    <span class="attr">"@"</span>: <span class="string">"$&#123;workspaceRoot&#125;/src/"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><blockquote><p>å¦‚æœè§‰å¾—å¤åˆ¶éº»çƒ¦ï¼Œå¹¶ä¸”ä¹Ÿä¸æƒ³ä¸€ä¸ªä¸ªå®‰è£…æ’ä»¶ï¼Œå¯ä»¥åŒæ­¥æˆ‘çš„<code>Gist ID</code>ï¼Œç›´æ¥ä½¿ç”¨æˆ‘çš„é…ç½®å³å¯ã€‚ã€‚ã€‚IDï¼š<code>9d1c53501e76056a81fb1e2c9a6f181b</code></p></blockquote><h3 id="åŒæ­¥è®¾ç½®"><a href="#åŒæ­¥è®¾ç½®" class="headerlink" title="åŒæ­¥è®¾ç½®"></a>åŒæ­¥è®¾ç½®</h3><ol><li><p>å®‰è£… Settings Sync æ’ä»¶</p></li><li><p>å¿«æ·é”®<code>ctrl + shift + p</code>,è¾“å…¥ Syncï¼Œé€‰æ‹©é«˜çº§é€‰é¡¹</p></li><li><p>é€‰ä¸­æ‰“å¼€è®¾ç½®</p></li><li><p>å¤åˆ¶<code>9d1c53501e76056a81fb1e2c9a6f181b</code>åˆ°<code>Gist ID</code>æ ï¼Œé€‰æ‹©è‡ªåŠ¨ä¸‹è½½å³å¯</p></li></ol><h1 id="Chrome"><a href="#Chrome" class="headerlink" title="Chrome"></a>Chrome</h1><p>ä½¿ç”¨äººæ•°æœ€å¤šï¼Œæœ€å¼ºå¤§çš„æµè§ˆå™¨ï¼Œä¹Ÿæ˜¯å‰ç«¯å¼€å‘å¿…å¤‡çš„æµè§ˆå™¨ï¼Œä¸°å¯Œçš„æ‹“å±•ï¼Œæ­é…è°·æ­Œçš„åŒæ­¥åŠŸèƒ½ï¼Œå¯ä»¥è¯´ä¸€ä¸ªè´¦å·èµ°å¤©ä¸‹</p><h2 id="å¿«æ·é”®-1"><a href="#å¿«æ·é”®-1" class="headerlink" title="å¿«æ·é”®"></a>å¿«æ·é”®</h2><p>è¿˜æ˜¯é‚£å¥è¯,ç†Ÿç»ƒä½¿ç”¨å¿«æ·é”®æ˜¯ç¨‹åºå‘˜çš„å¿…å¤‡æŠ€â€¦ä¸‹é¢è¿˜æ˜¯ä»‹ç»æˆ‘å¸¸ç”¨çš„å¿«æ·é”®</p><ul><li><code>ctrl + j</code> æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€â€ä¸‹è½½å†…å®¹â€é¡µ</li><li><code>ctrl + h</code> æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€â€å†å²è®°å½•â€é¡µ</li><li><code>ctrl + n</code> æ‰“å¼€æ–°çª—å£</li><li><code>ctrl + t</code> æ‰“å¼€ä¸€ä¸ªæ–°çš„ Tab</li><li><code>ctrl + u</code> æŸ¥çœ‹é¡µé¢æºä»£ç </li><li><code>ctrl + w</code> å…³é—­å½“å‰çª—å£</li><li><code>ctrl + æ•°å­—é”®</code> å¿«é€Ÿè·³è½¬åˆ°å’Œæ•°å­—é”®å¯¹åº”çš„ Tabï¼Œctrl+9 ä¸ºæœ€åä¸€ä¸ª</li><li><code>ctrl + shift + n</code> ä»¥æ— ç—•æ¨¡å¼æ‰“å¼€æ–°çª—å£ï¼ˆå¯ç”¨äºå¤šä¸ªçª—å£çš„ cookie ä¸å…±äº«ï¼Œä¾¿äºè°ƒè¯•ï¼‰</li><li><code>ctrl + tab</code> åˆ‡æ¢ä¸åŒçš„ tab é¡µ</li><li><code>ctrl + g</code> æŸ¥æ‰¾æ ä¸­æœç´¢å­—è¯ç›¸åŒ¹é…çš„ä¸‹ä¸€æ¡å†…å®¹</li><li><code>ctrl + shift + g</code> æŸ¥æ‰¾æ ä¸­æœç´¢å­—è¯ç›¸åŒ¹é…çš„ä¸Šä¸€æ¡å†…å®¹</li><li><code>shift + esc</code> ä»»åŠ¡ç®¡ç†å™¨</li></ul><h2 id="æ‹“å±•æ’ä»¶"><a href="#æ‹“å±•æ’ä»¶" class="headerlink" title="æ‹“å±•æ’ä»¶"></a>æ‹“å±•æ’ä»¶</h2><ul><li><code>AdBlockPlus</code> å±è”½çƒ¦äººçš„å¹¿å‘Šï¼ˆå¿…è£…æ’ä»¶ï¼‰</li><li><code>Charset</code> ä¿®æ”¹å½“å‰é¡µé¢çš„ç¼–ç ï¼Œå› è°·æ­Œå‡çº§äº† 55 ä»¥ä¸Šä¹‹åï¼Œç²¾ç®€ç¼–ç åŠŸèƒ½</li><li><code>CSS Used</code> ç”¨æ¥è·å–æŸä¸ªå…ƒç´ æ¸²æŸ“åçš„ stylesï¼ˆæ ·å¼ï¼‰ï¼Œå³ computed åçš„æ ·å¼ï¼Œæ‰’ä»£ç å°èƒ½æ‰‹</li><li><code>JSON-handle</code> æ ¼å¼åŒ– JSON æ–‡ä»¶,è®¿é—® JSON æ–‡ä»¶ï¼ˆæ•°æ®ï¼‰æ—¶è·å¾—æ›´æ„‰æ‚¦çš„ä½“éªŒ</li><li><code>SwitchyOmega</code> ç®¡ç†å’Œåˆ‡æ¢å¤šä¸ªä»£ç†è®¾ç½®ï¼ˆå°é£æœºå¿…å¤‡æ’ä»¶ï¼‰,å…·ä½“æ€ä¹ˆä½¿ç”¨è¿˜æ˜¯ç™¾åº¦ä¸‹å§ï¼Œè¿™é‡Œå°±ä¸æ•™å­¦äº†</li><li><code>Tampermonkey</code> æœ‰çŒ´å­æ’ä»¶ï¼Œç”¨äºç®¡ç†ç”¨æˆ·è‡ªå®šä¹‰çš„è„šæœ¬ï¼ˆå¿…è£…æ’ä»¶ï¼‰</li><li><code>React Developer Tools</code> å¼€å‘ React åº”ç”¨æ—¶å¿…è£…çš„ä¸€æ¬¾æ‹“å±•</li><li><code>Vue.js devtools</code> åŒä¸Šï¼Œéƒ½æ˜¯è¾…åŠ©å¼€å‘çš„æ‹“å±•</li><li><code>Wappalyzer</code> å½“å‰ç½‘ç«™æ‰€ä½¿ç”¨æŠ€æœ¯æ ˆ(å›¾ä¸ªæ–°é²œï¼ŒæŒºæœ‰æ„æ€çš„)</li></ul><blockquote><p>ps: æ²¹çŒ´å­è„šæœ¬ä¸‹è½½ï¼š<a href="https://greasyfork.org/zh-CN" target="_blank" rel="noopener">https://greasyfork.org/zh-CN</a></p></blockquote><h1 id="Postman"><a href="#Postman" class="headerlink" title="Postman"></a>Postman</h1><p>ä½œä¸ºå‰ç«¯ï¼Œæœ€å¸¸æ‰“äº¤é“çš„å°±æ˜¯åç«¯äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè°ƒè¯•<code>API</code>çš„å·¥å…·ï¼Œè€Œ<code>Postman</code>å°±æ˜¯ä¸€æ¬¾éå¸¸ä¼˜ç§€çš„ API æ¥å£è°ƒè¯•å·¥å…·ã€‚</p><blockquote><p>ps: å¦‚æœè¿˜æ²¡ç”¨è¿‡ <code>Postman</code> çš„ï¼Œèµ¶ç´§ä¸‹è½½ä¸‹æ¥ä½“éªŒå§</p></blockquote><h2 id="å®‰è£…-2"><a href="#å®‰è£…-2" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>1.ä¼—æ‰€å‘¨çŸ¥ï¼ŒPostman æœ€æ—©æ˜¯ chrome æµè§ˆå™¨çš„æ’ä»¶ï¼Œæ‰€ä»¥ä½ å¯ä»¥é€šè¿‡ Chrome å•†åº—æœç´¢ä¸‹è½½å³å¯ã€‚</p><p>2.Postman æä¾›äº†ç‹¬ç«‹çš„å®‰è£…åŒ…ï¼Œä¸å†ä¾èµ–äº Chrome æµè§ˆå™¨äº†ï¼Œæ‰€ä»¥ä¹Ÿå¯é€šè¿‡å®‰è£…åŒ…ç›´æ¥å®‰è£…ã€‚</p><blockquote><p>psï¼šä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œ2018 å¹´åˆ Chrome åœæ­¢å¯¹ Chrome åº”ç”¨ç¨‹åºçš„æ”¯æŒã€‚æ‰€ä»¥è¿™é‡Œå»ºè®®ä½¿ç”¨ç‹¬ç«‹å®‰è£…åŒ…ä¸‹è½½</p></blockquote><p>ä¸‹è½½ä¹Ÿæ˜¯ç›´æ¥å®‰è£…å³å¯ï¼Œè¿™é‡ŒåŒæ ·æä¾›ä¸‹è½½é“¾æ¥</p><blockquote><p><a href="https://www.lanzous.com/i8prqgh" target="_blank" rel="noopener">Postman è“å¥äº‘é“¾æ¥</a>,<a href="https://www.getpostman.com/downloads/" target="_blank" rel="noopener">Postman å®˜ç½‘é“¾æ¥ï¼Œç½‘é€Ÿå¿«çš„å°ä¼™ä¼´å¯ä»¥åœ¨è¿™é‡Œä¸‹è½½</a></p></blockquote><h2 id="ç®€å•ä½¿ç”¨"><a href="#ç®€å•ä½¿ç”¨" class="headerlink" title="ç®€å•ä½¿ç”¨"></a>ç®€å•ä½¿ç”¨</h2><h3 id="é…ç½®å¤šä¸ªç¯å¢ƒ"><a href="#é…ç½®å¤šä¸ªç¯å¢ƒ" class="headerlink" title="é…ç½®å¤šä¸ªç¯å¢ƒ"></a>é…ç½®å¤šä¸ªç¯å¢ƒ</h3><p>ä¸€èˆ¬æ­£å¼çš„å¼€å‘é¡¹ç›®éƒ½ä¼šæœ‰<code>æµ‹è¯•ç¯å¢ƒ</code>å’Œ<code>çº¿ä¸Šç¯å¢ƒ</code>ä¹‹åˆ†ï¼Œè€Œå‰ç«¯åŒå­¦æ‹¿åˆ°è¿™ä¸¤ä¸ªåœ°å€åï¼Œæ¯æ¬¡éƒ½è¦è¯·æ±‚ä¸åŒçš„ç¯å¢ƒéƒ½è¦å»ä¿®æ”¹ä¸»æœºåï¼Œé€ æˆä¸å¿…è¦çš„æ—¶é—´æµªè´¹ï¼Œè€Œ<code>Postman</code>å°±æä¾›äº†å¤šä¸ªç¯å¢ƒçš„é€‰æ‹©ï¼Œæ–¹ä¾¿æˆ‘ä»¬æ— ç¼é“¾æ¥ä¸åŒç¯å¢ƒçš„æ¥å£</p><p>1.è®¾ç½®ç¯å¢ƒå˜é‡</p><p>ç‚¹å‡»å³ä¸Šè§’è®¾ç½®å›¾æ ‡</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/postman01.jpg" data-fancybox="group" data-caption="è®¾ç½®ç¯å¢ƒå˜é‡" class="fancybox"><img alt="è®¾ç½®ç¯å¢ƒå˜é‡" title="è®¾ç½®ç¯å¢ƒå˜é‡" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/postman01.jpg" class="lazyload"></a></p><p>æ·»åŠ ç¯å¢ƒå˜é‡</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/postman02.jpg" data-fancybox="group" data-caption="è®¾ç½®ç¯å¢ƒå˜é‡" class="fancybox"><img alt="è®¾ç½®ç¯å¢ƒå˜é‡" title="è®¾ç½®ç¯å¢ƒå˜é‡" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/postman02.jpg" class="lazyload"></a></p><p>æ·»åŠ  key/value å€¼ï¼Œä¸åŒç¯å¢ƒçš„ key å€¼éœ€ä¸€è‡´</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/postman03.jpg" data-fancybox="group" data-caption="è®¾ç½®ç¯å¢ƒå˜é‡" class="fancybox"><img alt="è®¾ç½®ç¯å¢ƒå˜é‡" title="è®¾ç½®ç¯å¢ƒå˜é‡" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/postman03.jpg" class="lazyload"></a><br><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/postman04.jpg" data-fancybox="group" data-caption="è®¾ç½®ç¯å¢ƒå˜é‡" class="fancybox"><img alt="è®¾ç½®ç¯å¢ƒå˜é‡" title="è®¾ç½®ç¯å¢ƒå˜é‡" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/postman04.jpg" class="lazyload"></a></p><p>2.è®¾ç½®å¯¹åº”çš„ key å€¼</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/postman05.png" data-fancybox="group" data-caption="è®¾ç½®ç¯å¢ƒå˜é‡" class="fancybox"><img alt="è®¾ç½®ç¯å¢ƒå˜é‡" title="è®¾ç½®ç¯å¢ƒå˜é‡" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/postman05.png" class="lazyload"></a></p><h3 id="é…ç½®é‡å¤-header"><a href="#é…ç½®é‡å¤-header" class="headerlink" title="é…ç½®é‡å¤ header"></a>é…ç½®é‡å¤ header</h3><p>å¾ˆå¤šæ—¶å€™ï¼Œå½“åç«¯å†™å®Œä¸€ä¸ªæ–°æ¥å£æ—¶ï¼Œæˆ‘ä»¬æ¯æ¬¡æµ‹è¯•è¯·æ±‚ï¼Œ<code>header</code>å¤´å¾ˆæœ‰å¯èƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ¯”å¦‚è¯´ï¼Œæ¯ä¸ªæ¥å£éƒ½éœ€è¦<code>token</code>ï¼Œè¿™æ—¶å€™å°±éœ€è¦<code>Postman</code>æ¥å¸®æˆ‘ä»¬è®¾ç½®<code>header</code>å¤´çš„å˜é‡ï¼Œé¿å…å¤åˆ¶é‡å¤çš„<code>header</code>å¤´ï¼Œåšæ— ç”¨åŠŸ</p><p>1.è®¾ç½® headers</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/postman06.jpg" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/postman06.jpg" class="lazyload"></a></p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/postman07.jpg" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/postman07.jpg" class="lazyload"></a></p><p>2.ä½¿ç”¨ headers</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/postman08.jpg" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/postman08.jpg" class="lazyload"></a></p><p>å¥½äº†ï¼Œåˆ°è¿™é‡Œï¼ŒåŸºç¡€çš„ä½¿ç”¨å·²ç»å›äº†ï¼Œå½“ç„¶ï¼Œè¿™ä¸æ˜¯<code>Postman</code>çš„å…¨éƒ¨åŠŸèƒ½ï¼Œå®ƒè¿˜å¯ä»¥åšå•å…ƒæµ‹è¯•ã€å›å½’æµ‹è¯•ã€è‡ªåŠ¨åŒ–æµ‹è¯•ç­‰ç­‰ï¼Œè¿™å°±éœ€è¦ä½ ä»¬è‡ªå·±å»ä½“éªŒä¸€ç•ªäº†ã€‚ã€‚ã€‚</p><blockquote><p>ps: <code>Postman</code>è¿˜æœ‰ä¸ªå…„å¼Ÿæ¬¾<a href="https://github.com/liyasthomas/postwoman" target="_blank" rel="noopener">Postwoman</a>ï¼Œå¼€æºå…è´¹ï¼Œä¹Ÿå¾ˆä¸é”™</p></blockquote><h1 id="å‰ç«¯å¼€å‘å°æç¤º"><a href="#å‰ç«¯å¼€å‘å°æç¤º" class="headerlink" title="å‰ç«¯å¼€å‘å°æç¤º"></a>å‰ç«¯å¼€å‘å°æç¤º</h1><h2 id="ä½¿ç”¨-Map-ä»£æ›¿-if-else"><a href="#ä½¿ç”¨-Map-ä»£æ›¿-if-else" class="headerlink" title="ä½¿ç”¨ Map ä»£æ›¿ if/else"></a>ä½¿ç”¨ Map ä»£æ›¿ if/else</h2><p>å¼€å‘çš„æ—¶å€™ï¼Œç»å¸¸ä¼šç”¨åˆ°åˆ¤æ–­ï¼Œç„¶åæ ¹æ®åˆ¤æ–­è¿”å›ä¸åŒçš„å€¼æˆ–æ–¹æ³•,è¿™é‡Œä»¥å¾®ä¿¡å¼€å‘ä¸ºä¾‹,å¾®ä¿¡æ¥å—ç”¨æˆ·æ¶ˆæ¯æ—¶ä¼šæœ‰ <code>image</code>ã€<code>text</code>ã€<code>voice</code>ç­‰ç­‰ EventKey,è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦æ ¹æ®è¿™å‡ ä¸ª Key å†™ä¸åŒçš„æ–¹æ³•ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleEvent</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (key === <span class="string">"image"</span>) &#123;</span><br><span class="line">    <span class="comment">// å¤„ç†ç”¨æˆ·å‘é€å›¾ç‰‡çš„æ–¹æ³•</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key === <span class="string">"text"</span>) &#123;</span><br><span class="line">    <span class="comment">// å¤„ç†ç”¨æˆ·å‘é€æ–‡æœ¬çš„æ–¹æ³•</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key === <span class="string">"voice"</span>) &#123;</span><br><span class="line">    <span class="comment">// å¤„ç†ç”¨æˆ·å‘é€å£°éŸ³</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// å¤„ç†å…¶ä»–äº‹ä»¶</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>æˆ‘ä»¬è§‚å¯Ÿä¸Šé¢ä»£ç ï¼Œéšç€æˆ‘ä»¬ä¸šåŠ¡çš„å¢åŠ ï¼Œå¯èƒ½ä¼šè·å–ç”¨æˆ·çš„åœ°ç†ä½ç½®ã€æ‰«ç ä»€ä¹ˆçš„ï¼Œè¿™ä¸ª if/else å°±ä¼šè¶Šæ¥è¶Šå¤šï¼Œä»£ç å°±ä¼šå˜å¾—è¶Šæ¥è‡ƒè‚¿ï¼Œå¯è¯»æ€§ä¹Ÿè¶Šæ¥è¶Šå·®ã€‚ã€‚ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±é€šè¿‡ Map æ¥ä¼˜åŒ–ä¸‹æˆ‘ä»¬çš„ä»£ç </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> map = &#123;</span><br><span class="line">    <span class="string">`image`</span>:<span class="function"><span class="params">message</span> =&gt;</span>&#123;</span><br><span class="line">        <span class="comment">// å¤„ç†ç”¨æˆ·å‘é€å›¾ç‰‡çš„æ–¹æ³•</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">`text`</span>:<span class="function"><span class="params">message</span> =&gt;</span>&#123;</span><br><span class="line">        <span class="comment">// å¤„ç†ç”¨æˆ·å‘é€æ–‡æœ¬çš„æ–¹æ³•</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">`voice`</span>:<span class="function"><span class="params">message</span> =&gt;</span>&#123;</span><br><span class="line">        <span class="comment">// å¤„ç†ç”¨æˆ·å‘é€å£°éŸ³</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">`default`</span>:&#123;</span><br><span class="line">        <span class="comment">// å¤„ç†å…¶ä»–äº‹ä»¶</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleEvent</span>(<span class="params">key</span>)</span>&#123;</span><br><span class="line">    key = map.hasOwnProperty(key) ? key : <span class="string">'default'</span></span><br><span class="line">    <span class="keyword">return</span> map[key]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><blockquote><p>ps: æ¨èè§‚çœ‹ <a href="https://juejin.im/post/5bdfef86e51d453bf8051bf8" target="_blank" rel="noopener">JavaScript å¤æ‚åˆ¤æ–­çš„æ›´ä¼˜é›…å†™æ³•</a></p></blockquote><h2 id="æ€§èƒ½æµ‹è¯•"><a href="#æ€§èƒ½æµ‹è¯•" class="headerlink" title="æ€§èƒ½æµ‹è¯•"></a>æ€§èƒ½æµ‹è¯•</h2><p><code>Chrome DevTools</code>ï¼ˆæ§åˆ¶å°ï¼‰ï¼Œæˆ‘æƒ³å„ä½å‰ç«¯å°ä¼™ä¼´åº”è¯¥ä¸é™Œç”Ÿå§ï¼Œç»å¸¸ç”¨å®ƒæ¥è°ƒè¯•é¡µé¢ï¼Œ<code>element</code>ã€<code>console</code>å’Œ<code>network</code>éƒ½æ˜¯è¦å¤©å¤©æ‰“äº¤é“çš„ï¼Œä¸è¿‡ä½ å¯çŸ¥é“ä»–è¿˜æœ‰ä¸ªå¯ä»¥æµ‹è¯•å½“å‰é¡µé¢æ€§èƒ½çš„é¢æ¿?æ²¡é”™ï¼Œä»–å°±æ˜¯ <code>Audits</code> é¢æ¿ã€‚ã€‚ã€‚</p><p>chrome 60 ä¹‹åï¼Œä»–å¼•å…¥äº† Google è‡ªå®¶å¼€æºçš„ä¸€ä¸ªé¡¹ç›®ï¼š<code>LightHouse</code>ã€‚</p><blockquote><p>LightHouse æ˜¯ Google å¼€æºçš„ä¸€ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ï¼Œä¹‹å‰æ˜¯ä»¥ chrome æ’ä»¶ å’Œ å‘½ä»¤è¡Œ cli çš„æ–¹å¼ä½¿ç”¨ï¼Œç°åœ¨å¯ä»¥ç›´æ¥é€šè¿‡å¼€å‘è€…é¢æ¿ä½¿ç”¨äº†ï¼Œæ‰€ä»¥ä¸æ¨èåœ¨å•ç‹¬å®‰è£…æ’ä»¶æˆ–è€… cli å·¥å…·ã€‚ã€‚ã€‚</p></blockquote><p>è¿™é‡Œä»¥æµ‹è¯•ç™¾åº¦ä¸ºä¾‹ï¼š</p><p>1.é¦–å…ˆæ‰“å¼€<a href="https://www.baidu.com/" target="_blank" rel="noopener">ç™¾åº¦</a>,ç„¶åæ‰“å¼€æ§åˆ¶é¢æ¿ï¼Œç‚¹å‡»å³è¾¹çš„åŒç®­å¤´</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/Audits01.jpg" data-fancybox="group" data-caption="Chrome DevToolsæ§åˆ¶å°" class="fancybox"><img alt="Chrome DevToolsæ§åˆ¶å°" title="Chrome DevToolsæ§åˆ¶å°" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/Audits01.jpg" class="lazyload"></a></p><p>2.é€‰ä¸­ <code>Audits</code> é¢æ¿</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/Audits02.jpg" data-fancybox="group" data-caption="Auditsé¢æ¿" class="fancybox"><img alt="Auditsé¢æ¿" title="Auditsé¢æ¿" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/Audits02.jpg" class="lazyload"></a></p><p>3.é€‰æ‹©æ¡Œé¢è®¾å¤‡ï¼ˆå°±æ˜¯æµ‹è¯• pc ç‰ˆï¼‰ï¼Œç„¶åç‚¹å‡»<code>run audits</code>ï¼Œä¹‹åå°±ä¼šæ ¹æ®è¿™å‡ é¡¹æŒ‡æ ‡ç”Ÿäº§ä¸€ä»½æŠ¥å‘Šï¼Œå¦‚ä¸‹å›¾</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/Audits03.jpg" data-fancybox="group" data-caption="æµ‹è¯•" class="fancybox"><img alt="æµ‹è¯•" title="æµ‹è¯•" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/Audits03.jpg" class="lazyload"></a></p><p>4.é€šè¿‡ç‚¹å‡»å³ä¾§èœå•å¯ä»¥ä¿å­˜æ•´ä¸ªæµ‹è¯•æŠ¥å‘Š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/Audits04.jpg" data-fancybox="group" data-caption="ä¿å­˜" class="fancybox"><img alt="ä¿å­˜" title="ä¿å­˜" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs//2020-01-17/Audits04.jpg" class="lazyload"></a></p><blockquote><ul><li>åŒæ—¶ä¹Ÿæœ‰ä¸ªä¸­æ–‡ç‰ˆçš„çº¿ä¸Šç‰ˆæœ¬ <a href="https://developers.google.com/speed/pagespeed/insights/" target="_blank" rel="noopener">https://developers.google.com/speed/pagespeed/insights/</a></li><li>ç§»åŠ¨ç«¯å…¼å®¹æ€§æµ‹è¯•ï¼š<a href="https://search.google.com/test/mobile-friendly" target="_blank" rel="noopener">https://search.google.com/test/mobile-friendly</a></li><li>ç»“æ„åŒ–ç½‘é¡µæ•°æ®ï¼š<a href="https://search.google.com/structured-data/testing-tool/#" target="_blank" rel="noopener">https://search.google.com/structured-data/testing-tool/#</a></li><li>(è²Œä¼¼éƒ½éœ€è¦ç§‘å­¦ä¸Šç½‘æ‰å¯ä»¥è®¿é—®â€¦)</li></ul></blockquote><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è‡³æ­¤ï¼Œæœ¬æ¬¡æ­å»ºä¹Ÿå·²ç»å…¨éƒ¨ç»“æŸäº†ï¼Œå¸Œæœ›ä½ èƒ½ä»æ–‡ä¸­æ”¶æ‰€è·ï¼Œä¹Ÿèƒ½æ­å»ºå±äºè‡ªå·±é€‚åˆè‡ªå·±çš„å¼€å‘ç¯å¢ƒ</p><p>æœ€åï¼Œæ„Ÿè°¢å„ä½è§‚ä¼—è€çˆ·è§‚çœ‹å•¦ O(âˆ©_âˆ©)O</p>]]></content>
      
      
      <categories>
          
          <category> è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»é›¶æ•™ä½ æ‰“é€ å…è´¹ã€ç¨³å®šã€é«˜æ•ˆçš„å›¾åºŠ</title>
      <link href="/2020-01-13/%E4%BB%8E%E9%9B%B6%E6%95%99%E4%BD%A0%E6%89%93%E9%80%A0%E5%85%8D%E8%B4%B9%E7%A8%B3%E5%AE%9A%E9%AB%98%E6%95%88%E7%9A%84%E5%9B%BE%E5%BA%8A/"/>
      <url>/2020-01-13/%E4%BB%8E%E9%9B%B6%E6%95%99%E4%BD%A0%E6%89%93%E9%80%A0%E5%85%8D%E8%B4%B9%E7%A8%B3%E5%AE%9A%E9%AB%98%E6%95%88%E7%9A%84%E5%9B%BE%E5%BA%8A/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ä½œä¸ºä¸€ä¸ªå°åšä¸»ï¼Œå†™å†™åšå®¢çš„æ—¶å€™å¾ˆç»å¸¸ä¼šç”¨åˆ°ä¸€äº›å›¾ç‰‡ï¼Œä½†æ˜¯åˆå› ä¸ºè‡ªå·±çš„æœåŠ¡å™¨å¤ªèœäº†ï¼Œæ”¾åœ¨è‡ªå·±æœåŠ¡å™¨ä¹Ÿä¸æ˜¯å¾ˆå¥½ï¼Œæ‰€ä»¥å°±æƒ³åˆ°äº†å›¾åºŠã€‚</p><p>ä½†æ˜¯ä½œä¸ºåªæ˜¯å¶å°”ç”¨ç”¨å›¾ï¼Œä»˜è´¹æœåŠ¡çš„å›¾åºŠåˆä¸å¤ªåˆé€‚ï¼ˆ<code>ç™½å«–å…š</code>ï¼‰,æ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬å°±é€šè¿‡ <code>Github</code> å’Œ <code>JsDelivr</code> æ­å»ºä¸€ä¸ªå…è´¹çš„å°å›¾åºŠå•¦</p><blockquote><p>ps: ä¸»è¦æ˜¯ä»¥å‰å†™çš„æ–‡ç« å‹æ ¹æ²¡æœ‰é…å›¾ï¼Œå› ä¸ºå«Œéº»çƒ¦â”­â”®ï¹â”­â”®ï¼Œä½†æ˜¯æ„Ÿè§‰ä¼šå½±å“å¯è¯»æ€§ï¼Œæ‰€ä»¥å°±æ‰¾ä¸ªå›¾åºŠæ¥ä½¿ç”¨äº†</p></blockquote><h1 id="ä»€ä¹ˆæ˜¯å›¾åºŠï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å›¾åºŠï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å›¾åºŠï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å›¾åºŠï¼Ÿ</h1><p>ç®€å•æ¥è®²ï¼Œå›¾åºŠå°±æ˜¯ä¸€ä¸ªåœ¨ç½‘ä¸Šå­˜å‚¨å›¾ç‰‡çš„åœ°æ–¹ï¼ˆå…¶è¿”å›ç»™ä½ ä¸€ä¸ª <code>URL</code> è¿›è¡Œè·å–å›¾ç‰‡ï¼‰ï¼Œç›®çš„æ˜¯ä¸ºäº†èŠ‚çœæœåŠ¡å™¨ç©ºé—´ï¼ŒåŠ å¿«å›¾ç‰‡æ‰“å¼€é€Ÿåº¦ã€‚</p><h1 id="JsDelivråˆæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#JsDelivråˆæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="JsDelivråˆæ˜¯ä»€ä¹ˆï¼Ÿ"></a>JsDelivråˆæ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>ä»ä»–çš„å®˜ç½‘å¯çŸ¥ï¼Œä»–æ˜¯å¼€æºCDNæä¾›å•†ï¼ˆå…è´¹ï¼Œå¿«é€Ÿä¸”å¯é ï¼‰,å¹¶ä¸” <code>works in China</code> (ä¹Ÿå°±æ˜¯ä¸ä¼šå‡ºç°å¢™çš„é—®é¢˜)ï¼Œæ”¯æŒç»™Githubã€WordPressã€NPMå…è´¹æä¾›CDNåŠ é€Ÿ</p><p>è¿™ä¹ˆä¸€çœ‹ï¼Œè¿™ä¸æ˜¯æ­£åˆé€‚æˆ‘ä»¬çš„éœ€æ±‚å—ï¼Œå…è´¹ã€å¿«é€Ÿå¹¶ä¸”ç¨³å®šçš„<code>CDN</code>åŠ é€ŸæœåŠ¡</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å°±æ˜¯ç”¨ä»–æ¥é…ç½®æˆ‘ä»¬å›¾åºŠçš„åŠ é€Ÿè®¿é—®</p><blockquote><p>ä½¿ç”¨æ–¹æ³•ï¼š<a href="https://cdn.JsDelivr.net/gh/ä½ çš„ç”¨æˆ·å/ä½ çš„ä»“åº“å@å‘å¸ƒçš„ç‰ˆæœ¬å·/æ–‡ä»¶è·¯å¾„ï¼Œç‰ˆæœ¬å·ä¸æ˜¯å¿…éœ€çš„ï¼Œæ˜¯ä¸ºäº†åŒºåˆ†æ–°æ—§èµ„æºï¼Œå¦‚æœä¸ä½¿ç”¨ç‰ˆæœ¬å·ï¼Œå°†ä¼šç›´æ¥å¼•ç”¨æœ€æ–°èµ„æºã€‚" target="_blank" rel="noopener">https://cdn.JsDelivr.net/gh/ä½ çš„ç”¨æˆ·å/ä½ çš„ä»“åº“å@å‘å¸ƒçš„ç‰ˆæœ¬å·/æ–‡ä»¶è·¯å¾„ï¼Œç‰ˆæœ¬å·ä¸æ˜¯å¿…éœ€çš„ï¼Œæ˜¯ä¸ºäº†åŒºåˆ†æ–°æ—§èµ„æºï¼Œå¦‚æœä¸ä½¿ç”¨ç‰ˆæœ¬å·ï¼Œå°†ä¼šç›´æ¥å¼•ç”¨æœ€æ–°èµ„æºã€‚</a></p></blockquote><h1 id="æ­å»º"><a href="#æ­å»º" class="headerlink" title="æ­å»º"></a>æ­å»º</h1><p>å…¶å®ä»ä¸Šé¢å°±çŸ¥é“ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡ <code>JsDelivr</code> è®¿é—®æˆ‘ä»¬è‡ªå·± <code>Github</code> ä»“åº“çš„èµ„æºäº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬èƒ½ä¸èƒ½é€šè¿‡ä¸€äº›å·¥å…·ï¼Œæ¥æé«˜æˆ‘ä»¬çš„ç”Ÿäº§åŠ›å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼Œè‚¯å®šæœ‰çš„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±ä¸€æ­¥ä¸€æ­¥çš„æé«˜æˆ‘ä»¬çš„ç”Ÿäº§åŠ›</p><h2 id="åˆ›å»ºæ–°é¡¹ç›®"><a href="#åˆ›å»ºæ–°é¡¹ç›®" class="headerlink" title="åˆ›å»ºæ–°é¡¹ç›®"></a>åˆ›å»ºæ–°é¡¹ç›®</h2><p>ç™»å½•/æ³¨å†ŒGithubï¼Œæ–°å»ºä¸€ä¸ªä»“åº“ï¼Œå¡«å†™å¥½ä»“åº“åï¼Œä»“åº“æè¿°ï¼Œå¹¶ä¸”ä¸€å®šçš„æ˜¯å…¬å¼€é¡¹ç›®ï¼Œä¸èƒ½æ˜¯ç§æœ‰çš„</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs@master/2020-01-12/figureBed01.jpg" data-fancybox="group" data-caption="åˆ›å»ºæ–°é¡¹ç›®" class="fancybox"><img alt="åˆ›å»ºæ–°é¡¹ç›®" title="åˆ›å»ºæ–°é¡¹ç›®" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs@master/2020-01-12/figureBed01.jpg" class="lazyload"></a></p><h2 id="ç”ŸæˆToken"><a href="#ç”ŸæˆToken" class="headerlink" title="ç”ŸæˆToken"></a>ç”ŸæˆToken</h2><p>å…ˆç‚¹å‡»å¤´åƒçš„ä¸‹æ‹‰èœå•ï¼Œå¹¶é€‰æ‹© <code>Settings</code></p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs@master/2020-01-12/figureBed02.jpg" data-fancybox="group" data-caption="Settings" class="fancybox"><img alt="Settings" title="Settings" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs@master/2020-01-12/figureBed02.jpg" class="lazyload"></a></p><p>é€‰æ‹© <code>Developer settings</code></p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs@master/2020-01-12/figureBed03.jpg" data-fancybox="group" data-caption="Developer settings" class="fancybox"><img alt="Developer settings" title="Developer settings" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs@master/2020-01-12/figureBed03.jpg" class="lazyload"></a></p><p>é€‰æ‹© <code>Personal access tokens</code></p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs@master/2020-01-12/figureBed04.jpg" data-fancybox="group" data-caption="Personal access tokens" class="fancybox"><img alt="Personal access tokens" title="Personal access tokens" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs@master/2020-01-12/figureBed04.jpg" class="lazyload"></a></p><p>é€‰æ‹© <code>Generate new token</code>ï¼Œå¹¶å¡«å†™å¥½ <code>Note</code>ï¼Œå‹¾ä¸Š <code>repo</code>ï¼Œæœ€åº•ä¸‹ç‚¹å‡» <code>Generate new token</code> ç”Ÿæˆæ‰€éœ€è¦çš„token</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs@master/2020-01-12/figureBed05.jpg" data-fancybox="group" data-caption="Generate new token" class="fancybox"><img alt="Generate new token" title="Generate new token" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs@master/2020-01-12/figureBed05.jpg" class="lazyload"></a></p><p>è¿™ä¸ªtokenåªä¼šæ˜¾ç¤ºä¸€æ¬¡ï¼Œè‡ªå·±å…ˆä¿å­˜ä¸‹æ¥ ï¼ˆå¦‚æœå¿˜è®°äº†ï¼Œé‡å¤ä¸Šé¢ä¸€æ­¥ï¼Œç”Ÿæˆæ–°çš„tokenï¼‰</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs@master/2020-01-12/figureBed06.jpg" data-fancybox="group" data-caption="Generate new token" class="fancybox"><img alt="Generate new token" title="Generate new token" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs@master/2020-01-12/figureBed06.jpg" class="lazyload"></a></p><h2 id="ä½¿ç”¨PicGoä¸Šä¼ å›¾ç‰‡"><a href="#ä½¿ç”¨PicGoä¸Šä¼ å›¾ç‰‡" class="headerlink" title="ä½¿ç”¨PicGoä¸Šä¼ å›¾ç‰‡"></a>ä½¿ç”¨PicGoä¸Šä¼ å›¾ç‰‡</h2><p>è¯»åˆ°åˆ°äº†è¿™é‡Œï¼Œä½ ä¼šå‘ç°æˆ‘ä»¬åªæ˜¯åˆ›å»ºäº†ä¸€ä¸ªGithubä»“åº“ï¼Œå‹æ ¹æ²¡æœ‰æé«˜ä»€ä¹ˆç”Ÿäº§åŠ›= =ã€‚</p><p>éªšå¹´ï¼Œåˆ«ç€æ€¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ <a href="https://github.com/Molunerfinn/picgo/releases" target="_blank" rel="noopener">PicGo</a> è¿™ä¸ªå·¥å…·æ¥é…ç½®æˆ‘ä»¬çš„ <code>Github</code> å›¾åºŠå•¦</p><p>æ‰“å¼€è½¯ä»¶ï¼Œé€‰æ‹© <code>å›¾åºŠè®¾ç½®</code> ï¼Œåœ¨é€‰æ‹© <code>GitHubå›¾åºŠ</code>ï¼Œé…ç½®ä¸Šæˆ‘ä»¬åˆšåˆ›å»ºçš„ä»“åº“åã€åˆ†æ”¯å’ŒTokenï¼Œå¹¶è®¾ç½®ä»“åº“çš„å­˜å‚¨è·¯å¾„ï¼Œ</p><p>è‡ªå®šä¹‰åŸŸååˆ™é…ç½®æˆ <code>https://cdn.JsDelivr.net/gh/ä½ çš„ç”¨æˆ·å/ä½ çš„ä»“åº“å/</code> ï¼Œè¿™é‡Œå°±æ–¹ä¾¿ä½ åœ¨ç›¸å†Œä¸­å¤åˆ¶ä½ å›¾åºŠçš„è°…è§£</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs@master/2020-01-12/figureBed07.png" data-fancybox="group" data-caption="PicGo" class="fancybox"><img alt="PicGo" title="PicGo" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs@master/2020-01-12/figureBed07.png" class="lazyload"></a></p><p>é…ç½®å¥½ <code>PicGo</code> å,æˆ‘ä»¬å°±å¯ä»¥æ„‰å¿«çš„ç©è€å•¦ï¼Œæ­¤å¤– <code>PicGo</code> è¿˜æ”¯æŒå¾ˆå¤šåŠŸèƒ½ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€ä»‹ç»ï¼Œéœ€è¦ä½ è‡ªå·±æ¢ç´¢å•¦</p><blockquote><p>ps: ä¸Šä¼ å¦‚æœéœ€è¦å‹ç¼©çš„è¯ï¼Œæ¨èä½¿ç”¨ TinyPNG å‹ç¼©ä¹‹åï¼Œåœ¨ä¸Šä¼ å“¦</p></blockquote><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è¯´ä¸€ä¸‹æˆ‘ä¸ºä»€ä¹ˆé€‰æ‹© <code>Github</code> å’Œ <code>JsDelivr</code></p><ol><li><p>ä»–ä¸¤éƒ½æ˜¯å¤§å‚ï¼Œä¸ç”¨æ‹…å¿ƒè·‘è·¯</p></li><li><p>ä¸ç”¨æ‹…å¿ƒè®¿é—®é€Ÿåº¦å’Œå®¹é‡</p></li><li><p>ä¸ç”¨æ‹…å¿ƒè®¿é—®é€Ÿåº¦å’Œå®¹é‡</p></li><li><p>æœ€å…³é”®è¿˜å…è´¹</p></li></ol><p>è¿™ä¸å°±æ˜¯æˆ‘ä»¬æ‰€éœ€è¦å—ï¼Ÿ</p><p>æœ€åï¼Œæ„Ÿè°¢å„ä½è§‚ä¼—è€çˆ·è§‚çœ‹å•¦O(âˆ©_âˆ©)O</p>]]></content>
      
      
      <categories>
          
          <category> è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Github </tag>
            
            <tag> JsDelivr </tag>
            
            <tag> PicGo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker-compose mysqlå’Œnodeè¿æ¥è®¤è¯mongoé—®é¢˜</title>
      <link href="/2019-12-30/docker-compose%E7%9A%84mysql%E5%92%8Cmongo%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
      <url>/2019-12-30/docker-compose%E7%9A%84mysql%E5%92%8Cmongo%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ€è¿‘ï¼Œæƒ³éƒ¨ç½²ä¸€ä¸ªè‡ªå·±çš„é¡¹ç›®ï¼Œé‰´äºè‡ªå·±çš„æœåŠ¡å™¨æ˜¯VPS(è™šæ‹Ÿä¸»æœº)ï¼Œé…ç½®ä¹Ÿä¸å¤Ÿï¼Œå°±æƒ³åˆ°äº†ç”¨ <code>docker</code> ç›´æ¥éƒ¨ç½²å¥½äº†ï¼Œè¿™æ ·æ—¢æ–¹ä¾¿éƒ¨ç½²ä¹Ÿæ–¹ä¾¿ä¸ç”¨çš„æ—¶å€™å¸è½½æˆ–æ›´æ–°</p><p>ç„¶åæœ¬åœ°æ­å»ºäº†ç¯å¢ƒï¼Œè¸©äº†ä¸€äº›å‘ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹</p><h1 id="mysql-é—®é¢˜ï¼ˆåˆå§‹åŒ–åˆ›å»ºæ•°æ®åº“ä¸æˆåŠŸï¼‰"><a href="#mysql-é—®é¢˜ï¼ˆåˆå§‹åŒ–åˆ›å»ºæ•°æ®åº“ä¸æˆåŠŸï¼‰" class="headerlink" title="mysql é—®é¢˜ï¼ˆåˆå§‹åŒ–åˆ›å»ºæ•°æ®åº“ä¸æˆåŠŸï¼‰"></a>mysql é—®é¢˜ï¼ˆåˆå§‹åŒ–åˆ›å»ºæ•°æ®åº“ä¸æˆåŠŸï¼‰</h1><p>é¦–å…ˆæˆ‘æ˜¯ä½¿ç”¨ <code>docker-compose</code> æ¥æ­å»ºæˆ‘çš„æœåŠ¡çš„ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">yml</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mysql:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql:5.5</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="comment"># æ„å»ºå®¹å™¨</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">./mysql</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">        <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="number">123456</span></span><br><span class="line">        <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">./mysql/db:/var/lib/mysql</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="number">3306</span><span class="string">:3306</span></span><br></pre></td></tr></table></figure></div><p>æ‰€ä»¥ç¬¬ä¸€æ¬¡è¿è¡Œ <code>docker-compose up</code> çš„æ—¶å€™æ²¡æœ‰åŠ ä¸Šå¯†ç (<code>MYSQL_ROOT_PASSWORD</code>é…ç½®)ï¼Œç„¶åå‡ºäºå®‰å…¨èµ·è§ï¼Œæˆ‘é…ç½®äº†rootå¯†ç ï¼Œç„¶åå…³é—­åï¼Œæ‰§è¡Œ <code>docker-compose up</code>ï¼Œå‘ç° <code>mysql</code> å®¹å™¨çš„æ•°æ®åº“å¹¶æ²¡æœ‰åˆ›å»º</p><p>æŸ¥äº†ä¸‹èµ„æ–™ï¼š<a href="https://github.com/docker-library/mariadb/issues/68" target="_blank" rel="noopener">https://github.com/docker-library/mariadb/issues/68</a></p><p>æŒ‚è½½çš„å®¿ä¸»ä¸»æœºçš„æ–‡ä»¶å¤¹å¿…é¡»ä¸ºç©ºæ–‡ä»¶å¤¹(.gitignoreç­‰éšè—æ–‡ä»¶ä¸å½±å“)ï¼Œå¦‚æœé‡Œé¢æœ‰æ–‡ä»¶ï¼Œå°±ä¸ä¼šåˆå§‹åŒ–æ•°æ®åº“ã€‚</p><blockquote><p>ps: <code>mongo</code> åˆ›å»ºä¸æˆåŠŸä¹Ÿå¯å‚è€ƒå¦‚ä¸Šè§£å†³æ–¹æ³•</p></blockquote><h1 id="nodeè¿æ¥è®¤è¯mongoé—®é¢˜"><a href="#nodeè¿æ¥è®¤è¯mongoé—®é¢˜" class="headerlink" title="nodeè¿æ¥è®¤è¯mongoé—®é¢˜"></a>nodeè¿æ¥è®¤è¯mongoé—®é¢˜</h1><p>é¦–å…ˆæˆ‘çš„ <code>docker-compose.yml</code> é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">yml</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mongo:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mongo</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">    <span class="attr">MONGO_INITDB_ROOT_USERNAME:</span> <span class="string">gating</span></span><br><span class="line">    <span class="attr">MONGO_INITDB_ROOT_PASSWORD:</span> <span class="number">123456</span></span><br><span class="line">    <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">    <span class="comment"># éœ€è¦é“¾æ¥æœ¬åœ°ä»£ç æ—¶</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./mongo/db:/data/db</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="number">27017</span><span class="string">:27017</span></span><br></pre></td></tr></table></figure></div><p>æˆ‘å°è¯•äº†é€šè¿‡æ–‡æ¡£çš„è®¤è¯è¿æ¥,ä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">mongoose.connect(<span class="string">'mongodb://user:pass@mongo/database'</span>);</span><br></pre></td></tr></table></figure></div><blockquote><p>ps: è¿™é‡Œèƒ½ç”¨ <code>mongo</code> æ˜¯å› ä¸ºæˆ‘åœ¨ <code>docker-compose</code> ä¸­æŒ‡å®šäº† <code>mongo</code> å®¹å™¨çš„åå­—ï¼Œåœ¨ä»£ç é‡Œä½¿ç”¨ <code>mongo</code> å°±è¡¨ç¤º <code>localhost:27017</code></p></blockquote><p>è¿æ¥å¤±è´¥ï¼Œæœ€åæ‰å‘ç°æ˜¯æˆ‘ç¼ºå°‘äº†ä¸€ä¸ªé…ç½® authSourceï¼Œç„¶åé…ç½®ä¸Šäº†ï¼Œæœ€åç»ˆäºè¿æ¥ä¸Šäº†æˆ‘çš„mongoï¼Œå¯ä»¥æ„‰å¿«çš„å¼€å‘éƒ¨ç½²äº†</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>)</span><br><span class="line">mongoose.connect(<span class="string">'mongodb://gating:123456@mongo/small_time?authSource=admin'</span>)</span><br></pre></td></tr></table></figure></div>]]></content>
      
      
      <categories>
          
          <category> è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ssä»£ç†ç®€å•çˆ¬å–å°è¯´</title>
      <link href="/2019-11-16/%E4%BD%BF%E7%94%A8ss%E4%BB%A3%E7%90%86%E7%AE%80%E5%8D%95%E7%88%AC%E5%8F%96%E5%B0%8F%E8%AF%B4/"/>
      <url>/2019-11-16/%E4%BD%BF%E7%94%A8ss%E4%BB%A3%E7%90%86%E7%AE%80%E5%8D%95%E7%88%AC%E5%8F%96%E5%B0%8F%E8%AF%B4/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å‰ä¸ä¹…ï¼Œæˆ‘çš„è…å¥³å¥³æœ‹å‹å«æˆ‘æ‰¾ä¸€æœ¬è€½ç¾çš„å°è¯´ï¼Œæˆ‘åœ¨ç½‘ç›˜æœç´¢å¼•æ“æ²¡æœ‰æ‰¾åˆ°å°± <code>Google</code> äº†ä¸€ä¸‹ï¼Œå‘ç°ä¸€ä¸ªç½‘ç«™æœ‰ï¼Œç„¶åå°±æƒ³ç€å†™ä¸ªçˆ¬è™«çˆ¬ç»™å¥³æœ‹å‹äº†ï¼ˆç‹—å¤´ä¿å‘½ï¼‰ï¼Œä½†æ˜¯å‘ç°æœ¬åœ°è¿è¡Œçš„ <code>terminal</code> å¹¶ä¸ä¼šèµ° <code>SS</code> ï¼Œéœ€è¦ <code>node</code> æœ¬èº«å‘é€è¯·æ±‚å»å®ç°è‡ªèº«çš„ä»£ç†â€¦ä¹Ÿå°±æœ‰äº†ä¸‹é¢è¿™ä¸ªå°æ•™ç¨‹</p><blockquote><p>ps: å¥½åƒä¹Ÿå¥½ä¹…æ²¡å†™åšå®¢äº†ï¼Œå°±å·å·å†™ä¸€ä¸‹</p></blockquote><h1 id="åˆå§‹åŒ–æˆ‘ä»¬çš„é¡¹ç›®"><a href="#åˆå§‹åŒ–æˆ‘ä»¬çš„é¡¹ç›®" class="headerlink" title="åˆå§‹åŒ–æˆ‘ä»¬çš„é¡¹ç›®"></a>åˆå§‹åŒ–æˆ‘ä»¬çš„é¡¹ç›®</h1><ul><li>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå–åå«åš <code>my-crawler</code></li><li>é€šè¿‡æ§åˆ¶å°æˆ–è€…git bashå®šä½åˆ°å½“å‰æ–‡ä»¶ä¸‹é¢ï¼Œæ‰§è¡Œå‘½ä»¤: <code>npm init -y</code></li></ul><h1 id="å®‰è£…é¡¹ç›®ä¾èµ–"><a href="#å®‰è£…é¡¹ç›®ä¾èµ–" class="headerlink" title="å®‰è£…é¡¹ç›®ä¾èµ–"></a>å®‰è£…é¡¹ç›®ä¾èµ–</h1><p>æ‰§è¡Œå‘½ä»¤: <code>npm install iconv-lite request request-promise socks5-http-client -S</code></p><blockquote><p>ps: npm å¯ä»¥çœç•¥ <code>-S</code>ï¼Œä»–ä¼šé»˜è®¤æ‰§è¡Œ <code>-S</code> å‘½ä»¤ï¼Œcnpm åˆ™éœ€è¦åŠ ä¸Š <code>-S</code></p></blockquote><h2 id="socks5-http-client"><a href="#socks5-http-client" class="headerlink" title="socks5-http-client"></a>socks5-http-client</h2><blockquote><p>ps: è¯¥å®¢æˆ·ç«¯ä»…æ”¯æŒå‘å‡ºHTTPè¯·æ±‚ã€‚æœ‰å…³HTTPSå®æ–½ï¼Œè¯·å‚è§socks5-https-clientã€‚</p></blockquote><h1 id="fsæ¨¡å—çš„ç®€å•ä½¿ç”¨"><a href="#fsæ¨¡å—çš„ç®€å•ä½¿ç”¨" class="headerlink" title="fsæ¨¡å—çš„ç®€å•ä½¿ç”¨"></a>fsæ¨¡å—çš„ç®€å•ä½¿ç”¨</h1><p>fsæ˜¯<code>FileSystem(æ–‡ä»¶ç³»ç»Ÿ)</code>çš„ç¼©å†™ï¼Œè¯¥æ¨¡å—æä¾›æœ¬åœ°æ–‡ä»¶çš„è¯»å†™èƒ½åŠ›ï¼ŒåŸºæœ¬ä¸Šæ˜¯<code>POSIX(å¯ç§»æ¤æ“ä½œç³»ç»Ÿæ¥å£)</code>æ–‡ä»¶æ“ä½œå‘½ä»¤çš„ç®€å•åŒ…è£…ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªæ¨¡å—å‡ ä¹å¯¹æ‰€æœ‰æ“ä½œæä¾›å¼‚æ­¥å’ŒåŒæ­¥ä¸¤ç§æ“ä½œæ–¹å¼ï¼Œä¾›å¼€å‘è€…é€‰æ‹©ã€‚</p><p>è¿™é‡Œä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œæˆ‘ä»¬ä½¿ç”¨åŒæ­¥æ“ä½œï¼Œä¹Ÿæ›´ç¬¦åˆæˆ‘ä»¬æ•´ä¸ªå¼€å‘æµç¨‹ã€‚</p><p>è¿™ä¸ªé¡¹ç›®æˆ‘ä»¬ä½¿ç”¨åˆ°äº† <code>appendFileSync</code> è¿™ä¸ªapiï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç®€å•ä»‹ç»ä¸€ä¸‹ä»–çš„ä½œç”¨å’Œä½¿ç”¨</p><h2 id="appendFileSync"><a href="#appendFileSync" class="headerlink" title="appendFileSync"></a>appendFileSync</h2><ul><li>åœ¨ <code>my-crawler</code> ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª <code>demo.js</code>,ä»£ç å¦‚ä¸‹:</li></ul><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="comment">// é€šè¿‡åŒæ­¥çš„æ–¹å¼å°†æ–‡æœ¬å†…å®¹æˆ–æ•°æ®æ·»åŠ åˆ°æ–‡ä»¶é‡Œï¼Œæ–‡ä»¶ä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»ºã€‚</span></span><br><span class="line">fs.appendFileSync(<span class="string">'./demo.txt'</span>,<span class="string">'123465'</span>)</span><br></pre></td></tr></table></figure></div><p>çœ‹å®Œä¸Šé¢çš„ä»£ç ï¼Œæ˜¯ä¸æ˜¯å‘ç° appendFileSync å¾ˆç®€å•å‘¢ï¼Ÿå¥½äº†ï¼Œé©¬ä¸Šè¿›å…¥æˆ‘ä»¬çš„æ­£é¢˜äº†</p><h1 id="å®ç°çˆ¬è™«ä»£ç "><a href="#å®ç°çˆ¬è™«ä»£ç " class="headerlink" title="å®ç°çˆ¬è™«ä»£ç "></a>å®ç°çˆ¬è™«ä»£ç </h1><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ‰“å¼€ <code>http://wap.danwenku.com/qita/</code>,ç„¶åæŸ¥çœ‹æºä»£ç ä½ ä¼šå‘ç°ï¼Œä»–æ˜¯ <code>gb2312</code> ç¼–ç çš„ï¼Œæ­£å¸¸çš„ <code>request</code> è¯·æ±‚çˆ¬ä¸‹æ¥çš„ä¸œè¥¿æ˜¯ä¹±ç çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å®‰è£…äº† <code>iconv-lite</code> è§£å†³ä¹±ç é—®é¢˜</p><p>ç„¶åé€šè¿‡ <code>cheerio</code> æ¥è§£æ <code>DOM</code>,å’Œ <code>JQ</code> ä¸€æ ·çš„è¯­æ³•ï¼Œä¸ç”¨æ‹…å¿ƒä¸ä¼š</p><h2 id="åçˆ¬"><a href="#åçˆ¬" class="headerlink" title="åçˆ¬"></a>åçˆ¬</h2><p>å½“æˆ‘ä»¬å‡†å¤‡å¥½è¿™ä¸€åˆ‡ä¹‹åï¼Œå‘ç°è¯·æ±‚æˆ‘ä»¬éœ€è¦çˆ¬å–çš„ç½‘ç«™ä¹‹åè¿”å›äº† <code>503</code>ï¼Œä½†æ˜¯æˆ‘ä»¬é€šè¿‡æµè§ˆå™¨è®¿é—®å´æ²¡æœ‰é—®é¢˜ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå…¶å®ï¼Œè¿™å°±æ˜¯ç½‘ç«™ç¦æ­¢æˆ‘ä»¬çˆ¬å–ä»–çš„å†…å®¹ï¼Œè¿™å°±éœ€è¦é€šè¿‡åçˆ¬æœºåˆ¶å»è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>è€Œè®¾ç½® <code>headers</code> å°±æ˜¯è§£å†³ <code>requests</code> è¯·æ±‚åçˆ¬çš„æœ€ç®€å•çš„ä¸€ä¸ªæ–¹æ³•ã€‚</p><blockquote><p>ç›¸å½“äºå‘Šè¯‰å¯¹æ–¹æœåŠ¡å™¨ï¼Œæˆ‘ä»¬æ˜¯ä½¿ç”¨æµè§ˆå™¨è®¿é—®ç½‘ç«™</p></blockquote><blockquote><p>æ³¨æ„ï¼šheadersä¸­æœ‰å¾ˆå¤šå†…å®¹ï¼Œä¸»è¦å¸¸ç”¨çš„å°±æ˜¯user-agent å’Œ hostï¼Œå¦‚æœä½¿ç”¨è¿™ä¸¤ä¸ªå°±å¯ä»¥åçˆ¬æˆåŠŸï¼Œå°±ä¸éœ€è¦å…¶ä»–é”®å¯¹ï¼›å¦åˆ™ï¼Œéœ€è¦åŠ å…¥æ›´å¤šé”®å¯¹å½¢å¼ã€‚</p></blockquote><p>æ¯”å¦‚æˆ‘è¿™é‡Œï¼Œå°±åŠ å…¥äº† <code>Cookie</code> è¿™ä¸ªé”®å€¼å¯¹</p><p>ä»¥ä¸‹æ˜¯æˆ‘ä»¬è¿™ä¸ªç®€å•çš„çˆ¬è™«ä»£ç å®ç°</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">!<span class="function">(<span class="params"><span class="keyword">async</span> (</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// fsæ¨¡å—ï¼Œç”¨æ¥å†™å…¥æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line">    <span class="comment">// ç”¨æ¥è§£æDOM</span></span><br><span class="line">    <span class="keyword">const</span> cheerio = <span class="built_in">require</span>(<span class="string">'cheerio'</span>)</span><br><span class="line">    <span class="keyword">const</span> iconv = <span class="built_in">require</span>(<span class="string">'iconv-lite'</span>)</span><br><span class="line">    <span class="comment">// è§£å†³ç½‘é¡µç¼–ç é—®é¢˜</span></span><br><span class="line">    <span class="keyword">const</span> request = <span class="built_in">require</span>(<span class="string">'request-promise'</span>)</span><br><span class="line">    <span class="comment">// è§£å†³ssä»£ç†</span></span><br><span class="line">    <span class="keyword">const</span> Agent = <span class="built_in">require</span>(<span class="string">'socks5-http-client/lib/Agent'</span>)</span><br><span class="line">    <span class="comment">// éœ€è¦çˆ¬å–çš„urlå‰ç¼€</span></span><br><span class="line">    <span class="keyword">let</span> urlPrefix = <span class="string">`http://wap.danwenku.com/qita/`</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; <span class="number">65</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> url = <span class="string">``</span></span><br><span class="line">        <span class="comment">// é€šè¿‡æŸ¥çœ‹ç¬¬né¡µå¯å‘ç°ï¼Œç¬¬ä¸€é¡µæ˜¯54999.html ç¬¬né¡µæ˜¯54999_n.html</span></span><br><span class="line">        <span class="comment">// å³çˆ¬å–çš„urlå°±æ˜¯urlPrefix + 54999_n.html</span></span><br><span class="line">        <span class="keyword">if</span> (i === <span class="number">1</span>) &#123;</span><br><span class="line">            url = <span class="string">`54999.html`</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            url = <span class="string">`54999_<span class="subst">$&#123;i&#125;</span>.html`</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> request_option = &#123;</span><br><span class="line">            url: urlPrefix + url,</span><br><span class="line">            <span class="comment">// ä½¿ç”¨æœ¬åœ°ä»£ç†</span></span><br><span class="line">            agentClass: Agent,</span><br><span class="line">            <span class="comment">// æœ¬åœ°ä»£ç†é…ç½®</span></span><br><span class="line">            agentOptions: &#123;</span><br><span class="line">                socksHost: <span class="string">'127.0.0.1'</span>, <span class="comment">// é»˜è®¤localhost</span></span><br><span class="line">                socksPort: <span class="number">1080</span> <span class="comment">// é»˜è®¤1080</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// å–æ¶ˆè®¾ç½®å“åº”ç¼–ç ï¼Œè¿”å›äºŒè¿›åˆ¶æ•°æ®</span></span><br><span class="line">            encoding: <span class="literal">null</span>,</span><br><span class="line">            <span class="comment">// å¯¹å“åº”çš„äºŒè¿›åˆ¶æ•°æ®é‡æ–°è¿›è¡Œç¼–ç ï¼Œè½¬æ¢æˆcheerioå¯¹è±¡</span></span><br><span class="line">            transform: <span class="function"><span class="keyword">function</span> (<span class="params">body</span>) </span>&#123;</span><br><span class="line">                body = iconv.decode(Buffer.from(body), <span class="string">'GBK'</span>)</span><br><span class="line">                <span class="keyword">return</span> cheerio.load(body);</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// è®¾ç½®è¯·æ±‚å¤´ï¼Œæ¨¡æ‹Ÿæˆæµè§ˆå™¨å–è®¿é—®ç½‘ç«™ï¼ˆæœ€ç®€å•åçˆ¬æ–¹å¼äº†ï¼‰</span></span><br><span class="line">            headers: &#123;</span><br><span class="line">                <span class="string">"Cookie"</span>: <span class="string">`__cfduid=d4d6dff36f6804fbdbb185f1de7cddd581573185661; cf_clearance=d530634f94552a4f8f52966366988dc9f351952c-1573185666-0-150; ZDEDebuggerPresent=php,phtml,php3; UM_distinctid=16e492c5744342-05e7814449385d-7711b3e-1fa400-16e492c574535f; CNZZDATA1252964692=315770227-1573184262-null%7C1573184262`</span>,</span><br><span class="line">                <span class="string">"Host"</span>: <span class="string">"wap.danwenku.com"</span>,</span><br><span class="line">                <span class="string">"User-Agent"</span>: <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.87 Safari/537.36"</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ç­‰å¾…è¯·æ±‚è¿”å›ï¼Œè¿™é‡Œæ²¡æœ‰åšé”™è¯¯å¤„ç†ï¼Œå› ä¸ºåªæ˜¯ä¸ªç®€å•çš„å°æ —å­ï¼Œæ²¡æœ‰å¿…è¦åšé”™è¯¯å¤„ç†</span></span><br><span class="line">        <span class="keyword">const</span> $ = <span class="keyword">await</span> request(request_option)</span><br><span class="line">        <span class="keyword">let</span> chapterTxt = <span class="string">`ç¬¬<span class="subst">$&#123;i&#125;</span>ç« \r\n`</span></span><br><span class="line">        <span class="comment">// æ‰“å°ä¸‹ç°åœ¨æ­£åœ¨çˆ¬å–å¤šå°‘ç« </span></span><br><span class="line">        <span class="built_in">console</span>.log(chapterTxt)</span><br><span class="line">        $(<span class="string">'.css-pc css-site,.sxwenzhang,.pagela,.pagination'</span>).remove()</span><br><span class="line">        <span class="comment">// å†™å…¥åˆ°æ–‡ä»¶ä¸­ï¼Œå¦‚æœä¸­æ–­åº”è¯¥åˆ™é€šè¿‡ `æ­£åœ¨çˆ¬å–å¤šå°‘ç« ` å¯çŸ¥içš„å€¼ï¼Œé‡æ–°è®¾ç½®iå€¼å°±å¥½äº†</span></span><br><span class="line">        fs.appendFileSync(<span class="string">'./äºŒè¿›åˆ¶.txt'</span>, chapterTxt + $(<span class="string">`div.single-content`</span>).text() + <span class="string">'\r\n'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure></div><p>æœ€åï¼Œæ„Ÿè°¢å„ä½è§‚ä¼—è€çˆ·è§‚çœ‹å– O(âˆ©_âˆ©)O~</p>]]></content>
      
      
      <categories>
          
          <category> çˆ¬è™« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­—ç¬¦ä¸²çš„æ–¹æ³•çš„æ€»ç»“å’Œä½¿ç”¨</title>
      <link href="/2019-01-09/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%96%B9%E6%B3%95%E7%9A%84%E6%80%BB%E7%BB%93%E5%92%8C%E4%BD%BF%E7%94%A8/"/>
      <url>/2019-01-09/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%96%B9%E6%B3%95%E7%9A%84%E6%80%BB%E7%BB%93%E5%92%8C%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å‰äº›å¤©å†™äº†ç¯‡æ•°ç»„çš„æ€»ç»“ï¼Œå…¶å®æˆ‘ä»¬å†æ¥çœ‹çœ‹å­—ç¬¦ä¸²ï¼Œå’Œæ•°ç»„æœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™ï¼Œå­—ç¬¦ä¸²ä¹Ÿå¯ä»¥é€šè¿‡ <code>split</code> æ¥å˜æˆæ•°ç»„ï¼Œç„¶åä½¿ç”¨æ•°ç»„çš„æ–¹æ³•ã€‚</p><p>å¦å¤–ï¼Œå¯¹äºå­—ç¬¦ä¸²ï¼Œå…¶å®æˆ‘ä»¬å…³å¿ƒçš„åªæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œ<strong>è¿”å›å€¼æ˜¯ä»€ä¹ˆ</strong>ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šå¸¦å¤§å®¶ä¸€æ­¥æ­¥çš„ä½¿ç”¨ <code>String</code> é‡Œé¢æ‰€æ‹¥æœ‰çš„æ–¹æ³•å’Œå±æ€§</p><h1 id="å­—ç¬¦ä¸²çš„å±æ€§"><a href="#å­—ç¬¦ä¸²çš„å±æ€§" class="headerlink" title="å­—ç¬¦ä¸²çš„å±æ€§"></a>å­—ç¬¦ä¸²çš„å±æ€§</h1><h2 id="length"><a href="#length" class="headerlink" title="length"></a>length</h2><p>lengthå±æ€§è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚è¯¥å±æ€§è¿”å›å­—ç¬¦ä¸²ä¸­å­—ç¬¦ç¼–ç å•å…ƒçš„æ•°é‡ã€‚JavaScript ä½¿ç”¨ UTF-16 ç¼–ç ï¼Œè¯¥ç¼–ç ä½¿ç”¨ä¸€ä¸ª 16 æ¯”ç‰¹çš„ç¼–ç å•å…ƒæ¥è¡¨ç¤ºå¤§éƒ¨åˆ†å¸¸è§çš„å­—ç¬¦ï¼Œä½¿ç”¨ä¸¤ä¸ªä»£ç å•å…ƒè¡¨ç¤ºä¸å¸¸ç”¨çš„å­—ç¬¦ã€‚å› æ­¤ length è¿”å›å€¼å¯èƒ½ä¸å­—ç¬¦ä¸²ä¸­å®é™…çš„å­—ç¬¦æ•°é‡ä¸ç›¸åŒã€‚</p><p><strong>ç©ºå­—ç¬¦ä¸²çš„ length ä¸º 0ã€‚</strong></p><p><strong>é™æ€å±æ€§ String.length è¿”å› 1ã€‚</strong></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.length) <span class="comment">// 6</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> empty = <span class="string">""</span></span><br><span class="line"><span class="built_in">console</span>.log(empty.length) <span class="comment">// 0  </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// JavaScript å†…éƒ¨ï¼Œå­—ç¬¦ä»¥ UTF-16 çš„æ ¼å¼å‚¨å­˜ï¼Œæ¯ä¸ªå­—ç¬¦å›ºå®šä¸º2ä¸ªå­—èŠ‚ã€‚</span></span><br><span class="line"><span class="comment">// å¯¹äºé‚£äº›éœ€è¦4ä¸ªå­—èŠ‚å‚¨å­˜çš„å­—ç¬¦ï¼ˆUnicode ç ç‚¹å¤§äº0xFFFFçš„å­—ç¬¦ï¼‰ï¼ŒJavaScript ä¼šè®¤ä¸ºå®ƒä»¬æ˜¯ä¸¤ä¸ªå­—ç¬¦ã€‚</span></span><br><span class="line"><span class="keyword">let</span> double = <span class="string">"ğªš¥"</span></span><br><span class="line"><span class="built_in">console</span>.log(double.length) <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»æ•°ç»„çš„lengthæˆ‘ä»¬å¯å¾—çŸ¥ï¼Œæ•°ç»„çš„ length æ¥æˆªæ–­æ•°ç»„ï¼Œå­—ç¬¦ä¸²çš„å¯ä¸å¯ä»¥å‘¢ï¼Ÿ</span></span><br><span class="line"><span class="comment">// å¾ˆé—æ†¾çš„è¯´ï¼Œä¸è¡Œï¼Œå› ä¸ºå­—ç¬¦ä¸²çš„lengthåªå¯è¯»ï¼Œä¸å¯å†™</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">"gating"</span></span><br><span class="line">name.length = <span class="number">1</span></span><br><span class="line"><span class="built_in">console</span>.log(name,name.length) <span class="comment">// gating,6</span></span><br></pre></td></tr></table></figure></div><h1 id="å­—ç¬¦ä¸²çš„é™æ€æ–¹æ³•"><a href="#å­—ç¬¦ä¸²çš„é™æ€æ–¹æ³•" class="headerlink" title="å­—ç¬¦ä¸²çš„é™æ€æ–¹æ³•"></a>å­—ç¬¦ä¸²çš„é™æ€æ–¹æ³•</h1><h2 id="å­—ç¬¦çš„-Unicode-è¡¨ç¤ºæ³•"><a href="#å­—ç¬¦çš„-Unicode-è¡¨ç¤ºæ³•" class="headerlink" title="å­—ç¬¦çš„ Unicode è¡¨ç¤ºæ³•"></a>å­—ç¬¦çš„ Unicode è¡¨ç¤ºæ³•</h2><p>è¯´åˆ°å­—ç¬¦ä¸²ï¼Œä¸å¾—ä¸è¯´ JavaScript ä¸­çš„å­—ç¬¦ä¸²çš„ <code>Unicode</code> è¡¨ç¤ºå½¢å¼ï¼ŒJavaScript å…è®¸é‡‡ç”¨<code>\uxxxx</code>å½¢å¼è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå…¶ä¸­<code>xxxx</code>è¡¨ç¤ºå­—ç¬¦çš„<code>Unicode</code>ç ç‚¹ã€‚</p><p>ä½†æ˜¯ï¼Œè¿™ç§è¡¨ç¤ºæ³•åªé™äºç ç‚¹åœ¨\u0000~\uFFFFä¹‹é—´çš„å­—ç¬¦ã€‚è¶…å‡ºè¿™ä¸ªèŒƒå›´çš„å­—ç¬¦ï¼Œå¿…é¡»ç”¨ä¸¤ä¸ªåŒå­—èŠ‚çš„å½¢å¼è¡¨ç¤ºã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ¯”å¦‚</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"\u0061"</span>) <span class="comment">// a</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"\uD842\uDFB7"</span>) <span class="comment">// ğ ®·</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"\u20BB7"</span>) <span class="comment">// "â‚»7"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½†æ˜¯ es6 å¯¹è¿™ä¸€ç‚¹åšå‡ºäº†æ”¹è¿›ï¼Œåªè¦å°†ç ç‚¹æ”¾å…¥å¤§æ‹¬å·ï¼Œå°±èƒ½æ­£ç¡®è§£è¯»è¯¥å­—ç¬¦ã€‚</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"\u&#123;20BB7&#125;"</span>)</span><br></pre></td></tr></table></figure></div><blockquote><p>å‚è€ƒé“¾æ¥ <a href="http://es6.ruanyifeng.com/#docs/string" target="_blank" rel="noopener">ECMAScript 6 å…¥é—¨</a> å»ºè®®å»äº†è§£ä¸€ä¸‹ï¼Œè¿™é‡Œæˆ‘å°±ä¸åšè¿‡å¤šè§£é‡Šäº†ï¼Œå› ä¸ºæˆ‘ç”¨çš„çœŸçš„ä¸å¤šï¼ˆä¸»è¦ä¹Ÿæ˜¯ä¸ä¼šï¼‰</p></blockquote><h2 id="String-fromCharCode"><a href="#String-fromCharCode" class="headerlink" title="String.fromCharCode()"></a>String.fromCharCode()</h2><p>String.fromCharCode() æ–¹æ³•è¿”å›ä½¿ç”¨æŒ‡å®šçš„Unicodeå€¼åºåˆ—åˆ›å»ºçš„å­—ç¬¦ä¸²ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * String.fromCharCode(numN)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number/String&#125;</span> </span>numN =&gt; ä¸€ç»„åºåˆ—æ•°å­—ï¼Œè¡¨ç¤º Unicode å€¼ã€‚</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª String å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.fromCharCode(<span class="number">65</span>)) <span class="comment">// A</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.fromCharCode(<span class="number">65</span>,<span class="number">66</span>)) <span class="comment">// AB</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.fromCharCode(<span class="string">"----"</span>)) <span class="comment">// " "</span></span><br></pre></td></tr></table></figure></div><h3 id="ä½œç”¨äºé«˜ä½ç¼–ç ï¼ˆhigher-valuesï¼‰"><a href="#ä½œç”¨äºé«˜ä½ç¼–ç ï¼ˆhigher-valuesï¼‰" class="headerlink" title="ä½œç”¨äºé«˜ä½ç¼–ç ï¼ˆhigher valuesï¼‰"></a>ä½œç”¨äºé«˜ä½ç¼–ç ï¼ˆhigher valuesï¼‰</h3><p>å°½ç®¡ç»å¤§éƒ¨åˆ†å¸¸ç”¨çš„ Unicode å€¼å¯ä»¥ç”¨ä¸€ä¸ª 16-bit æ•°å­—è¡¨ç¤ºï¼ˆæ­£å¦‚ JavaScript æ ‡å‡†åŒ–è¿‡ç¨‹æ—©æœŸï¼‰ï¼Œå¹¶ä¸”å¯¹äºç»å¤§éƒ¨åˆ†å€¼ fromCharCode() è¿”å›ä¸€ä¸ªå­—ç¬¦ï¼ˆå³å¯¹äºç»å¤§éƒ¨åˆ†å­—ç¬¦ UCS-2 å€¼æ˜¯ UTF-16 çš„å­é›†ï¼‰ï¼Œä½†æ˜¯ä¸ºäº†å¤„ç†æ‰€æœ‰çš„ Unicode å€¼ï¼ˆè‡³ 21 bitsï¼‰ï¼Œåªç”¨ fromCharCode() æ˜¯ä¸è¶³çš„ã€‚ç”±äºé«˜ä½ç¼–ç å­—ç¬¦æ˜¯ç”¨ä¸¤ä¸ªä½ä½ç¼–ç ï¼ˆlower valueï¼‰è¡¨ç¤ºå½¢æˆçš„ä¸€ä¸ªå­—ç¬¦ï¼Œå› æ­¤String.fromCodePoint() ï¼ˆES6 è§„èŒƒçš„ä¸€éƒ¨åˆ†ï¼‰è¢«ç”¨æ¥è¿”å›è¿™æ ·ä¸€å¯¹ä½ä½ç¼–ç ï¼Œä»è€Œå¯ä»¥å®Œå…¨è¡¨ç¤ºè¿™äº›é«˜ä½ç¼–ç å­—ç¬¦ã€‚</p><h2 id="String-fromCodePoint"><a href="#String-fromCodePoint" class="headerlink" title="String.fromCodePoint()"></a>String.fromCodePoint()</h2><p>String.fromCodePoint() é™æ€æ–¹æ³•è¿”å›ä½¿ç”¨æŒ‡å®šçš„ä»£ç ç‚¹åºåˆ—åˆ›å»ºçš„å­—ç¬¦ä¸²ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * String.fromCodePoint(numN)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number/String&#125;</span> </span>numN =&gt; ä¸€ä¸² Unicode ç¼–ç ã€‚å¦‚æœä¼ å…¥æ— æ•ˆçš„ Unicode ç¼–ç ï¼Œå°†ä¼šæŠ›å‡ºä¸€ä¸ªRangeError</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª String å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.fromCodePoint(<span class="number">65</span>)) <span class="comment">// A</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.fromCodePoint(<span class="number">65</span>,<span class="number">66</span>)) <span class="comment">// AB</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.fromCodePoint(<span class="string">"----"</span>)) <span class="comment">// RangeError</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// String.fromCharCode() æ–¹æ³•ä¸èƒ½å•ç‹¬è·å–åœ¨é«˜ä»£ç ç‚¹ä½ä¸Šçš„å­—ç¬¦</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.fromCharCode(<span class="number">0x2F804</span>)) <span class="comment">// ï „</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.fromCodePoint(<span class="number">0x2F804</span>)) <span class="comment">// ğ¯ „</span></span><br></pre></td></tr></table></figure></div><blockquote><p>å…·ä½“å®é™…ç”¨ç†å¯ä»¥çœ‹çœ‹ MDN è¿™é‡Œä¸åšé˜è¿°äº†ï¼Œå› ä¸ºåšä¸»è¿™ä¸¤ä¸ªæ–¹æ³•ç”¨ç€ä¸å¤š <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/fromCharCode" target="_blank" rel="noopener">String.fromCharCode()</a>ã€<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/fromCodePoint" target="_blank" rel="noopener">String.fromCodePoint()</a></p></blockquote><h2 id="String-raw-å’Œ-æ¨¡æ¿å­—ç¬¦ä¸²"><a href="#String-raw-å’Œ-æ¨¡æ¿å­—ç¬¦ä¸²" class="headerlink" title="String.raw å’Œ æ¨¡æ¿å­—ç¬¦ä¸²"></a>String.raw å’Œ æ¨¡æ¿å­—ç¬¦ä¸²</h2><h3 id="æ¨¡æ¿å­—ç¬¦ä¸²"><a href="#æ¨¡æ¿å­—ç¬¦ä¸²" class="headerlink" title="æ¨¡æ¿å­—ç¬¦ä¸²"></a>æ¨¡æ¿å­—ç¬¦ä¸²</h3><p>äº†è§£<code>String.raw</code>æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆäº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œç®€å•æ¥è¯´æ¨¡æ¿å­—ç¬¦ä¸²æ˜¯å¢å¼ºç‰ˆçš„å­—ç¬¦ä¸²ï¼Œä»–ç”¨åå¼•å·ï¼ˆ`ï¼‰æ ‡è¯†ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡</span></span><br><span class="line"><span class="comment">// es6 ä¹‹å‰ï¼Œæˆ‘ä»¬å¦‚æœæƒ³è¦åœ¨å­—ç¬¦ä¸²åµŒå…¥å˜é‡éœ€è¦é€šè¿‡+å·</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">"gating"</span>, time = <span class="string">"today"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"Hello "</span>+name+<span class="string">", how are you "</span> + time) <span class="comment">// Hello gating, how are you today?</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨¡æ¿å­—ç¬¦ä¸²å</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">"gating"</span>, time = <span class="string">"today"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`Hello <span class="subst">$&#123;name&#125;</span>, how are you <span class="subst">$&#123;time&#125;</span>?`</span>) <span class="comment">// Hello gating, how are you today?</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦å¤–æ¨¡æ¿å­—ç¬¦ä¸²å¯ä»¥è¡¨ç¤ºå¤šè¡Œå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">`&lt;ul&gt;</span></span><br><span class="line"><span class="string">             &lt;li&gt;first&lt;/li&gt;</span></span><br><span class="line"><span class="string">             &lt;li&gt;second&lt;/li&gt;</span></span><br><span class="line"><span class="string">          &lt;/ul&gt;`</span></span><br></pre></td></tr></table></figure></div><h3 id="String-raw"><a href="#String-raw" class="headerlink" title="String.raw"></a>String.raw</h3><p>String.raw() æ˜¯ä¸€ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²çš„æ ‡ç­¾å‡½æ•°ï¼Œå®ƒçš„ä½œç”¨ç±»ä¼¼äº Python ä¸­çš„å­—ç¬¦ä¸²å‰ç¼€ r å’Œ C# ä¸­çš„å­—ç¬¦ä¸²å‰ç¼€ @ï¼Œæ˜¯ç”¨æ¥è·å–ä¸€ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²çš„åŸå§‹å­—é¢é‡å€¼çš„ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * String.raw(callSite, ...substitutions) || String.raw`templateString`</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>callSite =&gt; ä¸€ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²çš„â€œè°ƒç”¨ç‚¹å¯¹è±¡â€ã€‚ç±»ä¼¼&#123; raw: ['foo', 'bar', 'baz'] &#125;ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Any&#125;</span> </span>...substitutions =&gt; ä»»æ„ä¸ªå¯é€‰çš„å‚æ•°ï¼Œè¡¨ç¤ºä»»æ„ä¸ªå†…æ’è¡¨è¾¾å¼å¯¹åº”çš„å€¼ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>templateString =&gt; æ¨¡æ¿å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>ç»™å®šæ¨¡æ¿å­—ç¬¦ä¸²çš„åŸå§‹å­—é¢é‡å€¼ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// "Hi\\u000A!"ï¼Œè¿™é‡Œå¾—åˆ°çš„ä¼šæ˜¯ \ã€uã€0ã€0ã€0ã€A 6ä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="comment">// ä»»ä½•ç±»å‹çš„è½¬ä¹‰å½¢å¼éƒ½ä¼šå¤±æ•ˆ</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.raw <span class="string">`Hi\u000A!`</span>) <span class="comment">// Hi\u000A!</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">"Bob"</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.raw <span class="string">`Hi\n<span class="subst">$&#123;name&#125;</span>!`</span>) <span class="comment">// Hi\nBob!</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ‘è®¤ä¸ºä½ é€šå¸¸ä¸éœ€è¦æŠŠå®ƒå½“æˆæ™®é€šå‡½æ•°æ¥è°ƒç”¨</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.raw(&#123; <span class="attr">raw</span>: <span class="string">'test'</span> &#125;, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>)) <span class="comment">// t0e1s2t</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.raw(&#123; <span class="attr">raw</span>: [<span class="string">'t'</span>,<span class="string">'e'</span>,<span class="string">'s'</span>,<span class="string">'t'</span>] &#125;, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>)) <span class="comment">// t0e1s2t</span></span><br></pre></td></tr></table></figure></div><p>ä½œä¸ºå‡½æ•°ï¼ŒString.rawçš„ä»£ç å®ç°åŸºæœ¬å¦‚ä¸‹ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">String</span>.raw = <span class="function"><span class="keyword">function</span> (<span class="params">strings, ...values</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> output = <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">let</span> index;</span><br><span class="line">  <span class="keyword">for</span> (index = <span class="number">0</span>; index &lt; values.length; index++) &#123;</span><br><span class="line">    output += strings.raw[index] + values[index];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  output += strings.raw[index]</span><br><span class="line">  <span class="keyword">return</span> output;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><blockquote><p><a href="http://es6.ruanyifeng.com/#docs/string#String-raw" target="_blank" rel="noopener">ES6å…¥é—¨ String.raw()</a></p></blockquote><h1 id="æ­£åˆ™ç›¸å…³"><a href="#æ­£åˆ™ç›¸å…³" class="headerlink" title="æ­£åˆ™ç›¸å…³"></a>æ­£åˆ™ç›¸å…³</h1><blockquote><p>æ­£åˆ™æ¨èè§‚çœ‹æ–‡æœ«çš„ æ­£åˆ™è¡¨è¾¾å¼30åˆ†é’Ÿå…¥é—¨æ•™ç¨‹ ï¼Œå†™çš„éå¸¸å¥½</p></blockquote><h2 id="split"><a href="#split" class="headerlink" title="split"></a>split</h2><p>split() æ–¹æ³•ä½¿ç”¨æŒ‡å®šçš„åˆ†éš”ç¬¦å­—ç¬¦ä¸²å°†ä¸€ä¸ªStringå¯¹è±¡åˆ†å‰²æˆå­—ç¬¦ä¸²æ•°ç»„ï¼Œä»¥å°†å­—ç¬¦ä¸²åˆ†éš”ä¸ºå­å­—ç¬¦ä¸²ï¼Œä»¥ç¡®å®šæ¯ä¸ªæ‹†åˆ†çš„ä½ç½®ã€‚</p><blockquote><p>Tip: å¦‚æœç©ºå­—ç¬¦ä¸²(â€œâ€)è¢«ç”¨ä½œåˆ†éš”ç¬¦ï¼Œåˆ™å­—ç¬¦ä¸²ä¼šåœ¨æ¯ä¸ªå­—ç¬¦ä¹‹é—´åˆ†å‰²ã€‚</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.split(separator,limit)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>separator =&gt; ä¸€ä¸ªä»‹äº0 å’Œå­—ç¬¦ä¸²é•¿åº¦å‡1ä¹‹é—´çš„æ•´æ•°ã€‚ (0~length-1) å¦‚æœæ²¡æœ‰æä¾›ç´¢å¼•ï¼ŒcharAt() å°†ä½¿ç”¨ 0ã€‚å¦‚æœæŒ‡å®šçš„ index å€¼è¶…å‡ºäº†è¯¥èŒƒå›´ï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>limit =&gt; ä¸€ä¸ªæ•´æ•°ï¼Œé™å®šè¿”å›çš„åˆ†å‰²ç‰‡æ®µæ•°é‡ã€‚å½“æä¾›æ­¤å‚æ•°æ—¶ï¼Œsplit æ–¹æ³•ä¼šåœ¨æŒ‡å®šåˆ†éš”ç¬¦çš„æ¯æ¬¡å‡ºç°æ—¶åˆ†å‰²è¯¥å­—ç¬¦ä¸²ï¼Œä½†åœ¨é™åˆ¶æ¡ç›®å·²æ”¾å…¥æ•°ç»„æ—¶åœæ­¢ã€‚å¦‚æœåœ¨è¾¾åˆ°æŒ‡å®šé™åˆ¶ä¹‹å‰è¾¾åˆ°å­—ç¬¦ä¸²çš„æœ«å°¾ï¼Œå®ƒå¯èƒ½ä»ç„¶åŒ…å«å°‘äºé™åˆ¶çš„æ¡ç›®ã€‚æ–°æ•°ç»„ä¸­ä¸è¿”å›å‰©ä¸‹çš„æ–‡æœ¬ã€‚</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&#125;</span> </span>è¿”å›æºå­—ç¬¦ä¸²ä»¥åˆ†éš”ç¬¦å‡ºç°ä½ç½®åˆ†éš”è€Œæˆçš„ä¸€ä¸ª Array </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.split(<span class="string">''</span>)) <span class="comment">//Â ["g", "a", "t", "i", "n", "g"]</span></span><br><span class="line"><span class="built_in">console</span>.log(str.split(<span class="string">''</span>,<span class="number">1</span>)) <span class="comment">//Â ["g"]</span></span><br><span class="line"><span class="built_in">console</span>.log(str.split(<span class="string">''</span>,<span class="number">8</span>)) <span class="comment">//Â ["g", "a", "t", "i", "n", "g"]</span></span><br></pre></td></tr></table></figure></div><p>çœ‹åˆ°è¿™é‡Œï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰å¯ä»¥ç”¨é€šè¿‡<code>split</code>è½¬æˆæ•°ç»„ï¼Œä½¿ç”¨æ•°ç»„çš„æ–¹æ³•å•¦ï¼Ÿæ²¡é”™æ˜¯çš„ï¼Œè¿˜è®°å¾—å‰äº›å¤©æˆ‘å†™è¿‡ä¸€ç¯‡æ•°ç»„çš„æ–¹æ³•çš„æ€»ç»“å—ï¼Ÿæ²¡é”™ï¼Œé‡æ–°çœ‹ä¸€éå°±å¯ä»¥äº†O(âˆ©_âˆ©)O</p><p>ä¸ä¿¡ï¼Œä½ çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>split</code> è·å–å­—ç¬¦ä¸²çš„äº¤é›†æˆ–å·®é›†å“¦</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿”å›ä¸¤ä¸ªå­—ç¬¦ä¸²çš„äº¤é›†</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>str =&gt; å­—ç¬¦ä¸²1 </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>str =&gt; å­—ç¬¦ä¸²2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">intersection</span>(<span class="params">str1, str2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> str1.split(<span class="string">""</span>).filter(<span class="function"><span class="params">v</span> =&gt;</span> str2.split(<span class="string">""</span>).includes(v)).toString().replace(<span class="regexp">/,/g</span>, <span class="string">""</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(intersection(<span class="string">"abc"</span>,<span class="string">"bcd"</span>)) <span class="comment">// bc</span></span><br></pre></td></tr></table></figure></div><p>æ˜¯ä¸æ˜¯æ„Ÿè§‰è‡ªå·±å·²ç»å¯¹å­—ç¬¦ä¸²äº†å¦‚æŒ‡æŒäº†å—ï¼Ÿ</p><blockquote><p>å¥½äº†ï¼Œæœ¬æ¬¡æ•™ç¨‹åˆ°æ­¤ç»“æŸäº†</p></blockquote><p>å¼€ä¸ªç©ç¬‘å˜›ï¼Œæ¥ä¸‹æ¥æˆ‘ä¼šé™†é™†ç»­ç»­å¸¦å¤§å®¶è®¤è¯†ä¸‹ <code>string</code> çš„æ–¹æ³•çš„ã€‚</p><h2 id="match"><a href="#match" class="headerlink" title="match"></a>match</h2><p>å½“ä¸€ä¸ªå­—ç¬¦ä¸²ä¸ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ—¶ï¼Œ match()æ–¹æ³•æ£€ç´¢åŒ¹é…é¡¹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.match(regexp)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;RegExp&#125;</span> </span>regexp =&gt; ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ã€‚å¦‚æœä¼ å…¥ä¸€ä¸ªéæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œåˆ™ä¼šéšå¼åœ°ä½¿ç”¨ new RegExp(obj) å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ª RegExp ã€‚å¦‚æœä½ æœªæä¾›ä»»ä½•å‚æ•°ï¼Œç›´æ¥ä½¿ç”¨ match() ï¼Œé‚£ä¹ˆä½ ä¼šå¾—åˆ°ä¸€ä¸ªåŒ…å«ç©ºå­—ç¬¦ä¸²çš„ Array ï¼š[""] ã€‚</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span>  </span>å¦‚æœå­—ç¬¦ä¸²åŒ¹é…åˆ°äº†è¡¨è¾¾å¼ï¼Œä¼šè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„ç¬¬ä¸€é¡¹æ˜¯è¿›è¡ŒåŒ¹é…å®Œæ•´çš„å­—ç¬¦ä¸²ï¼Œä¹‹åçš„é¡¹æ˜¯ç”¨åœ†æ‹¬å·æ•è·çš„ç»“æœã€‚å¦‚æœæ²¡æœ‰åŒ¹é…åˆ°ï¼Œè¿”å›null</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="keyword">const</span> res = str.match(<span class="regexp">/g/g</span>)</span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// ["g", "g"]</span></span><br><span class="line"><span class="built_in">console</span>.log(str.match()) <span class="comment">// [""]</span></span><br><span class="line"><span class="built_in">console</span>.log(str.match(<span class="regexp">/sadasd/</span>)) <span class="comment">// null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str1 = <span class="string">"NaN means not a number. Infinity contains -Infinity and +Infinity in JavaScript."</span>,</span><br><span class="line">    str2 = <span class="string">"My grandfather is 65 years old and My grandmother is 63 years old."</span>,</span><br><span class="line">    str3 = <span class="string">"The contract was declared null and void."</span>;</span><br><span class="line">str1.match(<span class="string">"number"</span>);   <span class="comment">// "number" æ˜¯å­—ç¬¦ä¸²ã€‚è¿”å›["number"]</span></span><br><span class="line">str1.match(<span class="literal">NaN</span>);        <span class="comment">// NaNçš„ç±»å‹æ˜¯numberã€‚è¿”å›["NaN"]</span></span><br><span class="line">str1.match(<span class="literal">Infinity</span>);   <span class="comment">// Infinityçš„ç±»å‹æ˜¯numberã€‚è¿”å›["Infinity"]</span></span><br><span class="line">str1.match(+<span class="literal">Infinity</span>);  <span class="comment">// è¿”å›["Infinity"]</span></span><br><span class="line">str1.match(-<span class="literal">Infinity</span>);  <span class="comment">// è¿”å›["-Infinity"]</span></span><br><span class="line">str2.match(<span class="number">65</span>);         <span class="comment">// è¿”å›["65"]</span></span><br><span class="line">str2.match(+<span class="number">65</span>);        <span class="comment">// æœ‰æ­£å·çš„numberã€‚è¿”å›["65"]</span></span><br><span class="line">str3.match(<span class="literal">null</span>);       <span class="comment">// è¿”å›["null"]</span></span><br></pre></td></tr></table></figure></div><h2 id="replace"><a href="#replace" class="headerlink" title="replace"></a>replace</h2><p>replace() æ–¹æ³•è¿”å›ä¸€ä¸ªç”±æ›¿æ¢å€¼æ›¿æ¢ä¸€äº›æˆ–æ‰€æœ‰åŒ¹é…çš„æ¨¡å¼åçš„æ–°å­—ç¬¦ä¸²ã€‚æ¨¡å¼å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼, æ›¿æ¢å€¼å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…ä¸€ä¸ªæ¯æ¬¡åŒ¹é…éƒ½è¦è°ƒç”¨çš„å‡½æ•°ã€‚</p><blockquote><p>replace ååˆ†é‡è¦ï¼Œå¿…é¡»æŒæ¡</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.replace(regexp|substr, newSubStr|function)</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param <span class="type">&#123;RegExp&#125;</span> </span>regexp =&gt; ä¸€ä¸ªRegExp å¯¹è±¡æˆ–è€…å…¶å­—é¢é‡ã€‚è¯¥æ­£åˆ™æ‰€åŒ¹é…çš„å†…å®¹ä¼šè¢«ç¬¬äºŒä¸ªå‚æ•°çš„è¿”å›å€¼æ›¿æ¢æ‰ã€‚</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>substr =&gt; ä¸€ä¸ªè¦è¢« newSubStr æ›¿æ¢çš„å­—ç¬¦ä¸²ã€‚å…¶è¢«è§†ä¸ºä¸€æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚ä»…ä»…æ˜¯ç¬¬ä¸€ä¸ªåŒ¹é…ä¼šè¢«æ›¿æ¢ã€‚</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>newSubStr =&gt;  ç”¨äºæ›¿æ¢æ‰ç¬¬ä¸€ä¸ªå‚æ•°åœ¨åŸå­—ç¬¦ä¸²ä¸­çš„åŒ¹é…éƒ¨åˆ†çš„å­—ç¬¦ä¸²ã€‚è¯¥å­—ç¬¦ä¸²ä¸­å¯ä»¥å†…æ’ä¸€äº›ç‰¹æ®Šçš„å˜é‡å </span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param <span class="type">&#123;Function&#125;</span> </span>function =&gt; ä¸€ä¸ªç”¨æ¥åˆ›å»ºæ–°å­å­—ç¬¦ä¸²çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°çš„è¿”å›å€¼å°†æ›¿æ¢æ‰ç¬¬ä¸€ä¸ªå‚æ•°åŒ¹é…åˆ°çš„ç»“æœ </span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span>  </span>ä¸€ä¸ªéƒ¨åˆ†æˆ–å…¨éƒ¨åŒ¹é…ç”±æ›¿ä»£æ¨¡å¼æ‰€å–ä»£çš„æ–°çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç‰¹æ®Šçš„å˜é‡å å’Œ function åœ¨å®ä¾‹ä¸­ ä¼šæ›´è¯¦ç»†è¯´æ˜</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="comment">// å¦‚æœç”¨ substr ï¼Œåªä¼šæ›¿æ¢æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œæ›¿æ¢å¤šä¸ªå­—ç¬¦åˆ™éœ€è¦ç”¨æ­£åˆ™</span></span><br><span class="line"><span class="built_in">console</span>.log(str.replace(<span class="string">'g'</span>,<span class="string">'å®¶åº­'</span>)) <span class="comment">// å®¶åº­ating</span></span><br><span class="line"><span class="built_in">console</span>.log(str.replace(<span class="regexp">/g/</span>,<span class="string">'å®¶åº­'</span>)) <span class="comment">// å®¶åº­ating</span></span><br><span class="line"><span class="built_in">console</span>.log(str.replace(<span class="regexp">/g/g</span>,<span class="string">'å®¶åº­'</span>)) <span class="comment">// å®¶åº­atinå®¶åº­</span></span><br><span class="line"><span class="built_in">console</span>.log(str.replace(<span class="regexp">/g/i</span>,<span class="string">'G'</span>)) <span class="comment">// Gating</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> word = <span class="string">"hello,gating"</span></span><br><span class="line"><span class="comment">// å•è¯é¦–å­—æ¯å¤§å†™</span></span><br><span class="line"><span class="comment">// è¿™é‡Œçš„ word å‚æ•°æ—¶åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œä¸‹æ–‡æœ‰è¯´æ˜</span></span><br><span class="line"><span class="keyword">let</span> res = word.replace(<span class="regexp">/\b\w+\b/g</span>,(word)=&gt;(word[<span class="number">0</span>].toUpperCase()+word.slice(<span class="number">1</span>)))</span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// Hello,Gating</span></span><br></pre></td></tr></table></figure></div><p>å®é™…åº”ç”¨åœºæ™¯ä¸­ï¼Œ<code>replace</code> æ–¹æ³•éå¸¸çµæ´»ï¼Œå¯ä»¥åšå¾ˆå¤šæˆ‘ä»¬æƒ³è¦çš„äº‹ï¼Œæ¯”å¦‚ï¼šğŸ˜„</p><p>ç±»ä¼¼äºæˆ‘ä»¬çš„æ¨¡æ¿å¼•æ“ replace å°±å¯ä»¥å®ç°ï¼Œä¸è¿‡è¿™é‡Œæˆ‘å°±ä¸å¸¦ç€å¤§å®¶å®ç°äº†= =</p><p>åœ¨å†™å®ä¾‹æ—¶ï¼Œæˆ‘å¸Œæœ›å¯ä»¥å…ˆææ‡‚å‡ ä¸ªæ¦‚å¿µå’Œç”¨æ³•</p><h3 id="newSubStr-çš„ç‰¹æ®Šå˜é‡å"><a href="#newSubStr-çš„ç‰¹æ®Šå˜é‡å" class="headerlink" title="newSubStr çš„ç‰¹æ®Šå˜é‡å"></a>newSubStr çš„ç‰¹æ®Šå˜é‡å</h3><table><thead><tr><th>å˜é‡å</th><th>ä»£è¡¨çš„å€¼</th></tr></thead><tbody><tr><td><code>$$</code></td><td>æ’å…¥ä¸€ä¸ª â€œ$â€ã€‚</td></tr><tr><td><code>$&amp;</code></td><td>æ’å…¥åŒ¹é…çš„å­ä¸²ã€‚</td></tr><tr><td><code>$`</code></td><td>æ’å…¥å½“å‰åŒ¹é…çš„å­ä¸²å·¦è¾¹çš„å†…å®¹ã€‚</td></tr><tr><td><code>$&#39;</code></td><td>æ’å…¥å½“å‰åŒ¹é…çš„å­ä¸²å³è¾¹çš„å†…å®¹ã€‚</td></tr><tr><td><code>$*n*</code></td><td>å‡å¦‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/RegExp" target="_blank" rel="noopener"><code>RegExp</code></a>å¯¹è±¡ï¼Œå¹¶ä¸” n æ˜¯ä¸ªå°äº100çš„éè´Ÿæ•´æ•°ï¼Œé‚£ä¹ˆæ’å…¥ç¬¬ n ä¸ªæ‹¬å·åŒ¹é…çš„å­—ç¬¦ä¸²ã€‚æç¤ºï¼šç´¢å¼•æ˜¯ä»1å¼€å§‹</td></tr></tbody></table><h3 id="replace-ä¸­-function-çš„å‚æ•°"><a href="#replace-ä¸­-function-çš„å‚æ•°" class="headerlink" title="replace ä¸­ function çš„å‚æ•°"></a>replace ä¸­ function çš„å‚æ•°</h3><table><thead><tr><th>å˜é‡å</th><th>ä»£è¡¨çš„å€¼</th></tr></thead><tbody><tr><td>match</td><td>åŒ¹é…çš„å­ä¸²ã€‚ï¼ˆå¯¹åº”äºä¸Šè¿°çš„$&amp;ã€‚ï¼‰</td></tr><tr><td><code>p1,p2, ...</code></td><td>å‡å¦‚replace()æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ª<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/RegExp" target="_blank" rel="noopener"><code>RegExp</code></a> å¯¹è±¡ï¼Œåˆ™ä»£è¡¨ç¬¬nä¸ªæ‹¬å·åŒ¹é…çš„å­—ç¬¦ä¸²ã€‚ï¼ˆå¯¹åº”äºä¸Šè¿°çš„$1ï¼Œ$2ç­‰ã€‚ï¼‰ä¾‹å¦‚, å¦‚æœæ˜¯ç”¨ <code>/(\a+)(\b+)/</code>è¿™ä¸ªæ¥åŒ¹é…ï¼Œ <code>p1</code>å°±æ˜¯åŒ¹é…çš„ <code>\a+</code>, <code>p2 å°±æ˜¯åŒ¹é…çš„</code> <code>\b+ã€‚</code></td></tr><tr><td><code>offset</code></td><td>åŒ¹é…åˆ°çš„å­å­—ç¬¦ä¸²åœ¨åŸå­—ç¬¦ä¸²ä¸­çš„åç§»é‡ã€‚ï¼ˆæ¯”å¦‚ï¼Œå¦‚æœåŸå­—ç¬¦ä¸²æ˜¯â€œabcdâ€ï¼ŒåŒ¹é…åˆ°çš„å­å­—ç¬¦ä¸²æ˜¯â€œbcâ€ï¼Œé‚£ä¹ˆè¿™ä¸ªå‚æ•°å°†æ˜¯1ï¼‰</td></tr><tr><td>string</td><td>è¢«åŒ¹é…çš„åŸå­—ç¬¦ä¸²ã€‚</td></tr></tbody></table><blockquote><p>ä½ å¯ä»¥æŒ‡å®šä¸€ä¸ªå‡½æ•°ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½“åŒ¹é…æ‰§è¡Œåï¼Œ è¯¥å‡½æ•°å°±ä¼šæ‰§è¡Œã€‚ å‡½æ•°çš„è¿”å›å€¼ä½œä¸ºæ›¿æ¢å­—ç¬¦ä¸²ã€‚ (æ³¨æ„: ä¸Šé¢æåˆ°çš„ç‰¹æ®Šæ›¿æ¢å‚æ•°åœ¨è¿™é‡Œä¸èƒ½è¢«ä½¿ç”¨ã€‚) å¦å¤–è¦æ³¨æ„çš„æ˜¯ï¼Œ å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œ å¹¶ä¸”å…¶ä¸ºå…¨å±€åŒ¹é…æ¨¡å¼ï¼Œ é‚£ä¹ˆè¿™ä¸ªæ–¹æ³•å°†è¢«å¤šæ¬¡è°ƒç”¨ï¼Œ æ¯æ¬¡åŒ¹é…éƒ½ä¼šè¢«è°ƒç”¨ã€‚</p></blockquote><p>åœ¨å®é™…åº”ç”¨ä¸­,<code>replace</code>çš„ä½¿ç”¨å¯ä»¥æ»¡è¶³å¤§éƒ¨åˆ†çš„æ“ä½œå­—ç¬¦ä¸²åœºæ™¯,ç‰¹åˆ«æ˜¯functionçš„å¼•å…¥,æå¤§çš„å¢å¼ºäº†replaceçš„å®åŠ›,ä»è€Œä½¿å¾—æˆ‘ä»¬æ“ä½œå­—ç¬¦æ¸¸åˆƒæœ‰ä½™.</p><p>åœ¨å†™å®ä¾‹çš„æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ææ‡‚å‡ ä¸ª<code>newSubStr</code>ç‰¹æ®Šå˜é‡åï¼Œä»–åœ¨å®é™…åº”ç”¨ä¸­ä¹Ÿå¾ˆæœ‰ä½œç”¨</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">'gating'</span></span><br><span class="line"><span class="comment">// $&amp; è¡¨ç¤ºåŒ¹é…åˆ°çš„å­—ä¸²ï¼Œè¿™é‡ŒåŒ¹é…åˆ°äº† gating ï¼Œæ‰€ä»¥ $&amp; å°±ç­‰äº gating</span></span><br><span class="line"><span class="built_in">console</span>.log(name.replace(<span class="regexp">/\w+/</span>,<span class="string">'$&amp;-$&amp;'</span>)) <span class="comment">// gating-gating</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating say hello for mosen"</span></span><br><span class="line"><span class="comment">// $1 è¡¨ç¤ºåŒ¹é…ç¬¬ä¸€ä¸ªæ‹¬å·é‡Œçš„å†…å®¹ ä¹Ÿå°±æ˜¯ $1 å°±æ˜¯ gating </span></span><br><span class="line"><span class="built_in">console</span>.log(str.replace(<span class="regexp">/(^\w+)(.*?)(\w+)$/</span>,<span class="string">'$3$2$1'</span>)) <span class="comment">// mosen say hello for gating\</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> hello = <span class="string">"hello,gating"</span></span><br><span class="line"><span class="comment">// $`å½“å‰åŒ¹é…çš„å­ä¸²å·¦è¾¹çš„å†…å®¹ã€‚</span></span><br><span class="line"><span class="built_in">console</span>.log(hello.replace(<span class="regexp">/gating/</span>,<span class="string">"&amp;.$`mosen"</span>)) <span class="comment">// hello,gating.hello,mosen</span></span><br><span class="line"><span class="comment">// $'å½“å‰åŒ¹é…çš„å­ä¸²å³è¾¹çš„å†…å®¹ã€‚(ä¸æ˜¯ä¾‹å­çš„ä¾‹å­)</span></span><br><span class="line"><span class="built_in">console</span>.log(hello.replace(<span class="regexp">/hello,/</span>,<span class="string">"$' say hi for $`"</span>)) <span class="comment">// gating say hi for gating</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// function çš„ ç”¨æ³•</span></span><br><span class="line"><span class="keyword">let</span> paragraph = <span class="string">"what is this?"</span></span><br><span class="line"><span class="keyword">let</span> res = paragraph.replace(<span class="string">" is this"</span>,(match,offset,string)=&gt;&#123;</span><br><span class="line">    <span class="comment">// match åŒ¹é…çš„å­ä¸²</span></span><br><span class="line">    <span class="comment">// offset åç§»é‡ è¿™æ˜¯æ˜¯4 ä¹Ÿå°±æ˜¯ åç§»äº†what4ä¸ªå­—ç¬¦</span></span><br><span class="line">    <span class="comment">// string å…ƒå­—ç¬¦</span></span><br><span class="line">    <span class="built_in">console</span>.log(match,offset,string) <span class="comment">//  is this 4 what is this?</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">" is that"</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// what is that?</span></span><br></pre></td></tr></table></figure></div><p>äº†è§£äº†è¿™äº›ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åšå†™ç‚¹æ¯”è¾ƒå®é™…çš„äº†</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// js éšè—æ‰‹æœºä¸­é—´5ä½å·ç </span></span><br><span class="line"><span class="keyword">let</span> phone=<span class="string">'13700000137'</span></span><br><span class="line"><span class="built_in">console</span>.log(phone.replace(<span class="regexp">/(\d&#123;3&#125;)\d+(\d&#123;3&#125;)/</span>, <span class="string">'$1****$2'</span>)) <span class="comment">// 137****137</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†é˜¿æ‹‰ä¼¯æ•°å­—æ¯ä¸‰ä½ä¸€é€—å·åˆ†éš”ï¼Œå¦‚ï¼š1000è½¬åŒ–ä¸º1,000</span></span><br><span class="line"><span class="keyword">let</span> price =  <span class="string">'3521.08'</span></span><br><span class="line"><span class="built_in">console</span>.log(price.replace(<span class="regexp">/(?=(?!^)(?:\d&#123;3&#125;)+(?:\.|$))(\d&#123;3&#125;(\.\d+$)?)/g</span>,<span class="string">',$1'</span>)) <span class="comment">// 3,521.08</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// html è½¬ä¹‰ï¼Œé˜²æ­¢ç”¨æˆ·æ³¨å…¥</span></span><br><span class="line"><span class="keyword">let</span> html = <span class="string">'&lt;div&gt;"hello &amp; world"&lt;/div&gt;'</span>;</span><br><span class="line"><span class="keyword">let</span> res = html.replace(<span class="regexp">/[&lt;&gt;\"\'\&amp;']/g</span>,<span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">switch</span>(a)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'&lt;'</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'&amp;lt;'</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'&gt;'</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'&amp;gt;'</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'\"'</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'&amp;quot;'</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'\''</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'&amp;#39;'</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'\&amp;'</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'&amp;amp;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// &amp;lt;div&amp;gt;&amp;quot;hello &amp;amp; world&amp;quot;&amp;lt;/div&amp;gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®€æ˜“çš„å­—ç¬¦ä¸²æ¨¡æ¿å¼•æ“</span></span><br><span class="line"><span class="keyword">let</span> template = <span class="string">"My name is &#123;name&#125;"</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;<span class="attr">name</span>:<span class="string">'gating'</span>&#125;</span><br><span class="line"><span class="keyword">const</span> tmpl = <span class="function">(<span class="params">template,obj</span>)=&gt;</span> template.replace(<span class="regexp">/([^&#123;&#125;]*)&#123;(.*)&#125;/g</span>,(match,p1,p2) =&gt; (p1+obj[p2]))</span><br><span class="line"><span class="built_in">console</span>.log(tmpl(template,obj)) <span class="comment">// My name is gating</span></span><br></pre></td></tr></table></figure></div><h1 id="å­—ç¬¦ç¼–ç ç›¸å…³"><a href="#å­—ç¬¦ç¼–ç ç›¸å…³" class="headerlink" title="å­—ç¬¦ç¼–ç ç›¸å…³"></a>å­—ç¬¦ç¼–ç ç›¸å…³</h1><h2 id="charAt"><a href="#charAt" class="headerlink" title="charAt"></a>charAt</h2><p>charAt() æ–¹æ³•ä»ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­è¿”å›æŒ‡å®šçš„å­—ç¬¦</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.charAt(index)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>index =&gt; ä¸€ä¸ªä»‹äº0 å’Œå­—ç¬¦ä¸²é•¿åº¦å‡1ä¹‹é—´çš„æ•´æ•°ã€‚ (0~length-1) å¦‚æœæ²¡æœ‰æä¾›ç´¢å¼•ï¼ŒcharAt() å°†ä½¿ç”¨ 0ã€‚å¦‚æœæŒ‡å®šçš„ index å€¼è¶…å‡ºäº†è¯¥èŒƒå›´ï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>å½“å‰ç´¢å¼•çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.charAt(<span class="number">0</span>)) <span class="comment">// g</span></span><br><span class="line"><span class="built_in">console</span>.log(str.charAt(<span class="number">6</span>)) <span class="comment">// ""</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// charAt å’Œ fromCharCode ç”¨åŒæ ·çš„é—®é¢˜ï¼Œä»–ä¸èƒ½è¯†åˆ«é«˜ä½ç¼–ç </span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"ğ ®·"</span>.charAt(<span class="number">0</span>)) <span class="comment">// ï¿½</span></span><br></pre></td></tr></table></figure></div><h2 id="charCodeAt"><a href="#charCodeAt" class="headerlink" title="charCodeAt"></a>charCodeAt</h2><p>charCodeAt() æ–¹æ³•è¿”å›0åˆ°65535ä¹‹é—´çš„æ•´æ•°ï¼Œè¡¨ç¤ºç»™å®šç´¢å¼•å¤„çš„UTF-16ä»£ç å•å…ƒ (åœ¨ Unicode ç¼–ç å•å…ƒè¡¨ç¤ºä¸€ä¸ªå•ä¸€çš„ UTF-16 ç¼–ç å•å…ƒçš„æƒ…å†µä¸‹ï¼ŒUTF-16 ç¼–ç å•å…ƒåŒ¹é… Unicode ç¼–ç å•å…ƒã€‚ä½†åœ¨â€”â€”ä¾‹å¦‚ Unicode ç¼–ç å•å…ƒ &gt; 0x10000 çš„è¿™ç§â€”â€”ä¸èƒ½è¢«ä¸€ä¸ª UTF-16 ç¼–ç å•å…ƒå•ç‹¬è¡¨ç¤ºçš„æƒ…å†µä¸‹ï¼Œåªèƒ½åŒ¹é… Unicode ä»£ç†å¯¹çš„ç¬¬ä¸€ä¸ªç¼–ç å•å…ƒ) ã€‚å¦‚æœä½ æƒ³è¦æ•´ä¸ªä»£ç ç‚¹çš„å€¼ï¼Œä½¿ç”¨ codePointAt()ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.charCodeAt(index)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>index =&gt; ä¸€ä¸ªå¤§äºç­‰äº 0ï¼Œå°äºå­—ç¬¦ä¸²é•¿åº¦çš„æ•´æ•°ã€‚å¦‚æœä¸æ˜¯ä¸€ä¸ªæ•°å€¼ï¼Œåˆ™é»˜è®¤ä¸º 0ã€‚</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>è¿”å›å€¼æ˜¯ä¸€è¡¨ç¤ºç»™å®šç´¢å¼•å¤„ï¼ˆStringä¸­indexç´¢å¼•å¤„ï¼‰å­—ç¬¦çš„ UTF-16 ä»£ç å•å…ƒå€¼çš„æ•°å­—ï¼›å¦‚æœç´¢å¼•è¶…å‡ºèŒƒå›´ï¼Œåˆ™è¿”å› NaNã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"ABC"</span>.charCodeAt(<span class="number">0</span>)) <span class="comment">// 65</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"ABC"</span>.charCodeAt(<span class="number">1</span>)) <span class="comment">// 66</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"ABC"</span>.charCodeAt(<span class="number">3</span>)) <span class="comment">// NaN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é’ˆå¯¹é«˜ä½ç¼–ç ï¼Œä»–ä¼šæ‹†åˆ†æˆä¸¤ä¸ªåŒå­—èŠ‚çš„å½¢å¼å†æ¥è·å–</span></span><br><span class="line"><span class="comment">// ä¹Ÿå°±æ˜¯ "\uD842\uDFB7".charCodeAt(0)</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"ğ ®·"</span>.charCodeAt(<span class="number">0</span>)) <span class="comment">// 55362</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"ğ ®·"</span>.charCodeAt(<span class="number">1</span>)) <span class="comment">// 57271</span></span><br></pre></td></tr></table></figure></div><h2 id="codePointAt"><a href="#codePointAt" class="headerlink" title="codePointAt"></a>codePointAt</h2><p>codePointAt() æ–¹æ³•è¿”å› ä¸€ä¸ª Unicode ç¼–ç ç‚¹å€¼çš„éè´Ÿæ•´æ•°ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.codePointAt(pos)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>pos =&gt; è¿™ä¸ªå­—ç¬¦ä¸²ä¸­éœ€è¦è½¬ç çš„å…ƒç´ çš„ä½ç½®ã€‚</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>è¿”å›å€¼æ˜¯åœ¨å­—ç¬¦ä¸²ä¸­çš„ç»™å®šç´¢å¼•çš„ç¼–ç å•å…ƒä½“ç°çš„æ•°å­—(10è¿›åˆ¶æ•°)ï¼Œå¦‚æœåœ¨ç´¢å¼•å¤„æ²¡æ‰¾åˆ°å…ƒç´ åˆ™è¿”å› undefined ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"ABC"</span>.charCodeAt(<span class="number">0</span>)) <span class="comment">// 65</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"ABC"</span>.charCodeAt(<span class="number">3</span>)) <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"ğ ®·"</span>.codePointAt(<span class="number">0</span>)) <span class="comment">// 134071</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"ğ ®·"</span>.codePointAt(<span class="number">1</span>)) <span class="comment">// 57271</span></span><br></pre></td></tr></table></figure></div><p>æ±‰å­—â€œğ ®·â€ï¼ˆæ³¨æ„ï¼Œè¿™ä¸ªå­—ä¸æ˜¯â€œå‰ç¥¥â€çš„â€œå‰â€ï¼‰çš„ç ç‚¹æ˜¯0x20BB7ï¼ŒUTF-16 ç¼–ç ä¸º0xD842 0xDFB7ï¼ˆåè¿›åˆ¶ä¸º55362 57271ï¼‰ï¼Œéœ€è¦4ä¸ªå­—èŠ‚å‚¨å­˜ã€‚å¯¹äºè¿™ç§4ä¸ªå­—èŠ‚çš„å­—ç¬¦ï¼ŒJavaScript ä¸èƒ½æ­£ç¡®å¤„ç†ï¼Œå­—ç¬¦ä¸²é•¿åº¦ä¼šè¯¯åˆ¤ä¸º2ï¼Œè€Œä¸”charAtæ–¹æ³•æ— æ³•è¯»å–æ•´ä¸ªå­—ç¬¦ï¼ŒcharCodeAtæ–¹æ³•åªèƒ½åˆ†åˆ«è¿”å›å‰ä¸¤ä¸ªå­—èŠ‚å’Œåä¸¤ä¸ªå­—èŠ‚çš„å€¼ã€‚</p><blockquote><p>codePointAt æ–¹æ³•åœ¨ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸Šï¼Œæ­£ç¡®åœ°è¯†åˆ«äº†â€œğ ®·â€ï¼Œè¿”å›äº†å®ƒçš„åè¿›åˆ¶ç ç‚¹ 134071ï¼ˆå³åå…­è¿›åˆ¶çš„20BB7ï¼‰ï¼Œåœ¨ç¬¬äºŒä¸ªå­—ç¬¦ï¼ˆå³â€œğ ®·â€çš„åä¸¤ä¸ªå­—èŠ‚ï¼‰codePointAtæ–¹æ³•çš„ç»“æœä¸charCodeAtæ–¹æ³•ç›¸åŒã€‚</p></blockquote><blockquote><p>codePointAtæ–¹æ³•è¿”å›çš„æ˜¯ç ç‚¹çš„åè¿›åˆ¶å€¼ï¼Œå¦‚æœæƒ³è¦åå…­è¿›åˆ¶çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨toString(16)æ–¹æ³•è½¬æ¢ä¸€ä¸‹ã€‚</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">'ğ ®·a'</span></span><br><span class="line">s.codePointAt(<span class="number">0</span>) <span class="comment">// 134071</span></span><br><span class="line">s.codePointAt(<span class="number">1</span>) <span class="comment">// 57271</span></span><br><span class="line">s.codePointAt(<span class="number">2</span>) <span class="comment">// 97</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½ å¯èƒ½æ³¨æ„åˆ°äº†ï¼ŒcodePointAtæ–¹æ³•çš„å‚æ•°ï¼Œä»ç„¶æ˜¯ä¸æ­£ç¡®çš„ã€‚</span></span><br><span class="line"><span class="comment">// æ¯”å¦‚ï¼Œä¸Šé¢ä»£ç ä¸­ï¼Œå­—ç¬¦aåœ¨å­—ç¬¦ä¸²sçš„æ­£ç¡®ä½ç½®åºå·åº”è¯¥æ˜¯ 1ï¼Œä½†æ˜¯å¿…é¡»å‘codePointAtæ–¹æ³•ä¼ å…¥ 2ã€‚</span></span><br><span class="line"><span class="comment">// è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ä¸ªåŠæ³•æ˜¯ä½¿ç”¨for...ofå¾ªç¯ï¼Œå› ä¸ºå®ƒä¼šæ­£ç¡®è¯†åˆ« 32 ä½çš„ UTF-16 å­—ç¬¦ã€‚</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> ch <span class="keyword">of</span> s) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(ch.codePointAt(<span class="number">0</span>).toString(<span class="number">16</span>)) <span class="comment">// 20bb7 61</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"\u&#123;20bb7&#125;"</span>) <span class="comment">// ğ ®·</span></span><br></pre></td></tr></table></figure></div><h2 id="normalize"><a href="#normalize" class="headerlink" title="normalize"></a>normalize</h2><p>normalize() æ–¹æ³•ä¼šæŒ‰ç…§æŒ‡å®šçš„ä¸€ç§ Unicode æ­£è§„å½¢å¼å°†å½“å‰å­—ç¬¦ä¸²æ­£è§„åŒ–.</p><p>è®¸å¤šæ¬§æ´²è¯­è¨€æœ‰è¯­è°ƒç¬¦å·å’Œé‡éŸ³ç¬¦å·ã€‚ä¸ºäº†è¡¨ç¤ºå®ƒä»¬ï¼ŒUnicode æä¾›äº†ä¸¤ç§æ–¹æ³•ã€‚ä¸€ç§æ˜¯ç›´æ¥æä¾›å¸¦é‡éŸ³ç¬¦å·çš„å­—ç¬¦ï¼Œæ¯”å¦‚Ç‘ï¼ˆ\u01D1ï¼‰ã€‚å¦ä¸€ç§æ˜¯æä¾›åˆæˆç¬¦å·ï¼ˆcombining characterï¼‰ï¼Œå³åŸå­—ç¬¦ä¸é‡éŸ³ç¬¦å·çš„åˆæˆï¼Œä¸¤ä¸ªå­—ç¬¦åˆæˆä¸€ä¸ªå­—ç¬¦ï¼Œæ¯”å¦‚Oï¼ˆ\u004Fï¼‰å’ŒË‡ï¼ˆ\u030Cï¼‰åˆæˆÇ‘ï¼ˆ\u004F\u030Cï¼‰ã€‚</p><p>è¿™ä¸¤ç§è¡¨ç¤ºæ–¹æ³•ï¼Œåœ¨è§†è§‰å’Œè¯­ä¹‰ä¸Šéƒ½ç­‰ä»·ï¼Œä½†æ˜¯ JavaScript ä¸èƒ½è¯†åˆ«ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.normalize(form)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>form =&gt; å››ç§ Unicode æ­£è§„å½¢å¼ "NFC", "NFD", "NFKC", ä»¥åŠ "NFKD" å…¶ä¸­çš„ä¸€ä¸ª, é»˜è®¤å€¼ä¸º "NFC".</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>æ­£è§„åŒ–åçš„å­—ç¬¦ä¸²ã€‚å¦‚æœç»™ form ä¼ å…¥äº†éæ³•çš„å‚æ•°å€¼, åˆ™ä¼šæŠ›å‡º RangeError å¼‚å¸¸.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'\u01D1'</span>===<span class="string">'\u004F\u030C'</span>) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'\u01D1'</span>.normalize() === <span class="string">'\u004F\u030C'</span>.normalize()) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// NFCå‚æ•°è¿”å›å­—ç¬¦çš„åˆæˆå½¢å¼ï¼ŒNFDå‚æ•°è¿”å›å­—ç¬¦çš„åˆ†è§£å½¢å¼ã€‚</span></span><br><span class="line"><span class="string">'\u004F\u030C'</span>.normalize(<span class="string">'NFC'</span>).length <span class="comment">// 1</span></span><br><span class="line"><span class="string">'\u004F\u030C'</span>.normalize(<span class="string">'NFD'</span>).length <span class="comment">// 2</span></span><br></pre></td></tr></table></figure></div><ol><li><p><code>NFC</code>ï¼Œé»˜è®¤å‚æ•°ï¼Œè¡¨ç¤ºâ€œæ ‡å‡†ç­‰ä»·åˆæˆâ€ï¼ˆNormalization Form Canonical Compositionï¼‰ï¼Œè¿”å›å¤šä¸ªç®€å•å­—ç¬¦çš„åˆæˆå­—ç¬¦ã€‚æ‰€è°“â€œæ ‡å‡†ç­‰ä»·â€æŒ‡çš„æ˜¯è§†è§‰å’Œè¯­ä¹‰ä¸Šçš„ç­‰ä»·ã€‚</p></li><li><p><code>NFD</code>ï¼Œè¡¨ç¤ºâ€œæ ‡å‡†ç­‰ä»·åˆ†è§£â€ï¼ˆNormalization Form Canonical Decompositionï¼‰ï¼Œå³åœ¨æ ‡å‡†ç­‰ä»·çš„å‰æä¸‹ï¼Œè¿”å›åˆæˆå­—ç¬¦åˆ†è§£çš„å¤šä¸ªç®€å•å­—ç¬¦ã€‚</p></li><li><p><code>NFKC</code>ï¼Œè¡¨ç¤ºâ€œå…¼å®¹ç­‰ä»·åˆæˆâ€ï¼ˆNormalization Form Compatibility Compositionï¼‰ï¼Œè¿”å›åˆæˆå­—ç¬¦ã€‚æ‰€è°“â€œå…¼å®¹ç­‰ä»·â€æŒ‡çš„æ˜¯è¯­ä¹‰ä¸Šå­˜åœ¨ç­‰ä»·ï¼Œä½†è§†è§‰ä¸Šä¸ç­‰ä»·ï¼Œæ¯”å¦‚â€œå›â€å’Œâ€œå–œå–œâ€ã€‚ï¼ˆè¿™åªæ˜¯ç”¨æ¥ä¸¾ä¾‹ï¼Œnormalizeæ–¹æ³•ä¸èƒ½è¯†åˆ«ä¸­æ–‡ã€‚ï¼‰</p></li><li><p><code>NFKD</code>ï¼Œè¡¨ç¤ºâ€œå…¼å®¹ç­‰ä»·åˆ†è§£â€ï¼ˆNormalization Form Compatibility Decompositionï¼‰ï¼Œå³åœ¨å…¼å®¹ç­‰ä»·çš„å‰æä¸‹ï¼Œè¿”å›åˆæˆå­—ç¬¦åˆ†è§£çš„å¤šä¸ªç®€å•å­—ç¬¦ã€‚</p></li></ol><blockquote><p>ä¸è¿‡ï¼Œnormalizeæ–¹æ³•ç›®å‰ä¸èƒ½è¯†åˆ«ä¸‰ä¸ªæˆ–ä¸‰ä¸ªä»¥ä¸Šå­—ç¬¦çš„åˆæˆã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œè¿˜æ˜¯åªèƒ½ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œé€šè¿‡ Unicode ç¼–å·åŒºé—´åˆ¤æ–­ã€‚</p></blockquote><blockquote><p>æ­¤å†…å®¹å‚è€ƒäº† <a href="http://es6.ruanyifeng.com/#docs/string#normalize" target="_blank" rel="noopener">é˜®è€å¸ˆçš„normalize()</a></p></blockquote><h1 id="åˆå¹¶å¡«å……ç›¸å…³"><a href="#åˆå¹¶å¡«å……ç›¸å…³" class="headerlink" title="åˆå¹¶å¡«å……ç›¸å…³"></a>åˆå¹¶å¡«å……ç›¸å…³</h1><h2 id="concat"><a href="#concat" class="headerlink" title="concat"></a>concat</h2><p>concat() æ–¹æ³•å°†ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸²ä¸åŸå­—ç¬¦ä¸²è¿æ¥åˆå¹¶ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å¹¶è¿”å›ã€‚</p><blockquote><p>å¼ºçƒˆå»ºè®®ä½¿ç”¨ èµ‹å€¼æ“ä½œç¬¦ï¼ˆ+, +=ï¼‰ä»£æ›¿ concat æ–¹æ³•ã€‚å› ä¸º concat æ€§èƒ½æ¯”è¾ƒåƒåœ¾</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.concat(stringN)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>stringN =&gt; å’ŒåŸå­—ç¬¦ä¸²è¿æ¥çš„å¤šä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>è¿æ¥åçš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"hello,"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.concat(<span class="string">"gating"</span>)) <span class="comment">// hello,gating</span></span><br></pre></td></tr></table></figure></div><h2 id="padEnd"><a href="#padEnd" class="headerlink" title="padEnd"></a>padEnd</h2><p>padEnd() æ–¹æ³•ä¼šç”¨ä¸€ä¸ªå­—ç¬¦ä¸²å¡«å……å½“å‰å­—ç¬¦ä¸²ï¼ˆå¦‚æœéœ€è¦çš„è¯åˆ™é‡å¤å¡«å……ï¼‰ï¼Œè¿”å›å¡«å……åè¾¾åˆ°æŒ‡å®šé•¿åº¦çš„å­—ç¬¦ä¸²ã€‚ä»å½“å‰å­—ç¬¦ä¸²çš„æœ«å°¾ï¼ˆå³ä¾§ï¼‰å¼€å§‹å¡«å……ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.padEnd(targetLength,padString)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>targetLength =&gt; å½“å‰å­—ç¬¦ä¸²éœ€è¦å¡«å……åˆ°çš„ç›®æ ‡é•¿åº¦ã€‚å¦‚æœè¿™ä¸ªæ•°å€¼å°äºå½“å‰å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œåˆ™è¿”å›å½“å‰å­—ç¬¦ä¸²æœ¬èº«ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>padString  =&gt; å¡«å……å­—ç¬¦ä¸²ã€‚å¦‚æœå­—ç¬¦ä¸²å¤ªé•¿ï¼Œä½¿å¡«å……åçš„å­—ç¬¦ä¸²é•¿åº¦è¶…è¿‡äº†ç›®æ ‡é•¿åº¦ï¼Œåˆ™åªä¿ç•™æœ€å·¦ä¾§çš„éƒ¨åˆ†ï¼Œå…¶ä»–éƒ¨åˆ†ä¼šè¢«æˆªæ–­ã€‚æ­¤å‚æ•°çš„ç¼ºçœå€¼ä¸º " "ï¼ˆU+0020ï¼‰ã€‚</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>åœ¨åŸå­—ç¬¦ä¸²æœ«å°¾å¡«å……æŒ‡å®šçš„å¡«å……å­—ç¬¦ä¸²ç›´åˆ°ç›®æ ‡é•¿åº¦æ‰€å½¢æˆçš„æ–°å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"abc"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.padEnd(<span class="number">1</span>)) <span class="comment">// abc</span></span><br><span class="line"><span class="built_in">console</span>.log(str.padEnd(<span class="number">1</span>,<span class="string">"123"</span>)) <span class="comment">// abc</span></span><br><span class="line"><span class="built_in">console</span>.log(str.padEnd(<span class="number">4</span>,<span class="string">"123"</span>)) <span class="comment">// abc1</span></span><br><span class="line"><span class="built_in">console</span>.log(str.padEnd(<span class="number">7</span>,<span class="string">"123"</span>)) <span class="comment">// abc1231</span></span><br></pre></td></tr></table></figure></div><h2 id="padStart"><a href="#padStart" class="headerlink" title="padStart"></a>padStart</h2><p>padStart() æ–¹æ³•ç”¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²å¡«å……å½“å‰å­—ç¬¦ä¸²(é‡å¤ï¼Œå¦‚æœéœ€è¦çš„è¯)ï¼Œä»¥ä¾¿äº§ç”Ÿçš„å­—ç¬¦ä¸²è¾¾åˆ°ç»™å®šçš„é•¿åº¦ã€‚å¡«å……ä»å½“å‰å­—ç¬¦ä¸²çš„å¼€å§‹(å·¦ä¾§)åº”ç”¨çš„ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.padStart(targetLength,padString)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>targetLength =&gt; å½“å‰å­—ç¬¦ä¸²éœ€è¦å¡«å……åˆ°çš„ç›®æ ‡é•¿åº¦ã€‚å¦‚æœè¿™ä¸ªæ•°å€¼å°äºå½“å‰å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œåˆ™è¿”å›å½“å‰å­—ç¬¦ä¸²æœ¬èº«ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>padString  =&gt; å¡«å……å­—ç¬¦ä¸²ã€‚å¦‚æœå­—ç¬¦ä¸²å¤ªé•¿ï¼Œä½¿å¡«å……åçš„å­—ç¬¦ä¸²é•¿åº¦è¶…è¿‡äº†ç›®æ ‡é•¿åº¦ï¼Œåˆ™åªä¿ç•™æœ€å·¦ä¾§çš„éƒ¨åˆ†ï¼Œå…¶ä»–éƒ¨åˆ†ä¼šè¢«æˆªæ–­ã€‚æ­¤å‚æ•°çš„ç¼ºçœå€¼ä¸º " "ï¼ˆU+0020ï¼‰ã€‚</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>åœ¨åŸå­—ç¬¦ä¸²å¼€å¤´å¡«å……æŒ‡å®šçš„å¡«å……å­—ç¬¦ä¸²ç›´åˆ°ç›®æ ‡é•¿åº¦æ‰€å½¢æˆçš„æ–°å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"abc"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.padStart(<span class="number">1</span>)) <span class="comment">// abc</span></span><br><span class="line"><span class="built_in">console</span>.log(str.padStart(<span class="number">3</span>,<span class="string">'123'</span>)) <span class="comment">// abc</span></span><br><span class="line"><span class="built_in">console</span>.log(str.padStart(<span class="number">6</span>,<span class="string">'123'</span>)) <span class="comment">// 123abc</span></span><br><span class="line"><span class="built_in">console</span>.log(str.padStart(<span class="number">7</span>,<span class="string">'123'</span>)) <span class="comment">// 1231abc</span></span><br></pre></td></tr></table></figure></div><p>padStart()çš„å¸¸è§ç”¨é€”æ˜¯ä¸ºæ•°å€¼è¡¥å…¨æŒ‡å®šä½æ•°å’Œæç¤ºå­—ç¬¦ä¸²æ ¼å¼ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç”Ÿæˆ 10 ä½çš„æ•°å€¼å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="string">'1'</span>.padStart(<span class="number">10</span>, <span class="string">'0'</span>) <span class="comment">// "0000000001"</span></span><br><span class="line"><span class="string">'12'</span>.padStart(<span class="number">10</span>, <span class="string">'0'</span>) <span class="comment">// "0000000012"</span></span><br><span class="line"><span class="string">'123456'</span>.padStart(<span class="number">10</span>, <span class="string">'0'</span>) <span class="comment">// "0000123456"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æç¤ºå­—ç¬¦ä¸²æ ¼å¼</span></span><br><span class="line"><span class="string">'12'</span>.padStart(<span class="number">10</span>, <span class="string">'YYYY-MM-DD'</span>) <span class="comment">// "YYYY-MM-12"</span></span><br><span class="line"><span class="string">'09-12'</span>.padStart(<span class="number">10</span>, <span class="string">'YYYY-MM-DD'</span>) <span class="comment">// "YYYY-09-12"</span></span><br></pre></td></tr></table></figure></div><h2 id="repeat"><a href="#repeat" class="headerlink" title="repeat"></a>repeat</h2><p>repeat() æ„é€ å¹¶è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²åŒ…å«è¢«è¿æ¥åœ¨ä¸€èµ·çš„æŒ‡å®šæ•°é‡çš„å­—ç¬¦ä¸²çš„å‰¯æœ¬ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.repeat(count)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>count =&gt; ä»‹äº0å’Œæ­£æ— ç©·å¤§ä¹‹é—´çš„æ•´æ•° : [0, +âˆ) ã€‚è¡¨ç¤ºåœ¨æ–°æ„é€ çš„å­—ç¬¦ä¸²ä¸­é‡å¤äº†å¤šå°‘éåŸå­—ç¬¦ä¸²ã€‚é‡å¤æ¬¡æ•°ä¸èƒ½ä¸ºè´Ÿæ•°ã€‚é‡å¤æ¬¡æ•°å¿…é¡»å°äº infinityï¼Œä¸”é•¿åº¦ä¸ä¼šå¤§äºæœ€é•¿çš„å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>åŒ…å«æŒ‡å®šå­—ç¬¦ä¸²çš„æŒ‡å®šæ•°é‡å‰¯æœ¬çš„æ–°å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.repeat(<span class="number">2</span>)) <span class="comment">// gatinggating</span></span><br><span class="line"><span class="comment">// å‚æ•°countå°†ä¼šè¢«è‡ªåŠ¨è½¬æ¢æˆæ•´æ•°(å‘ä¸‹å–æ•´)</span></span><br><span class="line"><span class="built_in">console</span>.log(str.repeat(<span class="number">3.5</span>)) <span class="comment">// gatinggatinggating</span></span><br><span class="line"><span class="built_in">console</span>.log(str.repeat(<span class="number">3.4</span>)) <span class="comment">// gatinggatinggating</span></span><br><span class="line"><span class="comment">// ä½†æ˜¯ï¼Œå¦‚æœå‚æ•°æ˜¯ 0 åˆ°-1 ä¹‹é—´çš„å°æ•°ï¼Œåˆ™ç­‰åŒäº 0ï¼Œè¿™æ˜¯å› ä¸ºä¼šå…ˆè¿›è¡Œå–æ•´è¿ç®—ã€‚</span></span><br><span class="line"><span class="built_in">console</span>.log(str.repeat(<span class="number">-0.5</span>)) <span class="comment">// ""</span></span><br><span class="line"><span class="built_in">console</span>.log(str.repeat(<span class="number">0</span>)) <span class="comment">// ""</span></span><br><span class="line"><span class="comment">// å‚æ•°NaNç­‰åŒäº 0ã€‚</span></span><br><span class="line"><span class="built_in">console</span>.log(str.repeat(<span class="literal">NaN</span>)) <span class="comment">// ""</span></span><br><span class="line"><span class="comment">// å¦‚æœrepeatçš„å‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™ä¼šå…ˆè½¬æ¢æˆæ•°å­—</span></span><br><span class="line"><span class="built_in">console</span>.log(str.repeat(<span class="string">"aaa"</span>)) <span class="comment">// ""</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// RangeError: repeat count must be positive and less than inifinity</span></span><br><span class="line"><span class="built_in">console</span>.log(str.repeat(<span class="number">-1</span>)) </span><br><span class="line"><span class="built_in">console</span>.log(str.repeat(<span class="number">1</span>/<span class="number">0</span>))</span><br></pre></td></tr></table></figure></div><p>repeat å…¶å®å¾ˆé€‚åˆæˆ‘ä»¬è°ƒè¯•çš„æ—¶å€™ç”Ÿæˆå¤šä»½æµ‹è¯•æ•°æ®ï¼Œæ¯”å¦‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> newData = [<span class="string">"1"</span>,<span class="string">"2"</span>,<span class="string">"3"</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡è®¾æˆ‘ä»¬æƒ³ç”Ÿæˆ ["1","1","2","2","3","3"] çš„åŒä»½æ•°æ®ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ repeat æ¥å®ç°</span></span><br><span class="line"><span class="keyword">let</span> newData = myDate.map(<span class="function"><span class="params">item</span>=&gt;</span>item.repeat(<span class="number">2</span>).split(<span class="string">''</span>)).reduce(<span class="function">(<span class="params">arr,val</span>)=&gt;</span>arr.concat(val))</span><br><span class="line"><span class="built_in">console</span>.log(newData)) <span class="comment">// ["1","1","2","2","3","3"]</span></span><br></pre></td></tr></table></figure></div><h1 id="æœç´¢æŸ¥æ‰¾ç›¸å…³"><a href="#æœç´¢æŸ¥æ‰¾ç›¸å…³" class="headerlink" title="æœç´¢æŸ¥æ‰¾ç›¸å…³"></a>æœç´¢æŸ¥æ‰¾ç›¸å…³</h1><h2 id="indexOf"><a href="#indexOf" class="headerlink" title="indexOf"></a>indexOf</h2><p>indexOf() æ–¹æ³•è¿”å›è°ƒç”¨ String å¯¹è±¡ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„æŒ‡å®šå€¼çš„ç´¢å¼•ï¼Œå¼€å§‹åœ¨ fromIndexè¿›è¡Œæœç´¢ã€‚å¦‚æœæœªæ‰¾åˆ°è¯¥å€¼ï¼Œåˆ™è¿”å›-1ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.indexOf(searchValue,fromIndex)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>searchValue =&gt; ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºè¢«æŸ¥æ‰¾çš„å€¼ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String/Number&#125;</span> </span>fromIndex =&gt; è¡¨ç¤ºè°ƒç”¨è¯¥æ–¹æ³•çš„å­—ç¬¦ä¸²ä¸­å¼€å§‹æŸ¥æ‰¾çš„ä½ç½®ã€‚å¯ä»¥æ˜¯ä»»æ„æ•´æ•°ã€‚é»˜è®¤å€¼ä¸º 0ã€‚å¦‚æœ fromIndex &lt; 0 åˆ™æŸ¥æ‰¾æ•´ä¸ªå­—ç¬¦ä¸²ï¼ˆå¦‚åŒä¼ è¿›äº† 0ï¼‰ã€‚å¦‚æœ fromIndex &gt;= str.lengthï¼Œåˆ™è¯¥æ–¹æ³•è¿”å› -1ã€‚å½“è¢«æŸ¥æ‰¾çš„å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼ŒfromIndex &lt;= 0æ—¶è¿”å›0ï¼Œ0 &lt; fromIndex &lt;= str.lengthæ—¶è¿”å›fromIndexï¼ŒfromIndex &gt; str.lengthæ—¶è¿”å›str.lengthã€‚</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>æŒ‡å®šå€¼çš„ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•; å¦‚æœæ²¡æœ‰æ‰¾åˆ° -1ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.indexOf(<span class="string">"g"</span>)) <span class="comment">// 0</span></span><br><span class="line"><span class="comment">// è¿™é‡Œçš„ -1 ä¹Ÿå°± fromIndex &lt; 0 æ—¶ï¼Œstr.indexOf("a",-1) ç­‰åŒäº str.indexOf("a",0)</span></span><br><span class="line"><span class="built_in">console</span>.log(str.indexOf(<span class="string">"a"</span>,<span class="number">-1</span>)) <span class="comment">// 1</span></span><br><span class="line"><span class="comment">// è¿™é‡Œçš„ 8 ä¹Ÿå°± fromIndex &gt; str.length æ—¶ï¼Œstr.indexOf("a",8) ç­‰åŒäº str.indexOf("a",6)</span></span><br><span class="line"><span class="built_in">console</span>.log(str.indexOf(<span class="string">"g"</span>,<span class="number">8</span>)) <span class="comment">// -1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒºåˆ†å¤§å°å†™</span></span><br><span class="line"><span class="built_in">console</span>.log(str.indexOf(<span class="string">"G"</span>)) <span class="comment">// -1</span></span><br></pre></td></tr></table></figure></div><p>å®é™…åº”ç”¨åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä½¿ç”¨ indexOf ç»Ÿè®¡ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æŸä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">countStr</span>(<span class="params">str,value</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span> pos = str.indexOf(<span class="string">'g'</span>);</span><br><span class="line">    <span class="keyword">while</span> (pos !== <span class="number">-1</span>) &#123;</span><br><span class="line">        count++;</span><br><span class="line">        pos = str.indexOf(<span class="string">'g'</span>, pos + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(countStr(str,<span class="string">'g'</span>)) <span class="comment">// 2</span></span><br></pre></td></tr></table></figure></div><h2 id="lastIndexOf"><a href="#lastIndexOf" class="headerlink" title="lastIndexOf"></a>lastIndexOf</h2><p>lastIndexOf() æ–¹æ³•è¿”å›æŒ‡å®šå€¼åœ¨è°ƒç”¨è¯¥æ–¹æ³•çš„å­—ç¬¦ä¸²ä¸­æœ€åå‡ºç°çš„ä½ç½®ï¼Œå¦‚æœæ²¡æ‰¾åˆ°åˆ™è¿”å› -1ã€‚ä»è¯¥å­—ç¬¦ä¸²çš„åé¢å‘å‰æŸ¥æ‰¾ï¼Œä» fromIndex å¤„å¼€å§‹ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.indexOf(searchValue,fromIndex)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>searchValue =&gt; ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºè¢«æŸ¥æ‰¾çš„å€¼ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String/Number&#125;</span> </span>fromIndex =&gt; ä»è°ƒç”¨è¯¥æ–¹æ³•å­—ç¬¦ä¸²çš„æ­¤ä½ç½®å¤„å¼€å§‹æŸ¥æ‰¾ã€‚å¯ä»¥æ˜¯ä»»æ„æ•´æ•°ã€‚é»˜è®¤å€¼ä¸º str.lengthã€‚å¦‚æœä¸ºè´Ÿå€¼ï¼Œåˆ™è¢«çœ‹ä½œ 0ã€‚å¦‚æœ fromIndex &gt; str.lengthï¼Œåˆ™ fromIndex è¢«çœ‹ä½œ str.lengthã€‚</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>æŒ‡å®šå€¼çš„ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼ˆä»åå¾€å‰æ•°ï¼‰; å¦‚æœæ²¡æœ‰æ‰¾åˆ° -1ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.lastIndexOf(<span class="string">'g'</span>)) <span class="comment">// 5</span></span><br><span class="line"><span class="built_in">console</span>.log(str.lastIndexOf(<span class="string">'g'</span>,<span class="number">2</span>)) <span class="comment">// 0 </span></span><br><span class="line"><span class="comment">// è¿™é‡Œçš„ 8 ä¹Ÿå°± fromIndex &gt; str.length æ—¶ï¼Œstr.lastIndexOf("a",8) ç­‰åŒäº str.lastIndexOf("a",6) ä¹Ÿå°±æ˜¯ str.lastIndexOf("a")</span></span><br><span class="line"><span class="built_in">console</span>.log(str.lastIndexOf(<span class="string">'g'</span>,<span class="number">8</span>)) <span class="comment">// 5 </span></span><br><span class="line"><span class="built_in">console</span>.log(str.lastIndexOf(<span class="string">'g'</span>,<span class="number">-1</span>)) <span class="comment">// -1</span></span><br><span class="line"><span class="built_in">console</span>.log(str.lastIndexOf(<span class="string">'g'</span>,<span class="number">0</span>)) <span class="comment">// 0</span></span><br></pre></td></tr></table></figure></div><h2 id="search"><a href="#search" class="headerlink" title="search"></a>search</h2><p>search() æ–¹æ³•æ‰§è¡Œæ­£åˆ™è¡¨è¾¾å¼å’Œ Stringå¯¹è±¡ä¹‹é—´çš„ä¸€ä¸ªæœç´¢åŒ¹é…ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.search(regexp)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Regexp&#125;</span> </span>regexp =&gt; ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼ˆregular expressionï¼‰å¯¹è±¡ã€‚å¦‚æœä¼ å…¥ä¸€ä¸ªéæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œåˆ™ä¼šä½¿ç”¨ new RegExp(obj) éšå¼åœ°å°†å…¶è½¬æ¢ä¸ºæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>å¦‚æœåŒ¹é…æˆåŠŸï¼Œåˆ™ search() è¿”å›æ­£åˆ™è¡¨è¾¾å¼åœ¨å­—ç¬¦ä¸²ä¸­é¦–æ¬¡åŒ¹é…é¡¹çš„ç´¢å¼•ã€‚å¦åˆ™ï¼Œè¿”å› -1ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.search(<span class="string">"g"</span>)) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(str.search(<span class="regexp">/g/</span>)) <span class="comment">// 0</span></span><br></pre></td></tr></table></figure></div><h2 id="includes"><a href="#includes" class="headerlink" title="includes"></a>includes</h2><p>includes() æ–¹æ³•ç”¨äºåˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«åœ¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ ¹æ®æƒ…å†µè¿”å› true æˆ– falseã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.includes(searchString,position)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>searchString =&gt; è¦åœ¨æ­¤å­—ç¬¦ä¸²ä¸­æœç´¢çš„å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>position =&gt; å¯é€‰ã€‚ä»å½“å‰å­—ç¬¦ä¸²çš„å“ªä¸ªç´¢å¼•ä½ç½®å¼€å§‹æœå¯»å­å­—ç¬¦ä¸²ï¼Œé»˜è®¤å€¼ä¸º0ã€‚</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Boolean&#125;</span> </span>å¦‚æœå½“å‰å­—ç¬¦ä¸²åŒ…å«è¢«æœå¯»çš„å­—ç¬¦ä¸²ï¼Œå°±è¿”å› trueï¼›å¦åˆ™è¿”å› falseã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.includes(<span class="string">"a"</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(str.includes(<span class="string">"a"</span>,<span class="number">1</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(str.includes(<span class="string">"a"</span>,<span class="number">2</span>)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure></div><blockquote><p>åœ¨ Firefox 18 - 39ä¸­ï¼Œè¿™ä¸ªæ–¹æ³•çš„åç§°å« contains()ã€‚ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/includes#String.prototype.contains()" target="_blank" rel="noopener">å…·ä½“åŸå› è¯·æŸ¥çœ‹</a></p></blockquote><h2 id="startsWith"><a href="#startsWith" class="headerlink" title="startsWith"></a>startsWith</h2><p>startsWith()æ–¹æ³•ç”¨æ¥åˆ¤æ–­å½“å‰å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ä»¥å¦å¤–ä¸€ä¸ªç»™å®šçš„å­å­—ç¬¦ä¸²â€œå¼€å¤´â€çš„ï¼Œæ ¹æ®åˆ¤æ–­ç»“æœè¿”å› true æˆ– falseã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.startsWith(searchString,position)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>searchString =&gt;è¦æœç´¢çš„å­å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>position =&gt; åœ¨ str ä¸­æœç´¢ searchString çš„å¼€å§‹ä½ç½®ï¼Œé»˜è®¤å€¼ä¸º 0ï¼Œä¹Ÿå°±æ˜¯çœŸæ­£çš„å­—ç¬¦ä¸²å¼€å¤´å¤„ã€‚</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Boolean&#125;</span> </span>å¦‚æœå½“å‰å­—ç¬¦ä¸²ä»¥æœç´ å­—ç¬¦ä¸²å¼€å¤´ï¼Œå°±è¿”å› trueï¼›å¦åˆ™è¿”å› falseã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.startsWith(<span class="string">'g'</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(str.startsWith(<span class="string">'g'</span>,<span class="number">1</span>)) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(str.startsWith(<span class="string">'g'</span>,<span class="number">7</span>)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure></div><h2 id="endsWith"><a href="#endsWith" class="headerlink" title="endsWith"></a>endsWith</h2><p>endsWith()æ–¹æ³•ç”¨æ¥åˆ¤æ–­å½“å‰å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ä»¥å¦å¤–ä¸€ä¸ªç»™å®šçš„å­å­—ç¬¦ä¸²â€œç»“å°¾â€çš„ï¼Œæ ¹æ®åˆ¤æ–­ç»“æœè¿”å› true æˆ– falseã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.endsWith(searchString,position)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>searchString =&gt; è¦æœç´¢çš„å­å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>position =&gt; å¯é€‰ã€‚ä½œä¸ºstrçš„é•¿åº¦ï¼Œé»˜è®¤å€¼ä¸º str.lengthã€‚</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Boolean&#125;</span>  </span>å¦‚æœä¼ å…¥çš„å­å­—ç¬¦ä¸²åœ¨æœç´¢å­—ç¬¦ä¸²çš„æœ«å°¾å°±è¿”å›trueï¼›å¦åˆ™å°†è¿”å› false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.endsWith(<span class="string">'g'</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="comment">// è¿™é‡Œ position ä¸º 2 è¡¨ç¤º str çš„å€¼å°±æ˜¯ gaï¼Œä¹Ÿå°±æ˜¯ç›¸å½“äº ga.endsWith('g')</span></span><br><span class="line"><span class="built_in">console</span>.log(str.endsWith(<span class="string">'g'</span>,<span class="number">2</span>)) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(str.endsWith(<span class="string">'g'</span>,<span class="number">7</span>)) <span class="comment">// true</span></span><br></pre></td></tr></table></figure></div><h1 id="æˆªå–ç›¸å…³"><a href="#æˆªå–ç›¸å…³" class="headerlink" title="æˆªå–ç›¸å…³"></a>æˆªå–ç›¸å…³</h1><h2 id="slice"><a href="#slice" class="headerlink" title="slice"></a>slice</h2><p>slice() æ–¹æ³•æå–ä¸€ä¸ªå­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶è¿”å›ä¸€æ–°çš„å­—ç¬¦ä¸²ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.slice(beginSlice,endSlice)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>beginSlice =&gt; ä»è¯¥ç´¢å¼•ï¼ˆä»¥ 0 ä¸ºåŸºæ•°ï¼‰å¤„å¼€å§‹æå–åŸå­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ã€‚å¦‚æœå€¼ä¸ºè´Ÿæ•°ï¼Œä¼šè¢«å½“åš sourceLength + beginSlice çœ‹å¾…ï¼Œè¿™é‡Œçš„sourceLength æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦ (ä¾‹å¦‚ï¼Œ å¦‚æœbeginSlice æ˜¯ -3 åˆ™çœ‹ä½œæ˜¯: sourceLength - 3)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>endSlice =&gt; å¯é€‰ã€‚å¯é€‰ã€‚åœ¨è¯¥ç´¢å¼•ï¼ˆä»¥ 0 ä¸ºåŸºæ•°ï¼‰å¤„ç»“æŸæå–å­—ç¬¦ä¸²ã€‚å¦‚æœçœç•¥è¯¥å‚æ•°ï¼Œsliceä¼šä¸€ç›´æå–åˆ°å­—ç¬¦ä¸²æœ«å°¾ã€‚å¦‚æœè¯¥å‚æ•°ä¸ºè´Ÿæ•°ï¼Œåˆ™è¢«çœ‹ä½œæ˜¯ sourceLength + endSliceï¼Œè¿™é‡Œçš„ sourceLength å°±æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦(ä¾‹å¦‚ï¼Œå¦‚æœ endSlice æ˜¯ -3ï¼Œåˆ™æ˜¯, sourceLength - 3)ã€‚</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span>  </span>è¿”å›ä¸€ä¸ªä»åŸå­—ç¬¦ä¸²ä¸­æå–å‡ºæ¥çš„æ–°å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.slice(<span class="number">1</span>)) <span class="comment">// ating</span></span><br><span class="line"><span class="comment">// è¿™é‡Œçš„-1å®é™…ä¸Šå°±æ˜¯ (6-1) ä¹Ÿå°±æ˜¯ 5 å³ str.slice(5)</span></span><br><span class="line"><span class="built_in">console</span>.log(str.slice(<span class="number">-1</span>)) <span class="comment">// g</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™é‡Œçš„-1å®é™…ä¸Šå°±æ˜¯ (6-1) ä¹Ÿå°±æ˜¯ 5 å³ str.slice(0,5)</span></span><br><span class="line"><span class="built_in">console</span>.log(str.slice(<span class="number">0</span>,<span class="number">-1</span>)) <span class="comment">// gatin</span></span><br><span class="line"><span class="built_in">console</span>.log(str.slice(<span class="number">-2</span>,<span class="number">-1</span>)) <span class="comment">// n</span></span><br><span class="line"><span class="built_in">console</span>.log(str.slice(<span class="number">-1</span>,<span class="number">-2</span>)) <span class="comment">// ""</span></span><br></pre></td></tr></table></figure></div><blockquote><p>æ³¨æ„ï¼šslice() æå–çš„æ–°å­—ç¬¦ä¸²åŒ…æ‹¬beginSliceä½†ä¸åŒ…æ‹¬ endSliceã€‚</p></blockquote><h2 id="substr"><a href="#substr" class="headerlink" title="substr"></a>substr</h2><p>substr() æ–¹æ³•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ä»æŒ‡å®šä½ç½®å¼€å§‹åˆ°æŒ‡å®šå­—ç¬¦æ•°çš„å­—ç¬¦ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.substr(start,length)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>searchString =&gt; å¼€å§‹æå–å­—ç¬¦çš„ä½ç½®ã€‚å¦‚æœä¸ºè´Ÿå€¼ï¼Œåˆ™è¢«çœ‹ä½œ strLength + startï¼Œå…¶ä¸­ strLength ä¸ºå­—ç¬¦ä¸²çš„é•¿åº¦ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœ start ä¸º -3ï¼Œåˆ™è¢«çœ‹ä½œ strLength + (-3)ï¼‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>position =&gt; å¯é€‰ã€‚æå–çš„å­—ç¬¦æ•°ã€‚é»˜è®¤æ˜¯strLength</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span>  </span>è¿”å›ä¸€ä¸ªä»åŸå­—ç¬¦ä¸²ä¸­æå–å‡ºæ¥çš„æ–°å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substr(<span class="number">1</span>)) <span class="comment">// ating</span></span><br><span class="line"><span class="comment">// è¿™é‡Œçš„-1å®é™…ä¸Šå°±æ˜¯ (6-1) ä¹Ÿå°±æ˜¯ 5 å³ str.slice(5)</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substr(<span class="number">-1</span>)) <span class="comment">// g</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å› ä¸ºé•¿åº¦ä¸èƒ½å°äº0,æ‰€ä»¥è¿”å›""</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substr(<span class="number">-1</span>,<span class="number">-2</span>)) <span class="comment">// ""</span></span><br></pre></td></tr></table></figure></div><blockquote><p>æ³¨æ„:åœ¨IE8ä¸‹,substr()æ–¹æ³•ä¼ é€’è´Ÿå€¼ä¼šè¿”å›åŸå§‹çš„å­—ç¬¦ä¸²,IE9ä¿®å¤äº†æ­¤BUG</p></blockquote><h2 id="substring"><a href="#substring" class="headerlink" title="substring"></a>substring</h2><p>substring() æ–¹æ³•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²åœ¨å¼€å§‹ç´¢å¼•åˆ°ç»“æŸç´¢å¼•ä¹‹é—´çš„ä¸€ä¸ªå­é›†, æˆ–ä»å¼€å§‹ç´¢å¼•ç›´åˆ°å­—ç¬¦ä¸²çš„æœ«å°¾çš„ä¸€ä¸ªå­é›†ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.substring(indexStart,indexEnd)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>indexStart =&gt; éœ€è¦æˆªå–çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ç´¢å¼•ï¼Œè¯¥å­—ç¬¦ä½œä¸ºè¿”å›çš„å­—ç¬¦ä¸²çš„é¦–å­—æ¯ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>indexEnd =&gt; å¯é€‰ã€‚ä¸€ä¸ª 0 åˆ°å­—ç¬¦ä¸²é•¿åº¦ä¹‹é—´çš„æ•´æ•°ï¼Œä»¥è¯¥æ•°å­—ä¸ºç´¢å¼•çš„å­—ç¬¦ä¸åŒ…å«åœ¨æˆªå–çš„å­—ç¬¦ä¸²å†…ã€‚</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span>  </span>åŒ…å«ç»™å®šå­—ç¬¦ä¸²çš„æŒ‡å®šéƒ¨åˆ†çš„æ–°å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substring(<span class="number">0</span>,<span class="number">3</span>)) <span class="comment">// gat</span></span><br><span class="line"><span class="comment">// å¦‚æœ indexStart å¤§äº indexEndï¼Œåˆ™ä¼šå˜æˆ str.substring(0,3)</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substring(<span class="number">3</span>,<span class="number">0</span>)) <span class="comment">// gat</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœä»»ä¸€å‚æ•°å°äº 0 æˆ–ä¸º NaNï¼Œåˆ™è¢«å½“ä½œ 0ã€‚</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substring(<span class="number">-2</span>,<span class="number">3</span>)) <span class="comment">// gat</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substring(<span class="literal">NaN</span>,<span class="number">3</span>)) <span class="comment">// gat</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(str.substring(<span class="number">4</span>,<span class="number">4</span>)) <span class="comment">// ""</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substring(<span class="number">0</span>)) <span class="comment">// gating</span></span><br><span class="line"><span class="built_in">console</span>.log(str.substring(<span class="number">0</span>,<span class="number">10</span>)) <span class="comment">// gating</span></span><br></pre></td></tr></table></figure></div><blockquote><p>substring æå–ä» indexStart åˆ° indexEndï¼ˆä¸åŒ…æ‹¬ï¼‰</p></blockquote><ul><li>å¦‚æœ indexStart ç­‰äº indexEndï¼Œsubstring è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚</li><li>å¦‚æœçœç•¥ indexEndï¼Œsubstring æå–å­—ç¬¦ä¸€ç›´åˆ°å­—ç¬¦ä¸²æœ«å°¾ã€‚</li><li>å¦‚æœä»»ä¸€å‚æ•°å°äº 0 æˆ–ä¸º NaNï¼Œåˆ™è¢«å½“ä½œ 0ã€‚</li><li>å¦‚æœä»»ä¸€å‚æ•°å¤§äº stringName.lengthï¼Œåˆ™è¢«å½“ä½œ stringName.lengthã€‚</li><li>å¦‚æœ indexStart å¤§äº indexEndï¼Œåˆ™ substring çš„æ‰§è¡Œæ•ˆæœå°±åƒä¸¤ä¸ªå‚æ•°è°ƒæ¢äº†ä¸€æ ·ã€‚</li></ul><h1 id="è½¬æ¢å¤§å°å†™ç›¸å…³"><a href="#è½¬æ¢å¤§å°å†™ç›¸å…³" class="headerlink" title="è½¬æ¢å¤§å°å†™ç›¸å…³"></a>è½¬æ¢å¤§å°å†™ç›¸å…³</h1><blockquote><p>æ³¨æ„: toLocaleLowerCaseã€toLocaleUpperCase æŒ‰ç…§æœ¬åœ°æ–¹å¼æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™ã€‚åªæœ‰å‡ ç§è¯­è¨€ï¼ˆå¦‚åœŸè€³å…¶è¯­ï¼‰å…·æœ‰åœ°æ–¹ç‰¹æœ‰çš„å¤§å°å†™æ˜ å°„ã€‚</p></blockquote><h2 id="toLowerCase"><a href="#toLowerCase" class="headerlink" title="toLowerCase"></a>toLowerCase</h2><p>toLowerCase() ä¼šå°†è°ƒç”¨è¯¥æ–¹æ³•çš„å­—ç¬¦ä¸²å€¼è½¬ä¸ºå°å†™å½¢å¼ï¼Œå¹¶è¿”å›ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.toLowerCase()</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span>  </span>ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºä¸²è½¬æ¢ä¸ºå°å†™çš„è°ƒç”¨å­—ç¬¦ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"GATING"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.toLowerCase()) <span class="comment">// gating</span></span><br></pre></td></tr></table></figure></div><h2 id="toLocaleLowerCase"><a href="#toLocaleLowerCase" class="headerlink" title="toLocaleLowerCase"></a>toLocaleLowerCase</h2><p>toLocaleLowerCase() æ ¹æ®ä»»ä½•ç‰¹å®šäºè¯­è¨€ç¯å¢ƒçš„æ¡ˆä¾‹æ˜ å°„ï¼Œå°†è¡¨ç¤ºè°ƒç”¨å­—ç¬¦ä¸²çš„æ–°å­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.toLocaleLowerCase()</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span>  </span>æ ¹æ®ä»»ä½•ç‰¹å®šäºè¯­è¨€ç¯å¢ƒçš„æ¡ˆä¾‹æ˜ å°„ï¼Œå°†è¡¨ç¤ºè°ƒç”¨å­—ç¬¦ä¸²çš„æ–°å­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"GATING"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.toLocaleLowerCase()) <span class="comment">// gating</span></span><br></pre></td></tr></table></figure></div><h2 id="toUpperCase"><a href="#toUpperCase" class="headerlink" title="toUpperCase"></a>toUpperCase</h2><p>toUpperCase() å°†è°ƒç”¨è¯¥æ–¹æ³•çš„å­—ç¬¦ä¸²å€¼è½¬æ¢ä¸ºå¤§å†™å½¢å¼ï¼Œå¹¶è¿”å›ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.toUpperCase()</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span>  </span>å°†è°ƒç”¨è¯¥æ–¹æ³•çš„å­—ç¬¦ä¸²å€¼è½¬æ¢ä¸ºå¤§å†™å½¢å¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.toUpperCase()) <span class="comment">// GATING</span></span><br></pre></td></tr></table></figure></div><h2 id="toLocaleUpperCase"><a href="#toLocaleUpperCase" class="headerlink" title="toLocaleUpperCase"></a>toLocaleUpperCase</h2><p>toLocaleUpperCase() å°†è°ƒç”¨è¯¥æ–¹æ³•çš„å­—ç¬¦ä¸²å€¼è½¬æ¢ä¸ºå¤§å†™å½¢å¼ï¼Œå¹¶è¿”å›ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.toLocaleUpperCase()</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span>  </span>ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œå³æ ¹æ®æœ¬åœ°åŒ–çš„å¤§å°å†™æ˜ å°„è§„åˆ™å°†è¾“å…¥çš„å­—ç¬¦ä¸²è½¬åŒ–æˆå¤§å†™å½¢å¼çš„ç»“æœã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.toLocaleUpperCase()) <span class="comment">// GATING</span></span><br></pre></td></tr></table></figure></div><h1 id="åˆ é™¤ç©ºç™½å­—ç¬¦ç›¸å…³"><a href="#åˆ é™¤ç©ºç™½å­—ç¬¦ç›¸å…³" class="headerlink" title="åˆ é™¤ç©ºç™½å­—ç¬¦ç›¸å…³"></a>åˆ é™¤ç©ºç™½å­—ç¬¦ç›¸å…³</h1><h2 id="trim"><a href="#trim" class="headerlink" title="trim"></a>trim</h2><p>trim() æ–¹æ³•ä¼šä»ä¸€ä¸ªå­—ç¬¦ä¸²çš„ä¸¤ç«¯åˆ é™¤ç©ºç™½å­—ç¬¦ã€‚åœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­çš„ç©ºç™½å­—ç¬¦æ˜¯æ‰€æœ‰çš„ç©ºç™½å­—ç¬¦ (space, tab, no-break space ç­‰) ä»¥åŠæ‰€æœ‰è¡Œç»ˆæ­¢ç¬¦å­—ç¬¦ï¼ˆå¦‚ LFï¼ŒCRï¼‰</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.trim()</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span>  </span>è¿”å›æ–¹æ³•ç§»é™¤åŸå­—ç¬¦ä¸²ä¸¤ç«¯ç«¯çš„è¿ç»­ç©ºç™½ç¬¦</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"   gating   "</span></span><br><span class="line"><span class="built_in">console</span>.log(str.trim()) <span class="comment">// "gating"</span></span><br></pre></td></tr></table></figure></div><h2 id="trimRight"><a href="#trimRight" class="headerlink" title="trimRight"></a>trimRight</h2><p>trimRight() æ–¹æ³•ä»ä¸€ä¸ªå­—ç¬¦ä¸²çš„å³ç«¯ç§»é™¤ç©ºç™½å­—ç¬¦ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.trimRight()</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span>  </span>è¿”å›æ–¹æ³•ç§»é™¤åŸå­—ç¬¦ä¸²å³ç«¯çš„è¿ç»­ç©ºç™½ç¬¦</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"gating   "</span></span><br><span class="line"><span class="built_in">console</span>.log(str.trimRight()) <span class="comment">// "gating"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¼å®¹ç”Ÿäº§ç¯å¢ƒ</span></span><br><span class="line"><span class="keyword">const</span> trimRight = <span class="function">(<span class="params">str</span>)=&gt;</span> str.replace(<span class="regexp">/(\s*$)/g</span>, <span class="string">""</span>)</span><br></pre></td></tr></table></figure></div><blockquote><p>è¯¥ç‰¹æ€§æ˜¯éæ ‡å‡†çš„ï¼Œè¯·å°½é‡ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å®ƒï¼</p></blockquote><h2 id="trimLeft"><a href="#trimLeft" class="headerlink" title="trimLeft"></a>trimLeft</h2><p>trimLeft() æ–¹æ³•ä»ä¸€ä¸ªå­—ç¬¦ä¸²çš„å·¦ç«¯ç§»é™¤ç©ºç™½å­—ç¬¦ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.trimLeft()</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span>  </span>è¿”å›æ–¹æ³•ç§»é™¤åŸå­—ç¬¦ä¸²å·¦ç«¯çš„è¿ç»­ç©ºç™½ç¬¦</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"  gating"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.trimLeft()) <span class="comment">// "gating"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¼å®¹ç”Ÿäº§ç¯å¢ƒ</span></span><br><span class="line"><span class="keyword">const</span> trimLeft = <span class="function">(<span class="params">str</span>)=&gt;</span> str.replace(<span class="regexp">/(^\s*)/g</span>, <span class="string">""</span>)</span><br></pre></td></tr></table></figure></div><blockquote><p>è¯¥ç‰¹æ€§æ˜¯éæ ‡å‡†çš„ï¼Œè¯·å°½é‡ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å®ƒï¼</p></blockquote><h1 id="ä¸¤ä¸ªä¸çŸ¥åçš„æ–¹æ³•"><a href="#ä¸¤ä¸ªä¸çŸ¥åçš„æ–¹æ³•" class="headerlink" title="ä¸¤ä¸ªä¸çŸ¥åçš„æ–¹æ³•"></a>ä¸¤ä¸ªä¸çŸ¥åçš„æ–¹æ³•</h1><h2 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="toString"></a>toString</h2><p>toString() æ–¹æ³•è¿”å›æŒ‡å®šå¯¹è±¡çš„å­—ç¬¦ä¸²å½¢å¼ã€‚</p><p>String å¯¹è±¡è¦†ç›–äº†Object å¯¹è±¡çš„ toString æ–¹æ³•ï¼›å¹¶æ²¡æœ‰ç»§æ‰¿ Object.toString()ã€‚å¯¹äº String å¯¹è±¡ï¼ŒtoString æ–¹æ³•è¿”å›è¯¥å¯¹è±¡çš„å­—ç¬¦ä¸²å½¢å¼ï¼Œå’Œ String.prototype.valueOf() æ–¹æ³•è¿”å›å€¼ä¸€æ ·</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.toString()</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span>  </span>è¿”å›æŒ‡å®šå¯¹è±¡çš„å­—ç¬¦ä¸²å½¢å¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">"gating"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(str.toString()) <span class="comment">// gating</span></span><br></pre></td></tr></table></figure></div><h2 id="valueOf-NaN"><a href="#valueOf-NaN" class="headerlink" title="valueOf"></a>valueOf</h2><p>valueOf() æ–¹æ³•è¿”å›ä¸€ä¸ªStringå¯¹è±¡çš„åŸå§‹å€¼ï¼ˆprimitive valueï¼‰ã€‚</p><p>String å¯¹è±¡çš„ valueOf æ–¹æ³•è¿”å›ä¸€ä¸ªStringå¯¹è±¡çš„åŸå§‹å€¼ã€‚è¯¥å€¼ç­‰åŒäºString.prototype.toString()ã€‚</p><p>è¯¥æ–¹æ³•é€šå¸¸åœ¨ JavaScript å†…éƒ¨è¢«è°ƒç”¨ï¼Œè€Œä¸æ˜¯åœ¨ä»£ç é‡Œæ˜¾ç¤ºè°ƒç”¨ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.valueOf()</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span>  </span>è¿”å›æŒ‡å®šå¯¹è±¡çš„å­—ç¬¦ä¸²å½¢å¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">"gating"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(str.valueOf()) <span class="comment">// gating</span></span><br></pre></td></tr></table></figure></div><h1 id="æ’åºç›¸å…³"><a href="#æ’åºç›¸å…³" class="headerlink" title="æ’åºç›¸å…³"></a>æ’åºç›¸å…³</h1><h2 id="localeCompare"><a href="#localeCompare" class="headerlink" title="localeCompare"></a>localeCompare</h2><p>localeCompare() æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°å­—æ¥æŒ‡ç¤ºä¸€ä¸ªå‚è€ƒå­—ç¬¦ä¸²æ˜¯å¦åœ¨æ’åºé¡ºåºå‰é¢æˆ–ä¹‹åæˆ–ä¸ç»™å®šå­—ç¬¦ä¸²ç›¸åŒã€‚</p><p>æ–°çš„ locales ã€ options å‚æ•°èƒ½è®©åº”ç”¨ç¨‹åºå®šåˆ¶å‡½æ•°çš„è¡Œä¸ºå³æŒ‡å®šç”¨æ¥æ’åºçš„è¯­è¨€ã€‚ locales å’Œ options å‚æ•°æ˜¯ä¾èµ–äºå…·ä½“å®ç°çš„ï¼Œåœ¨æ—§çš„å®ç°ä¸­è¿™ä¸¤ä¸ªå‚æ•°æ˜¯å®Œå…¨è¢«å¿½ç•¥çš„ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * str.localeCompare(compareString,locales,options)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>compareString =&gt; ç”¨æ¥æ¯”è¾ƒçš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;locales&#125;</span> </span>locales =&gt; å¯é€‰ã€‚ç”¨æ¥è¡¨ç¤ºä¸€ç§æˆ–å¤šç§è¯­è¨€æˆ–åŒºåŸŸçš„ä¸€ä¸ªç¬¦åˆ BCP 47 æ ‡å‡†çš„å­—ç¬¦ä¸²æˆ–ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ã€‚localeså‚æ•°çš„ä¸€èˆ¬å½¢å¼ä¸è§£é‡Šï¼Œ è¯¦æƒ…è¯·å‚è€ƒ MDN</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;options&#125;</span> </span>options =&gt; å¯é€‰ã€‚ æ”¯æŒä¸‹åˆ—çš„ä¸€äº›æˆ–å…¨éƒ¨å±æ€§çš„ä¸€ä¸ªå¯¹è±¡: è¯¦æƒ…è¯·å‚è€ƒ MDN</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span>  </span>å¦‚æœå¼•ç”¨å­—ç¬¦å­˜åœ¨äºæ¯”è¾ƒå­—ç¬¦ä¹‹å‰åˆ™ä¸ºè´Ÿæ•°; å¦‚æœå¼•ç”¨å­—ç¬¦å­˜åœ¨äºæ¯”è¾ƒå­—ç¬¦ä¹‹ååˆ™ä¸ºæ­£æ•°; ç›¸ç­‰çš„æ—¶å€™è¿”å› 0 .ä¸åŒæµè§ˆå™¨ä¹‹é—´ï¼ˆä»¥åŠä¸åŒæµè§ˆå™¨ç‰ˆæœ¬ä¹‹é—´ï¼‰è¿”å›çš„æ­£è´Ÿæ•°çš„å€¼å„æœ‰ä¸åŒ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"b"</span></span><br><span class="line"><span class="built_in">console</span>.log(str.localeCompare(<span class="string">"b"</span>)) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(str.localeCompare(<span class="string">"a"</span>)) <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(str.localeCompare(<span class="string">"c"</span>)) <span class="comment">// -1</span></span><br></pre></td></tr></table></figure></div><p>å®é™…ä¸Šï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ localeCompare å®ç°ä¸­æ–‡æ’åºäº†ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">"åŒ—äº¬"</span>,<span class="string">"ä¸Šæµ·"</span>,<span class="string">"æ·±åœ³"</span>,<span class="string">"å¹¿å·"</span>]</span><br><span class="line"><span class="keyword">let</span> res1 = arr.sort(<span class="function">(<span class="params">a,b</span>)=&gt;</span>a-b)</span><br><span class="line"><span class="comment">// ä¼ ç»Ÿçš„æ’åºæ–¹æ³•ï¼Œä½ ä¼šå‘ç°é¡ºåºæ˜¯æœ‰é—®é¢˜çš„</span></span><br><span class="line"><span class="built_in">console</span>.log(res1) <span class="comment">//Â ["åŒ—äº¬", "ä¸Šæµ·", "å¹¿å·", "æ·±åœ³"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡ localeCompare æˆ‘ä»¬å°±å®ç°äº†ä¸­æ–‡çš„æ’åºäº†</span></span><br><span class="line"><span class="keyword">let</span> res2 = arr.sort(<span class="function">(<span class="params">a,b</span>)=&gt;</span>a.localeCompare(<span class="built_in">String</span>(b)))</span><br><span class="line"><span class="built_in">console</span>.log(res2) <span class="comment">// ["åŒ—äº¬", "å¹¿å·", "ä¸Šæµ·", "æ·±åœ³"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½†æ˜¯å…¶å®è¿™ä¸ªè¿˜æ˜¯æ²¡æœ‰å®ç°æˆ‘ä»¬çš„éœ€æ±‚ï¼Œå‡è®¾æˆ‘ä»¬ æ•°ç»„æ—¢æœ‰æ•°å­—ã€è‹±æ–‡ã€ä¸­æ–‡ã€ç‰¹æ®Šç¬¦å·çš„è¯ï¼Œæˆ‘ä»¬çš„æ’åºå°±ä¸èƒ½è¿™ä¹ˆç®€å•çš„æ’åºäº†</span></span><br><span class="line"><span class="keyword">let</span> myData = [<span class="string">"åŒ—äº¬"</span>,<span class="string">"ä¸Šæµ·"</span>,<span class="string">"æ·±åœ³"</span>,<span class="string">"å¹¿å·"</span>,<span class="literal">null</span>,<span class="literal">undefined</span>,<span class="number">10</span>,<span class="number">2</span>,<span class="string">"apple"</span>,<span class="string">"bird"</span>,<span class="string">"banana"</span>]</span><br><span class="line"><span class="keyword">let</span> result = myData.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> r = a - b;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">isNaN</span>(r))&#123;</span><br><span class="line">        r = <span class="built_in">String</span>(a).localeCompare(<span class="built_in">String</span>(b));</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> r;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br></pre></td></tr></table></figure></div><blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/localeCompare" target="_blank" rel="noopener">localeCompareæ–¹æ³•ï¼Œååˆ†å»ºè®®çœ‹çœ‹MDN</a>ï¼Œå› ä¸ºæˆ‘å®åœ¨å¤ªèœäº† â”­â”®ï¹â”­â”®</p></blockquote><p>å½“æ¯”è¾ƒå¤§é‡å­—ç¬¦ä¸²æ—¶ï¼Œ æ¯”å¦‚æ¯”è¾ƒå¤§é‡æ•°ç»„æ—¶ï¼Œ æœ€å¥½åˆ›å»ºä¸€ä¸ª <code>[Intl.Collator](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Collator)</code> å¯¹è±¡å¹¶ä½¿ç”¨compare å±æ€§æ‰€æä¾›çš„å‡½æ•°ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Intl.Collator æ˜¯ç”¨äºè¯­è¨€æ•æ„Ÿå­—ç¬¦ä¸²æ¯”è¾ƒçš„ collatorsæ„é€ å‡½æ•°ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">letterSort</span>(<span class="params">lang, letters</span>) </span>&#123;</span><br><span class="line">  letters.sort(<span class="keyword">new</span> <span class="built_in">Intl</span>.Collator(lang).compare)</span><br><span class="line">  <span class="keyword">return</span> letters;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…·ä½“è¯·çœ‹ä¸Šé¢ MDN çš„è¯´æ˜</span></span><br><span class="line"><span class="built_in">console</span>.log(letterSort(<span class="string">'de'</span>, [<span class="string">'a'</span>,<span class="string">'z'</span>,<span class="string">'Ã¤'</span>])) <span class="comment">// ["a", "Ã¤", "z"]</span></span><br><span class="line"><span class="built_in">console</span>.log(letterSort(<span class="string">'sv'</span>, [<span class="string">'a'</span>,<span class="string">'z'</span>,<span class="string">'Ã¤'</span>])) <span class="comment">// ["a", "z", "Ã¤"]</span></span><br></pre></td></tr></table></figure></div><h1 id="æ–‡ä¸­æŸäº›çŸ¥è¯†ç‚¹å‚è€ƒé“¾æ¥"><a href="#æ–‡ä¸­æŸäº›çŸ¥è¯†ç‚¹å‚è€ƒé“¾æ¥" class="headerlink" title="æ–‡ä¸­æŸäº›çŸ¥è¯†ç‚¹å‚è€ƒé“¾æ¥"></a>æ–‡ä¸­æŸäº›çŸ¥è¯†ç‚¹å‚è€ƒé“¾æ¥</h1><p><a href="http://es6.ruanyifeng.com/#docs/string" target="_blank" rel="noopener">é˜®è€å¸ˆçš„es6å…¥é—¨ï¼Œå­—ç¬¦ä¸²çš„æ‰©å±• æ¨èï¼</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/localeCompare" target="_blank" rel="noopener">localeCompareæ–¹æ³•ï¼Œååˆ†å»ºè®®çœ‹çœ‹MDN</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Collator" target="_blank" rel="noopener">Intl.Collator</a></p><p><a href="https://github.com/sunmaobin/sunmaobin.github.io/issues/43" target="_blank" rel="noopener">Array.sorté«˜çº§ç”¨æ³•</a></p><p><a href="https://zhuanlan.zhihu.com/p/33335629" target="_blank" rel="noopener">JavaScript æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ±‰å­—</a></p><p><a href="http://deerchao.net/tutorials/regex/regex.htm" target="_blank" rel="noopener">æ­£åˆ™è¡¨è¾¾å¼30åˆ†é’Ÿå…¥é—¨æ•™ç¨‹ æ¨è</a></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è¿™é‡Œæˆ‘å°±ä¸åšæ€»ç»“äº†ï¼Œç•™ä¸ªå°ä½œä¸šç»™å„ä½è§‚ä¼—è€çˆ·ï¼Œè‡ªå·±æ€»ç»“ä¸‹å’¯</p><p>æœ€åï¼Œæ„Ÿè°¢å„ä½è§‚ä¼—è€çˆ·è§‚çœ‹å•¦O(âˆ©_âˆ©)O</p>]]></content>
      
      
      <categories>
          
          <category> è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°ç»„çš„æ–¹æ³•çš„æ€»ç»“å’Œä½¿ç”¨</title>
      <link href="/2018-12-25/%E6%95%B0%E7%BB%84%E7%9A%84%E6%96%B9%E6%B3%95%E7%9A%84%E6%80%BB%E7%BB%93%E5%92%8C%E4%BD%BF%E7%94%A8/"/>
      <url>/2018-12-25/%E6%95%B0%E7%BB%84%E7%9A%84%E6%96%B9%E6%B3%95%E7%9A%84%E6%80%BB%E7%BB%93%E5%92%8C%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>JavaScript ä¸­çš„æ•°ç»„æ˜¯ä¸€ä¸ªå¾ˆç‰¹åˆ«çš„å­˜åœ¨ï¼Œä»–ä¸åƒJava ï¼Œä¸“é—¨æäº† List è¿™æ ·çš„ä¸€æ•´å¥—çš„ä¸œè¥¿ï¼ŒJSç»ˆç«¯æ•°ç»„å®Œå…¨å¯ä»¥å½“ä½œæ ˆæˆ–é˜Ÿåˆ—æ¥ä½¿ç”¨ï¼Œæ•°ç»„çš„å››å¤§æ“ä½œï¼špopã€pushã€shiftã€unshiftã€‚</p><p>æˆ‘ä»Šå¤©å†™è¿™ç¯‡åšå®¢ï¼Œä¸»è¦æ˜¯å†™ä¸€ç¯‡æ€»ç»“ï¼Œä»¥å¤‡ä»¥åæŸ¥çœ‹ã€‚</p><p>å¯¹äºæ•°ç»„æ–¹æ³•ï¼Œæˆ‘ä»¬åº”è¯¥å…³å¿ƒçš„åªæœ‰ä¸¤ä¸ªé—®é¢˜ï¼Œ<b>è¿”å›å€¼æ˜¯ä»€ä¹ˆ,ä¼šä¸ä¼šä¿®æ”¹åŸæ•°ç»„ï¼Œ</b>å…¸å‹çš„ä¾‹å­å°±æ˜¯ splice() å’Œ slice() è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œå¸¦ç€è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œæˆ‘ä¼šç›¸å¯¹è¯¦ç»†çš„æ€»ç»“ä¸€ä¸‹æˆ‘ä»¬<b>æ•°ç»„åŸå‹ï¼ˆæ•°ç»„å®ä¾‹ï¼‰</b>é‡Œé¢æ‰€æ‹¥æœ‰çš„æ–¹æ³•å’Œå±æ€§ï¼Œå¦å¤–ï¼Œå¸¸ç”¨çš„æ–¹æ³•ï¼Œæˆ‘ä¼šåŠ ä¸Šä¸€ä¸ªå¸¸ç”¨çš„ä¾‹å­ï¼ˆåº”ç”¨åœºæ™¯ï¼‰</p><blockquote><p>ps: æ–‡ä¸­æœ‰äº›å’Œæ•°ç»„æ–¹æ³•ä¸æ˜¯å¤ªç›¸å…³çš„çŸ¥è¯†ï¼Œä»…ä¾›äº†è§£ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ï¼ˆå®é™…ä¸Šä¹Ÿæ˜¯æˆ‘å¤ªåƒåœ¾äº†0 0ï¼Œä¸æ‡‚ï¼‰ å…·ä½“æˆ‘ä¼šåœ¨æ–‡æœ«æ”¾ä¸Šç›¸å…³é“¾æ¥</p></blockquote><p>ä¸‹é¢å°†ä¸å†é‡å¤è¿™äº›æ–¹æ³•çš„ callbak çš„å‚æ•°</p><blockquote><p>ï¼ˆfindã€findIndexã€someã€filterã€everyã€mapï¼ŒforEachï¼ŒflatMapï¼‰çš„callback è¢«è°ƒç”¨æ—¶ä¼šä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼šå½“å‰å…ƒç´ å€¼ï¼Œå…ƒç´ çš„ç´¢å¼•ï¼ŒåŸæ•°ç»„ã€‚è¿™äº›æ–¹æ³•éƒ½ä¸ä¼šæ”¹å˜å…ƒç´ ç»„ï¼Œä½†æ˜¯ï¼Œå¦‚æœä½ æ“ä½œç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œé‚£å°±ä¸ä¸€æ ·äº†ã€‚</p></blockquote><h1 id="æ•°ç»„çš„å±æ€§"><a href="#æ•°ç»„çš„å±æ€§" class="headerlink" title="æ•°ç»„çš„å±æ€§"></a>æ•°ç»„çš„å±æ€§</h1><h2 id="length"><a href="#length" class="headerlink" title="length"></a>length</h2><p>length æ˜¯Arrayçš„å®ä¾‹å±æ€§ã€‚è¿”å›æˆ–è®¾ç½®ä¸€ä¸ªæ•°ç»„ä¸­çš„å…ƒç´ ä¸ªæ•°ã€‚è¯¥å€¼æ˜¯ä¸€ä¸ªæ— ç¬¦å· 32-bit æ•´æ•°ï¼Œå¹¶ä¸”æ€»æ˜¯å¤§äºæ•°ç»„æœ€é«˜é¡¹çš„ä¸‹æ ‡ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.length) <span class="comment">// 3</span></span><br></pre></td></tr></table></figure></div><p>length å±æ€§çš„å€¼æ˜¯ä¸€ä¸ª 0 åˆ° 232-1 çš„æ•´æ•°ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">4294967296</span>) <span class="comment">// 2çš„32æ¬¡æ–¹ = 4294967296 </span></span><br><span class="line"><span class="comment">// Uncaught RangeError: Invalid array lengthæ— æ•ˆçš„æ•°ç»„é•¿åº¦</span></span><br><span class="line"><span class="built_in">console</span>.log(arr1)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr2 = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">-100</span>) <span class="comment">// è´Ÿå·</span></span><br><span class="line"><span class="comment">// Uncaught RangeError: Invalid array lengthæ— æ•ˆçš„æ•°ç»„é•¿åº¦</span></span><br><span class="line"><span class="built_in">console</span>.log(arr1)</span><br></pre></td></tr></table></figure></div><p>ä½ è¿˜å¯ä»¥é€šè¿‡ length æ¥æˆªæ–­æ•°ç»„</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">arr.length = <span class="number">2</span></span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [1,2]</span></span><br></pre></td></tr></table></figure></div><h2 id="Array-length-å±æ€§çš„å±æ€§ç‰¹æ€§"><a href="#Array-length-å±æ€§çš„å±æ€§ç‰¹æ€§" class="headerlink" title="Array.length å±æ€§çš„å±æ€§ç‰¹æ€§"></a>Array.length å±æ€§çš„å±æ€§ç‰¹æ€§</h2><table><thead><tr><th>å±æ€§</th><th>å€¼</th></tr></thead><tbody><tr><td>writable</td><td>true</td></tr><tr><td>enumerable</td><td>false</td></tr><tr><td>configurable</td><td>false</td></tr></tbody></table><ul><li>Writable ï¼šå¦‚æœè®¾ç½®ä¸ºfalseï¼Œè¯¥å±æ€§å€¼å°†ä¸èƒ½è¢«ä¿®æ”¹ã€‚</li><li>Configurable ï¼šå¦‚æœè®¾ç½®ä¸ºfalseï¼Œåˆ é™¤æˆ–æ›´æ”¹ä»»ä½•å±æ€§éƒ½å°†ä¼šå¤±è´¥ã€‚</li><li>Enumerable ï¼šå¦‚æœè®¾ç½®ä¸º true ï¼Œå±æ€§å¯ä»¥é€šè¿‡è¿­ä»£å™¨foræˆ–forâ€¦inè¿›è¡Œè¿­ä»£ã€‚</li></ul><p>çœ‹åˆ°è¿™é‡Œï¼Œä¼°è®¡æœ‰äººæƒ³é—®ï¼Œæ—¢ç„¶ length å±æ€§æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä¸å¯ä»¥é‡å®šä¹‰æ•°ç»„å¯¹è±¡çš„ length å±æ€§å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯ä¼šå—åˆ°ä¸€èˆ¬çš„é‡å®šä¹‰é™åˆ¶ã€‚å¹¶ä¸”å¹¶ä¸æ˜¯æ‰€æœ‰æµè§ˆå™¨éƒ½å…è®¸ Array.length çš„é‡å®šä¹‰ã€‚è¿™é‡Œå°±ä¸å±•å¼€äº†ï¼Œå¦‚æœ‰å…´è¶£è¯·çœ‹<a href="#æ–‡ä¸­æŸäº›çŸ¥è¯†ç‚¹å‚è€ƒé“¾æ¥">æ–‡æœ«çš„é“¾æ¥</a></p><h1 id="æ•°ç»„çš„é™æ€æ–¹æ³•"><a href="#æ•°ç»„çš„é™æ€æ–¹æ³•" class="headerlink" title="æ•°ç»„çš„é™æ€æ–¹æ³•"></a>æ•°ç»„çš„é™æ€æ–¹æ³•</h1><h2 id="Array-isArray"><a href="#Array-isArray" class="headerlink" title="Array.isArray()"></a>Array.isArray()</h2><p>åœ¨è¿™ä¸ªæ–¹æ³•æ²¡å‡ºæ¥ä¹‹å‰ï¼Œå¾ˆå¤šæ—©æœŸç±»åº“æ˜¯é€šè¿‡ä¸‹åˆ—ä»£ç æ¥åˆ¤æ–­çš„ï¼ˆé¸­å­åˆ¤æ–­ï¼‰ï¼Œæ–‡æœ«é€ä¸Šç‰ä¼¯å¤§ä½¬çš„é“¾æ¥ï¼Œå¸Œæœ›å¤§å®¶éƒ½å»äº†è§£ä¸€ä¸‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isArray</span>(<span class="params">object</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> object != <span class="literal">null</span> &amp;&amp; <span class="keyword">typeof</span> object === <span class="string">"object"</span> &amp;&amp;</span><br><span class="line">    <span class="string">'splice'</span> <span class="keyword">in</span> object &amp;&amp; <span class="string">'join'</span> <span class="keyword">in</span> object</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>ç›´åˆ°åæ¥æœ‰ç¥äººå‡ºå±±ï¼Œå†™å‡ºäº†ä¸€æ®µç¥ç ï¼Œæ­¤ä»£ç ä¸€å‡ºï¼Œå¤©ä¸‹éœ‡æƒŠï¼Œå¼•å„è·¯ç±»åº“ç«æŠ˜è…°ã€‚è¿™ä»£ç ï¼Œä¸ä¸ä»…ä»…è§£å†³äº†æ•°ç»„çš„é—®é¢˜ï¼Œè€Œæ˜¯è§£å†³äº† isXxx ä¸€ç±»é—®é¢˜ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isArray</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(obj) === <span class="string">"[object Array]"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>å¯¹ç°ä»£æµè§ˆå™¨æ¥è¯´ï¼Œä¸Šé¢çš„å†™æ³•ï¼Œä¾æ—§è®©å„å¤§æµè§ˆå™¨å¼•æ“çš„å®ç°è€…è§‰å¾—å¾ˆéš¾å—ï¼Œäºæ˜¯ç›´æ¥æœ‰äº†Array.isArrayæ–¹æ³•</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Array.isArray(obj)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>obj =&gt; éœ€è¦æ£€æµ‹çš„å€¼</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Boolean&#125;</span> </span>å¦‚æœå¯¹è±¡æ˜¯ Arrayï¼Œ åˆ™ä¸ºtrue;å¦åˆ™ä¸ºfalseã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="built_in">Array</span>.isArray([]) <span class="comment">// true</span></span><br><span class="line"> <span class="comment">// é²œä¸ºäººçŸ¥çš„äº‹å®ï¼šå…¶å® Array.prototype ä¹Ÿæ˜¯ä¸€ä¸ªæ•°ç»„ã€‚</span></span><br><span class="line"><span class="built_in">Array</span>.isArray(<span class="built_in">Array</span>.prototype) <span class="comment">// true</span></span><br></pre></td></tr></table></figure></div><h2 id="Array-from"><a href="#Array-from" class="headerlink" title="Array.from()"></a>Array.from()</h2><p>Array.from() æ–¹æ³•ä»ä¸€ä¸ªç±»ä¼¼æ•°ç»„æˆ–å¯è¿­ä»£å¯¹è±¡ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„å®ä¾‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Array.from(arrayLike,mapFn,thisArg)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Integer&#125;</span> </span>arrayLike =&gt; æƒ³è¦è½¬æ¢æˆæ•°ç»„çš„ä¼ªæ•°ç»„å¯¹è±¡æˆ–å¯è¿­ä»£å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Function&#125;</span> </span>mapFn =&gt; å¦‚æœæŒ‡å®šäº†è¯¥å‚æ•°ï¼Œæ–°æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä¼šæ‰§è¡Œè¯¥å›è°ƒå‡½æ•°ã€‚ (å¯é€‰)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>thisArg =&gt; å¯é€‰å‚æ•°ï¼Œæ‰§è¡Œå›è°ƒå‡½æ•° mapFn æ—¶ this å¯¹è±¡ã€‚ (å¯é€‰)</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Array </span>ä¸€ä¸ªæ–°çš„æ•°ç»„å®ä¾‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.from(<span class="string">'foo'</span>)) <span class="comment">// ["f", "o", "o"]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.from([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], x =&gt; x + x)) <span class="comment">// [2,4,6]</span></span><br><span class="line"><span class="built_in">Array</span>.from([<span class="number">1</span>],<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>) <span class="comment">// &#123;a: 1&#125;</span></span><br><span class="line">    <span class="keyword">return</span> x</span><br><span class="line">&#125;,&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure></div><p>å®é™…ä¸Šï¼Œé€šè¿‡ Array.from æˆ‘ä»¬å°±å¯ä»¥åšä¸€äº›å¾ˆå¸¸è§çš„äº‹äº†ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„æ•°ç»„å»é‡åˆå¹¶</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> combine = <span class="function">(<span class="params">...arg</span>)=&gt;</span>&#123;</span><br><span class="line">     <span class="keyword">let</span> arr = [].concat.apply([], arg); </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(arr));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> m = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>], n = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>]; </span><br><span class="line"><span class="built_in">console</span>.log(combine(m,n)) <span class="comment">// [1, 2, 3, 4];</span></span><br></pre></td></tr></table></figure></div><h2 id="Array-of"><a href="#Array-of" class="headerlink" title="Array.of()"></a>Array.of()</h2><p>Array.of() æ–¹æ³•åˆ›å»ºä¸€ä¸ªå…·æœ‰å¯å˜æ•°é‡å‚æ•°çš„æ–°æ•°ç»„å®ä¾‹ï¼Œè€Œä¸è€ƒè™‘å‚æ•°çš„æ•°é‡æˆ–ç±»å‹ã€‚</p><p>Array.of() å’Œ Array æ„é€ å‡½æ•°ä¹‹é—´çš„åŒºåˆ«åœ¨äºå¤„ç†æ•´æ•°å‚æ•°ï¼šArray.of(7) åˆ›å»ºä¸€ä¸ªå…·æœ‰å•ä¸ªå…ƒç´  7 çš„æ•°ç»„ï¼Œè€Œ Array(7) åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º7çš„ç©ºæ•°ç»„ï¼ˆæ³¨æ„ï¼šè¿™æ˜¯æŒ‡ä¸€ä¸ªæœ‰7ä¸ªç©ºä½çš„æ•°ç»„ï¼Œè€Œä¸æ˜¯ç”±7ä¸ªundefinedç»„æˆçš„æ•°ç»„ï¼‰ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Array.of(elementN)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>elementN =&gt; ä»»æ„ä¸ªå‚æ•°ï¼Œå°†æŒ‰é¡ºåºæˆä¸ºè¿”å›æ•°ç»„ä¸­çš„å…ƒç´ ã€‚</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&#125;</span> </span>æ–°çš„ Array å®ä¾‹ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">7</span>);       <span class="comment">// [7] </span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">// [1, 2, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>(<span class="number">7</span>);          <span class="comment">// [ , , , , , , ]</span></span><br><span class="line"><span class="built_in">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);    <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure></div><h1 id="æ‹·è´å¡«å……ç›¸å…³"><a href="#æ‹·è´å¡«å……ç›¸å…³" class="headerlink" title="æ‹·è´å¡«å……ç›¸å…³"></a>æ‹·è´å¡«å……ç›¸å…³</h1><h2 id="concat"><a href="#concat" class="headerlink" title="concat"></a>concat</h2><p>concat() æ–¹æ³•ç”¨äºåˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ªæ•°ç»„ã€‚æ­¤æ–¹æ³•<b>ä¸ä¼šæ›´æ”¹åŸæ•°ç»„</b>ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ã€‚</p><p>æœ‰ä¸ªé™ç»´çš„ä¾‹å­ä¼šåœ¨ reduce() ï¼Œè¿™é‡Œå°±ä¸è¿‡è®²è§£äº†ï¼Œé¿å…é‡å¤</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * old_array.concat(valueN])</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>valueN =&gt; å°†æ•°ç»„å’Œ/æˆ–å€¼è¿æ¥æˆæ–°æ•°ç»„ã€‚è¯¦æƒ…è¯·å‚é˜…ä¸‹æ–‡æè¿°ã€‚</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&#125;</span> </span>æ–°çš„ Array å®ä¾‹</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr1.concat(arr2)) <span class="comment">// [1,2,3,4,5,6]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr1) <span class="comment">// [1,2,3]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr2) <span class="comment">// [4,5,6]</span></span><br></pre></td></tr></table></figure></div><p>å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ concat å’Œ reduce æ­é…ï¼Œå®ç°æ‰å¹³åŒ–æ•°ç»„(é™ç»´)</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¤šç»´æ•°ç»„å˜æˆä¸€ç»´æ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&#125;</span> </span>arr =&gt; æ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Boolean&#125;</span> </span>shallow =&gt; æ•°ç»„å°†åªå‡å°‘ä¸€ç»´çš„åµŒå¥—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> flatten =  <span class="function">(<span class="params">arr, shallow</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (shallow) &#123;</span><br><span class="line">      <span class="keyword">var</span> arr = arr.reduce(<span class="function">(<span class="params">arr, val</span>) =&gt;</span> arr.concat(val), [])</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> arr = arr.reduce(<span class="function">(<span class="params">arr, val</span>) =&gt;</span> arr.concat(<span class="built_in">Array</span>.isArray(val) ? flatten(val) : val), [])</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,[<span class="number">2</span>,[<span class="number">3</span>,<span class="number">4</span>]],<span class="number">5</span>]</span><br><span class="line"><span class="built_in">console</span>.log(flatten(arr,<span class="literal">true</span>)) <span class="comment">// [1, 2, [3,4], 5]</span></span><br><span class="line"><span class="built_in">console</span>.log(flatten(arr)) <span class="comment">// [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure></div><h2 id="copyWithin"><a href="#copyWithin" class="headerlink" title="copyWithin"></a>copyWithin</h2><p>copyWithin() æ–¹æ³•æµ…å¤åˆ¶æ•°ç»„çš„ä¸€éƒ¨åˆ†åˆ°åŒä¸€æ•°ç»„ä¸­çš„å¦ä¸€ä¸ªä½ç½®ï¼Œå¹¶è¿”å›å®ƒï¼Œè€Œä¸ä¿®æ”¹å…¶å¤§å°ã€‚æ­¤æ–¹æ³•<b>ä¼šæ›´æ”¹ç°æœ‰æ•°ç»„</b></p><blockquote><p>psï¼šå‚æ•°target,startå’Œend å¿…é¡»ä¸ºæ•´æ•°ã€‚å¦‚æœstartä¸ºè´Ÿï¼Œåˆ™å…¶æŒ‡å®šçš„ç´¢å¼•ä½ç½®ç­‰åŒäºlength+startï¼Œlengthä¸ºæ•°ç»„çš„é•¿åº¦ã€‚endä¹Ÿæ˜¯å¦‚æ­¤ã€‚(copyWithin,fillç­‰æ–¹æ³•çš„startã€endå‚æ•°åŒç†)</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * arr.copyWithin(target,start,end)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>target =&gt; 0 ä¸ºåŸºåº•çš„ç´¢å¼•ï¼Œå¤åˆ¶åºåˆ—åˆ°è¯¥ä½ç½®ã€‚å¦‚æœæ˜¯è´Ÿæ•°ï¼Œtarget å°†ä»æœ«å°¾å¼€å§‹è®¡ç®—ã€‚</span></span><br><span class="line"><span class="comment">å¦‚æœ target å¤§äºç­‰äº arr.lengthï¼Œå°†ä¼šä¸å‘ç”Ÿæ‹·è´ã€‚å¦‚æœ target åœ¨ start ä¹‹åï¼Œå¤åˆ¶çš„åºåˆ—å°†è¢«ä¿®æ”¹ä»¥ç¬¦åˆ arr.lengthã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>start =&gt; 0 ä¸ºåŸºåº•çš„ç´¢å¼•ï¼Œå¼€å§‹å¤åˆ¶å…ƒç´ çš„èµ·å§‹ä½ç½®ã€‚å¦‚æœæ˜¯è´Ÿæ•°ï¼Œstart å°†ä»æœ«å°¾å¼€å§‹è®¡ç®—</span></span><br><span class="line"><span class="comment">å¦‚æœ start è¢«å¿½ç•¥ï¼ŒcopyWithin å°†ä¼šä»0å¼€å§‹å¤åˆ¶ (å¯é€‰)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>end =&gt; 0 ä¸ºåŸºåº•çš„ç´¢å¼•ï¼Œå¼€å§‹å¤åˆ¶å…ƒç´ çš„ç»“æŸä½ç½®ã€‚copyWithin å°†ä¼šæ‹·è´åˆ°è¯¥ä½ç½®ï¼Œä½†ä¸åŒ…æ‹¬ end è¿™ä¸ªä½ç½®çš„å…ƒç´ ã€‚å¦‚æœæ˜¯è´Ÿæ•°ï¼Œ end å°†ä»æœ«å°¾å¼€å§‹è®¡ç®—ã€‚å¦‚æœ end è¢«å¿½ç•¥ï¼ŒcopyWithin å°†ä¼šå¤åˆ¶åˆ° arr.length (å¯é€‰)</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&#125;</span> </span>æ”¹å˜äº†çš„æ•°ç»„</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.copyWithin(<span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>)) <span class="comment">// [4, 2, 3, 4, 5]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [4, 2, 3, 4, 5]</span></span><br><span class="line"><span class="comment">// -2è¡¨ç¤ºå¤åˆ¶åˆ° ([1, 2, 3, 4, 5].length - 2) çš„ä½ç½®å»ï¼Œè¿™é‡ŒæŒ‡3</span></span><br><span class="line"><span class="built_in">console</span>.log([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">-2</span>)) <span class="comment">// [1, 2, 3, 1, 2]</span></span><br><span class="line"><span class="built_in">console</span>.log([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">0</span>, <span class="number">3</span>)) <span class="comment">// [4, 5, 3, 4, 5]</span></span><br><span class="line"><span class="built_in">console</span>.log([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">-2</span>, <span class="number">-3</span>, <span class="number">-1</span>)) <span class="comment">// [1, 2, 3, 3, 4]</span></span><br></pre></td></tr></table></figure></div><h2 id="fill"><a href="#fill" class="headerlink" title="fill"></a>fill</h2><p>fill() æ–¹æ³•ç”¨ä¸€ä¸ªå›ºå®šå€¼å¡«å……ä¸€ä¸ªæ•°ç»„ä¸­ä»èµ·å§‹ç´¢å¼•åˆ°ç»ˆæ­¢ç´¢å¼•å†…çš„å…¨éƒ¨å…ƒç´ ã€‚<b>ä¸åŒ…æ‹¬ç»ˆæ­¢ç´¢å¼•</b>ã€‚æ­¤æ–¹æ³•<b>ä¼šæ›´æ”¹ç°æœ‰æ•°ç»„</b></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * arr.fill(value,start,end)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>value =&gt; ç”¨æ¥å¡«å……æ•°ç»„å…ƒç´ çš„å€¼ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>start =&gt; èµ·å§‹ç´¢å¼•ï¼Œé»˜è®¤å€¼ä¸º0ã€‚(å¯é€‰)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>end =&gt; èµ·å§‹ç´¢å¼•ï¼Œé»˜è®¤å€¼ä¸ºthis.lengthã€‚(å¯é€‰)</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&#125;</span> </span>ä¿®æ”¹åçš„æ•°ç»„</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.fill(<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>)) <span class="comment">// [1, 2, 0, 0]</span></span><br><span class="line"><span class="built_in">console</span>.log([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].fill(<span class="number">4</span>)) <span class="comment">// [4,4,4]</span></span><br><span class="line"><span class="built_in">console</span>.log([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].fill(<span class="number">4</span>,<span class="number">1</span>)) <span class="comment">// [1,4,4]</span></span><br><span class="line"><span class="comment">// è¿™é‡Œçš„-1å®é™…ä¸Šå°±æ˜¯ (-1+3) ä¹Ÿå°±æ˜¯ 2</span></span><br><span class="line"><span class="built_in">console</span>.log([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].fill(<span class="number">4</span>,<span class="number">-1</span>)) <span class="comment">// [1,2,4]</span></span><br><span class="line"><span class="built_in">console</span>.log([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].fill(<span class="number">4</span>,<span class="number">-2</span>,<span class="number">-1</span>)) <span class="comment">// [1,4,3]</span></span><br></pre></td></tr></table></figure></div><h1 id="æœç´¢æŸ¥æ‰¾ç›¸å…³"><a href="#æœç´¢æŸ¥æ‰¾ç›¸å…³" class="headerlink" title="æœç´¢æŸ¥æ‰¾ç›¸å…³"></a>æœç´¢æŸ¥æ‰¾ç›¸å…³</h1><h2 id="find"><a href="#find" class="headerlink" title="find"></a>find</h2><p>find() æ–¹æ³•è¿”å›æ•°ç»„ä¸­æ»¡è¶³æä¾›çš„æµ‹è¯•å‡½æ•°çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ã€‚å¦åˆ™è¿”å› undefinedã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * arr.find(callback,thisArg)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Function&#125;</span> </span>callback =&gt; ç”¨æ¥æµ‹è¯•æ¯ä¸ªå…ƒç´ çš„å‡½æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>thisArg =&gt; å¯é€‰å‚æ•°ï¼Œæ‰§è¡Œå›è°ƒå‡½æ•° mapFn æ—¶ this å¯¹è±¡ã€‚ (å¯é€‰)</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * callback è¢«è°ƒç”¨æ—¶ä¼šä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼šå½“å‰å…ƒç´ å€¼ï¼Œå…ƒç´ çš„ç´¢å¼•ï¼ŒåŸæ•°ç»„ã€‚</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> *  è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>å½“æŸä¸ªå…ƒç´ é€šè¿‡ callback çš„æµ‹è¯•æ—¶ï¼Œè¿”å›æ•°ç»„ä¸­æœ€å…ˆé€šè¿‡çš„å€¼ï¼Œå¦åˆ™è¿”å› undefined</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.find(<span class="function"><span class="params">item</span>=&gt;</span>item&gt;<span class="number">2</span>)) <span class="comment">// 3</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.find(<span class="function"><span class="params">item</span>=&gt;</span>item&gt;<span class="number">6</span>)) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></div><p>å®é™…åº”ç”¨åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¯¹è±¡çš„å±æ€§æŸ¥æ‰¾æ•°ç»„é‡Œçš„å¯¹è±¡</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> people = [&#123;</span><br><span class="line">    name:<span class="string">'gating'</span>,</span><br><span class="line">    age:<span class="number">18</span></span><br><span class="line">&#125;,&#123;</span><br><span class="line">    name:<span class="string">'blue'</span>,</span><br><span class="line">    age:<span class="number">15</span></span><br><span class="line">&#125;,&#123;</span><br><span class="line">    name:<span class="string">'family'</span>,</span><br><span class="line">    age:<span class="number">18</span></span><br><span class="line">&#125;]</span><br><span class="line"><span class="keyword">const</span> findName = <span class="function">(<span class="params">arr</span>) =&gt;</span> arr.name === <span class="string">'gating'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(people.find(findName)) <span class="comment">// &#123;name: "gating", age: 18&#125;</span></span><br></pre></td></tr></table></figure></div><h2 id="findIndex"><a href="#findIndex" class="headerlink" title="findIndex"></a>findIndex</h2><p>findIndex()æ–¹æ³•è¿”å›æ•°ç»„ä¸­æ»¡è¶³æä¾›çš„æµ‹è¯•å‡½æ•°çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ã€‚å¦åˆ™è¿”å›-1ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * arr.findIndex(callback,thisArg)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Function&#125;</span> </span>callback =&gt; ç”¨æ¥æµ‹è¯•æ¯ä¸ªå…ƒç´ çš„å‡½æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>thisArg =&gt; å¯é€‰å‚æ•°ï¼Œæ‰§è¡Œå›è°ƒå‡½æ•° mapFn æ—¶ this å¯¹è±¡ã€‚ (å¯é€‰)</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * callback è¢«è°ƒç”¨æ—¶ä¼šä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼šå½“å‰å…ƒç´ å€¼ï¼Œå…ƒç´ çš„ç´¢å¼•ï¼ŒåŸæ•°ç»„ã€‚</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> *  è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>å½“æŸä¸ªå…ƒç´ é€šè¿‡ callback çš„æµ‹è¯•æ—¶ï¼Œè¿”å›æ•°ç»„ä¸­æœ€å…ˆé€šè¿‡çš„å€¼çš„ç´¢å¼•å€¼ï¼Œå¦åˆ™è¿”å› -1</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.findIndex(<span class="function"><span class="params">item</span>=&gt;</span>item&gt;<span class="number">2</span>)) <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.findIndex(<span class="function"><span class="params">item</span>=&gt;</span>item&gt;<span class="number">6</span>)) <span class="comment">// -1</span></span><br></pre></td></tr></table></figure></div><p>å®é™…åº”ç”¨åœºæ™¯åŒ find() ,è¿™é‡Œå°±ä¸é‡å¤äº†</p><h2 id="indexOf"><a href="#indexOf" class="headerlink" title="indexOf"></a>indexOf</h2><p>indexOf()æ–¹æ³•è¿”å›åœ¨æ•°ç»„ä¸­å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªç»™å®šå…ƒç´ çš„ç¬¬ä¸€ä¸ªç´¢å¼•ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å›-1ã€‚</p><blockquote><p>indexOf å’Œ lastIndexOf éƒ½æ˜¯ä½¿ç”¨ === æ¥è¿›è¡Œåˆ¤æ–­</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * arr.indexOf(searchElement,fromIndex)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>searchElement =&gt; è¦æŸ¥æ‰¾çš„å…ƒç´ </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>fromIndex =&gt; å¼€å§‹æŸ¥æ‰¾çš„ä½ç½®ã€‚å¦‚æœè¯¥ç´¢å¼•å€¼å¤§äºæˆ–ç­‰äºæ•°ç»„é•¿åº¦ï¼Œæ„å‘³ç€ä¸ä¼šåœ¨æ•°ç»„é‡ŒæŸ¥æ‰¾ï¼Œè¿”å›-1ã€‚å¦‚æœå‚æ•°ä¸­æä¾›çš„ç´¢å¼•å€¼æ˜¯ä¸€ä¸ªè´Ÿå€¼ï¼Œåˆ™å°†å…¶ä½œä¸ºæ•°ç»„æœ«å°¾çš„ä¸€ä¸ªæŠµæ¶ˆï¼Œå³-1è¡¨ç¤ºä»æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹æŸ¥æ‰¾ï¼Œ-2è¡¨ç¤ºä»å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹æŸ¥æ‰¾ ï¼Œä»¥æ­¤ç±»æ¨ã€‚ æ³¨æ„ï¼šå¦‚æœå‚æ•°ä¸­æä¾›çš„ç´¢å¼•å€¼æ˜¯ä¸€ä¸ªè´Ÿå€¼ï¼Œå¹¶ä¸æ”¹å˜å…¶æŸ¥æ‰¾é¡ºåºï¼ŒæŸ¥æ‰¾é¡ºåºä»ç„¶æ˜¯ä»å‰å‘åæŸ¥è¯¢æ•°ç»„ã€‚å¦‚æœæŠµæ¶ˆåçš„ç´¢å¼•å€¼ä»å°äº0ï¼Œåˆ™æ•´ä¸ªæ•°ç»„éƒ½å°†ä¼šè¢«æŸ¥è¯¢ã€‚å…¶é»˜è®¤å€¼ä¸º0. (å¯é€‰)</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> *  è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>é¦–ä¸ªè¢«æ‰¾åˆ°çš„å…ƒç´ åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•ä½ç½®; è‹¥æ²¡æœ‰æ‰¾åˆ°åˆ™è¿”å› -1</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'a'</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.indexOf(<span class="string">'a'</span>)) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.indexOf(<span class="string">'a'</span>,<span class="number">-1</span>)) <span class="comment">// 3</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.indexOf(<span class="string">'d'</span>)) <span class="comment">// -1</span></span><br></pre></td></tr></table></figure></div><p>å®é™…åº”ç”¨åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬ä¸å¯èƒ½ä¹‹åªæ‰¾å‡ºä¸€ä¸ªåŒåå…ƒç´ çš„ç´¢å¼•å€¼ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æ‰¾å‡ºåŒåçš„å…ƒç´ çš„æ‰€æœ‰ä½ç½®ï¼Œäºæ˜¯ä¹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å­˜æ”¾ç´¢å¼•çš„æ•°ç»„</span></span><br><span class="line"><span class="keyword">const</span> indices = [];</span><br><span class="line"><span class="keyword">const</span> arr = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'a'</span>]</span><br><span class="line"><span class="comment">// è¦æŸ¥æ‰¾çš„å…ƒç´ </span></span><br><span class="line"><span class="keyword">const</span> searchElement = <span class="string">'a'</span></span><br><span class="line"><span class="comment">// å½“å‰çš„ç´¢å¼•</span></span><br><span class="line"><span class="keyword">let</span> idx = arr.indexOf(searchElement);</span><br><span class="line"><span class="keyword">while</span> (idx != <span class="number">-1</span>) &#123;</span><br><span class="line">  indices.push(idx);</span><br><span class="line">  idx = arr.indexOf(searchElement, idx + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(indices) <span class="comment">// [0, 3]</span></span><br></pre></td></tr></table></figure></div><h2 id="lastIndexOf"><a href="#lastIndexOf" class="headerlink" title="lastIndexOf"></a>lastIndexOf</h2><p>lastIndexOf() æ–¹æ³•è¿”å›æŒ‡å®šå…ƒç´ ï¼ˆä¹Ÿå³æœ‰æ•ˆçš„ JavaScript å€¼æˆ–å˜é‡ï¼‰åœ¨æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªçš„ç´¢å¼•ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å› -1ã€‚ä»æ•°ç»„çš„åé¢å‘å‰æŸ¥æ‰¾ï¼Œä» fromIndex å¤„å¼€å§‹ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * arr.lastIndexOf(searchElement,fromIndex = arr.length - 1)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>searchElement =&gt; è¦æŸ¥æ‰¾çš„å…ƒç´ </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>fromIndex =&gt; ä»æ­¤ä½ç½®å¼€å§‹é€†å‘æŸ¥æ‰¾ã€‚é»˜è®¤ä¸ºæ•°ç»„çš„é•¿åº¦å‡ 1ï¼Œå³æ•´ä¸ªæ•°ç»„éƒ½è¢«æŸ¥æ‰¾ã€‚å¦‚æœè¯¥å€¼å¤§äºæˆ–ç­‰äºæ•°ç»„çš„é•¿åº¦ï¼Œåˆ™æ•´ä¸ªæ•°ç»„ä¼šè¢«æŸ¥æ‰¾ã€‚å¦‚æœä¸ºè´Ÿå€¼ï¼Œå°†å…¶è§†ä¸ºä»æ•°ç»„æœ«å°¾å‘å‰çš„åç§»ã€‚å³ä½¿è¯¥å€¼ä¸ºè´Ÿï¼Œæ•°ç»„ä»ç„¶ä¼šè¢«ä»åå‘å‰æŸ¥æ‰¾ã€‚å¦‚æœè¯¥å€¼ä¸ºè´Ÿæ—¶ï¼Œå…¶ç»å¯¹å€¼å¤§äºæ•°ç»„é•¿åº¦ï¼Œåˆ™æ–¹æ³•è¿”å› -1ï¼Œå³æ•°ç»„ä¸ä¼šè¢«æŸ¥æ‰¾ã€‚ (å¯é€‰)</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> *  è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>æ•°ç»„ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ï¼Œå¦‚æœªæ‰¾åˆ°è¿”å›-1</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'a'</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.lastIndexOf(<span class="string">'a'</span>)) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.lastIndexOf(<span class="string">'a'</span>,<span class="number">-1</span>)) <span class="comment">// 3</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.lastIndexOf(<span class="string">'d'</span>)) <span class="comment">// -1</span></span><br></pre></td></tr></table></figure></div><p>å®ä¾‹ï¼šæŸ¥æ‰¾æ‰€æœ‰å…ƒç´ </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> indices = []</span><br><span class="line"><span class="keyword">const</span> array = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'a'</span>, <span class="string">'d'</span>]</span><br><span class="line"><span class="keyword">const</span> element = <span class="string">'a'</span></span><br><span class="line"><span class="keyword">let</span> idx = array.lastIndexOf(element)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (idx != <span class="number">-1</span>) &#123;</span><br><span class="line">  indices.push(idx);</span><br><span class="line">  idx = (idx &gt; <span class="number">0</span> ? array.lastIndexOf(element, idx - <span class="number">1</span>) : <span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(indices) <span class="comment">// [4, 2, 0];</span></span><br></pre></td></tr></table></figure></div><blockquote><p>æ³¨æ„ï¼Œæˆ‘ä»¬è¦å•ç‹¬å¤„ç†idx==0æ—¶çš„æƒ…å†µï¼Œå› ä¸ºå¦‚æœæ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¿½ç•¥äº†fromIndexå‚æ•°åˆ™ç¬¬ä¸€ä¸ªå…ƒç´ æ€»ä¼šè¢«æŸ¥æ‰¾ã€‚è¿™ä¸åŒäºindexOfæ–¹æ³•</p></blockquote><h2 id="includes"><a href="#includes" class="headerlink" title="includes"></a>includes</h2><p>includes() æ–¹æ³•ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ä¸€ä¸ªæŒ‡å®šçš„å€¼ï¼Œæ ¹æ®æƒ…å†µï¼Œå¦‚æœåŒ…å«åˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å›falseã€‚</p><ol><li><p>å¦‚æœfromIndex å¤§äºç­‰äºæ•°ç»„é•¿åº¦ ï¼Œåˆ™è¿”å› false ã€‚è¯¥æ•°ç»„ä¸ä¼šè¢«æœç´¢</p></li><li><p>å¦‚æœ fromIndex ä¸ºè´Ÿå€¼ï¼Œè®¡ç®—å‡ºçš„ç´¢å¼•å°†ä½œä¸ºå¼€å§‹æœç´¢searchElementçš„ä½ç½®ã€‚å¦‚æœè®¡ç®—å‡ºçš„ç´¢å¼•å°äº 0ï¼Œåˆ™æ•´ä¸ªæ•°ç»„éƒ½ä¼šè¢«æœç´¢ã€‚</p></li></ol><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * arr.includes(searchElement,fromIndex = 0)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>searchElement =&gt; è¦æŸ¥æ‰¾çš„å…ƒç´ </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>fromIndex =&gt; ä»è¯¥ç´¢å¼•å¤„å¼€å§‹æŸ¥æ‰¾ searchElementã€‚å¦‚æœä¸ºè´Ÿå€¼ï¼Œåˆ™æŒ‰å‡åºä» array.length - fromIndex çš„ç´¢å¼•å¼€å§‹æœç´¢ã€‚é»˜è®¤ä¸º 0ã€‚ (å¯é€‰)</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> *  è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Boolean&#125;</span> </span>ä¸€ä¸ª Boolean å€¼</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="literal">NaN</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.includes(<span class="number">1</span>, <span class="number">-100</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.includes(<span class="number">1</span>, <span class="number">5</span>)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure></div><p>å®é™…çš„åº”ç”¨åœºæ™¯ï¼Œé€šè¿‡å¯ä»¥è§£å†³æˆ‘ä»¬æ‰¾å‡ºä¸¤ä¸ªæ•°ç»„çš„ æ•°ç»„äº¤é›† å’Œ æ•°ç»„å·®é›†</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ•°ç»„äº¤é›†</span></span><br><span class="line"><span class="keyword">const</span> intersection = <span class="function">(<span class="params">arr1, arr2</span>) =&gt;</span> arr1.filter(<span class="function"><span class="params">v</span> =&gt;</span> arr2.includes(v))</span><br><span class="line"><span class="comment">// æ•°ç»„å·®é›†</span></span><br><span class="line"><span class="keyword">const</span> difference = <span class="function">(<span class="params">arr1, arr2</span>) =&gt;</span> [...arr1, ...arr2].filter(<span class="function"><span class="params">v</span> =&gt;</span> !arr1.includes(v) || !arr2.includes(v))</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">const</span> arr2 = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="built_in">console</span>.log(intersection(arr1,arr2)) <span class="comment">// [2, 3]</span></span><br><span class="line"><span class="built_in">console</span>.log(difference(arr1,arr2)) <span class="comment">// [1, 4]</span></span><br></pre></td></tr></table></figure></div><h1 id="æ“ä½œç›¸å…³"><a href="#æ“ä½œç›¸å…³" class="headerlink" title="æ“ä½œç›¸å…³"></a>æ“ä½œç›¸å…³</h1><h2 id="slice"><a href="#slice" class="headerlink" title="slice"></a>slice</h2><p>slice() æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„å¯¹è±¡ï¼Œè¿™ä¸€å¯¹è±¡æ˜¯ä¸€ä¸ªç”± beginå’Œ endï¼ˆä¸åŒ…æ‹¬endï¼‰å†³å®šçš„åŸæ•°ç»„çš„æµ…æ‹·è´ã€‚æ­¤æ–¹æ³•<b>ä¸ä¼šæ›´æ”¹åŸæ•°ç»„</b>ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Array.slice(begin,end)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>begin =&gt; ä»è¯¥ç´¢å¼•å¤„å¼€å§‹æå–åŸæ•°ç»„ä¸­çš„å…ƒç´ ï¼ˆä»0å¼€å§‹ï¼‰ã€‚ï¼ˆå¯é€‰ï¼‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>end =&gt; åœ¨è¯¥ç´¢å¼•å¤„ç»“æŸæå–åŸæ•°ç»„å…ƒç´ ï¼ˆä»0å¼€å§‹ï¼‰ã€‚sliceä¼šæå–åŸæ•°ç»„ä¸­ç´¢å¼•ä» begin åˆ° end çš„æ‰€æœ‰å…ƒç´ ï¼ˆåŒ…å«beginï¼Œä½†ä¸åŒ…å«endï¼‰ã€‚ï¼ˆå¯é€‰ï¼‰</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&#125;</span> </span>ä¸€ä¸ªå«æœ‰æå–å…ƒç´ çš„æ–°æ•°ç»„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.slice()) <span class="comment">// [1,2,3,4,5]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.slice(<span class="number">2</span>)) <span class="comment">// [3,4,5]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.slice(<span class="number">2</span>, <span class="number">4</span>)) <span class="comment">// [3,4]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// -1è¡¨ç¤ºå¤åˆ¶åˆ° ([1, 2, 3, 4, 5].length - 1) çš„ä½ç½®å»ï¼Œè¿™é‡ŒæŒ‡4</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.slice(<span class="number">-1</span>)) <span class="comment">// [5]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.slice(<span class="number">-2</span>,<span class="number">-1</span>)) <span class="comment">// [4]</span></span><br></pre></td></tr></table></figure></div><p>å®é™…åº”ç”¨ä¸­ï¼Œslice å°±å¯ä»¥åšå¾ˆå¤šäº‹æƒ…å•¦ï¼Œæ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬çš„æ•°ç»„åˆ‡å‰²æˆ–è€…ç”ŸæˆäºŒç»´æ•°ç»„</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿”å›ä¸€ä¸ªæ ¹æ®subArrayNumçš„äºŒç»´æ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&#125;</span> </span>arr =&gt; ä¸€ç»´æ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>subArrayNum =&gt; æ¯ç»„å…ƒç´ çš„ä¸ªæ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> chunk = <span class="function">(<span class="params">arr, subArrayNum</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> result = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i += subArrayNum) &#123;</span><br><span class="line">        result.push(arr.slice(i, i + subArrayNum));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(chunk([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],<span class="number">2</span>))  <span class="comment">// [[1,2], [3,4]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ›å»ºä¸€ä¸ªæ•°ç»„åˆ‡ç‰‡ï¼Œ ä»arrayæ•°ç»„çš„èµ·å§‹å…ƒç´ å¼€å§‹æå–nä¸ªå…ƒç´ ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&#125;</span> </span>arr =&gt; è¦æ£€ç´¢çš„æ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>n =&gt; è¦æå–çš„å…ƒç´ ä¸ªæ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> take = <span class="function">(<span class="params">arr, n</span>) =&gt;</span> arr.slice(<span class="number">0</span>, n ? n : <span class="number">1</span>)</span><br><span class="line"><span class="built_in">console</span>.log(take([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],<span class="number">2</span>)) <span class="comment">// [1, 2]</span></span><br></pre></td></tr></table></figure></div><h2 id="splice"><a href="#splice" class="headerlink" title="splice"></a>splice</h2><p>splice()æ–¹æ³•é€šè¿‡åˆ é™¤ç°æœ‰å…ƒç´ å’Œ/æˆ–æ·»åŠ æ–°å…ƒç´ æ¥ä¿®æ”¹æ•°ç»„,å¹¶ä»¥æ•°ç»„è¿”å›åŸæ•°ç»„ä¸­è¢«ä¿®æ”¹çš„å†…å®¹ã€‚æ­¤æ–¹æ³•<b>ä¼šæ›´æ”¹ç°æœ‰æ•°ç»„</b>ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Array.splice(start,deleteCount,itemN)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>start =&gt; æŒ‡å®šä¿®æ”¹çš„å¼€å§‹ä½ç½®ï¼ˆä»0è®¡æ•°ï¼‰ã€‚å¦‚æœè¶…å‡ºäº†æ•°ç»„çš„é•¿åº¦ï¼Œåˆ™ä»æ•°ç»„æœ«å°¾å¼€å§‹æ·»åŠ å†…å®¹ï¼›å¦‚æœæ˜¯è´Ÿå€¼ï¼Œåˆ™è¡¨ç¤ºä»æ•°ç»„æœ«ä½å¼€å§‹çš„ç¬¬å‡ ä½ï¼ˆä»-1è®¡æ•°ï¼‰ï¼›å¦‚æœè´Ÿæ•°çš„ç»å¯¹å€¼å¤§äºæ•°ç»„çš„é•¿åº¦ï¼Œåˆ™è¡¨ç¤ºå¼€å§‹ä½ç½®ä¸ºç¬¬0ä½ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Int&#125;</span> </span>deleteCount  =&gt; æ•´æ•°ï¼Œè¡¨ç¤ºè¦ç§»é™¤çš„æ•°ç»„å…ƒç´ çš„ä¸ªæ•°ã€‚å¦‚æœdeleteCountè¢«çœç•¥ï¼Œåˆ™å…¶ç›¸å½“äº(arr.length - start)ã€‚ï¼ˆå¯é€‰ï¼‰ </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>itemN  =&gt; è¦æ·»åŠ è¿›æ•°ç»„çš„å…ƒç´ ,ä»start ä½ç½®å¼€å§‹ã€‚å¦‚æœä¸æŒ‡å®šï¼Œåˆ™ splice() å°†åªåˆ é™¤æ•°ç»„å…ƒç´ ã€‚ï¼ˆå¯é€‰ï¼‰</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&#125;</span> </span>ç”±è¢«åˆ é™¤çš„å…ƒç´ ç»„æˆçš„ä¸€ä¸ªæ•°ç»„ã€‚å¦‚æœåªåˆ é™¤äº†ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™è¿”å›åªåŒ…å«ä¸€ä¸ªå…ƒç´ çš„æ•°ç»„ã€‚å¦‚æœæ²¡æœ‰åˆ é™¤å…ƒç´ ï¼Œåˆ™è¿”å›ç©ºæ•°ç»„ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">const</span> res = arr.splice(<span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [1,2,3]</span></span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// []</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = arr.splice(<span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [1,2]</span></span><br><span class="line"><span class="built_in">console</span>.log(result) <span class="comment">// [3]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// -1è¡¨ç¤ºå¤åˆ¶åˆ° ([1,2].length - 1) çš„ä½ç½®å»ï¼Œè¿™é‡ŒæŒ‡1</span></span><br><span class="line">arr.splice(<span class="number">-1</span>, <span class="number">1</span>)</span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åªæœ‰ä¸€ä¸ªå‚æ•°æ—¶ fruits.splice(2) ç›¸å½“äº fruits.splice(2,fruits.length-1)</span></span><br><span class="line"><span class="keyword">const</span> fruits = [<span class="string">'apple'</span>,<span class="string">'banana'</span>,<span class="string">'orange'</span>,<span class="string">'pear'</span>]</span><br><span class="line"><span class="keyword">const</span> res1 = fruits.splice(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">console</span>.log(fruits) <span class="comment">// ["apple", "banana"]</span></span><br><span class="line"><span class="built_in">console</span>.log(res1) <span class="comment">// ["orange", "pear"]</span></span><br></pre></td></tr></table></figure></div><blockquote><p>å› ä¸º js ä¸­åªæœ‰ splice è¿™ä¸ªæ–¹æ³•åˆ é™¤æ•°ç»„å…ƒç´ ï¼Œå¹¶ä¸”ä¼šä¿®æ”¹æ•°ç»„é•¿åº¦ï¼Œæ‰€ä»¥ä»–çš„å®é™…åº”ç”¨åœºæ™¯è¿˜æŒºå¤šçš„0 0ï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰å¤ªå¥½çš„ä¾‹å­å¯ä»¥è·ç¦»</p></blockquote><h2 id="push"><a href="#push" class="headerlink" title="push"></a>push</h2><p>push() æ–¹æ³•å°†ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ æ·»åŠ åˆ°æ•°ç»„çš„æœ«å°¾ï¼Œå¹¶è¿”å›è¯¥æ•°ç»„çš„æ–°é•¿åº¦ã€‚ æ­¤æ–¹æ³•<b>ä¼šæ›´æ”¹ç°æœ‰æ•°ç»„</b>ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Array.push(elementN)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>elementN =&gt; è¢«æ·»åŠ åˆ°æ•°ç»„æœ«å°¾çš„å…ƒç´ ã€‚</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>å½“è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œæ–°çš„ length å±æ€§å€¼å°†è¢«è¿”å›ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.push(<span class="number">4</span>)) <span class="comment">// 4</span></span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [1,2,3,4]</span></span><br></pre></td></tr></table></figure></div><p>pushã€popã€shiftã€unshift æ–¹æ³•æœ‰æ„å…·æœ‰é€šç”¨æ€§ã€‚è¯¥æ–¹æ³•å’Œ call() æˆ– apply() ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œå¯åº”ç”¨åœ¨ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ä¸Šã€‚è¿™ä¸ªæ¯”è¾ƒæœ‰æ„ä¹‰ï¼Œæ‰€ä»¥å•ç‹¬åœ¨è¿™é‡Œé€ä¸Š<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/push#%E5%90%88%E5%B9%B6%E4%B8%A4%E4%B8%AA%E6%95%B0%E7%BB%84" target="_blank" rel="noopener">MDNçš„é“¾æ¥</a>ï¼Œå½“ç„¶ä¾‹å­ä¹Ÿæ˜¯MDNçš„O(âˆ©_âˆ©)O</p><blockquote><p>åƒæ•°ç»„ä¸€æ ·ä½¿ç”¨å¯¹è±¡è¿™ä¸ªä¾‹å­ pushã€popã€shiftã€unshift å››ä¸ªæ–¹æ³•å†™æ³•å¾ˆç±»ä¼¼ï¼Œè¿™é‡Œå°±é‡å¤å†™äº†</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆå¹¶ä¸¤ä¸ªæ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> vegetables = [<span class="string">'parsnip'</span>, <span class="string">'potato'</span>]</span><br><span class="line"><span class="keyword">var</span> moreVegs = [<span class="string">'celery'</span>, <span class="string">'beetroot'</span>]</span><br><span class="line"><span class="comment">// å°†ç¬¬äºŒä¸ªæ•°ç»„èåˆè¿›ç¬¬ä¸€ä¸ªæ•°ç»„</span></span><br><span class="line"><span class="comment">// ç›¸å½“äº vegetables.push('celery', 'beetroot')</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.push.apply(vegetables, moreVegs)</span><br><span class="line"><span class="built_in">console</span>.log(vegetables)  <span class="comment">// ['parsnip', 'potato', 'celery', 'beetroot']</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// åƒæ•°ç»„ä¸€æ ·ä½¿ç”¨å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    length: <span class="number">0</span>,</span><br><span class="line">    addElem: <span class="function"><span class="keyword">function</span> <span class="title">addElem</span> (<span class="params">elem</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// obj.length is automatically incremented </span></span><br><span class="line">        <span class="comment">// every time an element is added.</span></span><br><span class="line">        [].push.call(<span class="keyword">this</span>, elem);</span><br><span class="line">    &#125;,</span><br><span class="line">    popElem: <span class="function"><span class="keyword">function</span> <span class="title">addElem</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// obj.length is automatically incremented </span></span><br><span class="line">        <span class="comment">// every time an element is added.</span></span><br><span class="line">        <span class="keyword">return</span> [].pop.call(<span class="keyword">this</span>);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.addElem(&#123;&#125;)</span><br><span class="line">obj.addElem(&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(obj.length) <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.popElem()) <span class="comment">// &#123;a: 1&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.length) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure></div><h2 id="pop"><a href="#pop" class="headerlink" title="pop"></a>pop</h2><p>pop()æ–¹æ³•ä»æ•°ç»„ä¸­åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ çš„å€¼ã€‚æ­¤æ–¹æ³•æ›´æ”¹æ•°ç»„çš„é•¿åº¦ã€‚æ­¤æ–¹æ³•<b>ä¼šæ›´æ”¹ç°æœ‰æ•°ç»„</b>ã€‚</p><blockquote><p>å¦‚æœä½ åœ¨ä¸€ä¸ªç©ºæ•°ç»„ä¸Šè°ƒç”¨ pop()ï¼Œå®ƒè¿”å› undefinedã€‚</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Array.pop()</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>ä»æ•°ç»„ä¸­åˆ é™¤çš„å…ƒç´ (å½“æ•°ç»„ä¸ºç©ºæ—¶è¿”å›undefined)ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.pop()) <span class="comment">// 3</span></span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [1,2]</span></span><br></pre></td></tr></table></figure></div><h2 id="shift"><a href="#shift" class="headerlink" title="shift"></a>shift</h2><p>shift() æ–¹æ³•ä»æ•°ç»„ä¸­åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ çš„å€¼ã€‚æ­¤æ–¹æ³•æ›´æ”¹æ•°ç»„çš„é•¿åº¦ã€‚æ­¤æ–¹æ³•<b>ä¼šæ›´æ”¹ç°æœ‰æ•°ç»„</b>ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Array.shift()</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>ä»æ•°ç»„ä¸­åˆ é™¤çš„å…ƒç´ (å½“æ•°ç»„ä¸ºç©ºæ—¶è¿”å›undefined)ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.shift()) <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [2,3]</span></span><br></pre></td></tr></table></figure></div><h2 id="unshift"><a href="#unshift" class="headerlink" title="unshift"></a>unshift</h2><p>unshift() æ–¹æ³•å°†ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ æ·»åŠ åˆ°æ•°ç»„çš„å¼€å¤´ï¼Œå¹¶è¿”å›è¯¥æ•°ç»„çš„æ–°é•¿åº¦ã€‚æ­¤æ–¹æ³•<b>ä¼šæ›´æ”¹ç°æœ‰æ•°ç»„</b>ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Array.unshift(elementN)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>elementN =&gt; è¦æ·»åŠ åˆ°æ•°ç»„å¼€å¤´çš„å…ƒç´ ã€‚</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>å½“ä¸€ä¸ªå¯¹è±¡è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œè¿”å›å…¶ length å±æ€§å€¼ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.unshift(<span class="number">1</span>,<span class="number">2</span>)) <span class="comment">// 5</span></span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [1,2,3,4,5]</span></span><br></pre></td></tr></table></figure></div><blockquote><p>ä½†å®é™…ä¸Šï¼Œæˆ‘ä»¬ä¸å»ºè®®ç”¨ unshift æ–¹æ³•å¾€å‰é¢æ·»åŠ å…ƒç´ ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿä»åŸç†å°±å¯ä»¥çŸ¥é“ï¼Œunshift()çš„æ•ˆç‡æ˜¯è¾ƒä½çš„ã€‚åŸå› æ˜¯ï¼Œå®ƒæ¯æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œéƒ½è¦æŠŠç°æœ‰å…ƒç´ å¾€ä¸‹ç§»ä¸€ä¸ªä½ç½®ã€‚</p></blockquote><p>ä¸‹é¢æˆ‘ä»¬ç®€å•æµ‹è¯•ä¸€ä¸‹ï¼Œunshift å’Œ push çš„æ€§èƒ½åŒºåˆ«</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.time(<span class="string">'unshiftæ‰€ç”¨æ—¶é—´'</span>)</span><br><span class="line"><span class="keyword">const</span> unshift = []</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123; ã€€ã€€</span><br><span class="line">  unshift.unshift(i)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">'unshiftæ‰€ç”¨æ—¶é—´'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">'pushæ‰€ç”¨æ—¶é—´'</span>)</span><br><span class="line"><span class="keyword">const</span> push = []</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123; ã€€ã€€</span><br><span class="line">  push.push(i)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">'pushæ‰€ç”¨æ—¶é—´'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">'reverseæ‰€ç”¨æ—¶é—´'</span>)</span><br><span class="line">push.reverse(); </span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">'reverseæ‰€ç”¨æ—¶é—´'</span>)</span><br></pre></td></tr></table></figure></div><p>å¤§å®¶å¯æ˜¯å¤åˆ¶ä¸€ä¸‹è¿™æ®µä»£ç ï¼Œåœ¨æˆ‘ä»¬æ•°æ®é‡ä¸æ˜¯ç‰¹åˆ«å¤§çš„æ—¶å€™ï¼Œä»–ä»¬çš„æ•ˆç‡å·®åˆ«å‡ åå€ï¼Œå› æ­¤ï¼Œå¹³æ—¶è¿˜æ˜¯è¦æ…ç”¨unshift()ï¼Œç‰¹åˆ«æ˜¯å¯¹å¤§æ•°ç»„ã€‚æ­¤æ–¹æ³•<b>ä¼šæ›´æ”¹ç°æœ‰æ•°ç»„</b>ã€‚</p><p>ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ reverse å’Œ push çš„æ–¹æ³•å®ç°æˆ‘ä»¬ unshift ï¼Œæ¯”å¦‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.unshift(<span class="number">1</span>,<span class="number">2</span>)) <span class="comment">// 5</span></span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [1,2,3,4,5]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr2 = [<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="comment">// ä»å‰ä¸€ä¸ªä»£ç çŸ¥é“reverseçš„æ€§èƒ½ä¹Ÿå¾ˆå¿«</span></span><br><span class="line">arr2.reverse().push(<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">arr2.reverse()</span><br><span class="line"><span class="built_in">console</span>.log(arr2) <span class="comment">// [1,2,3,4,5]</span></span><br></pre></td></tr></table></figure></div><h2 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h2><p>sort() æ–¹æ³•ç”¨åŸåœ°ç®—æ³•å¯¹æ•°ç»„çš„å…ƒç´ è¿›è¡Œæ’åºï¼Œå¹¶è¿”å›æ•°ç»„ã€‚æ’åºç®—æ³•ç°åœ¨æ˜¯ç¨³å®šçš„ã€‚é»˜è®¤æ’åºé¡ºåºæ˜¯æ ¹æ®å­—ç¬¦ä¸²Unicodeç ç‚¹ã€‚æ­¤æ–¹æ³•<b>ä¼šæ›´æ”¹ç°æœ‰æ•°ç»„</b>ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Array.sort(compareFunction)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>compareFunction =&gt; ç”¨æ¥æŒ‡å®šæŒ‰æŸç§é¡ºåºè¿›è¡Œæ’åˆ—çš„å‡½æ•°ã€‚å¦‚æœçœç•¥ï¼Œå…ƒç´ æŒ‰ç…§è½¬æ¢ä¸ºçš„å­—ç¬¦ä¸²çš„å„ä¸ªå­—ç¬¦çš„Unicodeä½ç‚¹è¿›è¡Œæ’åºã€‚(å¯é€‰)</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&#125;</span> </span>æ’åºåçš„æ•°ç»„ã€‚è¯·æ³¨æ„ï¼Œæ•°ç»„å·²åŸåœ°æ’åºï¼Œå¹¶ä¸”ä¸è¿›è¡Œå¤åˆ¶ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> months = [<span class="string">'March'</span>, <span class="string">'Jan'</span>, <span class="string">'Feb'</span>, <span class="string">'Dec'</span>];</span><br><span class="line">months.sort() </span><br><span class="line"><span class="built_in">console</span>.log(months) <span class="comment">// ["Dec", "Feb", "Jan", "March"]</span></span><br></pre></td></tr></table></figure></div><blockquote><p>å¦‚æœæ²¡æœ‰æŒ‡æ˜ compareFunction ï¼Œé‚£ä¹ˆå…ƒç´ ä¼šæŒ‰ç…§è½¬æ¢ä¸ºçš„å­—ç¬¦ä¸²çš„è¯¸ä¸ªå­—ç¬¦çš„Unicodeä½ç‚¹è¿›è¡Œæ’åºã€‚ä¾‹å¦‚ â€œBananaâ€ ä¼šè¢«æ’åˆ—åˆ° â€œcherryâ€ ä¹‹å‰ã€‚å½“æ•°å­—æŒ‰ç”±å°åˆ°å¤§æ’åºæ—¶ï¼Œ9 å‡ºç°åœ¨ 80 ä¹‹å‰ï¼Œä½†å› ä¸ºï¼ˆæ²¡æœ‰æŒ‡æ˜ compareFunctionï¼‰ï¼Œæ¯”è¾ƒçš„æ•°å­—ä¼šå…ˆè¢«è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥åœ¨Unicodeé¡ºåºä¸Š â€œ80â€ è¦æ¯” â€œ9â€ è¦é å‰ã€‚</p></blockquote><p>æ‰€ä»¥æˆ‘ä»¬æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜äº†ï¼Œå½“ç„¶è¦ä½¿ç”¨æˆ‘ä»¬çš„æ¯”è¾ƒå‡½æ•°å•¦ï¼Œè€Œä¸”é€šè¿‡æˆ‘ä»¬çš„æ¯”è¾ƒå‡½æ•°ï¼Œå¯ä»¥å®ç°å¾ˆå¤šæˆ‘ä»¬éœ€è¦çš„æ•ˆæœ</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="string">"1"</span>,<span class="number">2</span>,<span class="string">"11"</span>,<span class="number">3</span>,<span class="string">"21"</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.sort()) <span class="comment">// ["1", "11", 2, "21", 3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡æ¯”è¾ƒå‡½æ•°è§£å†³è¯¥é—®é¢˜</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.sort(<span class="function">(<span class="params">a,b</span>)=&gt;</span>a-b)) <span class="comment">// ["1", 2, 3, "11", "21"]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å†æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ¯”è¾ƒå‡½æ•°å®ç°å¯¹æ•°ç»„å¯¹è±¡çš„æ’åº</span></span><br><span class="line"><span class="keyword">const</span> people = [&#123;<span class="attr">name</span>:<span class="string">'gating'</span>,<span class="attr">age</span>:<span class="number">18</span>&#125;,&#123;<span class="attr">name</span>:<span class="string">'family'</span>,<span class="attr">age</span>:<span class="number">16</span>&#125;,&#123;<span class="attr">name</span>:<span class="string">'blue'</span>,<span class="attr">age</span>:<span class="number">21</span>&#125;]</span><br><span class="line">people.sort(<span class="function">(<span class="params">a,b</span>)=&gt;</span>a.age - b.age) <span class="comment">// [&#123;name:'family',age:16&#125;,&#123;name:'gating',age:18&#125;,&#123;name:'blue',age:21&#125;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“ç„¶ï¼Œé€šè¿‡ sort + Math.random å¯ä»¥å¾ˆå·§å¦™çš„å®ç°æ•°ç»„æ´—ç‰Œï¼ˆæ•°ç»„ä¹±åºï¼‰çš„ç®—æ³•ï¼ˆå½“ç„¶ï¼Œè¿™ä¸ªä¹Ÿæ˜¯ä¸æ¨èçš„ï¼Œä¸è¿‡ä»–å¯ä»¥ç”¨åœ¨å°é¡¹ç›®ä¸­ï¼Œå½“ä½œä¸€ä¸ªå°æŠ€å·§ï¼‰</span></span><br><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">numbers.sort(<span class="function"><span class="params">()</span>=&gt;</span><span class="built_in">Math</span>.random()<span class="number">-0.5</span>) <span class="comment">// å¤šå°è¯•å‡ æ¬¡ï¼Œçœ‹çœ‹æ¯æ¬¡å‡ºæ¥çš„ç»“æœæ˜¯ä¸æ˜¯ä¸ä¸€æ ·çš„</span></span><br></pre></td></tr></table></figure></div><blockquote><p>å…³äºæ•°ç»„ä¹±åºï¼Œæ­£ç¡®çš„è§£æ³•åº”è¯¥æ˜¯ Fisherâ€“Yates Shuffleï¼Œå¤æ‚åº¦ O(n)ã€‚å…¶å®å®ƒçš„æ€æƒ³éå¸¸çš„ç®€å•ï¼Œéå†æ•°ç»„å…ƒç´ ï¼Œå°†å…¶ä¸ä¹‹å‰çš„ä»»æ„å…ƒç´ äº¤æ¢ã€‚å› ä¸ºéå†æœ‰ä»å‰å‘åå’Œä»åå¾€å‰ä¸¤ç§æ–¹å¼ï¼Œæ‰€ä»¥è¯¥ç®—æ³•å¤§è‡´ä¹Ÿæœ‰ä¸¤ä¸ªç‰ˆæœ¬çš„å®ç°ã€‚</p></blockquote><p>è¿™é‡Œé€ä¸Šä¸¤ä¸ªæ–¹æ³•ï¼Œå…·ä½“çš„è¯·å‚è€ƒæ–‡æœ«çš„æ•°ç»„ä¹±åºæ–‡ç« </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä»åå¾€å‰çš„ç‰ˆæœ¬</span></span><br><span class="line"><span class="keyword">const</span> shuffle = <span class="function">(<span class="params">array</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> _array = array.concat();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = _array.length; i--;) &#123;</span><br><span class="line">        <span class="keyword">var</span> j = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (i + <span class="number">1</span>));</span><br><span class="line">        <span class="keyword">var</span> temp = _array[i];</span><br><span class="line">        _array[i] = _array[j];</span><br><span class="line">        _array[j] = temp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> _array;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä»å‰å¾€åçš„ç‰ˆæœ¬</span></span><br><span class="line"><span class="keyword">const</span> shuffle =  <span class="function">(<span class="params">a</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> length = a.length;</span><br><span class="line">    <span class="keyword">var</span> shuffled = <span class="built_in">Array</span>(length);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> index = <span class="number">0</span>, rand; index &lt; length; index++) &#123;</span><br><span class="line">        rand = ~~(<span class="built_in">Math</span>.random() * (index + <span class="number">1</span>));</span><br><span class="line">        <span class="keyword">if</span> (rand !== index)</span><br><span class="line">            shuffled[index] = shuffled[rand];</span><br><span class="line">        shuffled[rand] = a[index];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> shuffled;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h2 id="reverse"><a href="#reverse" class="headerlink" title="reverse"></a>reverse</h2><p>reverse() æ–¹æ³•å°†æ•°ç»„ä¸­å…ƒç´ çš„ä½ç½®é¢ å€’ã€‚ç¬¬ä¸€ä¸ªæ•°ç»„å…ƒç´ æˆä¸ºæœ€åä¸€ä¸ªæ•°ç»„å…ƒç´ ï¼Œæœ€åä¸€ä¸ªæ•°ç»„å…ƒç´ æˆä¸ºç¬¬ä¸€ä¸ªã€‚æ­¤æ–¹æ³•<b>ä¼šæ›´æ”¹ç°æœ‰æ•°ç»„</b>ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Array.reverse(compareFunction)</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&#125;</span> </span>é¢ å€’åçš„æ•°ç»„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> months = [<span class="string">'March'</span>, <span class="string">'Jan'</span>, <span class="string">'Feb'</span>, <span class="string">'Dec'</span>];</span><br><span class="line">months.reverse() </span><br><span class="line"><span class="built_in">console</span>.log(months) <span class="comment">// ["Dec", "Feb", "Jan", "March"]</span></span><br></pre></td></tr></table></figure></div><h2 id="join"><a href="#join" class="headerlink" title="join"></a>join</h2><p>join() æ–¹æ³•å°†ä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ï¼‰çš„æ‰€æœ‰å…ƒç´ è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²å¹¶è¿”å›è¿™ä¸ªå­—ç¬¦ä¸²ã€‚æ­¤æ–¹æ³•<b>ä¸ä¼šæ›´æ”¹åŸæ•°ç»„</b>ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Array.reverse(separator)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>å¦‚æœéœ€è¦(separator)ï¼Œå°†åˆ†éš”ç¬¦è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚å¦‚æœçœç•¥()ï¼Œæ•°ç»„å…ƒç´ ç”¨é€—å·åˆ†éš”ã€‚é»˜è®¤ä¸º ","ã€‚</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>ä¸€ä¸ªæ‰€æœ‰æ•°ç»„å…ƒç´ è¿æ¥çš„å­—ç¬¦ä¸²ã€‚å¦‚æœ arr.length ä¸º0ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.join()) <span class="comment">// 1,2,3</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.join(<span class="string">'-'</span>)) <span class="comment">// 1-2-3</span></span><br></pre></td></tr></table></figure></div><h1 id="è¿­ä»£-å¾ªç¯éå†-ç›¸å…³"><a href="#è¿­ä»£-å¾ªç¯éå†-ç›¸å…³" class="headerlink" title="è¿­ä»£(å¾ªç¯éå†)ç›¸å…³"></a>è¿­ä»£(å¾ªç¯éå†)ç›¸å…³</h1><h2 id="every"><a href="#every" class="headerlink" title="every"></a>every</h2><p>every() æ–¹æ³•æµ‹è¯•æ•°ç»„çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½é€šè¿‡äº†æŒ‡å®šå‡½æ•°çš„æµ‹è¯•ã€‚æ­¤æ–¹æ³•<b>ä¸ä¼šæ›´æ”¹åŸæ•°ç»„</b>ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * arr.every(callback,thisArg)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Function&#125;</span> </span>callback =&gt; ç”¨æ¥æµ‹è¯•æ¯ä¸ªå…ƒç´ çš„å‡½æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>thisArg =&gt; å¯é€‰å‚æ•°ï¼Œæ‰§è¡Œå›è°ƒå‡½æ•° mapFn æ—¶ this å¯¹è±¡ã€‚ (å¯é€‰)</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * callback è¢«è°ƒç”¨æ—¶ä¼šä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼šå½“å‰å…ƒç´ å€¼ï¼Œå…ƒç´ çš„ç´¢å¼•ï¼ŒåŸæ•°ç»„ã€‚</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Boolean&#125;</span> </span>ä¸ºtrueæ—¶ï¼Œæ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½é€šè¿‡äº†æŒ‡å®šå‡½æ•°çš„æµ‹è¯•ï¼Œå¦åˆ™å°±æ˜¯æ²¡æœ‰é€šè¿‡</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">56</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.every(<span class="function"><span class="params">item</span>=&gt;</span>item&lt;<span class="number">10</span>)) <span class="comment">// false</span></span><br></pre></td></tr></table></figure></div><h2 id="some"><a href="#some" class="headerlink" title="some"></a>some</h2><p>some() æ–¹æ³•æµ‹è¯•æ•°ç»„ä¸­çš„æŸäº›å…ƒç´ æ˜¯å¦é€šè¿‡ç”±æä¾›çš„å‡½æ•°å®ç°çš„æµ‹è¯•ã€‚æ­¤æ–¹æ³•<b>ä¸ä¼šæ›´æ”¹åŸæ•°ç»„</b>ã€‚</p><p>some() å’Œ every() çš„åŒºåˆ«åœ¨äºeveryæ˜¯æ•°ç»„æ‰€æœ‰å…ƒç´ éƒ½éœ€è¦é€šè¿‡æµ‹è¯•æ‰è¿”å›trueï¼Œè€Œsomeåªéœ€è¦æœ‰ä¸€ä¸ªé€šè¿‡æµ‹è¯•å°±è¿”å›true</p><blockquote><p>å¯¹äºæ”¾åœ¨ç©ºæ•°ç»„ä¸Šçš„ä»»ä½•æ¡ä»¶ï¼Œæ­¤æ–¹æ³•è¿”å›falseã€‚</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * arr.some(callback,thisArg)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Function&#125;</span> </span>callback =&gt; ç”¨æ¥æµ‹è¯•æ¯ä¸ªå…ƒç´ çš„å‡½æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>thisArg =&gt; å¯é€‰å‚æ•°ï¼Œæ‰§è¡Œå›è°ƒå‡½æ•° mapFn æ—¶ this å¯¹è±¡ã€‚ (å¯é€‰)</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * callback è¢«è°ƒç”¨æ—¶ä¼šä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼šå½“å‰å…ƒç´ å€¼ï¼Œå…ƒç´ çš„ç´¢å¼•ï¼ŒåŸæ•°ç»„ã€‚</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Boolean&#125;</span> </span>ä¸ºtrueæ—¶ï¼Œæœ‰å…¶ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ æ˜¯å¦éƒ½é€šè¿‡äº†æŒ‡å®šå‡½æ•°çš„æµ‹è¯•ï¼Œå¦åˆ™å°±æ˜¯æ²¡æœ‰é€šè¿‡</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">56</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.some(<span class="function"><span class="params">item</span>=&gt;</span>item&lt;<span class="number">10</span>)) <span class="comment">// true</span></span><br></pre></td></tr></table></figure></div><p>å®é™…çš„åº”ç”¨åœºæ™¯ï¼Œå¯ä»¥å®ç°ç±»ä¼¼äº includes çš„åŠŸèƒ½ ï¼ˆè¿™é‡Œæˆ–è®¸ä½ ä¼šé—®ï¼Œä¸ºå•¥å®ç°ç±»ä¼¼ includes çš„åŠŸèƒ½ï¼Œç›´æ¥ç”¨ä¸å°±å¥½äº†å—ï¼Ÿ</p><p>å› ä¸º includes çš„å…¼å®¹æ€§å¤ªå·®äº†ï¼ŒIEæ˜¯ä¸å…¼å®¹çš„ï¼Œä½†æ˜¯ some åœ¨IE9ä¸‹å´å¯ä»¥ä½¿ç”¨ï¼Œæ‰€ä»¥ï¼Œä½ æ‡‚çš„</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">'apple'</span>, <span class="string">'banana'</span>, <span class="string">'mango'</span>, <span class="string">'guava'</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkAvailability</span>(<span class="params">arr, val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arr.some(<span class="function"><span class="params">arrVal</span> =&gt;</span> val === arrVal);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">checkAvailability(fruits, <span class="string">'kela'</span>);   <span class="comment">// false</span></span><br><span class="line">checkAvailability(fruits, <span class="string">'banana'</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure></div><h2 id="forEach"><a href="#forEach" class="headerlink" title="forEach"></a>forEach</h2><p>forEach() æ–¹æ³•å¯¹æ•°ç»„çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€æ¬¡æä¾›çš„å‡½æ•°ã€‚</p><p>for å’Œ forEach çš„åŒºåˆ«ï¼ŒforEachä¸­å·²åˆ é™¤æˆ–è€…æœªåˆå§‹åŒ–çš„é¡¹å°†è¢«è·³è¿‡ï¼ˆä¾‹å¦‚åœ¨ç¨€ç–æ•°ç»„ä¸Šï¼‰ï¼Œè€Œ for ä¸ä¼š</p><blockquote><p>æ³¨æ„ï¼š æ²¡æœ‰åŠæ³•ä¸­æ­¢æˆ–è€…è·³å‡º forEach å¾ªç¯ï¼Œé™¤äº†æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * arr.forEach(callback,thisArg)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Function&#125;</span> </span>callback =&gt; ç”¨æ¥æµ‹è¯•æ¯ä¸ªå…ƒç´ çš„å‡½æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>thisArg =&gt; å¯é€‰å‚æ•°ï¼Œæ‰§è¡Œå›è°ƒå‡½æ•° mapFn æ—¶ this å¯¹è±¡ã€‚ (å¯é€‰)</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * callback è¢«è°ƒç”¨æ—¶ä¼šä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼šå½“å‰å…ƒç´ å€¼ï¼Œå…ƒç´ çš„ç´¢å¼•ï¼ŒåŸæ•°ç»„ã€‚</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;undefined&#125;</span> <span class="variable">undefined</span></span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">arr1.forEach(<span class="function"><span class="params">item</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item) <span class="comment">// 1 2 3</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// for å’Œ forEach çš„åŒºåˆ«</span></span><br><span class="line"><span class="keyword">const</span> arr2 = [<span class="number">1</span>,<span class="number">2</span>,,<span class="number">4</span>]</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; arr2.length; index++) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(arr2[index]) <span class="comment">// 1 2 undefined 4</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">arr2.forEach(<span class="function"><span class="params">item</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item) <span class="comment">// 1 2 4</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div><p>å®é™…çš„åº”ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ forEach å®ç°å¯¹å¯¹è±¡çš„å¤åˆ¶ï¼Œå½“ç„¶ï¼Œè¿™åªæ˜¯å¯¹è±¡å¤åˆ¶çš„å…¶ä¸­ä¸€ç§æ–¹å¼</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> copy = <span class="function"><span class="params">obj</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> copy = <span class="built_in">Object</span>.create(<span class="built_in">Object</span>.getPrototypeOf(obj))</span><br><span class="line">  <span class="keyword">const</span> propNames = <span class="built_in">Object</span>.getOwnPropertyNames(obj)</span><br><span class="line">  propNames.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> desc = <span class="built_in">Object</span>.getOwnPropertyDescriptor(obj, name);</span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(copy, name, desc);</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> copy;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj1 = &#123;<span class="attr">name</span>:<span class="string">'gating'</span>&#125;</span><br><span class="line"><span class="keyword">const</span> obj2 = copy(obj1)</span><br><span class="line"><span class="built_in">console</span>.log(obj2) <span class="comment">// &#123;name:'gating'&#125;</span></span><br></pre></td></tr></table></figure></div><h2 id="map"><a href="#map" class="headerlink" title="map"></a>map</h2><p>map() æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶ç»“æœæ˜¯è¯¥æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½è°ƒç”¨ä¸€ä¸ªæä¾›çš„å‡½æ•°åè¿”å›çš„ç»“æœã€‚æ­¤æ–¹æ³•<b>ä¸ä¼šæ›´æ”¹åŸæ•°ç»„</b>ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * arr.map(callback,thisArg)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Function&#125;</span> </span>callback =&gt; ç”¨æ¥æµ‹è¯•æ¯ä¸ªå…ƒç´ çš„å‡½æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>thisArg =&gt; å¯é€‰å‚æ•°ï¼Œæ‰§è¡Œå›è°ƒå‡½æ•° mapFn æ—¶ this å¯¹è±¡ã€‚ (å¯é€‰)</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * callback è¢«è°ƒç”¨æ—¶ä¼šä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼šå½“å‰å…ƒç´ å€¼ï¼Œå…ƒç´ çš„ç´¢å¼•ï¼ŒåŸæ•°ç»„ã€‚</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&#125;</span> </span>ä¸€ä¸ªæ–°æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯å›è°ƒå‡½æ•°çš„ç»“æœã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.map(<span class="function"><span class="params">item</span>=&gt;</span>item*<span class="number">2</span>)) <span class="comment">// [2,4,6]</span></span><br></pre></td></tr></table></figure></div><p>map çš„åº”ç”¨åœºæ™¯å¾ˆå¤šï¼Œæ¯”å¦‚æˆ‘æƒ³ç»™æ•°ç»„å¢åŠ ä¸€ä¸ªidçš„å±æ€§ï¼Œå†æ¯”å¦‚å¯ä»¥é‡æ–°æ ¼å¼åŒ–æˆ‘ä»¬çš„æ•°ç»„</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [&#123;<span class="attr">name</span>:<span class="string">'gating'</span>&#125;,&#123;<span class="attr">name</span>:<span class="string">'family'</span>&#125;]</span><br><span class="line"><span class="keyword">const</span> res = arr.map(<span class="function">(<span class="params">item,index</span>)=&gt;</span>&#123;</span><br><span class="line">  item.id = index</span><br><span class="line">  <span class="keyword">return</span> item</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// [&#123;name:'gating',id:0&#125;,&#123;name:'family',id:1&#125;]</span></span><br></pre></td></tr></table></figure></div><h3 id="ç”±ä¸€æ¡é¢è¯•é¢˜å¼•å‘çš„æ€è€ƒ"><a href="#ç”±ä¸€æ¡é¢è¯•é¢˜å¼•å‘çš„æ€è€ƒ" class="headerlink" title="ç”±ä¸€æ¡é¢è¯•é¢˜å¼•å‘çš„æ€è€ƒ"></a>ç”±ä¸€æ¡é¢è¯•é¢˜å¼•å‘çš„æ€è€ƒ</h3><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œmap æ–¹æ³•ä¸­çš„ callback å‡½æ•°åªéœ€è¦æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯æ­£åœ¨è¢«éå†çš„æ•°ç»„å…ƒç´ æœ¬èº«ã€‚ä½†è¿™å¹¶ä¸æ„å‘³ç€ map åªç»™ callback ä¼ äº†ä¸€ä¸ªå‚æ•°ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸‹é¢çš„è¯­å¥è¿”å›ä»€ä¹ˆå‘¢:</span></span><br><span class="line">[<span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>].map(<span class="built_in">parseInt</span>);</span><br><span class="line"><span class="comment">// ä½ å¯èƒ½è§‰çš„ä¼šæ˜¯[1, 2, 3]</span></span><br><span class="line"><span class="comment">// ä½†å®é™…çš„ç»“æœæ˜¯ [1, NaN, NaN]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šå¸¸ä½¿ç”¨parseIntæ—¶,åªéœ€è¦ä¼ é€’ä¸€ä¸ªå‚æ•°.</span></span><br><span class="line"><span class="comment">// ä½†å®é™…ä¸Š,parseIntå¯ä»¥æœ‰ä¸¤ä¸ªå‚æ•°.ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¿›åˆ¶æ•°.</span></span><br><span class="line"><span class="comment">// å¯ä»¥é€šè¿‡è¯­å¥"alert(parseInt.length)===2"æ¥éªŒè¯.</span></span><br><span class="line"><span class="comment">// mapæ–¹æ³•åœ¨è°ƒç”¨callbackå‡½æ•°æ—¶,ä¼šç»™å®ƒä¼ é€’ä¸‰ä¸ªå‚æ•°:å½“å‰æ­£åœ¨éå†çš„å…ƒç´ , </span></span><br><span class="line"><span class="comment">// å…ƒç´ ç´¢å¼•, åŸæ•°ç»„æœ¬èº«.</span></span><br><span class="line"><span class="comment">// ç¬¬ä¸‰ä¸ªå‚æ•°parseIntä¼šå¿½è§†, ä½†ç¬¬äºŒä¸ªå‚æ•°ä¸ä¼š,ä¹Ÿå°±æ˜¯è¯´,</span></span><br><span class="line"><span class="comment">// parseIntæŠŠä¼ è¿‡æ¥çš„ç´¢å¼•å€¼å½“æˆè¿›åˆ¶æ•°æ¥ä½¿ç”¨.ä»è€Œè¿”å›äº†NaN.</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">returnInt</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">parseInt</span>(element, <span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>].map(returnInt); <span class="comment">// [1, 2, 3]</span></span><br><span class="line"><span class="comment">// æ„æ–™ä¹‹ä¸­çš„ç»“æœ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥ä½¿ç”¨ç®€å•çš„ç®­å¤´å‡½æ•°ï¼Œç»“æœåŒä¸Š</span></span><br><span class="line">[<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>].map( <span class="function"><span class="params">str</span> =&gt;</span> <span class="built_in">parseInt</span>(str) );</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸€ä¸ªæ›´ç®€å•çš„æ–¹å¼:</span></span><br><span class="line">[<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>].map(<span class="built_in">Number</span>); <span class="comment">// [1, 2, 3]</span></span><br><span class="line"><span class="comment">// ä¸`parseInt` ä¸åŒï¼Œä¸‹é¢çš„ç»“æœä¼šè¿”å›æµ®ç‚¹æ•°æˆ–æŒ‡æ•°:</span></span><br><span class="line">[<span class="string">'1.1'</span>, <span class="string">'2.2e2'</span>, <span class="string">'3e300'</span>].map(<span class="built_in">Number</span>); <span class="comment">// [1.1, 220, 3e+300]</span></span><br></pre></td></tr></table></figure></div><h2 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h2><p>filter() æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„, å…¶åŒ…å«é€šè¿‡æ‰€æä¾›å‡½æ•°å®ç°çš„æµ‹è¯•çš„æ‰€æœ‰å…ƒç´ ã€‚æ­¤æ–¹æ³•<b>ä¸ä¼šæ›´æ”¹åŸæ•°ç»„</b>ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * arr.filter(callback,thisArg)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Function&#125;</span> </span>callback =&gt; ç”¨æ¥æµ‹è¯•æ¯ä¸ªå…ƒç´ çš„å‡½æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>thisArg =&gt; å¯é€‰å‚æ•°ï¼Œæ‰§è¡Œå›è°ƒå‡½æ•° mapFn æ—¶ this å¯¹è±¡ã€‚ (å¯é€‰)</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * callback è¢«è°ƒç”¨æ—¶ä¼šä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼šå½“å‰å…ƒç´ å€¼ï¼Œå…ƒç´ çš„ç´¢å¼•ï¼ŒåŸæ•°ç»„ã€‚</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> *  è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&#125;</span> </span>è¿‡æ»¤åçš„æ•°ç»„</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> arr = [&#123;<span class="attr">sex</span>:<span class="string">'male'</span>,<span class="attr">name</span>:<span class="string">'gating'</span>&#125;,&#123;<span class="attr">sex</span>:<span class="string">'female'</span>,<span class="attr">name</span>:<span class="string">'blue'</span>&#125;,&#123;<span class="attr">sex</span>:<span class="string">'male'</span>,<span class="attr">name</span>:<span class="string">'family'</span>&#125;]</span><br><span class="line"><span class="comment">// è¿‡æ»¤æ‰æ€§åˆ«ä¸º male çš„äºº</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.filter(<span class="function"><span class="params">item</span>=&gt;</span>item.sex===<span class="string">'female'</span>))</span><br></pre></td></tr></table></figure></div><p>å®é™…çš„åº”ç”¨åœºæ™¯ï¼Œé€šè¿‡å¯ä»¥ filter è¿‡æ»¤æ‰æˆ‘ä»¬ä¸éœ€è¦çš„å€¼</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> delListRep = <span class="function">(<span class="params">arr, key</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> keys = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        keys.push(arr[i][key])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr.filter(<span class="function">(<span class="params">ele, i, arr</span>) =&gt;</span> keys.indexOf(ele[key]) == i)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> arr = [&#123;<span class="attr">sex</span>:<span class="string">'male'</span>,<span class="attr">name</span>:<span class="string">'gating'</span>&#125;,&#123;<span class="attr">sex</span>:<span class="string">'female'</span>,<span class="attr">name</span>:<span class="string">'blue'</span>&#125;,&#123;<span class="attr">sex</span>:<span class="string">'male'</span>,<span class="attr">name</span>:<span class="string">'gating'</span>&#125;]</span><br><span class="line"><span class="built_in">console</span>.log(delListRep(arr,<span class="string">'sex'</span>)) <span class="comment">//  [&#123;sex:'male',name:'gating'&#125;,&#123;sex:'female',name:'blue'&#125;]</span></span><br></pre></td></tr></table></figure></div><h2 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h2><p>reduce() æ–¹æ³•å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€ä¸ªç”±æ‚¨æä¾›çš„reducerå‡½æ•°(å‡åºæ‰§è¡Œ)ï¼Œå°†å…¶ç»“æœæ±‡æ€»ä¸ºå•ä¸ªè¿”å›å€¼ã€‚<b>ä¸ä¼šæ›´æ”¹åŸæ•°ç»„</b>ã€‚</p><blockquote><p>å¦‚æœæ²¡æœ‰æä¾›initialValueï¼Œreduce ä¼šä»ç´¢å¼•1çš„åœ°æ–¹å¼€å§‹æ‰§è¡Œ callback æ–¹æ³•ï¼Œè·³è¿‡ç¬¬ä¸€ä¸ªç´¢å¼•ã€‚å¦‚æœæä¾›initialValueï¼Œä»ç´¢å¼•0å¼€å§‹ã€‚</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * arr.filter(callback,initialValue)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Function&#125;</span> </span>callback =&gt; æ‰§è¡Œæ•°ç»„ä¸­æ¯ä¸ªå€¼çš„å‡½æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>initialValue =&gt; ä½œä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨ callbackå‡½æ•°æ—¶çš„ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼ã€‚ å¦‚æœæ²¡æœ‰æä¾›åˆå§‹å€¼ï¼Œåˆ™å°†ä½¿ç”¨æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ åœ¨æ²¡æœ‰åˆå§‹å€¼çš„ç©ºæ•°ç»„ä¸Šè°ƒç”¨ reduce å°†æŠ¥é”™ã€‚ (å¯é€‰)</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * callback è¢«è°ƒç”¨æ—¶ä¼šä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼šaccumulatorï¼ŒcurrentValueï¼ŒcurrentIndexï¼Œarray</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * accumulator =&gt; ç´¯è®¡å™¨ç´¯è®¡å›è°ƒçš„è¿”å›å€¼; å®ƒæ˜¯ä¸Šä¸€æ¬¡è°ƒç”¨å›è°ƒæ—¶è¿”å›çš„ç´¯ç§¯å€¼ï¼Œæˆ–initialValueï¼ˆè§äºä¸‹æ–¹ï¼‰ã€‚</span></span><br><span class="line"><span class="comment"> * currentValue =&gt; æ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å…ƒç´ ã€‚</span></span><br><span class="line"><span class="comment"> * currentIndex =&gt; æ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„ç´¢å¼•ã€‚ å¦‚æœæä¾›äº†initialValueï¼Œåˆ™èµ·å§‹ç´¢å¼•å·ä¸º0ï¼Œå¦åˆ™ä¸º1ã€‚ (å¯é€‰)</span></span><br><span class="line"><span class="comment"> * array =&gt; è°ƒç”¨reduce()çš„æ•°ç»„ã€‚ (å¯é€‰)</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> *  è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>å‡½æ•°ç´¯è®¡å¤„ç†çš„ç»“æœ</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">const</span> reducer = arr.reduce(<span class="function">(<span class="params">accumulator, currentValue</span>) =&gt;</span> accumulator + currentValue)</span><br><span class="line"><span class="built_in">console</span>.log(reducer) <span class="comment">// 10</span></span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [1, 2, 3, 4]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> res = arr.reduce(<span class="function">(<span class="params">accumulator, currentValue</span>) =&gt;</span> accumulator + currentValue,<span class="number">5</span>)</span><br><span class="line"><span class="built_in">console</span>.log(res) <span class="comment">// 15</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// initialValue æœ‰å€¼ å’Œ æ²¡æœ‰å€¼çš„åŒºåˆ«</span></span><br><span class="line"><span class="comment">// å› ä¸º reduce é‡Œï¼Œå¦‚æœæ²¡æœ‰æä¾›åˆå§‹å€¼ï¼Œé‚£ä¹ˆ accumulator ä¼šé»˜è®¤ä½¿ç”¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå› ä¸ºå–äº†æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ äº†ï¼Œé‚£ä¹ˆä¸‹æ ‡å½“ç„¶æ²¡æœ‰å¿…è¦å†ä»0å¼€å§‹äº†</span></span><br><span class="line">arr.reduce(<span class="function">(<span class="params">accumulator, currentValue, index</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(index) <span class="comment">// 0 1 2 3</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">arr.reduce(<span class="function">(<span class="params">accumulator, currentValue, index</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(index) <span class="comment">// 1 2 3</span></span><br><span class="line">&#125;,<span class="number">5</span>)</span><br></pre></td></tr></table></figure></div><p>çœ‹åˆ°äº† reduce çš„ç”¨æ³•ï¼Œå®é™…ä¸Šä¹Ÿå¯ä»¥æƒ³åˆ°ï¼Œreduce çš„å‚æ•°è¿™ä¹ˆä¸°å¯Œï¼Œæ˜¯ä¸æ˜¯å¯ä»¥åšå¾ˆå¤šæˆ‘ä»¬æƒ³è¦çš„äº‹ï¼Œæˆ‘æƒ³è¯´ï¼Œæ˜¯çš„ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œreduce èƒ½åšåˆ°çš„äº‹ï¼Œæ¯”æˆ‘ä»¬æƒ³è±¡ä¸­çš„è¿˜è¦å¤š</p><p>æ¯”å¦‚ï¼Œæ•°ç»„æ‰å¹³åŒ–ã€æ•°ç»„å»é‡ã€ç»Ÿè®¡æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°ã€æ ¹æ®å±æ€§å¯¹Objectåˆ†ç±»ç­‰ç­‰ç­‰ç­‰è¿™ç§å¾ˆcoolçš„äº‹ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä¸€ä¸€ç”¨ reduce å®ç°å§</p><blockquote><p>reduce å¾ˆé‡è¦ï¼Œè¯·åŠ¡å¿…æŒæ¡è¿™ä¸ªæ–¹æ³• psï¼šå­—ç¬¦ä¸²çš„ replace ä¹Ÿå¾ˆé‡è¦å“¦ï¼ï¼ï¼ä¹Ÿè¦æŒæ¡</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®æ‰€æä¾›çš„å­—ç¬¦åˆ†ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&#125;</span> </span>arr =&gt; æ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>key =&gt; éœ€è¦åˆ†ç»„çš„å­—æ®µ </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">groupBy</span>(<span class="params">arr, key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arr.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">newObj, obj</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!newObj[obj[key]]) &#123;</span><br><span class="line">            newObj[obj[key]] = [];</span><br><span class="line">            newObj[obj[key]].push(obj);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            newObj[obj[key]].push(obj);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> newObj;</span><br><span class="line">    &#125;, &#123;&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> people = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">'gating'</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">'family'</span>, <span class="attr">age</span>: <span class="number">16</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">'blue'</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> groupedPeople = groupBy(people, <span class="string">'age'</span>) <span class="comment">// &#123;16: Array(1), 18: Array(1), 20: Array(1)&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»Ÿè®¡æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•° ObjectåŒç†</span></span><br><span class="line"><span class="comment">// è¿™é‡Œç”¨ Map æ˜¯ä¸ºäº†é¿å… æ•°å­—1 å’Œ å­—ç¬¦ä¸²1 åŒåé”®å€¼å¯¼è‡´çš„bug</span></span><br><span class="line"><span class="keyword">const</span> names = [<span class="string">'gating'</span>, <span class="string">'family'</span>, <span class="string">'gating'</span>, <span class="string">'blue'</span>, <span class="string">'family'</span>]</span><br><span class="line"><span class="keyword">const</span> countNum1 = <span class="function">(<span class="params">arr</span>) =&gt;</span> arr.reduce(<span class="function">(<span class="params">m, x</span>)=&gt;</span> m.set(x, (m.get(x) || <span class="number">0</span>) + <span class="number">1</span>), <span class="keyword">new</span> <span class="built_in">Map</span>())</span><br><span class="line"><span class="keyword">const</span> allName = countNum1(names) <span class="comment">// &#123;"gating" =&gt; 2, "family" =&gt; 2, "blue" =&gt; 1&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•°ç»„å»é‡</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">4</span>];</span><br><span class="line"><span class="keyword">let</span> result = arr.sort().reduce(<span class="function">(<span class="params">init, current</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(init.length===<span class="number">0</span> || init[init.length<span class="number">-1</span>]!==current)&#123;</span><br><span class="line">        init.push(current);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> init;</span><br><span class="line">&#125;, []);</span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">//[1,2,3,4,5]</span></span><br></pre></td></tr></table></figure></div><p>å…¶å® reduce è¿˜å¯ä»¥åšå¾ˆå¤šæ›´ç‰›é€¼çš„äº‹ï¼Œçœ‹åˆ°è¿™é‡Œï¼Œä½ æ˜¯ä¸æ˜¯ä¹Ÿæƒ³ç”¨ reduce åšæ›´å¤šå¼ºå¤§çš„äº‹å‘¢ï¼Ÿé‚£å°±èµ¶ç´§æŠŠ reduce å­¦ä¼š</p><h2 id="reduceRight"><a href="#reduceRight" class="headerlink" title="reduceRight"></a>reduceRight</h2><p>reduceRight() æ–¹æ³•æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºç´¯åŠ å™¨ï¼ˆaccumulatorï¼‰å’Œæ•°ç»„çš„æ¯ä¸ªå€¼ï¼ˆä»å³åˆ°å·¦ï¼‰å°†å…¶å‡å°‘ä¸ºå•ä¸ªå€¼ã€‚<b>ä¸ä¼šæ›´æ”¹åŸæ•°ç»„</b>ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * arr.filter(callback,initialValue)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Function&#125;</span> </span>callback =&gt; æ‰§è¡Œæ•°ç»„ä¸­æ¯ä¸ªå€¼çš„å‡½æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>initialValue =&gt; ä½œä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨ callbackå‡½æ•°æ—¶çš„ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼ã€‚ å¦‚æœæ²¡æœ‰æä¾›åˆå§‹å€¼ï¼Œåˆ™å°†ä½¿ç”¨æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ åœ¨æ²¡æœ‰åˆå§‹å€¼çš„ç©ºæ•°ç»„ä¸Šè°ƒç”¨ reduce å°†æŠ¥é”™ã€‚ (å¯é€‰)</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * callback è¢«è°ƒç”¨æ—¶ä¼šä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼šaccumulatorï¼ŒcurrentValueï¼ŒcurrentIndexï¼Œarray</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * accumulator =&gt; ç´¯è®¡å™¨ç´¯è®¡å›è°ƒçš„è¿”å›å€¼; å®ƒæ˜¯ä¸Šä¸€æ¬¡è°ƒç”¨å›è°ƒæ—¶è¿”å›çš„ç´¯ç§¯å€¼ï¼Œæˆ–initialValueï¼ˆè§äºä¸‹æ–¹ï¼‰ã€‚</span></span><br><span class="line"><span class="comment"> * currentValue =&gt; æ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å…ƒç´ ã€‚</span></span><br><span class="line"><span class="comment"> * currentIndex =&gt; æ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„ç´¢å¼•ã€‚ å¦‚æœæä¾›äº†initialValueï¼Œåˆ™èµ·å§‹ç´¢å¼•å·ä¸º0ï¼Œå¦åˆ™ä¸º1ã€‚ (å¯é€‰)</span></span><br><span class="line"><span class="comment"> * array =&gt; è°ƒç”¨reduce()çš„æ•°ç»„ã€‚ (å¯é€‰)</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> *  è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;*&#125;</span> </span>å‡½æ•°ç´¯è®¡å¤„ç†çš„ç»“æœ</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr = [[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>]].reduceRight(</span><br><span class="line">  (accumulator, currentValue) =&gt; accumulator.concat(currentValue)</span><br><span class="line">)</span><br><span class="line"><span class="built_in">console</span>.log(arr) <span class="comment">// [4, 5, 2, 3, 0, 1]</span></span><br></pre></td></tr></table></figure></div><p>reduce ä¸ reduceRight ä¹‹é—´çš„åŒºåˆ«</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>, <span class="string">'4'</span>, <span class="string">'5'</span>]; </span><br><span class="line"><span class="keyword">const</span> left  = arr.reduce(<span class="function">(<span class="params">prev, cur</span>)=&gt;</span>prev + cur); </span><br><span class="line"><span class="keyword">const</span> right = arr.reduce(<span class="function">(<span class="params">prev, cur</span>)=&gt;</span>prev + cur); </span><br><span class="line"><span class="built_in">console</span>.log(left);  <span class="comment">// "12345"</span></span><br><span class="line"><span class="built_in">console</span>.log(right); <span class="comment">// "54321"</span></span><br></pre></td></tr></table></figure></div><p>ç”±äº reduceRight å’Œ reduce åŒºåˆ«ä¸æ˜¯å¾ˆå¤§ï¼Œè¿™é‡Œçš„ä¾‹å­å°±å‚è€ƒ reduce å°±è¡Œäº†</p><h1 id="è¿­ä»£ç›¸å…³-ç”Ÿæˆä¸€ä¸ªè¿­ä»£å™¨"><a href="#è¿­ä»£ç›¸å…³-ç”Ÿæˆä¸€ä¸ªè¿­ä»£å™¨" class="headerlink" title="è¿­ä»£ç›¸å…³(ç”Ÿæˆä¸€ä¸ªè¿­ä»£å™¨)"></a>è¿­ä»£ç›¸å…³(ç”Ÿæˆä¸€ä¸ªè¿­ä»£å™¨)</h1><p>æš‚æ—¶æ²¡æœ‰å¤ªå¤šçš„åº”ç”¨åœºæ™¯ï¼Œä¸è¯¦ç»†è®²è§£</p><h2 id="entries"><a href="#entries" class="headerlink" title="entries"></a>entries</h2><p>entries() æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„Array Iteratorå¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«æ•°ç»„ä¸­æ¯ä¸ªç´¢å¼•çš„é”®/å€¼å¯¹ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * arr.entries()</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Iterator&#125;</span> </span>ä¸€ä¸ªæ–°çš„ Array è¿­ä»£å™¨å¯¹è±¡</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">const</span> iterator1 = arr1.entries();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿­ä»£å™¨é€šç”¨çš„ä¸¤ç§è¿­ä»£æ–¹å¼ï¼ˆentriesã€keysã€valueåŒæ ·ï¼‰</span></span><br><span class="line"><span class="comment">// 1. for of å¾ªç¯</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> number <span class="keyword">of</span> iterator1) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(number) <span class="comment">// [0, 1] ï¼Œ [1, 2] ï¼Œ [2, 3] è¾“å‡ºä¸‰æ¬¡</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr2 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">const</span> iterator2 = arr2.entries();</span><br><span class="line"><span class="built_in">console</span>.log(iterator2.next().value); <span class="comment">// [0, 1]</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator2.next().value); <span class="comment">// [1, 2]</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator2.next().value); <span class="comment">// [2, 3]</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator2.next().value); <span class="comment">// undefinedï¼Œå¹¶ä¸” iterator2.next().done å˜æˆtrue</span></span><br></pre></td></tr></table></figure></div><h2 id="keys"><a href="#keys" class="headerlink" title="keys"></a>keys</h2><p>keys() æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«æ•°ç»„ä¸­æ¯ä¸ªç´¢å¼•é”®çš„Array Iteratorå¯¹è±¡ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * arr.keys()</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Iterator&#125;</span> </span>ä¸€ä¸ªæ–°çš„ Array è¿­ä»£å™¨å¯¹è±¡</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>]</span><br><span class="line"><span class="keyword">const</span> iterator = arr.keys();</span><br><span class="line">  </span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> iterator) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key); <span class="comment">//  0 1 2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h2 id="values"><a href="#values" class="headerlink" title="values"></a>values</h2><p>values() æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„ Array Iterator å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«æ•°ç»„æ¯ä¸ªç´¢å¼•çš„å€¼</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * arr.values()</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Iterator&#125;</span> </span>ä¸€ä¸ªæ–°çš„ Array è¿­ä»£å™¨å¯¹è±¡</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>]</span><br><span class="line"><span class="keyword">const</span> iterator = arr.values()</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> value <span class="keyword">of</span> iterator) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key) <span class="comment">// 'a' 'b' 'c'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h1 id="ä¸çŸ¥åçš„ä¸¤ä¸ªæ–¹æ³•"><a href="#ä¸çŸ¥åçš„ä¸¤ä¸ªæ–¹æ³•" class="headerlink" title="ä¸çŸ¥åçš„ä¸¤ä¸ªæ–¹æ³•"></a>ä¸çŸ¥åçš„ä¸¤ä¸ªæ–¹æ³•</h1><h2 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="toString"></a>toString</h2><p>toString() è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæŒ‡å®šçš„æ•°ç»„åŠå…¶å…ƒç´ </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * arr.toString()</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>ä¸€ä¸ªè¡¨ç¤ºæŒ‡å®šçš„æ•°ç»„åŠå…¶å…ƒç´ çš„å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.toString()) <span class="comment">// 'a','b','c'</span></span><br></pre></td></tr></table></figure></div><h2 id="toLocaleString-NaN"><a href="#toLocaleString-NaN" class="headerlink" title="toLocaleString"></a>toLocaleString</h2><p>toLocaleString() è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºæ•°ç»„ä¸­çš„å…ƒç´ ã€‚æ•°ç»„ä¸­çš„å…ƒç´ å°†ä½¿ç”¨å„è‡ªçš„ toLocaleString æ–¹æ³•è½¬æˆå­—ç¬¦ä¸²ï¼Œè¿™äº›å­—ç¬¦ä¸²å°†ä½¿ç”¨ä¸€ä¸ªç‰¹å®šè¯­è¨€ç¯å¢ƒçš„å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ä¸€ä¸ªé€—å· â€œ,â€ï¼‰éš”å¼€ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * arr.toLocaleString(locales,options)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String?&#125;</span>  </span>locales =&gt; å¸¦æœ‰BCP 47è¯­è¨€æ ‡è®°çš„å­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²æ•°ç»„ï¼Œå…³äºlocaleså‚æ•°çš„å½¢å¼ä¸è§£é‡Šï¼Œè¯·çœ‹Intlé¡µé¢ã€‚(å¯é€‰)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span>  </span>options =&gt; ä¸€ä¸ªå¯é…ç½®å±æ€§çš„å¯¹è±¡ï¼Œå¯¹äºæ•°å­— Number.prototype.toLocaleString()ï¼Œå¯¹äºæ—¥æœŸDate.prototype.toLocaleString() (å¯é€‰)</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>è¡¨ç¤ºæ•°ç»„å…ƒç´ çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> array1 = [<span class="number">1</span>, <span class="string">'a'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">'21 Dec 1997 14:12:00 UTC'</span>)]</span><br><span class="line"><span class="keyword">var</span> localeString = array1.toLocaleString(<span class="string">'en'</span>, &#123;<span class="attr">timeZone</span>: <span class="string">"UTC"</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(localeString) <span class="comment">// 1,a,12/21/1997, 2:12:00 PM</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> prices = [<span class="string">'ï¿¥7'</span>, <span class="number">500</span>, <span class="number">8123</span>, <span class="number">12</span>] </span><br><span class="line">prices.toLocaleString(<span class="string">'ja-JP'</span>, &#123; <span class="attr">style</span>: <span class="string">'currency'</span>, <span class="attr">currency</span>: <span class="string">'JPY'</span> &#125;) <span class="comment">// "ï¿¥7,ï¿¥500,ï¿¥8,123,ï¿¥12"</span></span><br></pre></td></tr></table></figure></div><p>è¿™ä¸ªæ–¹æ³•æˆ‘ç”¨çš„çœŸä¸å¤šï¼Œæ‰€ä»¥è¿™é‡Œè¿˜æ˜¯ç›´æ¥æ”¾ä¸Š<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/toLocaleString" target="_blank" rel="noopener">MDNçš„åœ°å€</a>ä¾›å¤§å®¶äº†è§£ï¼Œæˆ–è®¸ä»¥åå°±ç”¨åˆ°äº†å‘¢ï¼Ÿ</p><h1 id="æ‰å¹³åŒ–æ•°ç»„"><a href="#æ‰å¹³åŒ–æ•°ç»„" class="headerlink" title="æ‰å¹³åŒ–æ•°ç»„"></a>æ‰å¹³åŒ–æ•°ç»„</h1><p>æœ¬æ¥è¿™ä¸ªæˆ‘å†™è¿™ç¯‡åšå®¢çš„æ—¶å€™ï¼Œçœ‹åˆ°<code>MDN</code>å†™ç€<code>é€™æ˜¯ä¸€å€‹å¯¦é©—ä¸­çš„åŠŸèƒ½</code>,æ‰€ä»¥æˆ‘å°±æ²¡æœ‰è®°å½•ä¸‹æ¥ï¼Œä¸è¿‡æœ€è¿‘å†çœ‹ä¸€çœ¼ï¼Œå‘ç°é‚£ä¸ª<code>waring</code>å·²ç»å»æ‰äº†ï¼Œæ‰€ä»¥å°±å†™ä¸€ä¸‹è¿™ä¸¤ä¸ªæ–¹æ³•</p><h2 id="flat"><a href="#flat" class="headerlink" title="flat"></a>flat</h2><p>flat() æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«å°†æ•°ç»„ä¸å­æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ çš„æ–°æ•°ç»„ã€‚<strong>ä¸ä¼šæ›´æ”¹åŸæ•°ç»„</strong>ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * arr.flat([depth])</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;depth&#125;</span>  </span>depth =&gt; æŒ‡å®šè¦æå–åµŒå¥—æ•°ç»„çš„ç»“æ„æ·±åº¦ï¼Œé»˜è®¤å€¼ä¸º 1ã€‚è¿”å›å€¼(å¯é€‰)</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&#125;</span> </span>ä¸€ä¸ªåŒ…å«å°†æ•°ç»„ä¸å­æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ çš„æ–°æ•°ç»„ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">1</span>,[<span class="number">2</span>],<span class="number">3</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr1.flat()) <span class="comment">// [1,2,3]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr2 = [<span class="number">1</span>,[<span class="number">2</span>,[<span class="number">3</span>]]]</span><br><span class="line"><span class="built_in">console</span>.log(arr2.flat()) <span class="comment">// [1,2,[3]]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr2.flat(<span class="number">2</span>)) <span class="comment">// [1,2,3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ Infinityï¼Œå¯å±•å¼€ä»»æ„æ·±åº¦çš„åµŒå¥—æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> arr3 = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>, [<span class="number">5</span>, <span class="number">6</span>, [<span class="number">7</span>, <span class="number">8</span>, [<span class="number">9</span>, <span class="number">10</span>]]]]]</span><br><span class="line"><span class="built_in">console</span>.log(arr3.flat(<span class="literal">Infinity</span>)) <span class="comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤å¤–ï¼Œflatè¿˜ä¼šæ‰å¹³åŒ–æ•°ç»„ç©ºé¡¹</span></span><br><span class="line"><span class="keyword">var</span> arr4 = [<span class="number">1</span>, <span class="number">2</span>, , <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr3.flat()) <span class="comment">// [1, 2, 4, 5]</span></span><br></pre></td></tr></table></figure></div><p>çœ‹åˆ°è¿™é‡Œï¼Œä½ ä¹Ÿè®¸ä¼šå‘ç°ï¼Œè¿™ä¸ªä¸å°±æ˜¯æˆ‘ä»¬ä¸Šè¾¹é€šè¿‡<code>reduce</code>å®ç°çš„æ‰å¹³åŒ–æ–¹æ³•å—ï¼Ÿæ²¡é”™ï¼Œes6ä¹‹åé»˜è®¤ç»™æˆ‘ä»¬è‡ªå¸¦äº†è¿™ä¸ªæ–¹æ³•ï¼ˆğŸ‘ï¼‰</p><h2 id="flatMap"><a href="#flatMap" class="headerlink" title="flatMap"></a>flatMap</h2><p>é¡¾åæ€ä¹‰å•¦ï¼Œä»åå­—æˆ‘ä»¬å°±å¯ä»¥çŸ¥é“ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯å³æ‰§è¡Œ <code>map</code> åˆæ‰§è¡Œ <code>flat</code>,å¯¹æ­¤å®˜æ–¹çš„è¯´æ³•æ˜¯ï¼Œé¦–å…ˆä½¿ç”¨æ˜ å°„å‡½æ•°æ˜ å°„æ¯ä¸ªå…ƒç´ ï¼Œç„¶åå°†ç»“æœå‹ç¼©æˆä¸€ä¸ªæ–°æ•°ç»„ã€‚å®ƒä¸ <code>map</code> è¿ç€æ·±åº¦å€¼ä¸º1çš„ <code>flat</code> å‡ ä¹ç›¸åŒï¼Œä½† flatMap é€šå¸¸åœ¨åˆå¹¶æˆä¸€ç§æ–¹æ³•çš„æ•ˆç‡ç¨å¾®é«˜ä¸€äº›ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * arr.flatMap(callback,thisArg)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Function&#125;</span> </span>callback =&gt; ç”¨æ¥æµ‹è¯•æ¯ä¸ªå…ƒç´ çš„å‡½æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> </span>thisArg =&gt; å¯é€‰å‚æ•°ï¼Œæ‰§è¡Œå›è°ƒå‡½æ•° mapFn æ—¶ this å¯¹è±¡ã€‚ (å¯é€‰)</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * callback è¢«è°ƒç”¨æ—¶ä¼šä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼šå½“å‰å…ƒç´ å€¼ï¼Œå…ƒç´ çš„ç´¢å¼•ï¼ŒåŸæ•°ç»„ã€‚</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&#125;</span> </span>ä¸€ä¸ªæ–°æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯å›è°ƒå‡½æ•°çš„ç»“æœ,å¹¶ä¸”ç»“æ„æ·±åº¦ depth å€¼ä¸º1ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="built_in">console</span>.log(arr.flatMap(<span class="function"><span class="params">x</span>=&gt;</span>[x*<span class="number">2</span>])) <span class="comment">// [2,4,6]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¶å®å°±æ˜¯ç›¸å½“äºï¼Œå…ˆæ‰§è¡Œ map åœ¨æ‰§è¡Œ flat</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.map(<span class="function"><span class="params">x</span>=&gt;</span>[x*<span class="number">2</span>]).flat())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½†å…¶å®è¿˜æœ‰æ›´æœ‰æ„æ€çš„,ä¼—æ‰€å‘¨çŸ¥æˆ‘ä»¬éƒ½çŸ¥é“ map ä¼šè¿”å›è¾“å…¥æ•°ç»„ä¸€æ ·é•¿åº¦çš„æ•°ç»„</span></span><br><span class="line"><span class="comment">// è€Œ flatMap ä¸æ˜¯ï¼Œå› ä¸ºä»–æ‹¥æœ‰äº† flat</span></span><br><span class="line"><span class="comment">// å‡è®¾æˆ‘ä»¬æœ‰ä¸ªåœºæ™¯ï¼Œæˆ‘æƒ³é€šè¿‡ flatMap è¿‡æ»¤æ‰å¹´é¾„å¤§äº50å²çš„äºº</span></span><br><span class="line"><span class="keyword">var</span> people = [&#123;<span class="attr">name</span>:<span class="string">"gating"</span>,<span class="attr">age</span>:<span class="number">18</span>&#125;,&#123;<span class="attr">name</span>:<span class="string">"family"</span>,<span class="attr">age</span>:<span class="number">20</span>&#125;,&#123;<span class="attr">name</span>:<span class="string">"blue"</span>,<span class="attr">age</span>:<span class="number">60</span>&#125;]</span><br><span class="line"><span class="built_in">console</span>.log(people.flatMap(<span class="function"><span class="params">i</span>=&gt;</span>i.age&gt;=<span class="number">60</span>?[]:[i])) <span class="comment">// [&#123;name:"gating",age:18&#125;,&#123;name:"family",age:20&#125;]</span></span><br></pre></td></tr></table></figure></div><p>é€šè¿‡è¿‡æ»¤é‚£ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹å‡º, è¾“å‡ºçš„åˆ—è¡¨é•¿åº¦å¯ä»¥ä¸åŒäºè¾“å…¥çš„åˆ—è¡¨é•¿åº¦ã€‚è¿™ä¹Ÿè®¸ä¹Ÿæ˜¯ <code>flatMap</code> å¯ç©ä¹‹å¤„ï¼ˆğŸ¤¤ï¼‰</p><h1 id="æ–‡ä¸­æŸäº›çŸ¥è¯†ç‚¹å‚è€ƒé“¾æ¥"><a href="#æ–‡ä¸­æŸäº›çŸ¥è¯†ç‚¹å‚è€ƒé“¾æ¥" class="headerlink" title="æ–‡ä¸­æŸäº›çŸ¥è¯†ç‚¹å‚è€ƒé“¾æ¥"></a>æ–‡ä¸­æŸäº›çŸ¥è¯†ç‚¹å‚è€ƒé“¾æ¥</h1><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#Redefining_the_length_property_of_an_Array_object" target="_blank" rel="noopener">é‡å®šä¹‰æ•°ç»„å¯¹è±¡çš„ length å±æ€§</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener">MDNåœ°å€,æ–‡ä¸­å¾ˆå¤šä¾‹å­éƒ½é‡‡ç”¨äºMDNï¼Œæ¨è</a></p><p><a href="https://github.com/lifesinger/blog/issues/175" target="_blank" rel="noopener">æ•°ç»„ç±»å‹åˆ¤æ–­ï¼Œç‰ä¼¯å¤§ä½¬åšå®¢ï¼Œæ¨è</a></p><p><a href="https://github.com/hanzichi/underscore-analysis/issues/15" target="_blank" rel="noopener">JavaScript æ•°ç»„ä¹±åº</a></p><p><a href="https://www.h5jun.com/post/array-shuffle.html" target="_blank" rel="noopener">æ•°ç»„çš„å®Œå…¨éšæœºæ’åˆ—</a></p><blockquote><p>é‰´äº reduce å’Œ reduceRight å¤ªè¿‡å¥½ç”¨ï¼ˆå¤ªè¿‡ç‰›é€¼ï¼‰ï¼Œè¿™é‡Œæä¾›ä»–ä»¬ä¸¤ä¸ªçš„MDNåœ°å€</p></blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce" target="_blank" rel="noopener">reduce</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/ReduceRight" target="_blank" rel="noopener">reduceRight</a></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>é’ˆå¯¹äºæˆ‘ä»¬ä¸€å¼€å§‹å…³å¿ƒçš„ä¸¤ä¸ªé—®é¢˜ï¼Œæˆ‘åœ¨è¿™é‡Œåšä¸€ä¸ªå°å°çš„æ€»ç»“</p><blockquote><p>ps: å¯¹äºæµ‹è¯•æ€§çš„æ–¹æ³•ï¼Œè¿™é‡Œå°±ä¸åšå±•å¼€äº†ï¼Œå› ä¸ºç”¨ä¸ä¸Š= =</p></blockquote><table><thead><tr><th align="center">æ–¹æ³•å</th><th align="center">è¿”å›å€¼</th><th align="center">æ˜¯å¦ä¿®æ”¹åŸæ•°ç»„</th></tr></thead><tbody><tr><td align="center">concat</td><td align="center">è¿”å›åˆå¹¶åçš„ <code>Array</code> å®ä¾‹</td><td align="center">å¦</td></tr><tr><td align="center">copyWithin</td><td align="center">æ”¹å˜äº†çš„æ•°ç»„</td><td align="center">æ˜¯</td></tr><tr><td align="center">entries</td><td align="center">ä¸€ä¸ªæ–°çš„ <code>Array</code> è¿­ä»£å™¨å¯¹è±¡( [key,value])</td><td align="center">å¦</td></tr><tr><td align="center">every</td><td align="center">å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ æ˜¯å¦é€šè¿‡ every æµ‹è¯•</td><td align="center">å¦</td></tr><tr><td align="center">fill</td><td align="center">ä¿®æ”¹åçš„æ•°ç»„</td><td align="center">æ˜¯</td></tr><tr><td align="center">filter</td><td align="center">ä¸€ä¸ªæ–°çš„é€šè¿‡æµ‹è¯•çš„å…ƒç´ çš„é›†åˆçš„æ•°ç»„ï¼Œå¦‚æœæ²¡æœ‰é€šè¿‡æµ‹è¯•åˆ™è¿”å›ç©ºæ•°ç»„</td><td align="center">å¦</td></tr><tr><td align="center">find</td><td align="center">å½“æŸä¸ªå…ƒç´ é€šè¿‡ <code>callback</code> çš„æµ‹è¯•æ—¶ï¼Œè¿”å›æ•°ç»„ä¸­çš„ä¸€ä¸ªå€¼ï¼Œå¦åˆ™è¿”å› <code>undefined</code>ã€‚</td><td align="center">å¦</td></tr><tr><td align="center">findIndex</td><td align="center">è¿”å›æ•°ç»„ä¸­æ»¡è¶³æä¾›çš„æµ‹è¯•å‡½æ•°çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ã€‚å¦åˆ™è¿”å›-1ã€‚</td><td align="center">å¦</td></tr><tr><td align="center">forEach</td><td align="center"><code>undefined</code></td><td align="center">å¦</td></tr><tr><td align="center">includes</td><td align="center">å¸ƒå°”å€¼ï¼Œ åˆ¤æ–­ä¸€ä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ä¸€ä¸ªæŒ‡å®šçš„å€¼</td><td align="center">å¦</td></tr><tr><td align="center">indexOf</td><td align="center">é¦–ä¸ªè¢«æ‰¾åˆ°çš„å…ƒç´ åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•ä½ç½®; è‹¥æ²¡æœ‰æ‰¾åˆ°åˆ™è¿”å› -1</td><td align="center">å¦</td></tr><tr><td align="center">join</td><td align="center">ä¸€ä¸ªæ‰€æœ‰æ•°ç»„å…ƒç´ è¿æ¥çš„å­—ç¬¦ä¸²ã€‚å¦‚æœ <code>arr.length</code> ä¸º0ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸²</td><td align="center">å¦</td></tr><tr><td align="center">keys</td><td align="center">ä¸€ä¸ªæ–°çš„ <code>Array</code> è¿­ä»£å™¨å¯¹è±¡( [key])</td><td align="center">å¦</td></tr><tr><td align="center">lastIndexOf</td><td align="center">æ•°ç»„ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ï¼Œå¦‚æœªæ‰¾åˆ°è¿”å›-1</td><td align="center">å¦</td></tr><tr><td align="center">map</td><td align="center">ä¸€ä¸ªæ–°æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯å›è°ƒå‡½æ•°çš„ç»“æœ</td><td align="center">å¦</td></tr><tr><td align="center">pop</td><td align="center">ä»æ•°ç»„ä¸­åˆ é™¤çš„å…ƒç´ (å½“æ•°ç»„ä¸ºç©ºæ—¶è¿”å›<code>undefined</code>)</td><td align="center">æ˜¯</td></tr><tr><td align="center">push</td><td align="center">å½“è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œæ–°çš„ <code>length</code> å±æ€§å€¼å°†è¢«è¿”å›ã€‚</td><td align="center">æ˜¯</td></tr><tr><td align="center">reduce</td><td align="center">å‡½æ•°ç´¯è®¡å¤„ç†çš„ç»“æœ</td><td align="center">å¦</td></tr><tr><td align="center">reduceRight</td><td align="center">æ‰§è¡Œä¹‹åçš„è¿”å›å€¼</td><td align="center">å¦</td></tr><tr><td align="center">reverse</td><td align="center">è¿”å›é¢ å€’åçš„ <code>Array</code></td><td align="center">æ˜¯</td></tr><tr><td align="center">shift</td><td align="center">è¿”å›è¢«åˆ é™¤å…ƒç´ çš„å€¼</td><td align="center">æ˜¯</td></tr><tr><td align="center">slice</td><td align="center">ä¸€ä¸ªå«æœ‰æå–å…ƒç´ çš„æ–°æ•°ç»„</td><td align="center">å¦</td></tr><tr><td align="center">some</td><td align="center">å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ•°ç»„ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ æ˜¯å¦é€šè¿‡ every æµ‹è¯•</td><td align="center">å¦</td></tr><tr><td align="center">sort</td><td align="center">æ’åºåçš„æ•°ç»„</td><td align="center">æ˜¯</td></tr><tr><td align="center">splice</td><td align="center">ç”±è¢«åˆ é™¤çš„å…ƒç´ ç»„æˆçš„ä¸€ä¸ªæ•°ç»„ã€‚å¦‚æœåªåˆ é™¤äº†ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™è¿”å›åªåŒ…å«ä¸€ä¸ªå…ƒç´ çš„æ•°ç»„ã€‚å¦‚æœæ²¡æœ‰åˆ é™¤å…ƒç´ ï¼Œåˆ™è¿”å›ç©ºæ•°ç»„</td><td align="center">æ˜¯</td></tr><tr><td align="center">toLocaleString</td><td align="center">è¡¨ç¤ºæ•°ç»„å…ƒç´ çš„å­—ç¬¦ä¸²</td><td align="center">å¦</td></tr><tr><td align="center">toString</td><td align="center">ä¸ªè¡¨ç¤ºæŒ‡å®šçš„æ•°ç»„åŠå…¶å…ƒç´ çš„å­—ç¬¦ä¸²</td><td align="center">å¦</td></tr><tr><td align="center">unshift</td><td align="center">è¿”å›å…¶ <code>length</code>å±æ€§å€¼</td><td align="center">æ˜¯</td></tr><tr><td align="center">values</td><td align="center">ä¸€ä¸ªæ–°çš„ <code>Array</code> è¿­ä»£å™¨å¯¹è±¡( [value])</td><td align="center">å¦</td></tr><tr><td align="center">flat</td><td align="center">ä¸€ä¸ªåŒ…å«å°†æ•°ç»„ä¸å­æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ çš„æ–°æ•°ç»„</td><td align="center">å¦</td></tr><tr><td align="center">flatMap</td><td align="center">ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å›è°ƒå‡½æ•°çš„ç»“æœï¼Œå¹¶ä¸”ç»“æ„æ·±åº¦ depth å€¼ä¸º1</td><td align="center">å¦</td></tr></tbody></table><p>æœ€åï¼Œæ„Ÿè°¢å„ä½è§‚ä¼—è€çˆ·è§‚çœ‹å•¦O(âˆ©_âˆ©)O</p>]]></content>
      
      
      <categories>
          
          <category> è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git Bashä¸»é¢˜é£æ ¼</title>
      <link href="/2018-11-01/GitBash%E4%B8%BB%E9%A2%98%E9%A3%8E%E6%A0%BC/"/>
      <url>/2018-11-01/GitBash%E4%B8%BB%E9%A2%98%E9%A3%8E%E6%A0%BC/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å…¶å®å¾ˆå¤šäººéƒ½çŸ¥é“ï¼Œwindowä¸‹çš„CMDéå¸¸ä¸å¥½ç”¨ï¼Œè¿œæ²¡æœ‰Linuxæˆ–è€…ä¸€äº›SSHå·¥å…·ç”¨èµ·æ¥æ–¹ä¾¿ã€‚</p><p>è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯Git Bash,ç„¶è€Œé»˜è®¤çš„Git Bashçš„æ ·å¼ä¸æ˜¯é‚£ä¹ˆçš„å¥½çœ‹ï¼Œè¿™é‡Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ä»–çš„æ ·å¼</p><h1 id="è‡ªå®šä¹‰ä¸»é¢˜æ ·å¼"><a href="#è‡ªå®šä¹‰ä¸»é¢˜æ ·å¼" class="headerlink" title="è‡ªå®šä¹‰ä¸»é¢˜æ ·å¼"></a>è‡ªå®šä¹‰ä¸»é¢˜æ ·å¼</h1><p>åœ¨git bashçª—å£ç‚¹å‡»å³é”®ï¼Œé€‰æ‹©optioné€‰é¡¹ã€‚ç„¶åsaveä¸€ä¸‹- -ä¹‹åä¼šåœ¨ <font color="#f60">C:\Users\gating(ç”¨æˆ·å)</font> ä¼šç”Ÿæˆä¸€ä¸ª.minttyrcæ–‡ä»¶ï¼Œ ä¹Ÿå°±æ˜¯ä½ çš„ä¸»é¢˜æ–‡ä»¶</p><p>è¿™æ ·å­æˆ‘ä»¬å°±å¯ä»¥æ ¹æ®è¿™ä¸ªä¸»é¢˜æ–‡ä»¶ä¿®æ”¹æˆ‘ä»¬çš„Git Bashä¸»é¢˜äº†ï¼Œæˆ‘è¿™é‡Œç›´æ¥è´´å‡ºæˆ‘çš„é…ç½®ï¼Œä¾›å‚è€ƒ</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Locale&#x3D;zh_CN</span><br><span class="line">Charset&#x3D;UTF-8</span><br><span class="line">Columns&#x3D;160</span><br><span class="line">Rows&#x3D;45</span><br><span class="line">Font&#x3D;Monaco</span><br><span class="line">FontHeight&#x3D;11</span><br><span class="line">Term&#x3D;xterm-256color</span><br><span class="line">CursorType&#x3D;block</span><br><span class="line">CursorBlinks&#x3D;yes</span><br><span class="line">Transparency&#x3D;low</span><br><span class="line">BoldAsFont&#x3D;yes</span><br><span class="line">AllowBlinking&#x3D;no</span><br><span class="line">Scrollbar&#x3D;none</span><br><span class="line">ScrollbackLines&#x3D;10000</span><br><span class="line">ClickTargetMod&#x3D;off</span><br><span class="line">ComposeKey&#x3D;shift</span><br><span class="line">ForegroundColour&#x3D;248,248,242</span><br><span class="line">BackgroundColour&#x3D;39,40,34</span><br><span class="line">CursorColour&#x3D;255,255,255</span><br><span class="line">Black&#x3D;39,40,34</span><br><span class="line">BoldBlack&#x3D;117,113,94</span><br><span class="line">Red&#x3D;249,38,114</span><br><span class="line">BoldRed&#x3D;204,6,78</span><br><span class="line">Green&#x3D;166,226,46</span><br><span class="line">BoldGreen&#x3D;122,172,24</span><br><span class="line">Yellow&#x3D;255,255,81</span><br><span class="line">BoldYellow&#x3D;240,169,69</span><br><span class="line">Blue&#x3D;144,255,255</span><br><span class="line">BoldBlue&#x3D;33,199,233</span><br><span class="line">Magenta&#x3D;174,129,255</span><br><span class="line">BoldMagenta&#x3D;126,51,255</span><br><span class="line">Cyan&#x3D;161,239,228</span><br><span class="line">BoldCyan&#x3D;95,227,210</span><br><span class="line">White&#x3D;248,248,242</span><br><span class="line">BoldWhite&#x3D;249,248,245</span><br></pre></td></tr></table></figure></div><p>æ­¤æ—¶ï¼Œé‡å¯Git Bash,ä½ ä¼šå‘ç°ä¸»é¢˜é…ç½®å·²ç»ç”Ÿæ•ˆï¼ï¼</p><p>æœ€åï¼Œæ„Ÿè°¢å„ä½è§‚ä¼—è€çˆ·è§‚çœ‹</p>]]></content>
      
      
      <categories>
          
          <category> è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>awardRotateè½¬ç›˜æ’ä»¶æ–‡å­—æ¨¡ç³Šé—®é¢˜å’Œå›¾ç‰‡åŠ è½½é—®é¢˜</title>
      <link href="/2018-10-24/awardRotate%E8%BD%AC%E7%9B%98%E6%8F%92%E4%BB%B6%E6%96%87%E5%AD%97%E6%A8%A1%E7%B3%8A%E9%97%AE%E9%A2%98%E5%92%8C%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E9%97%AE%E9%A2%98/"/>
      <url>/2018-10-24/awardRotate%E8%BD%AC%E7%9B%98%E6%8F%92%E4%BB%B6%E6%96%87%E5%AD%97%E6%A8%A1%E7%B3%8A%E9%97%AE%E9%A2%98%E5%92%8C%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ€è¿‘åœ¨åšä¸€ä¸ªè½¬ç›˜æŠ½å¥–é¡µé¢,ä½¿ç”¨äº†awardRotate.jså‘ç°å­—ä½“å’Œå›¾ç‰‡éƒ½æœ‰æ¨¡ç³Šï¼Œç»˜åˆ¶çš„æ—¶å€™å›¾ç‰‡ç»˜åˆ¶ä¸å…¨ï¼Œæœç´¢ä¸€ä¸‹ä¹‹åå‘ç°é’ˆå¯¹awardRotateçš„è§£å†³æ–¹æ³•æ¯”è¾ƒå°‘ï¼Œé’ˆå¯¹canvasçš„æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥è¿™è¾¹æ€»ç»“ä¸€ä¸‹ã€‚</p><blockquote><p>ä»£ç å¦‚ä¸‹ï¼š</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-class">.canvas</span>&#123;</span></span><br><span class="line">    width: 100%;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">article</span> <span class="attr">id</span>=<span class="string">"turntable"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"wheelcanvas"</span> <span class="attr">width</span>=<span class="string">"422"</span> <span class="attr">height</span>=<span class="string">"422"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"pointer"</span> <span class="attr">src</span>=<span class="string">"./static/img/start.png"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br></pre></td></tr></table></figure></div><blockquote><p>è‡³äºä¸ºä»€ä¹ˆä¼šå˜æ¨¡ç³Šï¼Œè¿™å’Œæµè§ˆå™¨å¤„ç† canvas çš„æ–¹å¼æœ‰å…³ï¼Œç›¸å…³çš„æ–‡ç« å¯ä»¥å‚è€ƒè¿™ç¯‡ <a href="http://www.html5rocks.com/en/tutorials/canvas/hidpi/" target="_blank" rel="noopener">High DPI</a>ï¼Œè¿™é‡Œä¸ä½œæ·±å…¥ä»‹ç»ã€‚</p></blockquote><blockquote><p>è§£å†³è¿™ä¸ªé—®é¢˜çš„æœ¬è´¨å°±æ˜¯ï¼Œå…ˆæŠŠcanvasæ”¾å¤§ï¼Œç„¶ååœ¨é€šè¿‡cssé™åˆ¶ä¼šåŸå§‹å¤§å°</p></blockquote><p>è§£å†³æ–¹æ¡ˆå°±æ˜¯æŠŠcanvasçš„è¡Œé—´æ ·å¼çš„å®½åº¦è®¾ä¸ºæ‰‹æœºç«¯çš„æœ€å¤§åƒç´ å€¼,æˆ‘è¿™é‡Œè®¾ç½®ä¸º1688åƒç´ ï¼Œä¹Ÿå°±æ˜¯422çš„4å€, æŒ‰ç…§è¿™ä¸ªåƒç´ ç”»å®Œä¹‹å, width:100%åˆä¼šæŠŠcanvasçš„å®½åº¦ç¼©å°è‡³çˆ¶å…ƒç´ çš„å®½åº¦é‚£ä¹ˆå¤§, å› æ­¤æ•´ä¸ªcanvasçš„å®½åº¦è¢«ç¼©å°äº†, å¤§å°ºå¯¸çš„canvaså†…å®¹è¢«ç¼©å°äº†ä¹‹åè‚¯å®šä¸ä¼šäº§ç”Ÿé”¯é½¿ç°è±¡,</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-class">.canvas</span>&#123;</span></span><br><span class="line">    width: 100%;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">article</span> <span class="attr">id</span>=<span class="string">"turntable"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"wheelcanvas"</span> <span class="attr">width</span>=<span class="string">"1688"</span> <span class="attr">height</span>=<span class="string">"1688"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"pointer"</span> <span class="attr">src</span>=<span class="string">"./static/img/start.png"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>åˆå› ä¸ºæˆ‘ä»¬æŠŠcanvaçš„å†…å®¹ç¼©å°äº†å››å€ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡jsæŠŠcanvaæ”¾å¤§å››å€å³å¯ï¼Œè¿™æ ·å°±å¯ä»¥è§£å†³æˆ‘ä»¬å­—ä½“å’Œå›¾ç‰‡æ¨¡ç³Šçš„é—®é¢˜äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¤„ç†æ‰€æœ‰å›¾ç‰‡åŠ è½½çš„é—®é¢˜äº†</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">"wheelcanvas"</span>);</span><br><span class="line"><span class="keyword">if</span> (canvas.getContext) &#123;</span><br><span class="line">    <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">    <span class="comment">// æ”¾å¤§å››å€</span></span><br><span class="line">    ctx.scale(<span class="number">4</span>, <span class="number">4</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œimgéƒ½æœ‰onloadäº‹ä»¶,æˆ‘ä»¬è¿™é‡Œå°±å¯ä»¥å€ŸåŠ©Promiseå’Œimgçš„onloadäº‹ä»¶æ¥å®ç°åˆ¤æ–­æ‰€æœ‰å›¾ç‰‡æ˜¯å¦åŠ è½½å®Œæˆ</p><blockquote><p>ä»£ç å¦‚ä¸‹ï¼š</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> promiseAll = [],</span><br><span class="line">    img = [],</span><br><span class="line">    mulitImg = [</span><br><span class="line">        <span class="string">'./static/img/iphonexmax.png'</span>, <span class="string">'./static/img/beats3.png'</span>,</span><br><span class="line">        <span class="string">'./static/img/again.png'</span>, <span class="string">'./static/img/myhb.png'</span>,</span><br><span class="line">        <span class="string">'./static/img/iphonexr.png'</span>, <span class="string">'./static/img/mi.png'</span>,</span><br><span class="line">        <span class="string">'./static/img/again.png'</span>, <span class="string">'./static/img/myhb.png'</span></span><br><span class="line">    ]</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) &#123;</span><br><span class="line">    promiseAll[i] = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        img[i] = <span class="keyword">new</span> Image()</span><br><span class="line">        img[i].src = mulitImg[i]</span><br><span class="line">        img[i].onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">//ç¬¬iå¼ åŠ è½½å®Œæˆ</span></span><br><span class="line">            resolve(img[i])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Promise</span>.all(promiseAll).then(<span class="function">(<span class="params">img</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ä½ è¦å¤„ç†çš„å‡½æ•°</span></span><br><span class="line">    <span class="comment">// drawRouletteWheel(img)</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div>]]></content>
      
      
      <categories>
          
          <category> è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webpackä»å•é¡µé¢åˆ°å¤šé¡µé¢</title>
      <link href="/2018-08-22/webpack%E4%BB%8E%E5%8D%95%E9%A1%B5%E9%9D%A2%E5%88%B0%E5%A4%9A%E9%A1%B5%E9%9D%A2/"/>
      <url>/2018-08-22/webpack%E4%BB%8E%E5%8D%95%E9%A1%B5%E9%9D%A2%E5%88%B0%E5%A4%9A%E9%A1%B5%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ä»ä¸Šæ¬¡æ›´å®Œwebpackä»ä»€ä¹ˆéƒ½ä¸æ‡‚åˆ°å…¥é—¨ä¹‹åï¼Œå¥½ä¹…æ²¡æœ‰æ›´æ–°è¿‡æ–‡ç« äº†ï¼Œå¯èƒ½æ˜¯å› ä¸ºè‡ªå·±æ‡’äº†å§ã€‚ä»Šå¤©çœ‹äº†ä¸‹è‡ªå·±çš„ç´¢å¼•é‡å°‘äº†ä¸€åŠo(â•¥ï¹â•¥)oï¼Œå‘ç°äº‹æ€ä¸¥é‡ï¼Œèµ¶ç´§æ›´æ–°ä¸€ç¯‡23333</p><p>ä¹Ÿæ˜¯å› ä¸ºæœ€è¿‘è¸©äº†ä¸€äº›å¤šé¡µé¢çš„å‘ï¼Œæ­äº†ä¸€ä¸ªç®€å•çš„å¤šé¡µé¢æ¶æ„ï¼Œå¯¹äºå•é¡µé¢æˆ‘æƒ³å¤§å®¶çœ‹äº†ä¸Šç¯‡æ–‡ç« åŸºæœ¬å…¥é—¨äº†å§ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¼€å§‹ç©ç©å¤šé¡µé¢äº†ã€‚</p><p>é‚£ä¹ˆé—²è¯å°±ä¸å¤šè¯´äº†ï¼Œå¼€å§‹è¿›å…¥æ­£é¢˜å§</p><blockquote><p>æœ¬æ–‡çš„webpackåŸºäºwebpack4.0ï¼Œå…·ä½“æ˜¯4.12.0ç‰ˆæœ¬</p></blockquote><h1 id="æ¨¡å—åŒ–"><a href="#æ¨¡å—åŒ–" class="headerlink" title="æ¨¡å—åŒ–"></a>æ¨¡å—åŒ–</h1><p>å¯¹äºæˆ‘ä»¬ä¸Šä¸€ä¸ªé¡¹ç›®ï¼Œæˆ‘ä»¬æ²¡æœ‰æŠŠæˆ‘ä»¬çš„webpackçš„æ¨¡å—åŒ–ï¼Œè€Œå¯¹äºæˆ‘ä»¬ä¹‹å‰å†™çš„å•é¡µé¢ä¹Ÿè¶Šæ¥è¶Šå¤§ï¼Œç®¡ç†èµ·æ¥ä¹Ÿé¢‡ä¸ºéº»çƒ¦ï¼Œè€Œè‡ªä»es6å‡ºæ¥ä»¥åï¼Œæ¨¡å—åŒ–ä¹Ÿé€æ¸èå…¥äº†å‰ç«¯çš„æ€æƒ³å½“ä¸­ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç®€å•äº†è§£ä¸€ä¸‹å‰ç«¯çš„æ¨¡å—åŒ–è§„èŒƒå’Œå¦‚ä½•å®ç°æˆ‘ä»¬çš„webpackæ¨¡å—åŒ–å§</p><h2 id="ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–"><a href="#ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–" class="headerlink" title="ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–"></a>ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–</h2><p>åœ¨äº†è§£å‰ç«¯æ¨¡å—åŒ–è§„èŒƒå‰ï¼Œè¿˜æ˜¯éœ€è¦å…ˆæ¥ç®€å•åœ°äº†è§£ä¸‹ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–ï¼Œæ¨¡å—åŒ–å¼€å‘ï¼Ÿ</p><blockquote><p>æ¨¡å—åŒ–æ˜¯æŒ‡è§£å†³ä¸€ä¸ªå¤æ‚é—®é¢˜æ—¶è‡ªé¡¶å‘ä¸‹é€å±‚æŠŠç³»ç»Ÿåˆ’åˆ†æˆè‹¥å¹²æ¨¡å—çš„è¿‡ç¨‹ï¼Œæœ‰å¤šç§å±æ€§ï¼Œåˆ†åˆ«åæ˜ å…¶å†…éƒ¨ç‰¹æ€§ã€‚</p></blockquote><p>æ¥åŠ›å€ŸåŠ©å¤§ä½¬çš„ä¸€å¥è¯ï¼Œ</p><blockquote><p>å¾ˆå¤šäººè§‰å¾—æ¨¡å—åŒ–å¼€å‘çš„å·¥ç¨‹æ„ä¹‰æ˜¯å¤ç”¨ï¼Œæˆ‘ä¸å¤ªè®¤å¯è¿™ç§çœ‹æ³•ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œæ¨¡å—åŒ–å¼€å‘çš„æœ€å¤§ä»·å€¼åº”è¯¥æ˜¯åˆ†æ²»ï¼Œæ˜¯åˆ†æ²»ï¼Œåˆ†æ²»ï¼ï¼ˆé‡è¯´ä¸‰ï¼‰ã€‚ä¸ç®¡ä½ å°†æ¥æ˜¯å¦è¦å¤ç”¨æŸæ®µä»£ç ï¼Œä½ éƒ½æœ‰å……åˆ†çš„ç†ç”±å°†å…¶åˆ†æ²»ä¸ºä¸€ä¸ªæ¨¡å—ã€‚</p></blockquote><p>é¦–å…ˆï¼Œæ—¢ç„¶æ˜¯æ¨¡å—åŒ–è®¾è®¡ï¼Œé‚£ä¹ˆä½œä¸ºä¸€ä¸ªæ¨¡å—åŒ–ç³»ç»Ÿæ‰€å¿…é¡»çš„èƒ½åŠ›ï¼š</p><ul><li>å®šä¹‰å°è£…çš„æ¨¡å—ã€‚</li><li>å®šä¹‰æ–°æ¨¡å—å¯¹å…¶ä»–æ¨¡å—çš„ä¾èµ–ã€‚</li><li>å¯å¯¹å…¶ä»–æ¨¡å—çš„å¼•å…¥æ”¯æŒã€‚</li></ul><p>å¥½äº†ï¼Œæ€æƒ³æœ‰äº†ï¼Œé‚£ä¹ˆæ€»è¦æœ‰ç‚¹ä»€ä¹ˆæ¥å»ºç«‹ä¸€ä¸ªæ¨¡å—åŒ–çš„è§„èŒƒåˆ¶åº¦å§ï¼Œä¸ç„¶å„å¼å„æ ·çš„æ¨¡å—åŠ è½½æ–¹å¼åªä¼šå°†å±€æ…å¾—æ›´ä¸ºæ··ä¹±ã€‚é‚£ä¹ˆæˆ‘ä»¬æ¥ä¸‹æ¥å°±è®²è®²JavaScriptçš„æ¨¡å—åŒ–è§„èŒƒã€‚</p><h2 id="CommonJS"><a href="#CommonJS" class="headerlink" title="CommonJS"></a>CommonJS</h2><p>åœ¨es6æ²¡å‡ºæ¥ä¹‹å‰ï¼Œjsæ˜¯æ²¡æœ‰æ¨¡å—çš„åŠŸèƒ½ï¼Œæ‰€ä»¥CommonJSåº”è¿è€Œç”Ÿ</p><p>CommonJSå®šä¹‰çš„æ¨¡å—åˆ†ä¸º:</p><ul><li>æ¨¡å—å¼•ç”¨(require)</li><li>æ¨¡å—å®šä¹‰(exports)</li><li>æ¨¡å—æ ‡è¯†(module)</li></ul><p>require()ç”¨æ¥å¼•å…¥å¤–éƒ¨æ¨¡å—ï¼›exportså¯¹è±¡ç”¨äºå¯¼å‡ºå½“å‰æ¨¡å—çš„æ–¹æ³•æˆ–å˜é‡ï¼Œå”¯ä¸€çš„å¯¼å‡ºå£ï¼›moduleå¯¹è±¡å°±ä»£è¡¨æ¨¡å—æœ¬èº«ã€‚</p><h2 id="AMD"><a href="#AMD" class="headerlink" title="AMD"></a>AMD</h2><p>ç”±äºä¸€ä¸ªé‡å¤§çš„å±€é™ï¼Œä½¿å¾—CommonJSè§„èŒƒä¸é€‚ç”¨äºæµè§ˆå™¨ç¯å¢ƒã€‚å› ä¸ºæˆ‘ä»¬è¯·æ±‚çš„æ¨¡å—éƒ½æ”¾åœ¨æœåŠ¡å™¨ç«¯ï¼Œç­‰å¾…æ—¶é—´å–å†³äºç½‘é€Ÿçš„å¿«æ…¢ï¼Œå¯èƒ½è¦ç­‰å¾ˆé•¿æ—¶é—´ï¼Œæµè§ˆå™¨å¤„äºâ€å‡æ­»â€çŠ¶æ€ã€‚</p><p>å› æ­¤ï¼Œæµè§ˆå™¨ç«¯çš„æ¨¡å—ï¼Œä¸èƒ½é‡‡ç”¨â€åŒæ­¥åŠ è½½â€ï¼ˆsynchronousï¼‰ï¼Œåªèƒ½é‡‡ç”¨â€å¼‚æ­¥åŠ è½½â€ï¼ˆasynchronousï¼‰ã€‚è¿™å°±æ˜¯AMDè§„èŒƒè¯ç”Ÿçš„èƒŒæ™¯ã€‚</p><p>äºæ˜¯ä¹ï¼ŒAMD(å¼‚æ­¥æ¨¡å—å®šä¹‰)å‡ºç°äº†ï¼Œå®ƒå°±ä¸»è¦ä¸ºå‰ç«¯JSçš„è¡¨ç°åˆ¶å®šè§„èŒƒã€‚è€ŒAMDå°±åªæœ‰ä¸€ä¸ªæ¥å£ï¼šdefine(id?,dependencies?,factory);</p><p>AMD æ˜¯ RequireJS åœ¨æ¨å¹¿è¿‡ç¨‹ä¸­å¯¹æ¨¡å—å®šä¹‰çš„è§„èŒƒåŒ–äº§å‡º</p><h2 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a>CMD</h2><p><a href="https://github.com/seajs/seajs/issues/242" target="_blank" rel="noopener">CMDä¼ é€é—¨</a></p><p>CMD ä¸ AMD æŒºç›¸è¿‘ï¼ŒäºŒè€…åŒºåˆ«å¦‚ä¸‹ï¼š</p><ol><li><p>å¯¹äºä¾èµ–çš„æ¨¡å—AMDæ˜¯æå‰æ‰§è¡Œï¼ŒCMDæ˜¯å»¶è¿Ÿæ‰§è¡Œã€‚(RequireJS ä» 2.0 å¼€å§‹ï¼Œä¹Ÿæ”¹æˆå¯ä»¥å»¶è¿Ÿæ‰§è¡Œ)</p></li><li><p>CMDæ¨å´‡ä¾èµ–å°±è¿‘ï¼ŒæŒ‰éœ€åŠ è½½ï¼›AMDæ¨å´‡ä¾èµ–å‰ç½®ã€‚</p></li><li><p>AMD çš„ api é»˜è®¤æ˜¯ä¸€ä¸ªå½“å¤šä¸ªç”¨ï¼ŒCMD ä¸¥æ ¼çš„åŒºåˆ†æ¨å´‡èŒè´£å•ä¸€ï¼Œå…¶æ¯ä¸ª API éƒ½ç®€å•çº¯ç²¹ã€‚</p></li></ol><p>CMD æ˜¯ SeaJS åœ¨æ¨å¹¿è¿‡ç¨‹ä¸­å¯¹æ¨¡å—å®šä¹‰çš„è§„èŒƒåŒ–äº§å‡º</p><h2 id="UMD"><a href="#UMD" class="headerlink" title="UMD"></a>UMD</h2><p>UMDæ˜¯AMDä¸CommonJSæ¨¡å—æ–¹å¼çš„ç³…åˆã€‚</p><p>AMD æµè§ˆå™¨ç¬¬ä¸€çš„åŸåˆ™å‘å±• å¼‚æ­¥åŠ è½½æ¨¡å—ã€‚</p><p>CommonJS æ¨¡å—ä»¥æœåŠ¡å™¨ç¬¬ä¸€åŸåˆ™å‘å±•ï¼Œé€‰æ‹©åŒæ­¥åŠ è½½ï¼Œå®ƒçš„æ¨¡å—æ— éœ€åŒ…è£…(unwrapped modules)ã€‚</p><p>è¿™è¿«ä½¿äººä»¬åˆæƒ³å‡ºå¦ä¸€ä¸ªæ›´é€šç”¨çš„æ¨¡å¼UMD ï¼ˆUniversal Module Definitionï¼‰ã€‚å¸Œæœ›è§£å†³è·¨å¹³å°çš„è§£å†³æ–¹æ¡ˆã€‚</p><p>ä»–çš„ç¼ºç‚¹æ˜¯ï¼šä»£ç é‡å¤ªå¤§ã€‚å…¼å®¹éœ€è¦é¢å¤–çš„ä»£ç ï¼Œè€Œä¸”æ˜¯æ¯ä¸ªæ–‡ä»¶éƒ½è¦å†™è¿™ä¹ˆä¸€å¤§æ®µä»£ç ã€‚</p><h1 id="å®ç°webpackæ¨¡å—åŒ–"><a href="#å®ç°webpackæ¨¡å—åŒ–" class="headerlink" title="å®ç°webpackæ¨¡å—åŒ–"></a>å®ç°webpackæ¨¡å—åŒ–</h1><p>å½“ç„¶ï¼Œwebpackæ¨¡å—åŒ–æ˜¯åŸºäºCommonJsçš„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥çš„ä¿®æ”¹æˆ‘ä»¬ä¹‹å‰é‚£ä¸ªå•é¡µé¢çš„webpack-demoï¼Œå…ˆè¯•ç€æŠŠwebpakc-demoçš„æ¨¡å—åŒ–ã€‚</p><p>åœ¨æ ¹ç›®å½•ä¸‹æ–°å»º config çš„æ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜æ”¾æˆ‘ä»¬å„ä¸ªæ¨¡å—çš„é…ç½®æ–‡ä»¶</p><h2 id="entry"><a href="#entry" class="headerlink" title="entry"></a>entry</h2><p>åœ¨configç›®å½•ä¸‹æ–°å»º entry.js æ–‡ä»¶</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    index: <span class="string">'./src/js/index.js'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h2 id="output"><a href="#output" class="headerlink" title="output"></a>output</h2><p>åœ¨configç›®å½•ä¸‹æ–°å»º output.js æ–‡ä»¶</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">// å¿…é¡»æ˜¯ç»å¯¹è·¯åŠ²</span></span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'../dist'</span>),</span><br><span class="line">    filename: <span class="string">'js/[name].js'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h2 id="module"><a href="#module" class="headerlink" title="module"></a>module</h2><p>åœ¨configç›®å½•ä¸‹æ–°å»º modules.js æ–‡ä»¶</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">'extract-text-webpack-plugin'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    rules: [&#123;</span><br><span class="line">        test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        use: [<span class="string">'babel-loader'</span>],</span><br><span class="line">        <span class="comment">// é™¤node_modulesç›®å½•å¤–ï¼Œå…¶ä»–éƒ½babelç¼–è¯‘</span></span><br><span class="line">        exclude: <span class="regexp">/node_modules/</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// ä»å³å‘å·¦(ä»ä¸‹å‘ä¸Š)å¼€å§‹æ‰§è¡Œ</span></span><br><span class="line">        <span class="comment">// æå–css</span></span><br><span class="line">        use: ExtractTextPlugin.extract(&#123;</span><br><span class="line">            <span class="comment">// åªåœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨</span></span><br><span class="line">            <span class="comment">// use style-loader in development</span></span><br><span class="line">            fallback: <span class="string">'style-loader'</span>,</span><br><span class="line">            use: [&#123;</span><br><span class="line">                loader: <span class="string">'css-loader'</span>,</span><br><span class="line">                options: &#123;</span><br><span class="line">                    minimize: <span class="literal">true</span> <span class="comment">//csså‹ç¼©</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                loader: <span class="string">'postcss-loader'</span></span><br><span class="line">            &#125;],</span><br><span class="line">            <span class="comment">// è§£å†³cssæ‰“åŒ…èƒŒæ™¯å›¾çš„è·¯å¾„é—®é¢˜</span></span><br><span class="line">            publicPath: <span class="string">'../'</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="comment">// use:['style-loader','css-loader','less-loader']</span></span><br><span class="line">        <span class="comment">// å¦‚æœæƒ³åˆ†ç¦»less</span></span><br><span class="line">        use: ExtractTextPlugin.extract(&#123;</span><br><span class="line">            <span class="comment">// åªåœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨</span></span><br><span class="line">            <span class="comment">// use style-loader in development</span></span><br><span class="line">            fallback: <span class="string">'style-loader'</span>,</span><br><span class="line">            use: [<span class="string">'css-loader'</span>, <span class="string">'postcss-loader'</span>, <span class="string">'less-loader'</span>],</span><br><span class="line">            <span class="comment">// è§£å†³cssæ‰“åŒ…èƒŒæ™¯å›¾çš„è·¯å¾„é—®é¢˜</span></span><br><span class="line">            publicPath: <span class="string">'../'</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        test: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">        use: [&#123;</span><br><span class="line">            loader: <span class="string">'url-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">                <span class="comment">// å°äº10kbè½¬æˆbase64</span></span><br><span class="line">                limit: <span class="number">10240</span>,</span><br><span class="line">                <span class="comment">// æ‰“åŒ…åçš„æ–‡ä»¶å¤¹</span></span><br><span class="line">                outputPath: <span class="string">'img'</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            loader: <span class="string">'image-webpack-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">                <span class="comment">// è®¾ç½®å¯¹jpgæ ¼å¼çš„å›¾ç‰‡å‹ç¼©çš„ç¨‹åº¦è®¾ç½®</span></span><br><span class="line">                mozjpeg: &#123;</span><br><span class="line">                    progressive: <span class="literal">true</span>,</span><br><span class="line">                    quality: <span class="number">65</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h2 id="plugins"><a href="#plugins" class="headerlink" title="plugins"></a>plugins</h2><p>åœ¨configç›®å½•ä¸‹æ–°å»º plugins.js æ–‡ä»¶</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="comment">// ç”Ÿæˆhtmlé¡µé¢</span></span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"><span class="comment">// åˆ é™¤æŸäº›ä¸œè¥¿</span></span><br><span class="line"><span class="keyword">const</span> CleanWebpackPlugin = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>)</span><br><span class="line"><span class="comment">// å¤„ç†é™æ€èµ„æº,é™æ€èµ„æºè¾“å‡º</span></span><br><span class="line"><span class="keyword">const</span> CopyWebpackPlugin = <span class="built_in">require</span>(<span class="string">'copy-webpack-plugin'</span>)</span><br><span class="line"><span class="comment">// å¼•å…¥webpack</span></span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</span><br><span class="line"><span class="comment">// æå–css</span></span><br><span class="line"><span class="keyword">const</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">'extract-text-webpack-plugin'</span>)</span><br><span class="line"><span class="comment">// åˆ é™¤å†—ä½™cssä»£ç </span></span><br><span class="line"><span class="keyword">const</span> PurifyCssWebpack = <span class="built_in">require</span>(<span class="string">'purifycss-webpack'</span>)</span><br><span class="line"><span class="comment">// ç”¨äºè·å–æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">const</span> glob = <span class="built_in">require</span>(<span class="string">'glob'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = [</span><br><span class="line">    <span class="comment">// ç”Ÿæˆå¤šä¸ªé¡µé¢éœ€è¦è°ƒç”¨å¤šæ¬¡new HtmlWebpackPlugin() å¤šé¡µé¢çš„é…ç½®</span></span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        <span class="comment">// ç”Ÿæˆå¤šä¸ªé¡µé¢,filenameä½œä¸ºæ ‡è¯†</span></span><br><span class="line">        filename: <span class="string">'index.html'</span>,</span><br><span class="line">        <span class="comment">// å¤šé¡µé¢å¼•å…¥è‡ªå·±çš„js</span></span><br><span class="line">        <span class="comment">// chunks:['index'],</span></span><br><span class="line">        <span class="comment">// è‡ªå®šä¹‰æ¨¡æ¿æ ‡é¢˜</span></span><br><span class="line">        <span class="comment">// æ¨¡æ¿é¡µtitleå®šä¹‰ä¸º &lt;%= htmlWebpackPlugin.options.title %&gt;</span></span><br><span class="line">        <span class="comment">// å¿…é¡»è¿™ä¹ˆå†™htmlWebpackPlugin</span></span><br><span class="line">        title: <span class="string">'hello world'</span>,</span><br><span class="line">        <span class="comment">// æ¨¡æ¿</span></span><br><span class="line">        template: <span class="string">'./src/index.html'</span>,</span><br><span class="line">        <span class="comment">// ç”Ÿæˆçš„æ–‡ä»¶æ¶ˆé™¤ç¼“å­˜</span></span><br><span class="line">        hash: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// å‹ç¼©è¾“å‡º</span></span><br><span class="line">        minify: &#123;</span><br><span class="line">            <span class="comment">// åˆ é™¤ç©ºç™½å­—ç¬¦(æŠ˜å ç©ºç™½åŒºåŸŸ)</span></span><br><span class="line">            <span class="comment">// collapseWhitespace:true,</span></span><br><span class="line">            <span class="comment">// åˆ é™¤å±æ€§çš„åŒå¼•å·</span></span><br><span class="line">            <span class="comment">// removeAttributeQuotes:true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> CleanWebpackPlugin([<span class="string">'dist'</span>]),</span><br><span class="line">    <span class="comment">// é™æ€èµ„æºè¾“å‡º</span></span><br><span class="line">    <span class="keyword">new</span> CopyWebpackPlugin([&#123;</span><br><span class="line">        <span class="comment">// åˆå§‹æ–‡ä»¶å¤¹</span></span><br><span class="line">        <span class="keyword">from</span>: path.resolve(__dirname, <span class="string">'../src/asset'</span>),</span><br><span class="line">        <span class="comment">// ç›®æ ‡æ–‡ä»¶å¤¹</span></span><br><span class="line">        to: <span class="string">'./public'</span></span><br><span class="line">    &#125;]),</span><br><span class="line">    <span class="comment">// ä½¿ç”¨çƒ­æ›´æ–°</span></span><br><span class="line">    <span class="keyword">new</span> webpack.HotModuleReplacementPlugin(),</span><br><span class="line">    <span class="comment">// æå–css</span></span><br><span class="line">    <span class="keyword">new</span> ExtractTextPlugin(&#123;</span><br><span class="line">        filename: <span class="string">'css/[name].css'</span>,</span><br><span class="line">        <span class="comment">// æ ¹æ®ä¸åŒç¯å¢ƒèµ°ä¸åŒçš„é…ç½®ï¼ˆåœ¨å¼€å‘ç¯å¢ƒä¸‹ä¸ä½¿ç”¨ï¼‰</span></span><br><span class="line">        disable: process.env.NODE_ENV === <span class="string">"development"</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// åˆ é™¤å†—ä½™cssä»£ç </span></span><br><span class="line">    <span class="keyword">new</span> PurifyCssWebpack(&#123;</span><br><span class="line">        <span class="comment">// purifycssä¼šæ ¹æ®é…ç½®çš„è·¯åŠ²éå†ä½ çš„HTMLæ–‡ä»¶ï¼ŒæŸ¥æ‰¾ä½ ä½¿ç”¨çš„CSS</span></span><br><span class="line">        paths: glob.sync(path.join(__dirname, <span class="string">'src/*.html'</span>)),</span><br><span class="line">        minimize: <span class="literal">true</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// å‘å…¨å±€æš´éœ²ç¬¬ä¸‰æ–¹åº“</span></span><br><span class="line">    <span class="keyword">new</span> webpack.ProvidePlugin(&#123;</span><br><span class="line">        $: <span class="string">'jquery'</span>,</span><br><span class="line">        jQuery: <span class="string">'jquery'</span></span><br><span class="line">    &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure></div><h2 id="devServer"><a href="#devServer" class="headerlink" title="devServer"></a>devServer</h2><p>åœ¨configç›®å½•ä¸‹æ–°å»º devServer.js æ–‡ä»¶</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">// è®¾ç½®æœåŠ¡å™¨è®¿é—®çš„åŸºæœ¬ç›®å½•</span></span><br><span class="line">    contentBase: path.resolve(__dirname, <span class="string">'../dist'</span>),</span><br><span class="line">    <span class="comment">// è®¾ç½®å¼€å‘æœåŠ¡å™¨çš„åœ°å€</span></span><br><span class="line">    host: <span class="string">'localhost'</span>,</span><br><span class="line">    <span class="comment">// è®¾ç½®å¼€å‘æœåŠ¡å™¨çš„ç«¯å£</span></span><br><span class="line">    port: <span class="number">8080</span>,</span><br><span class="line">    <span class="comment">// è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">    open: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// é…ç½®çƒ­æ›´æ–°</span></span><br><span class="line">    hot: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h2 id="optimization"><a href="#optimization" class="headerlink" title="optimization"></a>optimization</h2><p>åœ¨configç›®å½•ä¸‹æ–°å»º optimization.js æ–‡ä»¶</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">        cacheGroups: &#123;</span><br><span class="line">            <span class="comment">// è¿™ä¼šåˆ›å»ºä¸€ä¸ªvendorä»£ç å—ï¼Œè¿™ä¸ªä»£ç å—åŒ…å«æ‰€æœ‰è¢«å…¶ä»–å…¥å£(entrypoints)å…±äº«çš„ä»£ç ã€‚</span></span><br><span class="line">            vendor: &#123;</span><br><span class="line">                test: <span class="regexp">/node_modules/</span>,</span><br><span class="line">                chunks: <span class="string">'initial'</span>,</span><br><span class="line">                name: <span class="string">'vendor'</span>,</span><br><span class="line">                priority: <span class="number">10</span>,</span><br><span class="line">                enforce: <span class="literal">true</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ä¸ºæ¯ä¸€ä¸ªå…¥å£é»˜è®¤æ·»åŠ ä¸€ä¸ªåªåŒ…å« runtime çš„ chunk</span></span><br><span class="line">    runtimeChunk: &#123;</span><br><span class="line">        name: <span class="string">'runtime'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h2 id="webpack-config-js"><a href="#webpack-config-js" class="headerlink" title="webpack.config.js"></a>webpack.config.js</h2><p>å†çœ‹çœ‹æˆ‘ä»¬çš„webpack.config.js æ–‡ä»¶</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> entry = <span class="built_in">require</span>(<span class="string">'./config/entry'</span>)</span><br><span class="line"><span class="keyword">const</span> output = <span class="built_in">require</span>(<span class="string">'./config/output'</span>)</span><br><span class="line"><span class="keyword">const</span> modules = <span class="built_in">require</span>(<span class="string">'./config/modules'</span>)</span><br><span class="line"><span class="keyword">const</span> plugins = <span class="built_in">require</span>(<span class="string">'./config/plugins'</span>)</span><br><span class="line"><span class="keyword">const</span> devServer = <span class="built_in">require</span>(<span class="string">'./config/devServer'</span>)</span><br><span class="line"><span class="keyword">const</span> optimization = <span class="built_in">require</span>(<span class="string">'./config/optimization'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">// å…¥å£é…ç½®</span></span><br><span class="line">    entry,</span><br><span class="line">    <span class="comment">// å‡ºå£æ–‡ä»¶</span></span><br><span class="line">    output,</span><br><span class="line">    <span class="built_in">module</span>: modules,</span><br><span class="line">    plugins,</span><br><span class="line">    <span class="comment">// å¼€å‘æœåŠ¡å™¨</span></span><br><span class="line">    devServer,</span><br><span class="line">    optimization</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>npm run dev æµ‹è¯•ä¸€ä¸‹ï¼Œå‘ç°å’Œä»¥å‰çš„æ²¡æœ‰åŒºåˆ«å°±æˆåŠŸå•¦</p><p>å‰é¢è®²äº†è¿™ä¹ˆå¤šï¼Œç„¶åå‘ç°å’Œä»¥å‰ä¸€ç‚¹åŒºåˆ«éƒ½æ²¡æœ‰ï¼Œæ˜¯ä¸æ˜¯å¾ˆåƒæ‹æ­»æˆ‘äº†ï¼Œäºæˆ‘çœ‹äº†å¤§åŠä¸ªé’Ÿï¼Œç„¶è€Œå•¥ä¹Ÿæ²¡å­¦åˆ°ã€‚</p><p>åˆ«ç€æ€¥å˜›ï¼Œä½ åœ¨çœ‹çœ‹æˆ‘ä»¬æ¨¡å—åŒ–ä¹‹åï¼Œä¸»æ–‡ä»¶æ˜¯ä¸æ˜¯ç®€å•äº†è®¸å¤šï¼Œè€Œä¸”æ’é”™ä¹Ÿæ›´åŠ çš„æ–¹ä¾¿ç›´è§‚äº†</p><h1 id="å¤šé¡µé¢æ„å»ºï¼ˆæ­£é¢˜ï¼‰"><a href="#å¤šé¡µé¢æ„å»ºï¼ˆæ­£é¢˜ï¼‰" class="headerlink" title="å¤šé¡µé¢æ„å»ºï¼ˆæ­£é¢˜ï¼‰"></a>å¤šé¡µé¢æ„å»ºï¼ˆæ­£é¢˜ï¼‰</h1><p>æ—¢ç„¶å·²ç»å®ç°äº†æ¨¡å—åŒ–ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å°±è¯´è¯´å¤šé¡µé¢å§ï¼Œä¹Ÿæ˜¯æ—¶å€™è¿›å…¥æ­£é¢˜äº†</p><p>ä¸Šæ¬¡æˆ‘ä»¬è¯´åˆ°ï¼Œå¤šæ¬¡new HtmlWebpackPlugin()å°±å¯ä»¥ç”Ÿæˆå¤šä¸ªé¡µé¢äº†ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æœ‰20æ¥ä¸ªé¡µé¢ï¼Œnewä¸ª20å¤šæ¬¡ï¼Œå®å±ä¸æ˜¯å¾ˆä¼˜é›…ï¼Œæ‰€ä»¥æˆ‘ä»¬æƒ³çœ‹æœ‰æ²¡æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œæ ¹æ®æˆ‘ä»¬ä¼ è¿›å»çš„è·¯å¾„å°±å¯ä»¥ç”Ÿæˆæˆ‘ä»¬åˆ¶å®šçš„é¡µé¢å‘¢ï¼Ÿå½“ç„¶æ˜¯å¯ä»¥çš„ã€‚ä¸è¿‡æ—¢ç„¶æ˜¯å¤šé¡µé¢é‚£ä¹ˆè‚¯å®šå°±æ˜¯å¤šå…¥å£çš„ï¼Œå› ä¸ºwebpackæ˜¯ä»¥jsä¸ºå…¥å£çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨entryé‚£é‡Œå®šä¹‰æˆ‘ä»¬çš„å…¥å£å³å¯</p><p>æ‰“å¼€entry.jsï¼Œå¹¶ä¿®æ”¹entryçš„ä»£ç </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> glob = <span class="built_in">require</span>(<span class="string">'glob'</span>)</span><br><span class="line"><span class="comment">// è·å–æ‰€æœ‰å…¥å£æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">const</span> getEntry = <span class="function"><span class="keyword">function</span> (<span class="params">globPath</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> entries = &#123;&#125;;</span><br><span class="line">    glob.sync(globPath).forEach(<span class="function"><span class="keyword">function</span> (<span class="params">entry</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> pathname = entry.split(<span class="string">'/'</span>).splice(<span class="number">-1</span>).join(<span class="string">'/'</span>).split(<span class="string">'.'</span>)[<span class="number">0</span>];</span><br><span class="line">        entries[pathname] = [entry];</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> entries;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> entries = getEntry(<span class="string">'./src/static/js/*.js'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = entries</span><br></pre></td></tr></table></figure></div><p>æ‰“å¼€plugins.jsï¼Œå¹¶ä¿®æ”¹pluginsçš„ä»£ç </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">plugins = [</span><br><span class="line">    --w HtmlWebpackPlugin(&#123;</span><br><span class="line">    --  filename: <span class="string">'index.html'</span>,</span><br><span class="line">    -- title: <span class="string">'hello world'</span>,</span><br><span class="line">    --  template: <span class="string">'./src/index.html'</span>,</span><br><span class="line">    --  hash: <span class="literal">true</span>,</span><br><span class="line">    --,</span><br><span class="line">    ......</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> entries = <span class="built_in">require</span>(<span class="string">'./entry'</span>)</span><br><span class="line"><span class="keyword">let</span> chunks = <span class="built_in">Object</span>.keys(entries);</span><br><span class="line"><span class="keyword">const</span> metaArr = [&#123;</span><br><span class="line">    charset: <span class="string">'UTF-8'</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">    name: <span class="string">'viewport'</span>,</span><br><span class="line">    content: <span class="string">'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0'</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">    <span class="string">'http-equiv'</span>: <span class="string">'X-UA-Compatible'</span>,</span><br><span class="line">    content: <span class="string">'ie=edge'</span></span><br><span class="line">&#125;]</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”ŸæˆHTMLæ–‡ä»¶</span></span><br><span class="line">chunks.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">pathname</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (pathname == <span class="string">'vendor'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> conf = &#123;</span><br><span class="line">        <span class="comment">// è¾“å‡ºçš„æ–‡ä»¶å</span></span><br><span class="line">        filename: pathname + <span class="string">'.html'</span>,</span><br><span class="line">        <span class="comment">// å¼•ç”¨çš„æ¨¡æ¿æ–‡ä»¶</span></span><br><span class="line">        template: path.resolve(__dirname, <span class="string">'../src/index.html'</span>),</span><br><span class="line">        <span class="comment">// æ˜¯å¦æ¸…é™¤ç¼“å­˜</span></span><br><span class="line">        hash: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// é¡µé¢çš„js</span></span><br><span class="line">        chunks: [pathname, <span class="string">'runtime'</span>, <span class="string">'vendor'</span>],</span><br><span class="line">        <span class="comment">// å°†è„šæœ¬æ”¾åœ¨headå…ƒç´ ä¸­,é»˜è®¤ä¸ºbodyä¸­</span></span><br><span class="line">        <span class="comment">// inject: 'head',</span></span><br><span class="line">        meta: metaArr,</span><br><span class="line">        <span class="comment">// å‹ç¼©html</span></span><br><span class="line">        minify: &#123;</span><br><span class="line">            <span class="comment">// åˆ é™¤ç©ºç™½å­—ç¬¦(æŠ˜å ç©ºç™½åŒºåŸŸ)</span></span><br><span class="line">            collapseWhitespace: <span class="literal">true</span>,</span><br><span class="line">            <span class="comment">// åˆ é™¤å±æ€§çš„åŒå¼•å·</span></span><br><span class="line">            removeAttributeQuotes: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// ç«™ç‚¹å›¾æ ‡</span></span><br><span class="line">        favicon: path.resolve(__dirname, <span class="string">'../src/favicon.ico'</span>)</span><br><span class="line">    &#125;;</span><br><span class="line">    plugins.push(<span class="keyword">new</span> HtmlWebpackPlugin(conf));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = plugins</span><br></pre></td></tr></table></figure></div><p>åœ¨/src/jsç›®å½•ä¸‹æ–°å»ºä¸ªabout.jsæ¥æµ‹è¯•ä¸‹æˆ‘ä»¬å†™çš„å¤šé¡µé¢é…ç½®ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'æˆ‘æ˜¯abouté¡µ'</span>);</span><br></pre></td></tr></table></figure></div><p>ä¿®æ”¹/src/index.html,ä»£ç å¦‚ä¸‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">htmlWebpackPlugin.options.title</span> %&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"./index.html"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"./about.html"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>è¿è¡Œ npm run dev , ç‚¹å‡»2ï¼Œä½ ä¼šå‘ç°è·³è½¬åˆ°äº†abouté¡µï¼Œè€Œä¸”æ§åˆ¶å°ä¹Ÿè¾“å‡ºäº†â€˜æˆ‘æ˜¯abouté¡µâ€™ï¼Œè¿™æ ·æˆ‘ä»¬çš„å¤šé¡µé¢é…ç½®å°±ç®—æ˜¯åˆæ­¥å®Œæˆäº†</p><h1 id="æ¨¡æ¿å¼•æ“ç¯‡"><a href="#æ¨¡æ¿å¼•æ“ç¯‡" class="headerlink" title="æ¨¡æ¿å¼•æ“ç¯‡"></a>æ¨¡æ¿å¼•æ“ç¯‡</h1><p>è™½ç„¶å®Œæˆäº†æˆ‘ä»¬çš„å¤šé¡µé¢é…ç½®ï¼Œä½†æ˜¯å…¶å®ä½ ä¼šå‘ç°ä¹Ÿæœ‰å¾ˆå¤šçš„ä¸æ–¹ä¾¿å•¦ï¼Œåƒæˆ‘è¿™ä¹ˆæ‡’çš„äººï¼Œè‚¯å®šæ˜¯è¶Šæ–¹ä¾¿è¶Šå¥½</p><p>å…ˆè¯´è¯´æˆ‘ä»¬çš„é—®é¢˜ï¼Œæƒ³ä¸€ä¸ªæ­£å¸¸çš„é¡µé¢ï¼Œè‚¯å®šä¼šæœ‰å¾ˆå¤šå…¬å…±çš„å¤´éƒ¨å’Œåº•éƒ¨ï¼Œæ¯”å¦‚å¯¼èˆªæ å°±æ˜¯å…¬å…±çš„ï¼Œè¿™æ—¶ï¼Œæˆ‘ä»¬ä¸Šé¢çš„å¤šé¡µé¢æ–¹é¢ï¼Œè¦æ¯æ¬¡æŠŠå…¬å…±éƒ¨åˆ†å†™è¿›å»ï¼Œè¿™æ ·å°±ä¼šå¾ˆéº»çƒ¦äº†</p><p>å¦‚æœç”¨è¿‡gulpçš„åŒå­¦çŸ¥é“æœ‰ä¸ª gulp-file-include å¯ä»¥å¼•å…¥å…¬å…±æ–‡ä»¶ï¼Œä½†æ˜¯æœ‰ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯å¯¼èˆªæ é«˜äº®è¦é€šè¿‡jsæ§åˆ¶ï¼Œä¸èƒ½é€šè¿‡ä¼ å€¼</p><p>æˆ‘ä»¬è¿™é‡Œå°±ç”¨ ejs æ¥è§£å†³æˆ‘ä»¬çš„é—®é¢˜ï¼ˆä½†æ˜¯ejså¹¶ä¸èƒ½è§£å†³æˆ‘ä»¬å¼•å…¥å…¬å…±å¤´çš„é—®é¢˜ï¼Œå› ä¸ºä»–ä¸æ”¯æŒincluedé‚£ç§è¯­æ³•ï¼‰ï¼Œä¸‹é¢ä¼šè¯¦ç»†è¯´æ˜è§£å†³æ–¹æ³•</p><blockquote><p>npm install ejs-loader -S</p></blockquote><p>é¦–å…ˆï¼Œå› ä¸º html-webpack-plugin ä¸å…³å¿ƒä½ ç”¨çš„æ˜¯ä»€ä¹ˆæ¨¡æ¿å¼•èµ·ï¼Œåªè¦ä½ exportå‡ºæ¥çš„æ˜¯ä¸€ä»½å®Œæ•´çš„HTMLå­—ç¬¦ä¸²ï¼Œä»–å°±ä¼šè‡ªåŠ¨å¤„ç†äº†ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬è¿™ä¸ªè¿™è¾¹é€šè¿‡jsæ–‡ä»¶æ¥exportä¸€ä»½å®Œæ•´çš„HTMLä»£ç ã€‚ä¸‹é¢æˆ‘ç”¨index.jså’Œabout.jsä½œä¸ºä¾‹å­ï¼š</p><p>å› ä¸ºæˆ‘ä»¬å®‰è£…äº†ejsï¼Œé…ç½®ä¸‹ejs-loaderï¼Œä¿®æ”¹ä¸‹config/modules.js</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    rules:[&#123;</span><br><span class="line">        test: <span class="regexp">/\.ejs$/</span>,</span><br><span class="line">        use: [<span class="string">'ejs-loader'</span>]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h2 id="layoutæ¨¡æ¿ç¯‡"><a href="#layoutæ¨¡æ¿ç¯‡" class="headerlink" title="layoutæ¨¡æ¿ç¯‡"></a>layoutæ¨¡æ¿ç¯‡</h2><p>ç„¶åä¿®æ”¹ä¸‹æˆ‘ä»¬srcç›®å½•ï¼Œæ—¢ç„¶æˆ‘ä»¬ç”¨äº†ejsï¼Œä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬æ›´å¥½çš„å¤„ç†ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸‹æˆ‘ä»¬çš„ç›®å½•ç»“æ„äº†</p><p>æŠŠsrcæ‰€æœ‰ç›®å½•åˆ é™¤æ‰ï¼Œæ–°å»º layoutã€pagesã€static ç›®å½•ï¼Œä»å‘½åæ¥çœ‹ï¼Œlayoutæ˜¯æ”¾ç€æˆ‘ä»¬çš„æ¨¡æ¿æ–‡ä»¶ï¼Œpagesæ”¾ç€æ˜¯æˆ‘ä»¬çš„é¡µé¢æ–‡ä»¶ï¼Œstaticæ”¾ç€æˆ‘ä»¬çš„èµ„æºæ–‡ä»¶</p><p>åœ¨layoutç›®å½•ä¸‹æ–°å»ºlayout.ejsæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%=</span> <span class="attr">header</span> %&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">%=</span> <span class="attr">content</span> %&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%=</span> <span class="attr">footer</span> %&gt;</span></span><br></pre></td></tr></table></figure></div><p>ä»ä»£ç æ¥çœ‹å°±çŸ¥é“ï¼Œheaderã€contentã€footeréƒ½æ˜¯ä½œä¸ºä¸€ä¸ªå˜é‡ï¼Œç„¶åæˆ‘ä»¬æ–°å»ºheader.ejsã€footer.ejsä½œä¸ºå…¬å…±å¤´éƒ¨å’Œå°¾éƒ¨</p><p>header.ejså†…å®¹å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;<span class="name">%</span> <span class="attr">if</span> (<span class="attr">pageTitle</span>) &#123; %&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">pageTitle</span> %&gt;</span><span class="tag">&lt;<span class="name">%</span> &#125; %&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">%</span> <span class="attr">navList.forEach</span>(\<span class="attr">function</span>(<span class="attr">item</span>)&#123; %&gt;</span><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"&lt;%=item.url==navName?'active':'' %&gt;"</span>&gt;</span><span class="tag">&lt;<span class="name">%=item.title</span> %&gt;</span> <span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">%</span> &#125;) %&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br></pre></td></tr></table></figure></div><blockquote><p>headeré¡µé¢çš„\éƒ½å»æ‰ï¼Œå› ä¸ºJekyllç¼–è¯‘å¤±è´¥ï¼Œæ— å¥ˆåŠ ä¸Š</p></blockquote><p>footer.ejså†…å®¹å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">        <span class="tag">&lt;<span class="name">footer</span>&gt;</span>æˆ‘æ˜¯å…¬å…±åº•éƒ¨<span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>ç„¶ååˆ°æˆ‘ä»¬çš„æ ¸å¿ƒ,æ–°å»º index.js:</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> layout = <span class="built_in">require</span>(<span class="string">'./layout.ejs'</span>);</span><br><span class="line"><span class="keyword">const</span> header = <span class="built_in">require</span>(<span class="string">'./header.ejs'</span>);</span><br><span class="line"><span class="keyword">const</span> footer = <span class="built_in">require</span>(<span class="string">'./footer.ejs'</span>);</span><br><span class="line"><span class="comment">// è¿™é‡Œä½œä¸ºæˆ‘ä»¬éœ€è¦çš„å‚æ•°</span></span><br><span class="line"><span class="keyword">const</span> pf = &#123;</span><br><span class="line">    pageTitle: <span class="string">''</span>,</span><br><span class="line">    navName: <span class="string">''</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> moduleExports = &#123;</span><br><span class="line">    init(&#123;</span><br><span class="line">        pageTitle,</span><br><span class="line">        navName</span><br><span class="line">    &#125;) &#123;</span><br><span class="line">        pf.pageTitle = pageTitle;</span><br><span class="line">        pf.navName = navName;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    run(content) &#123;</span><br><span class="line">        <span class="keyword">const</span> componentRenderData = <span class="built_in">Object</span>.assign(&#123;&#125;, &#123;</span><br><span class="line">            navList: [&#123;</span><br><span class="line">                title: <span class="string">'é¦–é¡µ'</span>,</span><br><span class="line">                url: <span class="string">'index'</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                title: <span class="string">'å…³äºæˆ‘ä»¬'</span>,</span><br><span class="line">                url: <span class="string">'about'</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;, pf);</span><br><span class="line">        <span class="keyword">const</span> renderData = &#123;</span><br><span class="line">            header: header(componentRenderData),</span><br><span class="line">            footer: footer(componentRenderData),</span><br><span class="line">            content,</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> layout(renderData);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">module</span>.exports = moduleExports;</span><br></pre></td></tr></table></figure></div><p>index.jsçš„ä¸»è¦åŠŸèƒ½å°±æ˜¯æ¥æ”¶å„ä¸ªé¡µé¢ç‹¬æœ‰çš„å‚æ•°ï¼ˆæ¯”å¦‚è¯´é¡µé¢åç§°ï¼‰ï¼Œå¹¶å°†è¿™äº›å‚æ•°ä¼ å…¥ç”Ÿæˆå„è‡ªHTMLå­—ç¬¦ä¸²ï¼Œç„¶åæ ¹æ®layoutæœ¬èº«çš„æ¨¡æ¿æ–‡ä»¶å°†å„ç»„ä»¶çš„HTMLä»¥åŠé¡µé¢å®é™…å†…å®¹çš„HTMLæ‹¼æ¥åœ¨ä¸€èµ·ï¼Œæœ€ç»ˆå½¢æˆä¸€ä¸ªå®Œæ•´çš„HTMLé¡µé¢æ–‡æ¡£ã€‚</p><h2 id="pagesé¡µé¢ç¯‡"><a href="#pagesé¡µé¢ç¯‡" class="headerlink" title="pagesé¡µé¢ç¯‡"></a>pagesé¡µé¢ç¯‡</h2><p>åœ¨æˆ‘ä»¬ä¹‹å‰æ–°å»ºçš„pagesç›®å½•ä¸‹æ–°å»ºæˆ‘ä»¬çš„é¡µé¢ç›®å½•ï¼Œè¿™é‡Œæˆ‘ä»¬æ–°å»ºindexå’Œaboutç›®å½•ï¼Œä¸ºä»€ä¹ˆæ–°å»ºæ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦ç”¨ä»–ä»¬å„è‡ªçš„jsåˆ°å¤„å®Œæ•´çš„HTMLå­—ç¬¦ä¸²ï¼ˆä¸Šé¢ä¹Ÿè¯´äº†ï¼‰ï¼Œæ¥ä¸‹å•¦å°±æ˜¯å¼€å§‹å¹²æ­£äº‹äº†</p><p>åœ¨indexç›®å½•ä¸‹æ–°å»º index.ejs å’Œ index.js æ–‡ä»¶</p><p>index.ejsä¸»è¦è´Ÿè´£layoutæ¨¡æ¿ä¸­çš„contentå†…å®¹ï¼Œä¸»è¦æ˜¯é¡µé¢å†…å®¹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"h1"</span>&gt;</span>æˆ‘æ˜¯é¦–é¡µ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"$&#123;require('../../static/img/1.jpg')&#125;"</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>index.js ä¸»è¦æ˜¯è´Ÿè´£å¯¼å‡ºé¡µé¢çš„å­—ç¬¦ä¸²</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> content = <span class="built_in">require</span>(<span class="string">'./index.ejs'</span>);</span><br><span class="line"><span class="keyword">const</span> layout = <span class="built_in">require</span>(<span class="string">'../../layout'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = layout.init(&#123;</span><br><span class="line">    pageTitle: <span class="string">'é¦–é¡µ'</span>,</span><br><span class="line">    navName: <span class="string">'index'</span></span><br><span class="line">&#125;).run(content());</span><br></pre></td></tr></table></figure></div><p>åšäº†è¿™äº›å¤„ç†ä¹‹åï¼Œä¼šå‘ç°æˆ‘ä»¬çš„å…¥å£æ–‡ä»¶å‘ç”Ÿäº†æ”¹å˜ï¼Œè¿™æ ·å­å°±éœ€è¦ä¿®æ”¹æˆ‘ä»¬çš„å…¥å£é…ç½®æ–‡ä»¶äº†ï¼Œæ‰“å¼€config/entry.jsæ–‡ä»¶</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">--<span class="keyword">const</span> entries = getEntry(<span class="string">'./src/js/*.js'</span>)</span><br><span class="line"><span class="keyword">const</span> entries = getEntry(<span class="string">'./src/static/js/*.js'</span>)</span><br></pre></td></tr></table></figure></div><p>ä¹Ÿæ˜¯å› ä¸ºæˆ‘ä»¬ä½¿ç”¨jsä¸ºå…¥å£ï¼Œä¿®æ”¹ä¸‹configä¸‹çš„modules.jså’Œplugins.jsæ–‡ä»¶</p><p>modules.js</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    rules : [&#123;</span><br><span class="line">            --exclude: <span class="regexp">/node_modules/</span></span><br><span class="line">            include: [</span><br><span class="line">                path.resolve(__dirname, <span class="string">'../src/static/js'</span>)</span><br><span class="line">            ]</span><br><span class="line">        &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>plugins.js</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¿®æ”¹template</span></span><br><span class="line">template: path.resolve(__dirname, <span class="string">'../src/pages/'</span> + pathname + <span class="string">'/'</span> + pathname + <span class="string">'.js'</span>),</span><br></pre></td></tr></table></figure></div><p>ç„¶åè¿è¡Œnpm run dev å‘ç°å’Œä¹‹å‰æ²¡æœ‰å˜åŒ– O(âˆ©_âˆ©)O è¿™æ ·å°±åŸºæœ¬å®Œæˆå¤šé¡µé¢çš„é…ç½®äº†</p><h1 id="æ‰å‘ç¯‡"><a href="#æ‰å‘ç¯‡" class="headerlink" title="æ‰å‘ç¯‡"></a>æ‰å‘ç¯‡</h1><h2 id="css-loaderçš„å‘"><a href="#css-loaderçš„å‘" class="headerlink" title="css-loaderçš„å‘"></a>css-loaderçš„å‘</h2><p>å› ä¸ºcss-loaderå‡çº§åˆ°1.0.0ç‰ˆæœ¬ä¹‹åï¼Œå‹ç¼©å°±å¤±æ•ˆäº†ï¼Œcss-loaderæŠŠcssnanoç§»é™¤æ‰äº†ï¼Œå¯¼è‡´æ— æ³•å‹ç¼©ï¼Œè¿™é‡Œä½œè€…æ¨èçš„å…¶ä¸­ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯@intervolga/optimize-cssnano-plugin</p><p>è¿™é‡Œæˆ‘ä»¬å®‰è£…ä¸€ä¸‹</p><blockquote><p>npm i @intervolga/optimize-cssnano-plugin -S</p></blockquote><p>ç„¶ååœ¨plugins.jsæ·»åŠ ä¸‹é…ç½®ï¼Œä¿®æ”¹å¦‚ä¸‹:</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è§£å†³csså‹ç¼©</span></span><br><span class="line"><span class="keyword">const</span> OptimizeCssnanoPlugin = <span class="built_in">require</span>(<span class="string">'@intervolga/optimize-cssnano-plugin'</span>);</span><br><span class="line">plugins = [</span><br><span class="line">    ......</span><br><span class="line">    <span class="keyword">new</span> OptimizeCssnanoPlugin(&#123;</span><br><span class="line">        <span class="comment">// sourceMap: nextSourceMap,</span></span><br><span class="line">        cssnanoOptions: &#123;</span><br><span class="line">            preset: [<span class="string">'default'</span>, &#123;</span><br><span class="line">                discardComments: &#123;</span><br><span class="line">                    removeAll: <span class="literal">true</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;],</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure></div><h2 id="å­—ä½“æ–‡ä»¶çš„å‘"><a href="#å­—ä½“æ–‡ä»¶çš„å‘" class="headerlink" title="å­—ä½“æ–‡ä»¶çš„å‘"></a>å­—ä½“æ–‡ä»¶çš„å‘</h2><p>å› ä¸ºæˆ‘ä»¬å¾ˆç»å¸¸ç”¨bootstrapè¿™ç§UIåº“ï¼Œæ‰€ä»¥æˆ‘ä»¬å¼•å…¥è¿™ç§åº“æŠ¥ä¸ªéœ€è¦ä¸€ä¸ªloaderå¤„ç†è¿™ç§å­—ä½“æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹ä¸‹modules.jsæ–‡ä»¶</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">     rules:[&#123;</span><br><span class="line">        test: <span class="regexp">/\.(gif|jpg|png|woff|svg|eot|ttf)\??.*$/</span>,</span><br><span class="line">        use: [&#123;</span><br><span class="line">            loader: <span class="string">'url-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">                <span class="comment">// å°äº10kbè½¬æˆbase64</span></span><br><span class="line">                limit: <span class="number">10240</span>,</span><br><span class="line">                <span class="comment">// æ‰“åŒ…åçš„æ–‡ä»¶å¤¹</span></span><br><span class="line">                outputPath: <span class="string">'img'</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            loader: <span class="string">'image-webpack-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">                <span class="comment">// è®¾ç½®å¯¹jpgæ ¼å¼çš„å›¾ç‰‡å‹ç¼©çš„ç¨‹åº¦è®¾ç½®</span></span><br><span class="line">                mozjpeg: &#123;</span><br><span class="line">                    progressive: <span class="literal">true</span>,</span><br><span class="line">                    quality: <span class="number">65</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h1 id="ä¼˜åŒ–ç¯‡"><a href="#ä¼˜åŒ–ç¯‡" class="headerlink" title="ä¼˜åŒ–ç¯‡"></a>ä¼˜åŒ–ç¯‡</h1><h2 id="babelä¼˜åŒ–"><a href="#babelä¼˜åŒ–" class="headerlink" title="babelä¼˜åŒ–"></a>babelä¼˜åŒ–</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">json</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"presets"</span>: [</span><br><span class="line">    [<span class="string">"env"</span>, &#123;</span><br><span class="line">      <span class="attr">"modules"</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">"targets"</span>: &#123;</span><br><span class="line">        <span class="attr">"browsers"</span>: [<span class="string">"&gt; 1%"</span>, <span class="string">"last 2 versions"</span>, <span class="string">"not ie &lt;= 8"</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="string">"stage-2"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"plugins"</span>: [<span class="string">"transform-object-assign"</span>, <span class="string">"transform-runtime"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>è™½ç„¶æˆ‘ä»¬ä¹‹å‰é‚£ä¸ªå¯¹äºconstã€letè¿™äº›å¸¸ç”¨es6å¯ä»¥è½¬æˆes5ï¼Œä½†å¯¹äºObject.assignè¿™äº›è¿˜æ˜¯ä¸è¡Œï¼Œæˆ‘ä»¬è¿™é‡Œä¼˜åŒ–ä¸€ä¸‹æˆ‘ä»¬ä¹‹å‰çš„babelï¼Œå®‰è£…ä¸‹é¢ä¾èµ–</p><blockquote><p>npm install babel-plugin-transform-object-assign babel-preset-stage-2 babel-plugin-transform-runtime -S</p></blockquote><h2 id="DllPlugin"><a href="#DllPlugin" class="headerlink" title="DllPlugin"></a>DllPlugin</h2><p>DllPlugin æ˜¯ä»€ä¹ˆï¼Ÿä»å®˜æ–¹çš„è¯´æ³•å°±æ˜¯ï¼ŒDLLPlugin å’Œ DLLReferencePlugin ç”¨æŸç§æ–¹æ³•å®ç°äº†æ‹†åˆ† bundlesï¼ŒåŒæ—¶è¿˜å¤§å¤§æå‡äº†æ„å»ºçš„é€Ÿåº¦ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯webpackçš„åŠ¨æ€é“¾æ¥åº“ï¼Œè¿™é‡Œçš„ä»£ç ä¸ä¼šæ‰§è¡Œï¼Œåªæ˜¯æä¾›ç»™æˆ‘ä»¬å¼•å…¥ã€‚</p><p>å®é™…å°±æ˜¯ï¼Œæˆ‘ä»¬å¼•å…¥äº†å¤šä¸ªç›¸å¯¹è¾ƒå¤§çš„åº“ï¼ˆæ¯”å¦‚ï¼Œbootstrapï¼Œloadshï¼Œjqueryï¼‰ï¼Œä½†æ˜¯æˆ‘ä»¬åˆä¸æ€ä¹ˆéœ€è¦ä¿®æ”¹ä»–ä»¬ï¼Œå°±å¯ä»¥ç”¨ DLLPlugin æ‰“åŒ…äº†ã€‚</p><p>æ–°å»º webpack-dll.config.js æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</span><br><span class="line"><span class="comment">// æ–‡ä»¶å¤„ç†å™¨</span></span><br><span class="line"><span class="keyword">const</span> modules = <span class="built_in">require</span>(<span class="string">'./config/modules'</span>)</span><br><span class="line"><span class="keyword">const</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">'extract-text-webpack-plugin'</span>);</span><br><span class="line"><span class="comment">// è§£å†³csså‹ç¼©</span></span><br><span class="line"><span class="keyword">const</span> OptimizeCssnanoPlugin = <span class="built_in">require</span>(<span class="string">'@intervolga/optimize-cssnano-plugin'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">// å…¥å£é…ç½®</span></span><br><span class="line">    entry: &#123;</span><br><span class="line">        comment: [<span class="string">'jquery'</span>, <span class="string">'./vendor/css/comment.css'</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// å‡ºå£æ–‡ä»¶</span></span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.join(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">        filename: <span class="string">'js/[name].js'</span>,</span><br><span class="line">        library: <span class="string">'[name]'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// module.rules</span></span><br><span class="line">    <span class="comment">// loaders</span></span><br><span class="line">    <span class="built_in">module</span>: modules,</span><br><span class="line">    <span class="comment">// æ’ä»¶</span></span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> webpack.DllPlugin(&#123;</span><br><span class="line">            path: path.join(__dirname, <span class="string">'./manifest.json'</span>),</span><br><span class="line">            name: <span class="string">'[name]'</span>,</span><br><span class="line">            context: __dirname,</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="comment">// å‘å…¨å±€æš´éœ²ç¬¬ä¸‰æ–¹åº“</span></span><br><span class="line">        <span class="keyword">new</span> webpack.ProvidePlugin(&#123;</span><br><span class="line">            $: <span class="string">'jquery'</span>,</span><br><span class="line">            jQuery: <span class="string">'jquery'</span>,</span><br><span class="line">            <span class="string">'window.$'</span>: <span class="string">'jquery'</span>,</span><br><span class="line">            <span class="string">'window.jQuery'</span>: <span class="string">'jquery'</span></span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> ExtractTextPlugin(<span class="string">'css/[name].css'</span>),</span><br><span class="line">        <span class="keyword">new</span> OptimizeCssnanoPlugin(&#123;</span><br><span class="line">            <span class="comment">// sourceMap: nextSourceMap,</span></span><br><span class="line">            cssnanoOptions: &#123;</span><br><span class="line">                preset: [<span class="string">'default'</span>, &#123;</span><br><span class="line">                    discardComments: &#123;</span><br><span class="line">                        removeAll: <span class="literal">true</span>,</span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;],</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">    ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>è¿™é‡Œæ˜¯ä¸æ˜¯å‘ç°æ¨¡å—åŒ–çš„å¥½å¤„äº†ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ä¹‹å‰å†™å¥½çš„æ¨¡å—é…ç½®ï¼Œæ—¢èŠ‚çœäº†ä»£ç ï¼Œä¹Ÿæ–¹ä¾¿ä¿®æ”¹</p><p>å† package.json é…ç½®ä¸€ä¸‹æˆ‘ä»¬çš„å¯åŠ¨å‘½ä»¤ï¼Œ</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="string">"srcipt"</span>: &#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="string">"dll"</span>: <span class="string">"webpack --progress --colors --config ./webpack-dll.config.js --mode production"</span>,</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>è¿è¡Œ npm run dll è¿™æ ·å°±ä¼šç”Ÿæˆ manifest.json æ–‡ä»¶äº†ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬webpackåŠ¨æ€ä¾èµ–åº“</p><p>é…ç½®äº†æˆ‘ä»¬çš„åŠ¨æ€ä¾èµ–åº“ä¹‹åï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦åœ¨æˆ‘ä»¬webpack.config.jsä¸­å¼•å…¥æˆ‘ä»¬çš„ä¾èµ–åº“ï¼Œè¿™é‡Œæˆ‘ä»¬åœ¨config/plugins.jsä¸­ä¿®æ”¹å³å¯</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> plugins = [</span><br><span class="line">    <span class="keyword">new</span> webpack.DllReferencePlugin(&#123;</span><br><span class="line">        context: staticRootDir,</span><br><span class="line">        manifest: <span class="built_in">require</span>(<span class="string">'../manifest.json'</span>),</span><br><span class="line">        name: <span class="string">'comment'</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure></div><h3 id="webpack-dll-config-jså­˜åœ¨çš„é—®é¢˜"><a href="#webpack-dll-config-jså­˜åœ¨çš„é—®é¢˜" class="headerlink" title="webpack-dll.config.jså­˜åœ¨çš„é—®é¢˜"></a>webpack-dll.config.jså­˜åœ¨çš„é—®é¢˜</h3><p>è™½ç„¶è¯´ DllPlugin çš„ä¸œè¥¿æ˜¯ä¸å¸¸ä¿®æ”¹çš„ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬å°±æ˜¯è¦ä¿®æ”¹å‘¢ï¼Œé‚£å°±éœ€è¦åˆ é™¤æˆ‘ä»¬çš„åŠ¨æ€åº“ï¼Œé‡æ–°ç”Ÿæˆä¸€ä»½</p><p>æ‰‹åŠ¨åˆ é™¤æ˜¯åœ¨ä¸ç¬¦åˆæˆ‘è¿™ç§æ‡’äººï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨å‡ºæˆ‘ä»¬å¼ºå¤§çš„nodeå•¦ï¼Œæ–°å»ºä¸€ä¸ª delete.js æ–‡ä»¶</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="comment">// é€šè¿‡child_processçš„exexæ‰§è¡Œå‘½ä»¤è¡Œå‘½ä»¤</span></span><br><span class="line"><span class="keyword">const</span> &#123; exec &#125; = <span class="built_in">require</span>(<span class="string">'child_process'</span>)</span><br><span class="line">fs.unlink(<span class="string">'./manifest.json'</span>, (err) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æˆåŠŸåˆ é™¤ manifest.json'</span>);</span><br><span class="line">    <span class="comment">// åˆ é™¤åé‡æ–°npm run dll</span></span><br><span class="line">    exec(<span class="string">`npm run dll`</span>, (error, stdout, stderr) =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`stdout: <span class="subst">$&#123;stdout&#125;</span>`</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><p>è¿™æ ·å°±å®ç°äº†æˆ‘ä»¬åˆ é™¤ manifest.json åï¼Œè‡ªåŠ¨æ‰§è¡Œdlläº†</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><blockquote><p><a href="https://gitee.com/gating/webpack-pages/" target="_blank" rel="noopener">é¡¹ç›®ä¼ é€é—¨</a></p></blockquote><p>å­¦åˆ°è¿™é‡Œï¼Œæˆ‘æƒ³å·²ç»å¤§æ¦‚å·²ç»æ€ä¹ˆä½¿ç”¨webpackå¤šé¡µé¢äº†ï¼Œå½“ç„¶ï¼Œå…¶å®è¿˜æœ‰å¥½å¤šä¾ç„¶è®²çš„å¾ˆåŸºç¡€ï¼Œä½†æ˜¯æˆ‘ç›¸ä¿¡ï¼Œä¸€æ­¥ä¸€æ­¥æ¥ï¼Œé‡åˆ°å‘å¡«å‘ï¼Œæ€»ä¼šå­¦ä¹ åˆ°æ›´å¤šä¸œè¥¿çš„ã€‚</p><p>æœ¬ç¯‡webpackå¤šé¡µé¢å…¥é—¨æ–‡ç« åˆ°æ­¤ç»“æŸ O(âˆ©_âˆ©)O~</p><p>æœ€åï¼Œæ„Ÿè°¢å„ä½è§‚ä¼—è€çˆ·è§‚çœ‹</p>]]></content>
      
      
      <categories>
          
          <category> è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webpackä»ä»€ä¹ˆéƒ½ä¸æ‡‚åˆ°å…¥é—¨</title>
      <link href="/2018-06-15/webpack%E4%BB%8E%E4%BB%80%E4%B9%88%E9%83%BD%E4%B8%8D%E6%87%82%E5%88%B0%E5%85%A5%E9%97%A8/"/>
      <url>/2018-06-15/webpack%E4%BB%8E%E4%BB%80%E4%B9%88%E9%83%BD%E4%B8%8D%E6%87%82%E5%88%B0%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>è¿™ç¯‡æ–‡ç« æ˜¯è‡ªå·±åœ¨æ•´ç†webpackç›¸å…³çš„ä¸œè¥¿æ—¶å€™çªå‘å¥‡æƒ³ï¼Œæƒ³æ€»ç»“è‡ªå·±æ‰€å­¦çŸ¥è¯†ï¼Œä¹Ÿå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©æƒ³å­¦ä¹ webpackçš„åŒå­¦ä»¬ï¼Œéƒ½æ˜¯å…¥é—¨çº§åˆ«çš„ï¼Œå¤§ä½¬è¯·å‡ºé—¨å³è½¬ã€‚</p><blockquote><p>æœ¬æ–‡çš„webpackåŸºäºwebpack4.0ï¼Œå…·ä½“æ˜¯4.12.0ç‰ˆæœ¬</p></blockquote><h1 id="åˆè¯†webpack"><a href="#åˆè¯†webpack" class="headerlink" title="åˆè¯†webpack"></a>åˆè¯†webpack</h1><p>webpackæ˜¯ä»€ä¹ˆï¼Ÿå€ŸåŠ©å®˜ç½‘çš„è¯æ¥è¯´ï¼Œwebpack æ˜¯ä¸€ä¸ªç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨(module bundler)ã€‚å½“ webpack å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šé€’å½’åœ°æ„å»ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾(dependency graph)ï¼Œå…¶ä¸­åŒ…å«åº”ç”¨ç¨‹åºéœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundleã€‚</p><blockquote><p>ç®€å•çš„æ¥è¯´ï¼Œwebpackæ˜¯ä¸€ä¸ªæ‰“åŒ…å·¥å…·</p></blockquote><h2 id="webpackçš„åŸºæœ¬é…ç½®é¡¹"><a href="#webpackçš„åŸºæœ¬é…ç½®é¡¹" class="headerlink" title="webpackçš„åŸºæœ¬é…ç½®é¡¹"></a>webpackçš„åŸºæœ¬é…ç½®é¡¹</h2><p>ä½œä¸ºå…¥é—¨ï¼Œæˆ‘ä»¬åªéœ€è¦æ˜ç™½å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š</p><ul><li>Entry(å…¥å£)</li><li>Output(å‡ºå£)</li><li>Loaders</li><li>Plugins(æ’ä»¶)</li><li>Mode(æ¨¡å¼)</li></ul><h3 id="Entry"><a href="#Entry" class="headerlink" title="Entry"></a>Entry</h3><p>å…¥å£èµ·ç‚¹æŒ‡ç¤º webpack åº”è¯¥ä½¿ç”¨å“ªä¸ªæ¨¡å—ï¼Œæ¥ä½œä¸ºæ„å»ºå…¶å†…éƒ¨ä¾èµ–å›¾çš„å¼€å§‹ã€‚è¿›å…¥å…¥å£èµ·ç‚¹åï¼Œwebpack ä¼šæ‰¾å‡ºæœ‰å“ªäº›æ¨¡å—å’Œåº“æ˜¯å…¥å£èµ·ç‚¹ï¼ˆç›´æ¥å’Œé—´æ¥ï¼‰ä¾èµ–çš„ã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="built_in">module</span>.exports=&#123;</span><br><span class="line"><span class="comment">// å…¥å£é…ç½®</span></span><br><span class="line">entry:&#123;</span><br><span class="line">index:<span class="string">'./src/index.js'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>output å±æ€§å‘Šè¯‰ webpack åœ¨å“ªé‡Œè¾“å‡ºå®ƒæ‰€åˆ›å»ºçš„ bundlesï¼Œä»¥åŠå¦‚ä½•å‘½åè¿™äº›æ–‡ä»¶ï¼Œé»˜è®¤å€¼ä¸º ./distã€‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports=&#123;</span><br><span class="line"><span class="comment">// å‡ºå£é…ç½®</span></span><br><span class="line">output:&#123;</span><br><span class="line"><span class="comment">// å¿…é¡»æ˜¯ç»å¯¹è·¯å¾„</span></span><br><span class="line">path:path.resolve(__dirname,<span class="string">'dist'</span>),</span><br><span class="line">filename:<span class="string">'js/bundle.js'</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h3 id="Loaders"><a href="#Loaders" class="headerlink" title="Loaders"></a>Loaders</h3><p>é¦–å…ˆï¼Œwebpack è‡ªèº«åªç†è§£ JavaScripï¼Œæ‰€ä»¥é’ˆå¯¹å…¶ä»–çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ© loader å»å¤„ç†ã€‚</p><p>loader å¯ä»¥å°†æ‰€æœ‰ç±»å‹çš„æ–‡ä»¶è½¬æ¢ä¸º webpack èƒ½å¤Ÿå¤„ç†çš„æœ‰æ•ˆæ¨¡å—ï¼Œç„¶åä½ å°±å¯ä»¥åˆ©ç”¨ webpack çš„æ‰“åŒ…èƒ½åŠ›ï¼Œå¯¹å®ƒä»¬è¿›è¡Œå¤„ç†ã€‚</p><p>æ¯”å¦‚å¯¹äºcssæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [&#123;</span><br><span class="line"><span class="comment">// é€šè¿‡æ­£åˆ™åŒ¹é…è¦å¤„ç†çš„æ–‡ä»¶</span></span><br><span class="line">            test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">            use: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>]</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h3 id="Plugins"><a href="#Plugins" class="headerlink" title="Plugins"></a>Plugins</h3><p>loader è¢«ç”¨äºè½¬æ¢æŸäº›ç±»å‹çš„æ¨¡å—ï¼Œè€ŒPlugins(æ’ä»¶)åˆ™å¯ä»¥ç”¨äºæ‰§è¡ŒèŒƒå›´æ›´å¹¿çš„ä»»åŠ¡ã€‚</p><h3 id="Mode"><a href="#Mode" class="headerlink" title="Mode"></a>Mode</h3><p>é€šè¿‡é€‰æ‹© development æˆ– production ä¹‹ä¸­çš„ä¸€ä¸ªï¼Œæ¥è®¾ç½® mode å‚æ•°ï¼Œä½ å¯ä»¥å¯ç”¨ç›¸åº”æ¨¡å¼ä¸‹çš„ webpack å†…ç½®çš„ä¼˜åŒ–</p><h1 id="webpackåˆä½“éªŒ"><a href="#webpackåˆä½“éªŒ" class="headerlink" title="webpackåˆä½“éªŒ"></a>webpackåˆä½“éªŒ</h1><p>é€šè¿‡ä¸Šé¢åŸºç¡€æ¦‚å¿µçš„å­¦ä¹ ï¼Œæˆ‘ä»¬å¼€å§‹åŠ¨æ‰‹å†™ä¸ªå°demoå§</p><p>å®‰è£…ä½¿ç”¨webpackçš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯å…¨å±€å®‰è£…webpackï¼Œä¸€ç§æ˜¯åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­å®‰è£…webpcakä¾èµ–ï¼Œç„¶åé€šè¿‡npmæ‰§è¡Œwebpackå‘½ä»¤ã€‚</p><blockquote><p>é€šå¸¸å»ºè®®ç”¨ç¬¬äºŒç§æ–¹å¼å®‰è£…ï¼Œå› ä¸ºå‰ç«¯æ›´æ–°å¤ªè¿‡å¿«æ·ï¼Œå¾ˆå¤šäººçš„webpackç‰ˆæœ¬å’Œä½ çš„å¯èƒ½ä¸å¤ªä¸€æ ·ï¼Œå¯¼è‡´å‡ºç°ä¸€äº›é—®é¢˜</p></blockquote><p>1ã€åˆå§‹åŒ–æˆ‘ä»¬çš„é¡¹ç›®</p><ul><li>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå–åå«åšwebpack-demo</li><li>é€šè¿‡æ§åˆ¶å°æˆ–è€…git bashå®šä½åˆ°å½“å‰æ–‡ä»¶ä¸‹é¢ï¼Œæ‰§è¡Œå‘½ä»¤: npm init -y</li></ul><p>2ã€é¡¹ç›®ç»“æ„æ­å»º</p><ul><li><p>æ–°å»ºsrcç›®å½•,ç”¨äºæ”¾ç½®æˆ‘ä»¬çš„å¼€å‘æ‰€éœ€è¦çš„cssã€imgã€jså’Œhtmlæ–‡ä»¶(å’Œå¹³æ—¶å¼€å‘ä¸€è‡´å°±å¥½)</p></li><li><p>åœ¨æ ¹ç›®å½•æ–°å»ºindex.html</p></li><li><p>åœ¨æ ¹ç›®å½•æ–°å»ºwebpack.config.js,è¿™æ˜¯webpackçš„é»˜è®¤é…ç½®æ–‡ä»¶</p></li></ul><blockquote><p>ps: webpacké»˜è®¤ä¼šè¯»å–webpack.config.js ä¸­çš„ç›¸å…³é…ç½®ï¼Œå¦‚æœæ›´æ¢å…¶ä»–åå­—ï¼Œwebpacké»˜æ˜¯æ‰¾ä¸åˆ°çš„ï¼ˆå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å»æŒ‡å®šwebpackè¯»å–çš„é…ç½®æ–‡ä»¶ï¼Œä½†åœ¨ç°é˜¶æ®µï¼Œæˆ‘ä»¬æš‚ä¸è€ƒè™‘ï¼‰</p></blockquote><blockquote><p>index.htmlçš„æ ¼å¼å¦‚ä¸‹ï¼š</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æˆ‘ä»¬ç»™æœ€ç»ˆç¼–è¯‘å‡ºçš„jså«åšbundle.js--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./dist/js/bundle.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div><h2 id="å®‰è£…-webpack-å’Œ-webpack-cli"><a href="#å®‰è£…-webpack-å’Œ-webpack-cli" class="headerlink" title="å®‰è£… webpack å’Œ webpack-cli"></a>å®‰è£… webpack å’Œ webpack-cli</h2><p>åœ¨å½“å‰ç›®å½•(webpackDemo)æ‰§è¡Œå‘½ä»¤: npm install webpack webpack-cli â€“save</p><blockquote><p>ä¸ºä»€ä¹ˆè¦è£… webpack-cli ,æ˜¯å› ä¸ºä»¥å‰webpackçš„cliå·¥å…·ç§»åŠ¨åˆ°äº†ä¸€ä¸ªä¸“é—¨çš„åŒ…(webpack-cli)é‡Œäº†</p></blockquote><p>æ¥ä¸‹æ¥æˆ‘ä»¬é…ç½®ä¸‹package.jsonï¼ŒæŠŠâ€scriptsâ€å­—æ®µä¿®æ”¹ä¸ºï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang"></div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight"><table><tr><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">    "build": "webpack --mode development"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h2 id="æ–°å»ºå…¥å£æ–‡ä»¶å’Œé…ç½®webpack-config-js"><a href="#æ–°å»ºå…¥å£æ–‡ä»¶å’Œé…ç½®webpack-config-js" class="headerlink" title="æ–°å»ºå…¥å£æ–‡ä»¶å’Œé…ç½®webpack.config.js"></a>æ–°å»ºå…¥å£æ–‡ä»¶å’Œé…ç½®webpack.config.js</h2><p>1ã€åœ¨src/jsç›®å½•ä¸‹æ–°å»ºindex.jsæ–‡ä»¶ï¼Œä½œä¸ºwebpackçš„å…¥å£æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹ä¸ºï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">"hello world"</span>)</span><br></pre></td></tr></table></figure></div><p>2ã€æ¥ä¸‹æ¥æˆ‘ä»¬æ‰“å¼€ webpack.config.js ï¼Œé…ç½®ä¸‹æˆ‘ä»¬çš„ç¼–è¯‘è§„åˆ™</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports=&#123;</span><br><span class="line"><span class="comment">// å…¥å£é…ç½®</span></span><br><span class="line">entry:&#123;</span><br><span class="line">index:<span class="string">'./src/js/index.js'</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// å‡ºå£æ–‡ä»¶</span></span><br><span class="line">output:&#123;</span><br><span class="line"><span class="comment">// å¿…é¡»æ˜¯ç»å¯¹è·¯åŠ²</span></span><br><span class="line">path:path.resolve(__dirname,<span class="string">'dist'</span>),</span><br><span class="line">filename:<span class="string">'js/bundle.js'</span></span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><blockquote><p>__dirnameæ˜¯nodeæš´éœ²ç»™å…¨å±€çš„ä¸€ä¸ªå˜é‡,è¡¨ç¤ºå½“å‰æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•,pathæ¨¡å—æ˜¯nodeè‡ªå¸¦çš„æ¨¡å—ï¼Œç”¨æ¥å¤„ç†è·¯å¾„çš„</p></blockquote><p>3ã€åœ¨webpack-demoç›®å½•ä¸‹æ‰§è¡Œnpm run buildå‘½ä»¤</p><p>æ­¤æ—¶æŸ¥çœ‹dist/jsç›®å½•ï¼Œä¼šå‘ç°æ–°å¢äº†ä¸€ä¸ªbundle.jsçš„æ–‡ä»¶ï¼Œç„¶åæ‰“å¼€index.htmlæ–‡ä»¶ï¼Œåœ¨f12æ‰“å¼€æ§åˆ¶å°ï¼Œæ˜¯ä¸æ˜¯è¾“å‡ºäº†hello worldå•Šï¼Ÿ</p><blockquote><p>å¥½äº†ï¼Œæœ¬æ¬¡æ•™ç¨‹åˆ°æ­¤ç»“æŸäº†</p></blockquote><p>çœ‹åˆ°è¿™é‡Œï¼Œæ˜¯ä¸æ˜¯å¾ˆåƒæ‹æ­»æˆ‘äº†ï¼Œè¾“å‡ºhello worldè¿˜è¿™ä¹ˆéº»çƒ¦ï¼Œè€Œä¸”è¿˜ä»€ä¹ˆéƒ½æ²¡å­¦åˆ°ï¼Œæµªè´¹æˆ‘é’æ˜¥å•Šï¼ï¼ï¼éªšå¹´ï¼Œå¼€ä¸ªç©ç¬‘å˜›ï¼Œåˆ«ç€æ€¥ï¼Œæœ‰è¯å¥½å¥½è¯´å•Šï¼Œæ¥ä¸‹æ¥é‡å¤´æˆå¼€å§‹äº†ã€‚</p><h2 id="é’ˆå¯¹cssæ–‡ä»¶å’Œimgæ–‡ä»¶çš„Loaders"><a href="#é’ˆå¯¹cssæ–‡ä»¶å’Œimgæ–‡ä»¶çš„Loaders" class="headerlink" title="é’ˆå¯¹cssæ–‡ä»¶å’Œimgæ–‡ä»¶çš„Loaders"></a>é’ˆå¯¹cssæ–‡ä»¶å’Œimgæ–‡ä»¶çš„Loaders</h2><p>é€šè¿‡ä¸Šé¢çš„å°ä¾‹å­ï¼Œå‘ç°å¥½åƒå°‘äº†äº›ä»€ä¹ˆï¼Œä¸€ä¸ªé¡µé¢ä¸å¯ä»¥åªæœ‰jsçš„å§ï¼Œæˆ‘ä»¬å¼ºå¤§çš„csså’Œå¥½çœ‹çš„imgå‘¢ï¼Ÿ</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¼€å§‹å­¦ä¹ å¼ºå¤§çš„Loaderså•¦</p><h3 id="å®‰è£…style-loaderã€css-loader-å’Œ-url-loaderã€file-loader"><a href="#å®‰è£…style-loaderã€css-loader-å’Œ-url-loaderã€file-loader" class="headerlink" title="å®‰è£…style-loaderã€css-loader å’Œ url-loaderã€file-loader"></a>å®‰è£…style-loaderã€css-loader å’Œ url-loaderã€file-loader</h3><p>æ‰§è¡Œå‘½ä»¤: npm install style-loader css-loader url-loader file-loader â€“save</p><p>è¿™é‡Œç‰¹åˆ«è¯´æ˜ä¸‹ï¼Œfile-loaderä¸url-loaderéƒ½æ˜¯åœ¨webpackä¸­å¼•å…¥å›¾ç‰‡çš„è§£å†³æ–¹æ¡ˆï¼Œä½†æ˜¯ä¸file-loaderä¸åŒï¼Œurl-loaderå°è£…äº†file-loaderï¼Œå¹¶ä¸”å¯ä»¥åœ¨å›¾ç‰‡å¤§å°å°äºè®¾å®šçš„limitçš„æ—¶å€™è¿”å›çš„æ˜¯ä¸€ä¸ªbDataURLï¼ˆbase64ç ï¼‰ï¼Œå¤§äºlimitæ—¶ä¼šè°ƒç”¨file-loaderå¯¹å›¾ç‰‡è¿›è¡Œå¤„ç†ã€‚</p><h3 id="æ·»åŠ webpackè§„åˆ™"><a href="#æ·»åŠ webpackè§„åˆ™" class="headerlink" title="æ·»åŠ webpackè§„åˆ™"></a>æ·»åŠ webpackè§„åˆ™</h3><p>åœ¨webpack.config.jsæ·»åŠ è§„åˆ™</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">rules: [&#123;</span><br><span class="line">test: <span class="regexp">/\.css$/</span>,</span><br><span class="line"><span class="comment">// ä»å³å‘å·¦(ä»ä¸‹å‘ä¸Š)å¼€å§‹æ‰§è¡Œ</span></span><br><span class="line">use: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>],</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">test: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">use: [&#123;</span><br><span class="line">loader: <span class="string">'url-loader'</span>,</span><br><span class="line">options: &#123;</span><br><span class="line"><span class="comment">// å°äº10kbè½¬æˆbase64</span></span><br><span class="line">limit: <span class="number">10240</span>,</span><br><span class="line"><span class="comment">// æ‰“åŒ…åçš„æ–‡ä»¶å¤¹</span></span><br><span class="line">outputPath: <span class="string">'img'</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>æ·»åŠ è§„åˆ™ä¹‹åï¼Œæˆ‘ä»¬åœ¨src/cssç›®å½•ä¸‹æ–°å»ºindex.cssï¼Œåœ¨src/imgç›®å½•ä¸‹æ”¾ä¸€ä¸ªimg.jpgåï¼Œæ¥ä¸‹æ¥å°±æ˜¯ä¿®æ”¹æˆ‘ä»¬çš„ä»£ç äº†</p><blockquote><p>index.cssæ–‡ä»¶å¦‚ä¸‹</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">css</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: skyblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><blockquote><p>ä¿®æ”¹æˆ‘ä»¬çš„å…¥å£æ–‡ä»¶index.js</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'../css/index.css'</span></span><br><span class="line"><span class="keyword">import</span> imgSrc <span class="keyword">from</span> <span class="string">"../img/img.jpg"</span></span><br><span class="line"><span class="keyword">const</span> img = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>)</span><br><span class="line">img.src = <span class="string">'./dist/'</span> + imgSrc</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(img)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"hello world"</span>)</span><br></pre></td></tr></table></figure></div><p>åœ¨è¿è¡Œä¸€ä¸‹npm run buildï¼Œç„¶åæ‰“å¼€æˆ‘ä»¬çš„æµè§ˆå™¨ï¼Œé¡µé¢æ˜¯ä¸æ˜¯æœ‰äº†ä¸ªè“è‰²èƒŒæ™¯å’Œä¸€å¼ å›¾ç‰‡å‘¢ï¼Ÿ<br>è¿™æ„Ÿè§‰æ˜¯ä¸æ˜¯ç¾æ»‹æ»‹</p><blockquote><p>é¢˜å¤–è¯ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨äº†es6ï¼Œæµè§ˆå™¨ä¹Ÿæ²¡æœ‰æŠ¥é”™ï¼Œå› ä¸ºç°åœ¨æ–°ç‰ˆæµè§ˆå™¨å¯¹es6å…¼å®¹ç›¸å½“ä¸é”™äº†ï¼Œå¯æ˜¯å¯¹äºæ—§ç‰ˆæœ¬ï¼Œæµè§ˆå™¨å…¼å®¹è¿˜æ˜¯ä¸æ˜¯å¾ˆå¥½çš„</p></blockquote><p>æ‰€ä»¥æˆ‘ä»¬é’ˆå¯¹æˆ‘ä»¬å†™çš„jsä¹Ÿéœ€è¦åšä¸‹babelç¼–è¯‘</p><p>1ã€å®‰è£…babel</p><p>æ‰§è¡Œå‘½ä»¤: npm install babel-core babel-loader babel-preset-env â€“save</p><p>2ã€æ–°å»º.babelrcæ–‡ä»¶</p><p>è¿™é‡Œbabelä¼šé»˜è®¤è¯»å–æ ¹ç›®å½•ä¸‹çš„.babelrcæ–‡ä»¶ä½œä¸ºbabelçš„ç¼–è¯‘è§„åˆ™</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"presets"</span>: [</span><br><span class="line">    [<span class="string">"env"</span>, &#123;</span><br><span class="line">      <span class="string">"modules"</span>: <span class="literal">false</span></span><br><span class="line">    &#125;]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>3ã€é…ç½®jsçš„loaderè§„åˆ™</p><p>å¢åŠ loaderçš„é…ç½®é¡¹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports=&#123;</span><br><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">rules: [</span><br><span class="line">&#123;</span><br><span class="line">test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">use: [<span class="string">'babel-loader'</span>],</span><br><span class="line"><span class="comment">// é™¤node_modulesç›®å½•å¤–ï¼Œå…¶ä»–éƒ½ç”¨babelç¼–è¯‘</span></span><br><span class="line">exclude: <span class="regexp">/node_modules/</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>4ã€æ‹“å±•ä¸‹æˆ‘ä»¬çš„outputè§„åˆ™</p><p>ç°åœ¨æˆ‘ä»¬ç»†å¿ƒçš„çœ‹ä¸€ä¸‹ï¼Œä½ ä¼šå‘ç°æˆ‘çš„outputçš„æ–‡ä»¶åä½¿æˆ‘ä»¬å®šæ­»çš„ï¼Œæ¯æ¬¡æ‰“åŒ…ï¼Œåå­—éƒ½ä¸ä¼šæ”¹å˜ï¼Œæˆ‘ä»¬æ€ä¹ˆå¯ä»¥æ ¹æ®ä»–çš„æ–‡ä»¶åç”ŸæˆåŒæ ·çš„åå­—å‘¢ï¼Ÿwebpackæä¾›æè®®[name]çš„å ä½ç¬¦ï¼Œ<br>è¡¨ç¤ºå…¥å£çš„çš„æ–‡ä»¶åã€‚</p><p>ä¿®æ”¹ä¸‹webpack.config.js:</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">output: &#123;</span><br><span class="line"><span class="comment">// å¿…é¡»æ˜¯ç»å¯¹è·¯åŠ²</span></span><br><span class="line">path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">filename: <span class="string">'js/[name].js'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>é‚£ä¹ˆé—®é¢˜åˆæ¥äº†ï¼Œæˆ‘ä»¬æ€ä¹ˆå¼•å…¥æˆ‘ä»¬åŠ¨æ€ç”Ÿæˆçš„[name].jså‘¢ï¼Ÿä¹Ÿè®¸æœ‰äººè¯´æ”¹æˆå’Œå…¥å£æ–‡ä»¶ä¸€æ ·çš„åå­—ä¸å°±è¡Œäº†å—ï¼Ÿè¿™æ ·çš„ç¡®æ˜¯ä¸€ç§æ–¹æ¡ˆï¼Œä½†æ˜¯èƒ½ä¸èƒ½å¯ä»¥é€šè¿‡ä¸€ä¸ªæ¨¡æ¿ï¼Œè‡ªåŠ¨æ³¨å…¥æˆ‘ä»¬ç”Ÿæˆçš„jsæ–‡ä»¶å‘¢ï¼Ÿæ¥ä¸‹æ¥å°±æ˜¯ç”¨æˆ‘ä»¬æ›´å¼ºå¤§çš„æ’ä»¶å•¦</p><h2 id="å¸¸ç”¨çš„æ’ä»¶"><a href="#å¸¸ç”¨çš„æ’ä»¶" class="headerlink" title="å¸¸ç”¨çš„æ’ä»¶"></a>å¸¸ç”¨çš„æ’ä»¶</h2><h3 id="html-webpack-plugin"><a href="#html-webpack-plugin" class="headerlink" title="html-webpack-plugin"></a>html-webpack-plugin</h3><p>é’ˆå¯¹äºä¸Šé¢çš„é—®é¢˜ï¼Œæˆ‘ä»¬å°±å¯ä»¥å€ŸåŠ©html-webpack-pluginè‡ªåŠ¨ç”Ÿæˆæˆ‘ä»¬çš„htmlå•¦ã€‚</p><p>1ã€å®‰è£…html-webpack-plugin</p><p>è‚¯å®šè¦å…ˆå®‰è£…å•¦ï¼Œä¸ç„¶æ€ä¹ˆç”¨â•­(â•¯^â•°)â•®ï¼šnpm install html-webpack-plugin â€“save</p><p>2ã€åˆ›å»ºæˆ‘ä»¬çš„æ¨¡æ¿é¡µé¢</p><p>åœ¨srcç›®å½•ä¸‹æ–°å»ºindex.htmlï¼Œç”¨äºæˆ‘ä»¬çš„æ¨¡æ¿é¡µé¢ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">htmlWebpackPlugin.options.title</span> %&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>3ã€é…ç½®webpack.config.jsè§„åˆ™</p><p>å¢åŠ pluginsçš„é…ç½®é¡¹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">plugins:[</span><br><span class="line"><span class="comment">// ç”Ÿæˆå¤šä¸ªé¡µé¢éœ€è¦è°ƒç”¨å¤šæ¬¡new HtmlWebpackPlugin() å¤šé¡µé¢çš„é…ç½®</span></span><br><span class="line"><span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line"><span class="comment">// ç”Ÿæˆå¤šä¸ªé¡µé¢,filenameä½œä¸ºæ ‡è¯†</span></span><br><span class="line">filename:<span class="string">'index.html'</span>,</span><br><span class="line"><span class="comment">// å¤šé¡µé¢å¼•å…¥è‡ªå·±çš„js</span></span><br><span class="line"><span class="comment">// chunks:['index'],</span></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰æ¨¡æ¿æ ‡é¢˜</span></span><br><span class="line"><span class="comment">// æ¨¡æ¿é¡µtitleå®šä¹‰ä¸º &lt;%= htmlWebpackPlugin.options.title %&gt;</span></span><br><span class="line"><span class="comment">// å¿…é¡»è¿™ä¹ˆå†™htmlWebpackPlugin</span></span><br><span class="line">title:<span class="string">'hello world'</span>,</span><br><span class="line"><span class="comment">// æ¨¡æ¿</span></span><br><span class="line">template:<span class="string">'./src/index.html'</span>,</span><br><span class="line"><span class="comment">// ç”Ÿæˆçš„æ–‡ä»¶æ¶ˆé™¤ç¼“å­˜</span></span><br><span class="line">hash:<span class="literal">true</span>,</span><br><span class="line"><span class="comment">// å‹ç¼©è¾“å‡º</span></span><br><span class="line">minify:&#123;</span><br><span class="line"><span class="comment">// åˆ é™¤ç©ºç™½å­—ç¬¦(æŠ˜å ç©ºç™½åŒºåŸŸ)</span></span><br><span class="line">collapseWhitespace:<span class="literal">true</span>,</span><br><span class="line"><span class="comment">// åˆ é™¤å±æ€§çš„åŒå¼•å·</span></span><br><span class="line"><span class="comment">// removeAttributeQuotes:true</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥æ‰“å¼€distçš„index.htmlæ–‡ä»¶å°±å¥½ï¼Œä¸éœ€è¦æ ¹ç›®å½•ä¸‹çš„index.htmlæ–‡ä»¶äº†</p><p>æ‰“å¼€index.htmlæ–‡ä»¶åï¼Œä½ ä¼šå‘ç°å›¾ç‰‡404ï¼Œå¹¶ä¸”å¤šäº†ä¸€äº›æ–‡ä»¶ï¼Œæˆ‘ä»¬å…ˆè§£å†³æˆ‘ä»¬å›¾ç‰‡404çš„é—®é¢˜ï¼Œå› ä¸ºæˆ‘ä»¬çš„index.htmlæ‰€åœ¨ç›®å½•ç›®å½•å‘ç”Ÿäº†æ”¹å˜ï¼Œæ‰€ä»¥jsä¹Ÿéœ€è¦è·Ÿç€æ”¹å˜ä¸€ä¸‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'../css/index.css'</span></span><br><span class="line"><span class="keyword">import</span> imgSrc <span class="keyword">from</span> <span class="string">"../img/img.jpg"</span></span><br><span class="line"><span class="keyword">const</span> img = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>)</span><br><span class="line"><span class="comment">// æ›´æ”¹</span></span><br><span class="line">img.src = imgSrc</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(img)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"hello world"</span>)</span><br></pre></td></tr></table></figure></div><blockquote><p>ps:ç›®å‰åªè€ƒè™‘å•é¡µé¢çš„ç”Ÿæˆ</p></blockquote><h3 id="clean-webpack-plugin"><a href="#clean-webpack-plugin" class="headerlink" title="clean-webpack-plugin"></a>clean-webpack-plugin</h3><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å­¦ä¼šäº†åŠ¨æ€ç”Ÿæˆæ¨¡æ¿é¡µé¢äº†ï¼Œç„¶åæ€ä¹ˆæ¸…æ¥šæˆ‘ä»¬ä¹‹å‰å¤šä½™çš„æ–‡ä»¶å‘¢ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦å€ŸåŠ©clean-webpack-pluginæ’ä»¶æ¥åˆ é™¤æˆ‘ä»¬å¤šä½™çš„æ–‡ä»¶</p><p>1ã€å®‰è£…clean-webpack-plugin</p><p>npm install clean-webpack-plugin â€“save</p><p>2ã€é…ç½®webpack.config.jsè§„åˆ™</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ é™¤æŸäº›ä¸œè¥¿</span></span><br><span class="line"><span class="keyword">const</span> CleanWebpackPlugin = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">plugins:[</span><br><span class="line"><span class="keyword">new</span> CleanWebpackPlugin([<span class="string">'dist'</span>])</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>è¿™æ ·æ¯æ¬¡æ‰§è¡Œæˆ‘ä»¬å‘½ä»¤çš„æ—¶å€™å°±ä¼šå…ˆåˆ é™¤distç›®å½•åœ¨åˆ›å»º</p><h3 id="copy-webpack-plugin"><a href="#copy-webpack-plugin" class="headerlink" title="copy-webpack-plugin"></a>copy-webpack-plugin</h3><p>å°çŸ¥è¯†ï¼Œé’ˆå¯¹äºä¸€äº›æˆ‘ä»¬ä¸æƒ³ä¿®æ”¹çš„é™æ€èµ„æºæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡copy-webpack-pluginå¤„ç†è¿™äº›é™æ€èµ„æºæ–‡ä»¶</p><p>æˆ‘ä»¬åœ¨srcç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªassetç›®å½•ï¼Œæ”¾ç½®ä¸€ä¸ª1.txtæ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼šæ­¤ä¾‹å­æ²¡æœ‰ä»€ä¹ˆå¤§çš„å®é™…æ„ä¹‰â•­(â•¯^â•°)â•®</p><p>æ’ä»¶æˆ‘ä»¬è¿˜æ˜¯éœ€è¦æ‰§è¡Œä¸¤ä¸ªæ­¥éª¤çš„ï¼Œå…ˆå®‰è£…ï¼Œåœ¨é…ç½®</p><p>1ã€å®‰è£…copy-webpack-plugin</p><p>npm install copy-webpack-plugin â€“save</p><p>2ã€é…ç½®webpack.config.jsè§„åˆ™</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¤„ç†é™æ€èµ„æº,é™æ€èµ„æºè¾“å‡º</span></span><br><span class="line"><span class="keyword">const</span> CopyWebpackPlugin = <span class="built_in">require</span>(<span class="string">'copy-webpack-plugin'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">plugins:[</span><br><span class="line"><span class="comment">// é™æ€èµ„æºè¾“å‡º</span></span><br><span class="line"><span class="keyword">new</span> CopyWebpackPlugin([&#123;</span><br><span class="line"><span class="comment">// åˆå§‹æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="keyword">from</span>:path.resolve(__dirname,<span class="string">'src/asset'</span>),</span><br><span class="line"><span class="comment">// ç›®æ ‡æ–‡ä»¶å¤¹</span></span><br><span class="line">to:<span class="string">'./public'</span></span><br><span class="line">&#125;])</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h2 id="æœåŠ¡å™¨è¿è¡Œ"><a href="#æœåŠ¡å™¨è¿è¡Œ" class="headerlink" title="æœåŠ¡å™¨è¿è¡Œ"></a>æœåŠ¡å™¨è¿è¡Œ</h2><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»æ€ä¹ˆé€šè¿‡æ¨¡æ¿è‡ªåŠ¨ç”Ÿæˆé¡µé¢ï¼Œè‡ªåŠ¨ç”Ÿæˆjsï¼Œå¯æ˜¯æˆ‘ä»¬è¿˜æ˜¯å‘ç°äº†ä¸€äº›é—®é¢˜ï¼Œå°±æ˜¯æ¯æ¬¡æ›´æ”¹ä»£ç åéƒ½éœ€è¦webpacké‡æ–°å»ç¼–è¯‘ï¼Œå¹¶ä¸”æˆ‘ä»¬çš„æ–‡ä»¶è¿˜æ˜¯ä»¥æ–‡ä»¶ç³»ç»Ÿåœ¨æµè§ˆå™¨æ‰“å¼€çš„ï¼Œå¾ˆæ˜¾ç„¶ï¼Œè¿™ä¸æ˜¯webpackçš„æ­£ç¡®å§¿åŠ¿ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬è€ƒè™‘æ€ä¹ˆè®©æˆ‘ä»¬çš„é¡¹ç›®è¿è¡Œåœ¨æœåŠ¡å™¨ç«¯ã€‚</p><h3 id="DIYä¸€ä¸ªä¸´æ—¶çš„é™æ€æœåŠ¡å™¨"><a href="#DIYä¸€ä¸ªä¸´æ—¶çš„é™æ€æœåŠ¡å™¨" class="headerlink" title="DIYä¸€ä¸ªä¸´æ—¶çš„é™æ€æœåŠ¡å™¨"></a>DIYä¸€ä¸ªä¸´æ—¶çš„é™æ€æœåŠ¡å™¨</h3><p>æ—¢ç„¶æˆ‘ä»¬çŸ¥é“äº†æˆ‘ä»¬æœ€ç»ˆç”Ÿæˆçš„æ–‡ä»¶åœ¨distæ–‡ä»¶å¤¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¥½åƒåªè¦å°†distæ–‡ä»¶å¤¹çš„æ–‡ä»¶åœ¨æœåŠ¡å™¨ç«¯è·‘èµ·æ¥ä¸å°±å¥½äº†å—ï¼Ÿä»”ç»†ä¸€æƒ³ï¼Œå¥½åƒå¾ˆæœ‰é“ç†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°è¯•ä¸€ä¸‹å§ã€‚</p><blockquote><p>è¿™é‡Œæˆ‘ä»¬ç”¨expressæ­å»ºä¸€ä¸ªé™æ€çš„æœåŠ¡å™¨</p></blockquote><p>1ã€åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªapp.jsæ–‡ä»¶ï¼Œå¹¶å®‰è£…express</p><p>npm install express â€“save</p><p>2ã€åœ¨app.jsä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨expresså†™ä¸€ä¸ªç®€å•çš„æœåŠ¡å™¨</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// app.js</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line">app.use(<span class="string">"/"</span>, express.static(__dirname + <span class="string">"/dist"</span>))</span><br><span class="line">app.listen(<span class="number">3000</span>)</span><br></pre></td></tr></table></figure></div><p>3ã€é…ç½®ä¸‹æˆ‘ä»¬package.jsonçš„scriptå­—æ®µ</p><p>ä¸ºäº†ç»Ÿä¸€ä¸‹æˆ‘ä»¬çš„å‘½ä»¤ï¼Œä¸åœ¨å‘½ä»¤è¡Œæ‰§è¡Œnode app.jsï¼Œæˆ‘ä»¬ç»Ÿä¸€ç”¨npmæ‰§è¡Œæˆ‘ä»¬çš„å‘½ä»¤</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang"></div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight"><table><tr><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">"server": "node app.js",</span><br><span class="line">"build": "webpack --mode development"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>ç„¶åæˆ‘ä»¬å¯ä»¥åœ¨æ§åˆ¶å°æ‰§è¡Œï¼šnpm run server</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨æµè§ˆå™¨è¾“å…¥localhost:3000ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ‰“åŒ…åçš„æ–‡ä»¶äº†ï¼Ÿ</p><blockquote><p>ps:å¦‚æœæ§åˆ¶å°è¾“å‡ºError: listen EADDRINUSE :::3000ï¼Œè¯´æ˜ä½ çš„ç«¯å£è¢«å ç”¨ï¼Œä¿®æ”¹ä¸‹app.jsçš„ç«¯å£å·å°±è¡Œ</p></blockquote><h3 id="DIYæœåŠ¡å™¨å­˜åœ¨çš„é—®é¢˜"><a href="#DIYæœåŠ¡å™¨å­˜åœ¨çš„é—®é¢˜" class="headerlink" title="DIYæœåŠ¡å™¨å­˜åœ¨çš„é—®é¢˜"></a>DIYæœåŠ¡å™¨å­˜åœ¨çš„é—®é¢˜</h3><p>å†™å®Œè¿™ä¸ªï¼Œè™½ç„¶ä»–å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œæˆ‘ä»¬çš„ä»£ç ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯è¦é‡æ–°é€šè¿‡webpackç¼–è¯‘ï¼Œè€Œä¸”è¿˜ä¸èƒ½å®ç°çƒ­æ›´æ–°å’Œè‡ªåŠ¨ä»æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å¼•å…¥nodeçš„child_processæ¨¡å—ä¸­çš„execæ¥è‡ªåŠ¨æ‰“å¼€æˆ‘ä»¬çš„æ–‡ä»¶ï¼Œå› ä¸ºæœ¬ç¯‡ä¸æ˜¯nodeçš„æ•™ç¨‹å°±ä¸æ‹“å±•äº†ã€‚</p><h3 id="devServer"><a href="#devServer" class="headerlink" title="devServer"></a>devServer</h3><p>å…¶å®å¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œwebpackä¹Ÿæ—©å·²ç»æƒ³åˆ°äº†ï¼Œæ‰€ä»¥ä»–å°±æä¾›äº†ä¸€ä¸ªdevServerçš„é…ç½®å­—æ®µï¼Œå¯ä»¥é…ç½®æˆ‘ä»¬çš„æœ¬åœ°æœåŠ¡å™¨ï¼Œè§£å†³çƒ­æ›´æ–°é—®é¢˜ã€‚</p><p>1ã€å®‰è£…webpack-dev-server</p><p>npm install webpack-dev-server â€“save</p><p>2ã€é…ç½®webpack.config.jsè§„åˆ™</p><p>å¢åŠ ä¸€ä¸ªdevServerå­—æ®µ</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line"><span class="comment">// å¼€å‘æœåŠ¡å™¨</span></span><br><span class="line">devServer:&#123;</span><br><span class="line"><span class="comment">// è®¾ç½®æœåŠ¡å™¨è®¿é—®çš„åŸºæœ¬ç›®å½•</span></span><br><span class="line">contentBase:path.resolve(__dirname,<span class="string">'dist'</span>),</span><br><span class="line"><span class="comment">// è®¾ç½®å¼€å‘æœåŠ¡å™¨çš„åœ°å€</span></span><br><span class="line">host:<span class="string">'localhost'</span>,</span><br><span class="line"><span class="comment">// è®¾ç½®å¼€å‘æœåŠ¡å™¨çš„ç«¯å£</span></span><br><span class="line">port:<span class="number">8080</span>,</span><br><span class="line"><span class="comment">// è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">open:<span class="literal">true</span>,</span><br><span class="line"><span class="comment">// é…ç½®çƒ­æ›´æ–°</span></span><br><span class="line">hot:<span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>3ã€é…ç½®package.jsonçš„scriptå­—æ®µ</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang"></div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight"><table><tr><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">"server": "node app.js",</span><br><span class="line">"build": "webpack --mode development",</span><br><span class="line">"dev": "webpack-dev-server --mode development"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>ç„¶åæ§åˆ¶å°è¾“å…¥ï¼šnpm run devçš„å‘½ä»¤åï¼Œæ¿€åŠ¨çš„å¿ƒæ‰‘é€šæ‰‘é€šçš„è·³ï¼Œæ‰“å¼€æµè§ˆå™¨ä¸€çœ‹ï¼Œwtfï¼ŒæŠ¥äº†ä¸ªUncaught Error: [HMR] Hot Module Replacement is disabled.é”™è¯¯ï¼ŒåŸæ¥æ˜¯æˆ‘ä»¬å…‰æ˜¯åœ¨devServeré…ç½®hotè¿˜ä¸è¡Œï¼Œéœ€è¦åœ¨pluginsè°ƒç”¨ä¸€ä¸‹webpackæä¾›çš„çƒ­æ›´æ–°æ¨¡å—</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">plugins: [</span><br><span class="line"><span class="comment">// ä½¿ç”¨çƒ­æ›´æ–°</span></span><br><span class="line">    <span class="keyword">new</span> webpack.HotModuleReplacementPlugin()</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å®ç°çƒ­æ›´æ–°å•¦ï¼Œçƒ­æ›´æ–°çš„å¥½å¤„ä¸çŸ¥é“å‘ç°æ²¡æœ‰ï¼Œ<font color="#f60">ä»–åªä¼šæ›¿æ¢æ›´æ–°çš„éƒ¨åˆ†,è€Œä¸ä¼šæŠŠæ•´ä¸ªé¡µé¢ç»™åˆ·æ–°ã€‚</font>æˆ‘ä»¬å¯ä»¥å°è¯•ä¿®æ”¹ä¸‹index.cssï¼ŒæŠŠbodyçš„èƒŒæ™¯ä¿®æ”¹æˆçº¢è‰²å°±å¯ä»¥å‘ç°æ•ˆæœäº†,ç„¶ååœ¨å°è¯•æŠŠhotå»æ‰ï¼Œåœ¨ä¿®æ”¹bodyèƒŒæ™¯è‰²çœ‹çœ‹ï¼Œä¼šå‘ç°æ•´ä¸ªé¡µé¢éƒ½åˆ·æ–°äº†ã€‚</p><h2 id="æ‰“åŒ…ä¼˜åŒ–"><a href="#æ‰“åŒ…ä¼˜åŒ–" class="headerlink" title="æ‰“åŒ…ä¼˜åŒ–"></a>æ‰“åŒ…ä¼˜åŒ–</h2><p>åœ¨æœåŠ¡å™¨çœ‹åˆ°æˆ‘ä»¬çš„é¡µé¢æ²¡ä»€ä¹ˆé—®é¢˜äº†ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‰“åŒ…æˆ‘ä»¬çš„æ–‡ä»¶å•¦ï¼Œæ‰“åŒ…è¿‡åå…¶å®æˆ‘ä»¬ä¼šå‘ç°æˆ‘ä»¬çš„æ–‡ä»¶å¥½åƒæœ‰ç‚¹å¤§ï¼ŒçŸ¥è¯†åœ¨æ§åˆ¶å°è¾“å‡ºä¸€ä¸ªhelloworldè¿˜æœ‰åˆ›å»ºäº†ä¸€ä¸ªimgæ ‡ç­¾ï¼Œå±…ç„¶è¦50kbçš„ä»£ç ï¼Œç®€ç›´å¤ªå¤§äº†å§ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦å‹ç¼©æˆ‘ä»¬çš„jsï¼Œå…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œwebpack4æä¾›äº†modeçš„productionå±æ€§å°±æ˜¯å‹ç¼©jsçš„ï¼Œæˆ‘ä»¬é€šè¿‡å‘½ä»¤è¡Œå¼€å¯ï¼Œä¿®æ”¹webpack.config.jsæˆ–è€…package.jsonçš„scriptå°±å¯ä»¥äº†ï¼Œè¿™é‡Œæˆ‘é‡‡ç”¨package.jsonçš„æ–¹å¼</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang"></div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight"><table><tr><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">"build": "webpack --mode production"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>è¿™æ ·ä¹‹åï¼Œæ˜¯ä¸æ˜¯å‘ç°å°äº†å¾ˆå¤šå•Šï¼Œæˆ–è®¸ä½ è¿˜ä¼šé—®äº†ï¼Œé‚£cssä¸æ˜¯è¿˜åœ¨jsé‡Œé¢å—ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½å•ç‹¬æå–å‡ºcsså‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„</p><h3 id="æå–css"><a href="#æå–css" class="headerlink" title="æå–css"></a>æå–css</h3><p>æå–csså®˜æ–¹æä¾›äº†ä¸¤ä¸ªæ–¹å¼ï¼Œä¸€ä¸ªæ˜¯extract-text-webpack-pluginï¼Œå¦ä¸€ä¸ªæ˜¯mini-css-extract-pluginï¼Œè¿™é‡Œæˆ‘ä»¬é‡‡ç”¨extract-text-webpack-pluginï¼ŒåŸå› æ˜¯extract-text-webpack-pluginæä¾›æ›´å¤šçš„æ“ä½œapiï¼Œç›¸æ¯”mini-css-extract-pluginæ›´ä¸ºçš„å¥½ç”¨ã€‚æƒ³è¦ä½¿ç”¨ï¼Œæˆ‘ä»¬å°±éœ€è¦å®‰è£…ï¼Œæ“ä½œæ­¥éª¤æˆ‘æƒ³å¤§å®¶éƒ½å·²ç»å¾ˆæ¸…æ¥šäº†</p><p>1ã€å®‰è£…extract-text-webpack-plugin</p><p>npm install extract-text-webpack-plugin@next â€“save</p><blockquote><p>ps: è¿™é‡Œæä¸ªé†’ï¼Œä¸€å®šè¦å®‰è£…extract-text-webpack-plugin@next,å› ä¸º extract-text-webpack-plugin æœ€æ–°ç‰ˆæœ¬ä¸º 3.0.2ï¼Œè¿™ä¸ªç‰ˆæœ¬è¿˜æ²¡æœ‰é€‚åº” webpack 4 çš„ç‰ˆæœ¬</p></blockquote><p>2ã€é…ç½®webpack.config.jsè§„åˆ™</p><p>è¿™é‡Œï¼Œloaderçš„é…ç½®ä¹Ÿéœ€è¦ä¿®æ”¹ä¸€ä¸‹</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æå–css</span></span><br><span class="line"><span class="keyword">const</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">'extract-text-webpack-plugin'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">rules: [</span><br><span class="line">&#123;</span><br><span class="line">test: <span class="regexp">/\.css$/</span>,</span><br><span class="line"><span class="comment">// ä»å³å‘å·¦(ä»ä¸‹å‘ä¸Š)å¼€å§‹æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">// æå–css</span></span><br><span class="line">use: ExtractTextPlugin.extract(&#123;</span><br><span class="line"><span class="comment">// åªåœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨</span></span><br><span class="line"><span class="comment">// use style-loader in development</span></span><br><span class="line">fallback: <span class="string">'style-loader'</span>,</span><br><span class="line">use: [<span class="string">'css-loader'</span>]</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">       ]</span><br><span class="line">&#125;,</span><br><span class="line">plugins: [</span><br><span class="line"><span class="comment">// æå–css</span></span><br><span class="line"><span class="keyword">new</span> ExtractTextPlugin(&#123;</span><br><span class="line">filename: <span class="string">'css/[name].css'</span>,</span><br><span class="line"><span class="comment">// æ ¹æ®ä¸åŒç¯å¢ƒèµ°ä¸åŒçš„é…ç½®ï¼ˆåœ¨å¼€å‘ç¯å¢ƒä¸‹ä¸ä½¿ç”¨ï¼‰</span></span><br><span class="line">disable: process.env.NODE_ENV === <span class="string">"development"</span></span><br><span class="line">&#125;)</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>è¿™æ ·ä¸ä»…cssæå–å‡ºæ¥äº†ï¼Œè¿jsä¹Ÿå˜çš„å°äº†è®¸å¤šï¼Œç„¶åæ‰“å¼€cssæ–‡ä»¶å‘ç°cssæ–‡ä»¶å±…ç„¶æ²¡æœ‰å‹ç¼©- -ï¼Œç„¶åæˆ‘ä»¬æ¥ç€é…ç½®ä¸€ä¸‹æˆ‘ä»¬çš„loaderï¼Œå®ç°å¯¹cssçš„å‹ç¼©ï¼Œæˆ–è®¸ä½ ä¹‹å‰å¬è¿‡ä¸€ä¸ªå«cssnanoçš„ç¥å™¨ï¼Œæƒ³ç”¨ä»–æ¥å‹ç¼©ï¼Œä¸ç”¨æ‹…å¿ƒcss-loaderæ˜¯é»˜è®¤æŠŠcssnanoå°è£…è¿›å»äº†</p><p>å®é™…ä¸Šwebpackå¯¹äºloaderçš„useå†™æ³•æœ‰å¾ˆå¤šç§ï¼Œæˆ‘ä»¬ä¹‹å‰ç”¨çš„æ˜¯æ¯”è¾ƒç®€å•çš„ä¸€ç§ï¼Œä¸ä½¿ç”¨ä»»ä½•çš„é…ç½®é¡¹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬é…ç½®ä¸€ä¸‹å‹ç¼©çš„é…ç½®é¡¹</p><blockquote><p>æ‰“å¼€webpack.config.jsï¼Œä¿®æ”¹ä¸‹loaderçš„ä»£ç </p></blockquote><p><font color="#f60">æ³¨æ„ï¼šæ–°ç‰ˆçš„css-loaderå·²ç»æŠŠminimizeå‚æ•°åˆ é™¤æ‰ï¼Œä¸‹é¢è¯·ä¸è¦ä½¿ç”¨</font></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">rules: [</span><br><span class="line">&#123;</span><br><span class="line">test: <span class="regexp">/\.css$/</span>,</span><br><span class="line"><span class="comment">// ä»å³å‘å·¦(ä»ä¸‹å‘ä¸Š)å¼€å§‹æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">// æå–css</span></span><br><span class="line">use: ExtractTextPlugin.extract(&#123;</span><br><span class="line"><span class="comment">// åªåœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨</span></span><br><span class="line"><span class="comment">// use style-loader in development</span></span><br><span class="line">fallback: <span class="string">'style-loader'</span>,</span><br><span class="line">use: &#123;</span><br><span class="line">loader:<span class="string">'css-loader'</span>,</span><br><span class="line">options: &#123;</span><br><span class="line">                        minimize: <span class="literal">true</span> <span class="comment">//csså‹ç¼©  </span></span><br><span class="line">                    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>åœ¨å¼•ç”³ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘å¦‚æœæƒ³ç»™æˆ‘çš„é¡µé¢åŠ ä¸ªèƒŒæ™¯å›¾ç‰‡ä¹Ÿå¾ˆæ­£å¸¸å§ï¼Œæˆ‘ä»¬å°è¯•ç€åœ¨æˆ‘ä»¬çš„index.cssä¿®æ”¹ä»¥ä¸‹ä»£ç </p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">css</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">'../img/img.jpg'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>åœ¨æ‰“åŒ…ä¸€æ¬¡ï¼Œwtfï¼ŒèƒŒæ™¯å›¾ç‰‡æ€ä¹ˆä¸è§äº†ï¼Œä»”ç»†ä¸€çœ‹cssä»£ç ï¼ŒåŸæ¥æ˜¯imgçš„è·¯å¾„æœ‰é—®é¢˜äº†ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥åœ¨loaderä¸ŠåŠ å¤šä¸€ä¸ªé…ç½®ï¼Œè§£å†³èƒŒæ™¯å›¾ç‰‡çš„é—®é¢˜</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"> use: ExtractTextPlugin.extract(&#123;</span><br><span class="line"><span class="comment">// åªåœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨</span></span><br><span class="line"><span class="comment">// use style-loader in development</span></span><br><span class="line">fallback: <span class="string">'style-loader'</span>,</span><br><span class="line">use: &#123;</span><br><span class="line">loader: <span class="string">'css-loader'</span>,</span><br><span class="line">options: &#123;</span><br><span class="line">minimize: <span class="literal">true</span> <span class="comment">//csså‹ç¼©</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// è§£å†³cssæ‰“åŒ…èƒŒæ™¯å›¾çš„è·¯å¾„é—®é¢˜</span></span><br><span class="line">publicPath: <span class="string">'../'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div><p>è¿™æ ·é…ç½®å®Œï¼Œå°±æ²¡æœ‰é—®é¢˜äº†</p><h3 id="æš´éœ²ç¬¬ä¸‰æ–¹åº“å’Œæå–å…¬å…±js"><a href="#æš´éœ²ç¬¬ä¸‰æ–¹åº“å’Œæå–å…¬å…±js" class="headerlink" title="æš´éœ²ç¬¬ä¸‰æ–¹åº“å’Œæå–å…¬å…±js"></a>æš´éœ²ç¬¬ä¸‰æ–¹åº“å’Œæå–å…¬å…±js</h3><h4 id="æš´éœ²ç¬¬ä¸‰æ–¹åº“"><a href="#æš´éœ²ç¬¬ä¸‰æ–¹åº“" class="headerlink" title="æš´éœ²ç¬¬ä¸‰æ–¹åº“"></a>æš´éœ²ç¬¬ä¸‰æ–¹åº“</h4><p>å¾ˆç»å¸¸çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„é¡µé¢ä¸åªæ˜¯åªæœ‰æˆ‘ä»¬å†™çš„jsï¼Œè¿˜å¯èƒ½å¼•å…¥å„ç§å„æ ·çš„åº“ï¼Œæ¯”å¦‚jqueryï¼Œunderscroeè¿™ç§ç¬¬ä¸‰æ–¹å·¥å…·åº“ï¼Œæˆ‘ä»¬æ€ä¹ˆæŠŠå®ƒæš´éœ²ç»™æˆ‘ä»¬çš„jså‘¢ï¼Œå…¶å®åªéœ€è¦ç”¨åˆ°webpackçš„ProvidePluginæ’ä»¶</p><p>è¿™æ’ä»¶æ˜¯webpackè‡ªå¸¦çš„æ‰€ä»¥ä¸éœ€è¦å®‰è£…ï¼Œåªéœ€è¦æˆ‘ä»¬ä¿®æ”¹webpackçš„é…ç½®è§„åˆ™</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‘å…¨å±€æš´éœ²ç¬¬ä¸‰æ–¹åº“</span></span><br><span class="line"><span class="keyword">new</span> webpack.ProvidePlugin(&#123;</span><br><span class="line">  $: <span class="string">'jquery'</span>,</span><br><span class="line">  jQuery: <span class="string">'jquery'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div><h4 id="æå–å…¬å…±js"><a href="#æå–å…¬å…±js" class="headerlink" title="æå–å…¬å…±js"></a>æå–å…¬å…±js</h4><p>Webpack3çš„commonschunk hashé—®é¢˜éå¸¸çš„ä¸é›…ï¼Œä½¿ç”¨å¤æ‚, Webpack 4 ç›´æ¥å°†CommonsChunkPlugin æ’ä»¶ç›´æ¥æ”¹ä¸º optimization.splitChunks å’Œ optimization.runtimeChunk ä¸¤ä¸ªé…ç½®</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">optimization: &#123;</span><br><span class="line">splitChunks: &#123;</span><br><span class="line">cacheGroups: &#123;</span><br><span class="line"><span class="comment">// è¿™ä¼šåˆ›å»ºä¸€ä¸ªvendorä»£ç å—ï¼Œè¿™ä¸ªä»£ç å—åŒ…å«æ‰€æœ‰è¢«å…¶ä»–å…¥å£(entrypoints)å…±äº«çš„ä»£ç ã€‚</span></span><br><span class="line">vendor: &#123;</span><br><span class="line">test: <span class="regexp">/node_modules/</span>,</span><br><span class="line">chunks: <span class="string">'initial'</span>,</span><br><span class="line">name: <span class="string">'vendor'</span>,</span><br><span class="line">priority: <span class="number">10</span>,</span><br><span class="line">enforce: <span class="literal">true</span>,</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// ä¸ºæ¯ä¸€ä¸ªå…¥å£é»˜è®¤æ·»åŠ ä¸€ä¸ªåªåŒ…å« runtime çš„ chunk</span></span><br><span class="line">runtimeChunk: &#123;</span><br><span class="line">name: <span class="string">'runtime'</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h3 id="imgå‹ç¼©å’Œcssä¼˜åŒ–"><a href="#imgå‹ç¼©å’Œcssä¼˜åŒ–" class="headerlink" title="imgå‹ç¼©å’Œcssä¼˜åŒ–"></a>imgå‹ç¼©å’Œcssä¼˜åŒ–</h3><p>ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„webpack-demoå·²ç»ç›¸å¯¹å®Œå–„äº†ï¼Œç„¶åå…¶å®è¿˜æœ‰ä¸€äº›ä¼˜åŒ–ç©ºé—´çš„ï¼Œæ¯”å¦‚cssèƒ½ä¸èƒ½è‡ªåŠ¨å¢åŠ å‰ç¼€å•Šï¼Œæ¯”å¦‚æˆ‘ä»¬çš„imgå¤§å°å¥½åƒéƒ½æ²¡æœ‰å‹ç¼©å•Šï¼Œèƒ½ä¸èƒ½å‹ç¼©å•Šä»€ä¹ˆçš„</p><h4 id="image-webpack-loader"><a href="#image-webpack-loader" class="headerlink" title="image-webpack-loader"></a>image-webpack-loader</h4><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨image-webpack-loaderè¿›è¡Œimgçš„å‹ç¼©å¤„ç†</p><p>1ã€å®‰è£…image-webpack-loader</p><p>npm install image-webpack-loader â€“save</p><p>2ã€ä¿®æ”¹ä¸‹loaderé…ç½®</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">rules: [&#123;</span><br><span class="line">test: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">use: [&#123;</span><br><span class="line">loader: <span class="string">'url-loader'</span>,</span><br><span class="line">options: &#123;</span><br><span class="line"><span class="comment">// å°äº10kbè½¬æˆbase64</span></span><br><span class="line">limit: <span class="number">10240</span>,</span><br><span class="line"><span class="comment">// æ‰“åŒ…åçš„æ–‡ä»¶å¤¹</span></span><br><span class="line">outputPath: <span class="string">'img'</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;, &#123;</span><br><span class="line">loader: <span class="string">'image-webpack-loader'</span>,</span><br><span class="line">options: &#123;</span><br><span class="line"><span class="comment">// è®¾ç½®å¯¹jpgæ ¼å¼çš„å›¾ç‰‡å‹ç¼©çš„ç¨‹åº¦è®¾ç½®</span></span><br><span class="line">mozjpeg: &#123;</span><br><span class="line">progressive: <span class="literal">true</span>,</span><br><span class="line">quality: <span class="number">65</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;]</span><br><span class="line">&#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>è¿™æ ·å°±å¯ä»¥å‹ç¼©æˆ‘ä»¬çš„imgäº†</p><h4 id="cssä¼˜åŒ–ç¯‡â€”â€”cssè‡ªåŠ¨å¢åŠ å‰ç¼€"><a href="#cssä¼˜åŒ–ç¯‡â€”â€”cssè‡ªåŠ¨å¢åŠ å‰ç¼€" class="headerlink" title="cssä¼˜åŒ–ç¯‡â€”â€”cssè‡ªåŠ¨å¢åŠ å‰ç¼€"></a>cssä¼˜åŒ–ç¯‡â€”â€”cssè‡ªåŠ¨å¢åŠ å‰ç¼€</h4><p>æˆ‘ä»¬çŸ¥é“åœ¨å†™cssçš„æ—¶å€™ç”±äºè¦å…¼å®¹ä¸åŒå‚å•†æµè§ˆå™¨ï¼Œä¸€äº›æ¯”è¾ƒæ–°çš„å±æ€§éœ€è¦ç»™å®ƒä»¬æ·»åŠ å‚å•†å‰ç¼€æ¥å…¼å®¹ï¼Œç§»åŠ¨ç«¯è¿˜å¥½ï¼Œä¸€èˆ¬åªéœ€è¦å…¼å®¹webkitï¼Œpcæ¥å¾ˆè‹¦é€¼å•¦ï¼Œè°·æ­Œã€ç«ç‹ã€æ¬§æœ‹ã€ieæ¯ä¸ªéƒ½ä¸ä¸€æ ·ï¼Œå¯ä»¥è¯´æ³¯ç­äººæ€§å•Šã€‚</p><p>é’ˆå¯¹äºè¿™ä¸ªï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡webpackæ¥å®ç°å¸®æˆ‘ä»¬è‡ªåŠ¨ç»™csså¢åŠ å‰ç¼€ï¼Œè¿™é‡Œé‡‡ç”¨æœ€å¸¸ç”¨çš„postcssä¸­çš„Autoprefixeræ’ä»¶æ¥ç»™æˆ‘ä»¬è‡ªåŠ¨å¢åŠ å‰ç¼€</p><h5 id="é¢˜å¤–è¯ï¼Œä¸ºä»€ä¹ˆéœ€è¦æµè§ˆå™¨å¼•æ“å‰ç¼€ï¼Ÿ"><a href="#é¢˜å¤–è¯ï¼Œä¸ºä»€ä¹ˆéœ€è¦æµè§ˆå™¨å¼•æ“å‰ç¼€ï¼Ÿ" class="headerlink" title="é¢˜å¤–è¯ï¼Œä¸ºä»€ä¹ˆéœ€è¦æµè§ˆå™¨å¼•æ“å‰ç¼€ï¼Ÿ"></a>é¢˜å¤–è¯ï¼Œä¸ºä»€ä¹ˆéœ€è¦æµè§ˆå™¨å¼•æ“å‰ç¼€ï¼Ÿ</h5><p>1ã€è¯•éªŒä¸€äº›è¿˜æœªæˆä¸ºæ ‡å‡†çš„çš„CSSå±æ€§â€”â€”ä¹Ÿè®¸æ°¸è¿œä¸ä¼šæˆä¸ºæ ‡å‡†</p><p>2ã€å¯¹æ–°å‡ºç°çš„æ ‡å‡†çš„CSS3å±æ€§ç‰¹å¾åšå®éªŒæ€§çš„å®ç°</p><p>3ã€å¯¹CSS3ä¸­ä¸€äº›æ–°å±æ€§åšç­‰æ•ˆè¯­ä¹‰çš„ä¸ªæ€§å®ç°</p><h5 id="postcss-loader"><a href="#postcss-loader" class="headerlink" title="postcss-loader"></a>postcss-loader</h5><p>èŠå®Œäº†é¢˜å¤–è¯ï¼Œæˆ‘å¼€å§‹é…ç½®æˆ‘ä»¬çš„webpackå•¦ã€‚</p><p>1ã€å®‰è£…postcss-loaderå’Œautoprefixer</p><p>npm install postcss-loader autoprefixer â€“save</p><p>2ã€æ–°å»ºpostcss.config.jsæ–‡ä»¶</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="comment">// browsersæ¨¡å¼é€‰æ‹©ï¼š</span></span><br><span class="line">        <span class="comment">// ä¸»æµæµè§ˆå™¨æœ€è¿‘2ä¸ªç‰ˆæœ¬ç”¨ last 2 versions </span></span><br><span class="line">        <span class="comment">// å…¨çƒç»Ÿè®¡æœ‰è¶…è¿‡1 % çš„ä½¿ç”¨ç‡ä½¿ç”¨ &gt; 1%</span></span><br><span class="line">        <span class="comment">// ä»…æ–°ç‰ˆæœ¬ç”¨ ff &gt; 20 æˆ– ff&gt;=20 .</span></span><br><span class="line">        <span class="comment">// cascade æ˜¯å¦ç¾åŒ–å±æ€§å€¼(é»˜è®¤ä¸ºtrue)</span></span><br><span class="line">        <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)(&#123;</span><br><span class="line">            browsers: [<span class="string">'last 4 versions'</span>, <span class="string">'IE 10'</span>, <span class="string">'ff &gt; 10'</span>],</span><br><span class="line">            cascade: <span class="literal">true</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><p>3ã€é…ç½®webpack.config.jsçš„è§„åˆ™</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line"> <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [&#123;</span><br><span class="line">            test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">            <span class="comment">// ä»å³å‘å·¦(ä»ä¸‹å‘ä¸Š)å¼€å§‹æ‰§è¡Œ</span></span><br><span class="line">            <span class="comment">// æå–css</span></span><br><span class="line">            use: ExtractTextPlugin.extract(&#123;</span><br><span class="line">                <span class="comment">// åªåœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨</span></span><br><span class="line">                <span class="comment">// use style-loader in development</span></span><br><span class="line">                fallback: <span class="string">'style-loader'</span>,</span><br><span class="line">                use: [&#123;</span><br><span class="line">                    loader: <span class="string">'css-loader'</span>,</span><br><span class="line">                    options: &#123;</span><br><span class="line">                        minimize: <span class="literal">true</span> <span class="comment">//csså‹ç¼©</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    loader: <span class="string">'postcss-loader'</span></span><br><span class="line">                &#125;],</span><br><span class="line">                <span class="comment">// è§£å†³cssæ‰“åŒ…èƒŒæ™¯å›¾çš„è·¯å¾„é—®é¢˜</span></span><br><span class="line">                publicPath: <span class="string">'../'</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>æˆ‘ä»¬ä¿®æ”¹ä¸‹index.cssçš„ä»£ç ï¼Œåšä¸ªbodyçš„èƒŒæ™¯é¢œè‰²ç”±æ·±åˆ°æµ…çš„æ‚¬æµ®è¿‡åº¦åŠ¨ç”»</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">css</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: blue;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">1s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: skyblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>è¿è¡Œnpm run devï¼Œå°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„æ•ˆæœå•¦ï¼Œå¹¶ä¸”è¯¥åŠ ä¸Šçš„å‰ç¼€ä¹ŸåŠ ä¸Šäº†</p><blockquote><p>æ€»ç»“ï¼šæ‡’äººç»å¯¹æ˜¯æ¨åŠ¨ä¸–ç•Œå‘å±•çš„ä¸»è¦åŠ¨åŠ›å•Š</p></blockquote><h4 id="cssä¼˜åŒ–ç¯‡â€”â€”å»é™¤å†—ä½™cssä»£ç "><a href="#cssä¼˜åŒ–ç¯‡â€”â€”å»é™¤å†—ä½™cssä»£ç " class="headerlink" title="cssä¼˜åŒ–ç¯‡â€”â€”å»é™¤å†—ä½™cssä»£ç "></a>cssä¼˜åŒ–ç¯‡â€”â€”å»é™¤å†—ä½™cssä»£ç </h4><p>1ã€å®‰è£…purify-cssã€purifycss-webpackå’Œglob</p><p>npm install purifycss-webpack purify-css glob â€“save</p><p>2ã€é…ç½®webpack.config.jsçš„è§„åˆ™</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ é™¤å†—ä½™cssä»£ç </span></span><br><span class="line"><span class="keyword">const</span> PurifyCssWebpack = <span class="built_in">require</span>(<span class="string">'purifycss-webpack'</span>)</span><br><span class="line"><span class="comment">// ç”¨äºè·å–æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">const</span> glob = <span class="built_in">require</span>(<span class="string">'glob'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">plugins: [</span><br><span class="line"><span class="comment">// åˆ é™¤å†—ä½™cssä»£ç </span></span><br><span class="line"><span class="keyword">new</span> PurifyCssWebpack(&#123;</span><br><span class="line"><span class="comment">// purifycssä¼šæ ¹æ®é…ç½®çš„è·¯åŠ²éå†ä½ çš„HTMLæ–‡ä»¶ï¼ŒæŸ¥æ‰¾ä½ ä½¿ç”¨çš„CSS</span></span><br><span class="line">paths: glob.sync(path.join(__dirname, <span class="string">'src/*.html'</span>)),</span><br><span class="line"><span class="comment">// å‹ç¼©css</span></span><br><span class="line">            minimize: <span class="literal">true</span></span><br><span class="line">&#125;)</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>æµ‹è¯•ä¸€æ³¢ï¼Œæˆ‘ä»¬åœ¨index.csså¢åŠ ä¸€äº›æ— ç”¨ä»£ç ,æ¯”å¦‚</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">css</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.a</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.b</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>è¿è¡Œnpm run buildï¼Œå†çœ‹çœ‹æ‰“åŒ…åçš„index.cssæ˜¯ä¸æ²¡æœ‰è¿™ä¸¤ä¸ªæ ·å¼</p><h3 id="ä½¿ç”¨less"><a href="#ä½¿ç”¨less" class="headerlink" title="ä½¿ç”¨less"></a>ä½¿ç”¨less</h3><p>ä½œä¸ºä¸€ä¸ªç§°èŒçš„å‰ç«¯ï¼Œæ€ä¹ˆèƒ½ä¸ä½¿ç”¨cssé¢„ç¼–è¯‘å‘¢ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨lessï¼Œç„¶åé€šè¿‡webpackæ·»åŠ å¯¹lessçš„æ”¯æŒ</p><p>å‰æ–‡å·²ç»è¯´äº†ï¼Œwebpackå¤©ç”Ÿåªå¯¹jsæ”¯æŒï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å®‰è£…loaderæ‰èƒ½æ·»åŠ å¯¹äºlessçš„æ”¯æŒ</p><p>1ã€å®‰è£…less-loader</p><p>npm install less-loader â€“save</p><p>2ã€é…ç½®webpack.config.jsçš„è§„åˆ™</p><p>å…¶å®å’Œé…ç½®css-loaderå°±ç±»ä¼¼äº†ï¼Œè¿™é‡Œå°±ä¸è¯¦ç»†è¯´æ˜äº†</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [&#123;</span><br><span class="line">            test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">            <span class="comment">// use:['style-loader','css-loader','less-loader']</span></span><br><span class="line">            <span class="comment">// å¦‚æœæƒ³åˆ†ç¦»less</span></span><br><span class="line">            use: ExtractTextPlugin.extract(&#123;</span><br><span class="line">                <span class="comment">// åªåœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨</span></span><br><span class="line">                <span class="comment">// use style-loader in development</span></span><br><span class="line">                fallback: <span class="string">'style-loader'</span>,</span><br><span class="line">                use: [<span class="string">'css-loader'</span>, <span class="string">'postcss-loader'</span>, <span class="string">'less-loader'</span>],</span><br><span class="line">                <span class="comment">// è§£å†³cssæ‰“åŒ…èƒŒæ™¯å›¾çš„è·¯å¾„é—®é¢˜</span></span><br><span class="line">                publicPath: <span class="string">'../'</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h1 id="æ’ä»¶ä¼ é€é—¨"><a href="#æ’ä»¶ä¼ é€é—¨" class="headerlink" title="æ’ä»¶ä¼ é€é—¨"></a>æ’ä»¶ä¼ é€é—¨</h1><p><a href="https://webpack.js.org/" target="_blank" rel="noopener">webpackè‹±æ–‡ä¼ é€é—¨</a> è‹±æ–‡å¥½çš„å¯ä»¥çœ‹è¿™ä¸ª</p><p><a href="https://webpack.docschina.org/" target="_blank" rel="noopener">webpackä¸­æ–‡æ–‡æ¡£ä¼ é€é—¨</a></p><p>1ã€html-webpack-plugin</p><p><a href="https://www.npmjs.com/package/html-webpack-plugin" target="_blank" rel="noopener">npmä¼ é€é—¨</a></p><p><a href="https://github.com/jantimon/html-webpack-plugin" target="_blank" rel="noopener">githubä¼ é€é—¨</a></p><p>2ã€clean-webpack-plugin</p><p><a href="https://www.npmjs.com/package/clean-webpack-plugin" target="_blank" rel="noopener">npmä¼ é€é—¨</a></p><p><a href="https://github.com/johnagan/clean-webpack-plugin" target="_blank" rel="noopener">githubä¼ é€é—¨</a></p><p>3ã€copy-webpack-plugin</p><p><a href="https://www.npmjs.com/package/copy-webpack-plugin" target="_blank" rel="noopener">npmä¼ é€é—¨</a></p><p><a href="https://github.com/webpack-contrib/copy-webpack-plugin" target="_blank" rel="noopener">githubä¼ é€é—¨</a></p><p>4ã€extract-text-webpack-plugin</p><p><a href="https://www.npmjs.com/package/extract-text-webpack-plugin" target="_blank" rel="noopener">npmä¼ é€é—¨</a></p><p><a href="https://github.com/webpack-contrib/extract-text-webpack-plugin" target="_blank" rel="noopener">githubä¼ é€é—¨</a></p><p>5ã€purifycss-webpack</p><p><a href="https://www.npmjs.com/package/purifycss-webpack" target="_blank" rel="noopener">npmä¼ é€é—¨</a></p><p><a href="https://github.com/webpack-contrib/purifycss-webpack" target="_blank" rel="noopener">githubä¼ é€é—¨</a></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><blockquote><p><a href="https://gitee.com/gating/webpack-demo" target="_blank" rel="noopener">é¡¹ç›®ä¼ é€é—¨</a></p></blockquote><p>å­¦åˆ°è¿™é‡Œï¼Œæˆ‘æƒ³å·²ç»å¤§æ¦‚å·²ç»æ€ä¹ˆä½¿ç”¨webpackäº†ï¼Œä¹Ÿç®—å…¥äº†ä¸ªé—¨ï¼Œå¯¹äºä¸€äº›å¸¸è§çš„webpacké…ç½®ä¹Ÿå¯ä»¥çœ‹å¾—æ‡‚äº†ï¼Œä¸€äº›å¸¸ç”¨çš„æ’ä»¶ä¹ŸçŸ¥é“æ€ä¹ˆçš„ä½¿ç”¨å•¦</p><p>å½“ç„¶ï¼Œå…¶å®è¿˜æœ‰å¥½å¤šä¾ç„¶è®²çš„ä¸å…¨ï¼Œå¾ˆå¤šåœ°æ–¹ä¹Ÿæ²¡æœ‰åšè¯¦ç»†çš„è§£é‡Šï¼Œä½†æ˜¯æˆ‘ç›¸ä¿¡ï¼Œä¸€æ­¥ä¸€æ­¥æ¥ï¼Œæ¬²å‘å¡«å‘ï¼Œæ€»ä¼šå­¦ä¹ åˆ°æ›´å¤šä¸œè¥¿çš„ã€‚</p><p>æœ¬ç¯‡webpackæ–‡ç« åˆ°æ­¤ç»“æŸ O(âˆ©_âˆ©)O~</p><p>æœ€åï¼Œæ„Ÿè°¢å„ä½è§‚ä¼—è€çˆ·è§‚çœ‹</p>]]></content>
      
      
      <categories>
          
          <category> è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”¨jqå®ç°çš„å•ä¸ªspanä¸ºå•ä¸ªçš„æ•°å­—åŠ¨ç”»</title>
      <link href="/2018-06-14/%E7%94%A8jq%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%8D%95%E4%B8%AAspan%E4%B8%BA%E5%8D%95%E4%B8%AA%E7%9A%84%E6%95%B0%E5%AD%97%E5%8A%A8%E7%94%BB/"/>
      <url>/2018-06-14/%E7%94%A8jq%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%8D%95%E4%B8%AAspan%E4%B8%BA%E5%8D%95%E4%B8%AA%E7%9A%84%E6%95%B0%E5%AD%97%E5%8A%A8%E7%94%BB/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ä¹¦æ¥ä¸Šå›ï¼Œä¹‹å‰ç”¨jqå®ç°äº†å•ä¸ªå…ƒç´ å¤šä¸ªæ•°å­—çš„åŠ¨ç”»ï¼Œç„¶åéœ€æ±‚æ€»æ˜¯å¾ˆå¼ºå¤§çš„ï¼Œä»–éœ€è¦æ¯ä¸ªæ•°å­—è¦æœ‰ä¸ªå›¾ç‰‡èƒŒæ™¯ï¼Œè¿™å°±éœ€è¦å•ä¸ªå…ƒç´ å•ä¸ªèƒŒæ™¯å•¦</p><blockquote><p>åºŸè¯ä¸å¤šè¯´äº†ï¼Œç›´æ¥ä¸Šä»£ç ï¼š</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">     <span class="selector-class">.mt-number-animate</span> &#123;</span></span><br><span class="line">         font-family: 'å¾®è½¯é›…é»‘';</span><br><span class="line">         line-height: 40px;</span><br><span class="line">         height: 40px;</span><br><span class="line">         font-size: 36px;</span><br><span class="line">         overflow: hidden;</span><br><span class="line">         display: inline-block;</span><br><span class="line">         position: relative;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">     <span class="selector-class">.mt-number-animate</span> <span class="selector-class">.mt-number-animate-dot</span> &#123;</span></span><br><span class="line">         width: 15px;</span><br><span class="line">         line-height: 40px;</span><br><span class="line">         float: left;</span><br><span class="line">         text-align: center;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">     <span class="selector-class">.mt-number-animate</span> <span class="selector-class">.mt-number-animate-dom</span> &#123;</span></span><br><span class="line">         width: 20px;</span><br><span class="line">         text-align: center;</span><br><span class="line"><span class="css">         <span class="selector-tag">display</span><span class="selector-pseudo">:block</span>;</span></span><br><span class="line">         position: relative;</span><br><span class="line">         top: 0;</span><br><span class="line">overflow: hidden;</span><br><span class="line">         float: left;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">     <span class="selector-class">.mt-number-animate</span> <span class="selector-class">.mt-number-animate-dom</span> <span class="selector-class">.mt-number-animate-span</span> &#123;</span></span><br><span class="line">         width: 100%;</span><br><span class="line">         float: left;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mt-number-animate"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-dom"</span> <span class="attr">data-num</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>0<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>3<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>4<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>6<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>7<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>8<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>9<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-dom"</span> <span class="attr">data-num</span>=<span class="string">"3"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>0<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>3<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>4<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>6<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>7<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>8<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>9<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-dom"</span> <span class="attr">data-num</span>=<span class="string">"5"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>0<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>3<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>4<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>6<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>7<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>8<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"mt-number-animate-span"</span>&gt;</span>9<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">     $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">         <span class="keyword">var</span> $wrap = $(<span class="string">'.mt-number-animate'</span>);</span></span><br><span class="line">         runAnimate($wrap);</span><br><span class="line">     &#125;);</span><br><span class="line"><span class="actionscript">     <span class="comment">//æ‰§è¡ŒåŠ¨ç”»</span></span></span><br><span class="line"><span class="actionscript">     <span class="keyword">var</span> runAnimate = <span class="function"><span class="keyword">function</span> <span class="params">($parent)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">         $parent.find(<span class="string">".mt-number-animate-dom"</span>).each(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">             <span class="keyword">var</span> num = $(<span class="keyword">this</span>).attr(<span class="string">"data-num"</span>);</span></span><br><span class="line"><span class="javascript">             <span class="keyword">var</span> spanHei = $(<span class="keyword">this</span>).height() / <span class="number">10</span>; <span class="comment">//10ä¸ºå…ƒç´ ä¸ªæ•°</span></span></span><br><span class="line"><span class="actionscript">             <span class="keyword">var</span> thisTop = -num * spanHei + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="javascript">             <span class="keyword">if</span> (thisTop != $(<span class="keyword">this</span>).css(<span class="string">"top"</span>)) &#123;</span></span><br><span class="line"><span class="javascript">                 $(<span class="keyword">this</span>).css(&#123;</span></span><br><span class="line"><span class="actionscript">                     <span class="string">'transform'</span>: <span class="string">'translateY('</span> + thisTop + <span class="string">')'</span>,</span></span><br><span class="line"><span class="actionscript">                     <span class="string">'-ms-transform'</span>: <span class="string">'translateY('</span> + thisTop + <span class="string">')'</span>,</span></span><br><span class="line"><span class="actionscript">                     <span class="comment">/* IE 9 */</span></span></span><br><span class="line"><span class="actionscript">                     <span class="string">'-moz-transform'</span>: <span class="string">'translateY('</span> + thisTop + <span class="string">')'</span>,</span></span><br><span class="line"><span class="actionscript">                     <span class="comment">/* Firefox */</span></span></span><br><span class="line"><span class="actionscript">                     <span class="string">'-webkit-transform'</span>: <span class="string">'translateY('</span> + thisTop + <span class="string">')'</span>,</span></span><br><span class="line"><span class="actionscript">                     <span class="comment">/* Safari å’Œ Chrome */</span></span></span><br><span class="line"><span class="actionscript">                     <span class="string">'-o-transform'</span>: <span class="string">'translateY('</span> + thisTop + <span class="string">')'</span>,</span></span><br><span class="line"><span class="actionscript">                     <span class="string">'-ms-transition'</span>: <span class="string">'1s'</span>,</span></span><br><span class="line"><span class="actionscript">                     <span class="string">'-moz-transition'</span>: <span class="string">'1s'</span>,</span></span><br><span class="line"><span class="actionscript">                     <span class="string">'-webkit-transition'</span>: <span class="string">'1s'</span>,</span></span><br><span class="line"><span class="actionscript">                     <span class="string">'-o-transition'</span>: <span class="string">'1s'</span>,</span></span><br><span class="line"><span class="actionscript">                     <span class="string">'transition'</span>: <span class="string">'1s'</span></span></span><br><span class="line">                 &#125;);</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;);</span><br><span class="line">     &#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>è¿™é‡Œæˆ‘ä»¬å·§å¦™çš„ç”¨äº†css3çš„transitionï¼Œç”¨æ¥å®ç°æˆ‘ä»¬çš„åŠ¨ç”»è¿‡æ»¤ã€‚ä»¥ä¸Š</p>]]></content>
      
      
      <categories>
          
          <category> å°ç‰¹æ•ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vscodeçš„ä¸ªäººé…ç½®</title>
      <link href="/2018-05-09/vscode%E7%9A%84%E4%B8%AA%E4%BA%BA%E9%85%8D%E7%BD%AE/"/>
      <url>/2018-05-09/vscode%E7%9A%84%E4%B8%AA%E4%BA%BA%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æ­¤ç¯‡åªæ˜¯ä¸ºäº†è®°å½•è‡ªå·±vscodeçš„è®¾ç½®ï¼Œé˜²æ­¢ä»¥åé…ç½®ä¸¢å¤±ï¼Œæ— å®é™…æ„ä¹‰</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">json</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"files.autoSave"</span>: <span class="string">"afterDelay"</span>,</span><br><span class="line">    <span class="attr">"editor.formatOnPaste"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"editor.formatOnType"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"editor.formatOnSave"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"fileheader.Author"</span>: <span class="string">"gating"</span>,</span><br><span class="line">    <span class="attr">"fileheader.LastModifiedBy"</span>: <span class="string">"gating"</span>,</span><br><span class="line">    <span class="attr">"explorer.confirmDelete"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"vetur.validation.template"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"git.enableSmartCommit"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"emmet.triggerExpansionOnTab"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"emmet.includeLanguages"</span>: &#123;</span><br><span class="line">        <span class="attr">"vue-html"</span>: <span class="string">"html"</span>,</span><br><span class="line">        <span class="attr">"vue"</span>: <span class="string">"html"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"workbench.activityBar.visible"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"files.associations"</span>: &#123;</span><br><span class="line">        <span class="attr">"*.wxss"</span>: <span class="string">"css"</span>,</span><br><span class="line">        <span class="attr">"*.html"</span>: <span class="string">"html"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"window.menuBarVisibility"</span>: <span class="string">"default"</span>,</span><br><span class="line">    <span class="attr">"window.zoomLevel"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"editor.minimap.enabled"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"python.linting.flake8Enabled"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"python.formatting.provider"</span>: <span class="string">"yapf"</span>,</span><br><span class="line">    <span class="attr">"guides.enabled"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"editor.renderWhitespace"</span>: <span class="string">"none"</span>,</span><br><span class="line">    <span class="attr">"editor.renderControlCharacters"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"git.autofetch"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"workbench.statusBar.visible"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"terminal.integrated.shell.windows"</span>: <span class="string">"C:\\windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe"</span>,</span><br><span class="line">    <span class="attr">"git.confirmSync"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"px2rem.rootFontSize"</span>: <span class="number">75</span>,</span><br><span class="line">    <span class="attr">"px2rem.isNeedNotes"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"workbench.settings.useSplitJSON"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"workbench.settings.editor"</span>: <span class="string">"json"</span>,</span><br><span class="line">    <span class="attr">"javascript.updateImportsOnFileMove.enabled"</span>: <span class="string">"always"</span>,</span><br><span class="line">    <span class="attr">"sync.gist"</span>: <span class="string">"023ae35a68a66e3b5e122045f4c94d0e"</span>,</span><br><span class="line">    <span class="attr">"vetur.format.defaultFormatter.html"</span>: <span class="string">"prettier"</span>,</span><br><span class="line">    <span class="attr">"workbench.colorTheme"</span>: <span class="string">"Dracula"</span>,</span><br><span class="line">    <span class="attr">"html-css-class-completion.includeGlobPattern"</span>: <span class="string">"**/*.&#123;css,html,vue,jsx&#125;"</span>,</span><br><span class="line">    <span class="attr">"vetur.format.options.tabSize"</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="attr">"[jsonc]"</span>: &#123;</span><br><span class="line">        <span class="attr">"editor.defaultFormatter"</span>: <span class="string">"HookyQR.beautify"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"workbench.iconTheme"</span>: <span class="string">"vscode-icons"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>]]></content>
      
      
      <categories>
          
          <category> ç¼–è¾‘å™¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vscode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é’ˆå¯¹äºç§»åŠ¨ç«¯çš„å…¼å®¹é€‚é…</title>
      <link href="/2018-05-09/%E9%92%88%E5%AF%B9%E4%BA%8E%E7%A7%BB%E5%8A%A8%E7%AB%AF%E7%9A%84%E5%85%BC%E5%AE%B9%E9%80%82%E9%85%8D/"/>
      <url>/2018-05-09/%E9%92%88%E5%AF%B9%E4%BA%8E%E7%A7%BB%E5%8A%A8%E7%AB%AF%E7%9A%84%E5%85%BC%E5%AE%B9%E9%80%82%E9%85%8D/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ€è¿‘,æ­£åœ¨æ”¹ç‰ˆä¹‹å‰å†™çš„å…¬ä¼—å·ï¼Œç”±äºä¹‹å‰çš„ä¹Ÿæ²¡æœ‰å¯¹iphoneXè¿›è¡Œé€‚é…ï¼Œæ‰€ä»¥æ–°æ”¹ç‰ˆçš„å°±æƒ³é’ˆå¯¹ä¸‹iphoneXåšä¸€ä¸ªå°çš„é€‚é…ã€‚</p><blockquote><p>ä¹Ÿå¯èƒ½æ˜¯å› ä¸ºå…¬å¸æœ‰é’±äººè¶Šæ¥è¶Šå¤šäº† = =ï¼Œå¥½å‡ ä¸ªäººä¹°äº†iphoneXï¼Œæ‰€ä»¥ä¹Ÿæœ‰è®¾å¤‡è¿›è¡Œæµ‹è¯•</p></blockquote><p>é—²è¯ä¸å¤šè¯´ï¼Œæ¥ä¸‹æ¥è¿›è¡Œç ä»£ç æ—¶é—´</p><p>åœ¨å¾ˆå¤šåšå®¢ä¸­æˆ‘ä»¬çŸ¥é“ï¼Œios11ä¸­ï¼Œmetaæ ‡ç­¾ä¸­æä¾›äº†viewport-fitæ¥ä½œä¸ºiphoneXçš„é€‚é…æ–¹æ¡ˆï¼Œåˆ™å°±æ˜¯å°†metaè®¾ç½®ä¸ºä¸‹é¢è¿™å¥è¯ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width,initial-scale&#x3D;1.0, minimum-scale&#x3D;1.0, maximum-scale&#x3D;1.0, user-scalable&#x3D;no, viewport-fit&#x3D;cover&quot;&gt;</span><br></pre></td></tr></table></figure></div><p>= =iOS 11ä¸­çš„WebKitåŒ…å«äº†ä¸€ä¸ªæ–°çš„CSSå‡½æ•°constant()ï¼Œ ç„¶è€Œæˆ‘åœ¨å¾®ä¿¡ç«¯è¿›è¡Œæµ‹è¯•çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰æ•ˆæœï¼Œæ‰€ä»¥ä¸Šè¿°æ–¹æ¡ˆè¢«æˆ‘ç æ‰äº†ï¼Œæ¥ä¸‹æ¥è¿›å…¥æ­£é¢˜</p><p>æˆ‘è¿™é‡Œé‡‡ç”¨çš„æ˜¯åª’ä½“æŸ¥è¯¢çš„é€‚é…æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">css</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">device-width:</span> <span class="number">375px</span>) <span class="keyword">and</span> (<span class="attribute">device-height:</span> <span class="number">812px</span>) <span class="keyword">and</span> (<span class="attribute">-webkit-device-pixel-ratio:</span> <span class="number">3</span>) &#123;</span><br><span class="line">    <span class="selector-class">.bottom-bar</span> &#123;</span><br><span class="line">        <span class="attribute">padding-bottom</span>: <span class="number">34px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><blockquote><p>psï¼šç›®å‰å‘ç°é€šè¿‡ env(safe-area-inset-bottom) å˜é‡åå¯ä»¥å®ç°ä¸Šé¢çš„æ–¹æ¡ˆï¼Œæ‰€ä»¥ä»£ç å¦‚ä¸‹:</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">css</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.bottom-bar</span> &#123;</span><br><span class="line">    <span class="attribute">padding-bottom</span>: <span class="built_in">constant</span>(safe-area-inset-bottom);</span><br><span class="line">    <span class="attribute">padding-bottom</span>: <span class="built_in">env</span>(safe-area-inset-bottom);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h1 id="é’ˆå¯¹äºç§»åŠ¨ç«¯fixedå’Œinputè·å–ç„¦ç‚¹è½¯é”®ç›˜å¼¹å‡ºå½±å“å®šä½çš„é—®é¢˜"><a href="#é’ˆå¯¹äºç§»åŠ¨ç«¯fixedå’Œinputè·å–ç„¦ç‚¹è½¯é”®ç›˜å¼¹å‡ºå½±å“å®šä½çš„é—®é¢˜" class="headerlink" title="é’ˆå¯¹äºç§»åŠ¨ç«¯fixedå’Œinputè·å–ç„¦ç‚¹è½¯é”®ç›˜å¼¹å‡ºå½±å“å®šä½çš„é—®é¢˜"></a>é’ˆå¯¹äºç§»åŠ¨ç«¯fixedå’Œinputè·å–ç„¦ç‚¹è½¯é”®ç›˜å¼¹å‡ºå½±å“å®šä½çš„é—®é¢˜</h1><p>ä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> h = <span class="built_in">document</span>.body.scrollHeight;</span><br><span class="line"><span class="keyword">var</span> oBottomBar = <span class="built_in">document</span>.querySelector(<span class="string">'.bottom-bar'</span>);</span><br><span class="line"><span class="built_in">window</span>.onresize = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.body.scrollHeight &lt; h) &#123;</span><br><span class="line">        oBottomBar.style.display = <span class="string">"none"</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        oBottomBar.style.display = <span class="string">"flex"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><blockquote><p>ps:æˆ‘è¿™é‡Œä½¿ç”¨äº†flexå¸ƒå±€çš„ï¼Œæ‰€ä»¥æ ¹æ®å„ä½çš„éœ€è¦ä¿®æ”¹æˆblock/flexè¿˜æ˜¯å…¶ä»–å¸ƒå±€</p></blockquote><p>æœ€åï¼Œè°¢è°¢å„ä½è§‚ä¼—è€çˆ·ä»¬çš„è§‚çœ‹</p>]]></content>
      
      
      <categories>
          
          <category> è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> html </tag>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£æurlå­—ç¬¦ä¸²</title>
      <link href="/2018-04-26/%E8%A7%A3%E6%9E%90url%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
      <url>/2018-04-26/%E8%A7%A3%E6%9E%90url%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
      
        <content type="html"><![CDATA[<p>å¯¹å‰ç«¯åŒå­¦æ¥è¯´ï¼Œæœ‰æ—¶å€™å¯èƒ½ä¼šç¢°åˆ°ä¸€ç§æ¯”è¾ƒéº»çƒ¦çš„æƒ…å†µï¼Œé‚£å°±æ˜¯urlçš„è§£æé—®é¢˜ã€‚è¯´èµ·æ¥ä¹Ÿä¸éš¾ï¼Œå°±æ˜¯æ¯”è¾ƒéº»çƒ¦ã€‚</p><p>å¾ˆç»å¸¸æˆ‘ä»¬éƒ½æ˜¯ç”¨æ­£åˆ™æ¥åŒ¹é…æˆ‘ä»¬çš„å­—ç¬¦ä¸²æ¥åŒ¹é…æˆ‘ä»¬urlçš„å‚æ•°ï¼Œåœ¨è¿™é‡Œæˆ‘å‘ç°äº†aæ ‡ç­¾ä¹Ÿæœ‰ä¸€äº›ç‰¹å®šçš„å±æ€§ï¼Œæ¥è·å–æˆ‘ä»¬æ‰€éœ€çš„å‚æ•°ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥å®ç°ä¸€æ³¢ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è§£æurlå­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªjson</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>url </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">parseUrl</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> a = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>);</span><br><span class="line">        a.href = url;</span><br><span class="line">        <span class="keyword">let</span> search = a.search.split(<span class="string">'&amp;'</span>);</span><br><span class="line">        search[<span class="number">0</span>] = search[<span class="number">0</span>].replace(<span class="string">'?'</span>, <span class="string">''</span>)</span><br><span class="line">        <span class="keyword">let</span> query = &#123;&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; search.length; i++) &#123;</span><br><span class="line">            query[search[i].match(<span class="regexp">/(.+)=/</span>, <span class="string">'$1'</span>)[<span class="number">1</span>]] = search[i].match(<span class="regexp">/=(.+)/</span>, <span class="string">'$1'</span>)[<span class="number">1</span>]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> urlObj = &#123;</span><br><span class="line">            protocol: a.protocol.replace(<span class="string">':'</span>, <span class="string">''</span>),</span><br><span class="line">            host: a.hostname,</span><br><span class="line">            path: a.pathname.replace(<span class="regexp">/^([^\/])/</span>, <span class="string">'/$1'</span>),</span><br><span class="line">            query: query,</span><br><span class="line">            hash: a.hash.replace(<span class="string">'#'</span>, <span class="string">''</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        a.remove();</span><br><span class="line">        <span class="keyword">return</span> urlObj;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="string">``</span><span class="string">`   </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">å¦‚æœï¼Œæˆ‘ä»¬åªæ˜¯éœ€è¦ç®€å•è·å–å­—ç¬¦ä¸²æŒ‡å®škeyçš„å€¼çš„è¯ï¼Œä¸Šé¢çš„æ–¹æ³•æ˜¯ä¸æ˜¯å¤ªéº»çƒ¦äº†å‘¢ï¼Ÿ</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">å…¶å®ä¹Ÿæ˜¯ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é’ˆå¯¹å…·ä½“ä¸šåŠ¡æ¥æ”¹è¿›æˆ‘ä»¬çš„ä»£ç ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>javascript</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è§£æurlå­—ç¬¦ä¸²ï¼Œè¿”å›æŸ¥è¯¢å‚æ•°æŒ‡å®šå­—æ®µçš„å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>url </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>key </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">queryKey</span>(<span class="params">url,key</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> a = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>);</span><br><span class="line">        a.href = url;</span><br><span class="line">        <span class="keyword">var</span> result = a.search.match(<span class="keyword">new</span> <span class="built_in">RegExp</span>(key+<span class="string">"=[^\?\&amp;]+"</span>,<span class="string">"g"</span>));</span><br><span class="line">        <span class="keyword">var</span> value = result?result[<span class="number">0</span>].split(<span class="string">'='</span>)[<span class="number">1</span>]:<span class="string">''</span>;</span><br><span class="line">        a.remove();</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div><p>ä»¥ä¸Šå°±æ˜¯ä»Šå¤©çš„å†…å®¹å•¦ï¼Œè°¢è°¢å„ä½è§‚ä¼—è€çˆ·çš„è§‚çœ‹</p>]]></content>
      
      
      <categories>
          
          <category> è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æµ…è°ˆjsè¿è¡Œæœºåˆ¶</title>
      <link href="/2018-04-16/%E6%B5%85%E8%B0%88js%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6/"/>
      <url>/2018-04-16/%E6%B5%85%E8%B0%88js%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å› ä¸ºjsçš„è¿è¡Œæœºåˆ¶ååˆ†é‡è¦ï¼Œç†è§£èµ·æ¥ä¹Ÿååˆ†æŠ½è±¡ï¼Œä»è¿˜æ˜¯åœ¨è¿™é‡Œåšä¸ªè®°å½•ï¼ŒåŠ æ·±è‡ªå·±çš„è®°å¿†ã€‚</p><blockquote><p>æ€»ä¹‹ï¼Œå¸Œæœ›æœ¬æ–‡çš„å†…å®¹èƒ½å¤Ÿå¯¹æ‚¨çš„å­¦ä¹ æˆ–è€…å·¥ä½œæœ‰æ‰€å¸®åŠ©ã€‚å¦ï¼Œå¦‚æœæœ‰ä»»ä½•çš„é”™è¯¯æˆ–è€…ä¸è¶³è¯·æŒ‡æ­£!</p></blockquote><h1 id="å¦‚ä½•ç†è§£jså•çº¿ç¨‹"><a href="#å¦‚ä½•ç†è§£jså•çº¿ç¨‹" class="headerlink" title="å¦‚ä½•ç†è§£jså•çº¿ç¨‹"></a>å¦‚ä½•ç†è§£jså•çº¿ç¨‹</h1><p>ç”¨å¤§ç™½è¯æ¥è®²ï¼Œå°±æ˜¯åŒä¸€ä¸ªæ—¶é—´åªèƒ½åšä¸€ä»¶äº‹</p><h1 id="ä»€ä¹ˆæ˜¯ä»»åŠ¡é˜Ÿåˆ—"><a href="#ä»€ä¹ˆæ˜¯ä»»åŠ¡é˜Ÿåˆ—" class="headerlink" title="ä»€ä¹ˆæ˜¯ä»»åŠ¡é˜Ÿåˆ—"></a>ä»€ä¹ˆæ˜¯ä»»åŠ¡é˜Ÿåˆ—</h1><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">&#125;,<span class="number">0</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">2</span>)</span><br></pre></td></tr></table></figure></div><p>é¦–å…ˆæˆ‘ä»¬çœ‹ä¸‹ä¸Šé¢çš„ä»£ç ï¼Œå¤§å®¶çŒœä¸€ä¸‹è¾“å‡ºçš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>å¦‚æœä½ å›ç­”çš„æ˜¯ 1 2 3,é‚£ä¹ˆæ­å–œä½ ï¼Œç­”å¯¹äº†ï¼Œæˆ‘ä»¬è¯´è¯´ä¸ºä»€ä¹ˆä»–è¾“å‡ºçš„æ˜¯123å‘¢ï¼Œæ˜æ˜æˆ‘çš„setTimeoutè®¾ç½®ä¸º0äº†å•Š</p><p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥å¼•ç”³å‡ºä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼Œjsçš„ä»»åŠ¡é˜Ÿåˆ—</p><blockquote><p>jsçš„ä»»åŠ¡é˜Ÿåˆ—ï¼šå› ä¸ºjsæ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰€ä»¥åŒä¸€ä¸ªæ—¶é—´åªèƒ½åšä¸€ä»¶äº‹ï¼Œå½“jsé‡åˆ°å¼‚æ­¥ä»»åŠ¡çš„æ—¶å€™è¦å…ˆæŠŠå¼‚æ­¥ä»»åŠ¡æŒ‚èµ·ï¼Œjså¾€åç»§ç»­æ‰§è¡Œï¼ŒåŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç„¶åå†æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡</p></blockquote><blockquote><p>ps:æ®è¯´HTML5æ ‡å‡†è§„å®š</p></blockquote><ol><li><p>setTimeoutçš„æœ€çŸ­æ—¶é—´é—´éš”æ˜¯4æ¯«ç§’</p></li><li><p>setIntervalçš„æœ€çŸ­é—´éš”æ—¶é—´æ˜¯10æ¯«ç§’ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå°äº10æ¯«ç§’çš„æ—¶é—´é—´éš”ä¼šè¢«è°ƒæ•´åˆ°10æ¯«ç§’</p></li></ol><h1 id="ä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯ï¼ˆEvent-Loopï¼‰"><a href="#ä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯ï¼ˆEvent-Loopï¼‰" class="headerlink" title="ä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰"></a>ä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰</h1><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(i)</span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>è¿™é‡Œè¾“å…¥çš„åˆæ˜¯ä»€ä¹ˆå‘¢?å…ˆè¯´ç­”æ¡ˆï¼Œ4ä¸ª4</p><p>ä»ä¸Šé¢å¯çŸ¥é“ï¼ŒåŒæ­¥ä»»åŠ¡æ‰§è¡Œå°±ä¼šæ‰§è¡Œä»»åŠ¡é˜Ÿåˆ—äº†ã€‚é‚£ä¹ˆï¼Œæ‰§è¡Œåˆ°äº†å¼‚æ­¥ä»»åŠ¡å°±ä¸€å®šä¼šæ”¾åˆ°ä»»åŠ¡é˜Ÿåˆ—å—?å…¶å®ä¸ç„¶ã€‚</p><p>æµè§ˆå™¨ä¸­æœ‰ä¸ªå®šæ—¶å™¨æ¨¡å—ï¼Œåªæœ‰å½“æ—¶é—´åˆ°äº†æ‰ä¼šæŠŠsetTimeoutæ”¾åˆ°å¼‚æ­¥é˜Ÿåˆ—ä¸­ã€‚</p><p>æ‰€ä»¥forå¾ªç¯åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå¹¶æ²¡æœ‰æŠŠsetTimeoutçœŸæ­£çš„æ”¾åˆ°å¼‚æ­¥é˜Ÿåˆ—ä¸­ï¼Œå¼‚æ­¥é˜Ÿåˆ—ä¸­æ²¡æœ‰ä¸œè¥¿ï¼Œåªæœ‰å½“æ—¶é—´åˆ°äº†ï¼Œæ‰ä¼šæŠŠä»–æ‰”åˆ°å¼‚æ­¥é˜Ÿåˆ—ä¸­ï¼Œå¼‚æ­¥é˜Ÿåˆ—å†ç­‰å¾…ä¸€ä¸ªå«äº‹ä»¶å¾ªç¯çš„ä¸œè¥¿æ¥æ‰§è¡Œã€‚</p><p>ä¸Šé¢è¯´åˆ°äº†äº‹ä»¶å¾ªç¯ï¼Œé‚£ä»–åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><blockquote><p>äº‹ä»¶å¾ªç¯ï¼š</p></blockquote><ol><li><p>æ‰€æœ‰åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆï¼ˆexecution context stackï¼‰ã€‚</p></li><li><p>ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ªâ€ä»»åŠ¡é˜Ÿåˆ—â€ï¼ˆtask queueï¼‰ã€‚åªè¦å¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æœï¼Œå°±åœ¨â€ä»»åŠ¡é˜Ÿåˆ—â€ä¹‹ä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶ã€‚</p></li><li><p>ä¸€æ—¦â€æ‰§è¡Œæ ˆâ€ä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–â€ä»»åŠ¡é˜Ÿåˆ—â€ï¼Œçœ‹çœ‹é‡Œé¢æœ‰å“ªäº›äº‹ä»¶ã€‚é‚£äº›å¯¹åº”çš„å¼‚æ­¥ä»»åŠ¡ï¼Œäºæ˜¯ç»“æŸç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥æ‰§è¡Œæ ˆï¼Œå¼€å§‹æ‰§è¡Œã€‚</p></li><li><p>ä¸»çº¿ç¨‹ä¸æ–­é‡å¤ä¸Šé¢çš„ç¬¬ä¸‰æ­¥ã€‚</p></li></ol><h2 id="å¼‚æ­¥ä»»åŠ¡æœ‰å“ªäº›"><a href="#å¼‚æ­¥ä»»åŠ¡æœ‰å“ªäº›" class="headerlink" title="å¼‚æ­¥ä»»åŠ¡æœ‰å“ªäº›"></a>å¼‚æ­¥ä»»åŠ¡æœ‰å“ªäº›</h2><ol><li><p>setTimeoutå’ŒsetInterval</p></li><li><p>DOMäº‹ä»¶</p></li><li><p>AJAX</p></li><li><p>Promise</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”¨jså®ç°ç®€å•çš„æŠ›ç‰©çº¿è¿åŠ¨</title>
      <link href="/2018-04-09/%E7%94%A8js%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E7%9A%84%E6%8A%9B%E7%89%A9%E7%BA%BF%E8%BF%90%E5%8A%A8/"/>
      <url>/2018-04-09/%E7%94%A8js%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E7%9A%84%E6%8A%9B%E7%89%A9%E7%BA%BF%E8%BF%90%E5%8A%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>è€æ—©å°±çœ‹è¿‡ä¸€äº›è´­ç‰©è½¦çš„æŠ›ç‰©çº¿æ•ˆæœï¼Œä¹Ÿæƒ³è‡ªå·±å‡‘çƒ­é—¹åŠ¨æ‰‹æ¥å®ç°ä¸€éã€‚</p><p>ç„¶å(lllï¿¢Ï‰ï¿¢) ä¹¦åˆ°ç”¨æ—¶æ–¹æ¨å°‘ï¼Œå‘ç°é«˜ä¸­å­¦åˆ°ç‰©ç†å•Šã€æ•°å­¦å•Šï¼Œéƒ½å¿˜å…‰äº†ï¼ŒæŠ›ç‰©çº¿å…¬å¼éƒ½å¿˜äº†0 0ã€‚</p><p>é¡ºæ‰‹ç™¾åº¦ä¸€æ³¢ï¼Œä»ç™¾åº¦å¯çŸ¥ï¼šy=ax^2+bx+c</p><p>psï¼šé¡ºè·¯åæ§½ä¸€ä¸‹ï¼Œä»¥å‰å­¦ä¹ æ˜¯ä¸ºäº†åº”ä»˜è€ƒè¯•ï¼Œè¯¥å¿˜çš„éƒ½å¿˜äº†ï¼Œæ ¹æœ¬ä¸çŸ¥é“æ€ä¹ˆè¿ç”¨åˆ°å®é™…ç”Ÿæ´»ä¸­ï¼Œæ²¡æœ‰å­¦ä»¥è‡´ç”¨</p><h1 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h1><p>åæ§½å®Œäº†ï¼Œç°åœ¨æˆ‘ä»¬å‡†å¤‡çœ‹çœ‹æ€ä¹ˆå®ç°æˆ‘ä»¬çš„æŠ›ç‰©çº¿åŠ¨ç”»å•¦</p><p>é¦–å…ˆä»å…¬å¼å’Œæˆ‘ä»¬é¡µé¢çš„domå¯çŸ¥ï¼Œåæ ‡ç‚¹(x,y)æ˜¯å·²çŸ¥çš„ï¼Œå‚æ•°aã€bã€cæ˜¯æœªçŸ¥</p><p>å› ä¸ºåæ ‡ç³»æ˜¯ç”±æˆ‘ä»¬è®¾å®šï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å‡è®¾æˆ‘ä»¬çš„åˆå§‹ç‚¹ä¸º(0,0) O(âˆ©_âˆ©)Oè¿™æ ·ä¹Ÿæ˜¯æ–¹ä¾¿æˆ‘ä»¬åé¢çš„è®¡ç®—</p><p>ä»£å…¥å…¬å¼å¯çŸ¥ï¼Œc = 0 åˆ™å‰©ä¸‹çš„é—®é¢˜å°±æ˜¯æ±‚aã€bäº†</p><p>å‡è®¾a=0.001 =&gt; <font color="#f00">å®é™…æŒ‡ç„¦ç‚¹åˆ°å‡†çº¿çš„è·ç¦»ï¼Œå¯ä»¥æŠ½è±¡æˆæ›²ç‡ï¼Œè¿™é‡Œæ¨¡æ‹Ÿæ‰”ç‰©ä½“çš„æŠ›ç‰©çº¿ï¼Œå› æ­¤æ˜¯å¼€å£å‘ä¸‹çš„</font></p><p>åˆ™ b = (y - 0.001 * x * x) / x , é‚£ä¹ˆbä¹Ÿæ˜¯å¯ä»¥ç®—å‡ºæ¥çš„äº†ï¼ŒçŸ¥é“äº†è¿™äº›ï¼Œç»ˆäºï¼Œæˆ‘ä»¬å¯ä»¥å†™ä»£ç äº† O(âˆ©_âˆ©)O</p><blockquote><p>å®Œæ•´ä»£ç ï¼š</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        div &#123;</span><br><span class="line">            width: 50px;</span><br><span class="line">            height: 50px;</span><br><span class="line">            border-radius: 50%;</span><br><span class="line">            overflow: hidden;</span><br><span class="line">            position: absolute;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#div1</span> &#123;</span></span><br><span class="line">            background: red;</span><br><span class="line">            top: 10%;</span><br><span class="line">            left: 10%;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#div2</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background</span>: <span class="selector-id">#ccc</span>;</span></span><br><span class="line">            top: 50%;</span><br><span class="line">            right: 50%;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span> <span class="attr">onclick</span>=<span class="string">"start()"</span>&gt;</span>æŠ›ç‰©çº¿<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// æŠ›ç‰©çº¿è®¡ç®—å…¬å¼ y = a*x*x + b*x + c</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">// åæ ‡ç‚¹xã€yæ˜¯å·²çŸ¥çš„ï¼Œaã€bã€cæ˜¯æœªçŸ¥çš„</span></span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// è·å–åˆå§‹å…ƒç´ </span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> oDiv1 = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// è·å–ç›®æ ‡å…ƒç´ </span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> oDiv2 = <span class="built_in">document</span>.getElementById(<span class="string">"div2"</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// è·å–åˆå§‹å…ƒç´ çš„ä½ç½®</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> elX = oDiv1.getBoundingClientRect().left</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> elY = oDiv1.getBoundingClientRect().top</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// è·å–åˆå§‹å…ƒç´ åˆ°ç›®æ ‡å…ƒç´ çš„åç§»æ€»é‡</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> diffX = oDiv2.getBoundingClientRect().left - oDiv1.getBoundingClientRect().left</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> diffY = oDiv2.getBoundingClientRect().top - oDiv1.getBoundingClientRect().top</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// å‡è®¾(elX,elY)ä¸º(0,0),åˆ™c = 0ï¼Œæ±‚aã€b</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">// è®¾a=0.001 =&gt; å®é™…æŒ‡ç„¦ç‚¹åˆ°å‡†çº¿çš„è·ç¦»ï¼Œå¯ä»¥æŠ½è±¡æˆæ›²ç‡ï¼Œè¿™é‡Œæ¨¡æ‹Ÿæ‰”ç‰©ä½“çš„æŠ›ç‰©çº¿ï¼Œå› æ­¤æ˜¯å¼€å£å‘ä¸‹çš„</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> a = <span class="number">0.001</span></span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// åˆ™ b = (y - a*x*x) / x</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> b = (diffY - a * diffX * diffX) / diffX</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// å®šä¹‰ä¸€ä¸ªå®šæ—¶å™¨ï¼Œç”¨æ¥æ‰§è¡ŒæŠ›ç‰©çº¿åŠ¨ç”»</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> timer = <span class="literal">null</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// æ‰§è¡Œçš„æ—¶é—´</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> duration = <span class="number">1500</span></span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">start</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// æ‰§è¡Œçš„å¼€å§‹æ—¶é—´</span></span></span><br><span class="line"><span class="javascript">            beginTime = <span class="keyword">new</span> <span class="built_in">Date</span>()</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// ç»“æŸçš„æ—¶é—´</span></span></span><br><span class="line">            endTime = +beginTime + duration</span><br><span class="line"><span class="actionscript">            <span class="comment">// å®šæ—¶å™¨ï¼Œæ‰§è¡ŒæŠ›ç‰©çº¿åŠ¨ç”»</span></span></span><br><span class="line"><span class="javascript">            timer = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>()</span></span><br><span class="line">                step(now);</span><br><span class="line">            &#125;, 13);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// æŠ›ç‰©çº¿åŠ¨ç”»çš„æ–¹æ³•</span></span></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">step</span><span class="params">(now)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> x, y;</span></span><br><span class="line">            if (now &gt; endTime) &#123;</span><br><span class="line"><span class="actionscript">                <span class="comment">// è¿è¡Œç»“æŸ</span></span></span><br><span class="line">                x = diffX;</span><br><span class="line">                y = diffY;</span><br><span class="line">                clearInterval(timer);</span><br><span class="line"><span class="actionscript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// è®¡ç®—æ¯ä¸€æ­¥çš„Xè½´çš„ä½ç½®</span></span></span><br><span class="line">                x = diffX * ((now - beginTime) / duration);</span><br><span class="line"><span class="actionscript">                <span class="comment">// åˆ™æ¯ä¸€æ­¥çš„Yè½´çš„ä½ç½®y = a*x*x + b*x + c;   c==0;</span></span></span><br><span class="line">                y = a * x * x + b * x;</span><br><span class="line">            &#125;</span><br><span class="line"><span class="javascript">            oDiv1.style.cssText = <span class="string">`position:absolute;left:<span class="subst">$&#123;elX + x&#125;</span>px;top:<span class="subst">$&#123;elY + y&#125;</span>px`</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>æœ€åï¼Œæ„Ÿè°¢å„ä½è§‚ä¼—è€çˆ·è§‚çœ‹</p>]]></content>
      
      
      <categories>
          
          <category> å°ç‰¹æ•ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”¨jqå®ç°ç®€å•çš„æ•°å­—åŠ¨ç”»</title>
      <link href="/2018-04-08/%E7%94%A8jq%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E7%9A%84%E6%95%B0%E5%AD%97%E5%8A%A8%E7%94%BB/"/>
      <url>/2018-04-08/%E7%94%A8jq%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E7%9A%84%E6%95%B0%E5%AD%97%E5%8A%A8%E7%94%BB/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ä¹‹å‰çš„ä¸€ä¸ªå°éœ€æ±‚ï¼Œå°±æ˜¯è®©spanæ ‡ç­¾çš„æ•°å­—è‡ªåŠ¨ç´¯åŠ åˆ°xxx</p><blockquote><p>åºŸè¯ä¸å¤šè¯´äº†ï¼Œç›´æ¥ä¸Šä»£ç ï¼š</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"num"</span>&gt;</span></span><br><span class="line">    0</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">BeatNum</span><span class="params">(value)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> num = $(<span class="string">"#num"</span>);</span></span><br><span class="line">        num.animate(&#123;</span><br><span class="line">            count: value</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            duration: 1500,</span><br><span class="line"><span class="actionscript">            step: <span class="function"><span class="keyword">function</span> <span class="params">(now)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">                num.text(<span class="built_in">String</span>(<span class="built_in">parseInt</span>(<span class="keyword">this</span>.count)));</span></span><br><span class="line">                if (now == value) &#123;</span><br><span class="line">                    num.text(value);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    BeatNum(10000)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>è¿™é‡ŒçŸ¥è¯†å®ç°äº†ä¸€ä¸ªç®€å•çš„æ•°å­—åŠ¨ç”»ï¼Œé‡Œé¢æœ‰äº›å‚æ•°å¯ä»¥è‡ªå·±æ ¹æ®è‡ªå·±çš„å–œçˆ±è¿›è¡Œæ‹“å±•æˆ–è€…ä¿®æ”¹ï¼Œä»¥ä¸Š</p>]]></content>
      
      
      <categories>
          
          <category> å°ç‰¹æ•ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æµ…è°ˆjsåŸå‹</title>
      <link href="/2018-04-03/%E6%B5%85%E8%B0%88js%E5%8E%9F%E5%9E%8B/"/>
      <url>/2018-04-03/%E6%B5%85%E8%B0%88js%E5%8E%9F%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>çªå‘å¥‡æƒ³ï¼Œæƒ³å†™ä¸€ç¯‡åŸå‹çš„æ–‡ç« ï¼Œä¹Ÿå¯èƒ½æ˜¯å› ä¸ºå¯¹åŸå‹æœ‰æ›´æ·±çš„ç†è§£å§ï¼Œåœ¨è¿™é‡Œåšä¸ªè®°å½•ï¼Œæ¥è®°å½•ä¸‹è‡ªå·±çš„ç†è§£åŠ æ·±ä¸‹è®°å¿†ã€‚</p><blockquote><p>æ€»ä¹‹ï¼Œå¸Œæœ›æœ¬æ–‡çš„å†…å®¹èƒ½å¤Ÿå¯¹æ‚¨çš„å­¦ä¹ æˆ–è€…å·¥ä½œæœ‰æ‰€å¸®åŠ©ã€‚å¦ï¼Œå¦‚æœæœ‰ä»»ä½•çš„é”™è¯¯æˆ–è€…ä¸è¶³è¯·æŒ‡æ­£!</p></blockquote><h1 id="åˆ›å»ºå¯¹è±¡æœ‰å‡ ç§æ–¹æ³•"><a href="#åˆ›å»ºå¯¹è±¡æœ‰å‡ ç§æ–¹æ³•" class="headerlink" title="åˆ›å»ºå¯¹è±¡æœ‰å‡ ç§æ–¹æ³•"></a>åˆ›å»ºå¯¹è±¡æœ‰å‡ ç§æ–¹æ³•</h1><p>jsé‡Œè¯´åˆ°åŸå‹ï¼Œè‚¯å®šç¦»ä¸å¼€é¢å‘å¯¹è±¡ï¼Œè¯´åˆ°é¢å‘å¯¹è±¡è‚¯å®šç¦»ä¸å¼€å¯¹è±¡ï¼Œæœ¬æ–‡æ€»ç»“äº†å¤§è‡´3ç§åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•</p><ol><li><p>å­—é¢é‡åˆ›å»º</p></li><li><p>æ˜¾å¼çš„æ„é€ å‡½æ•°åˆ›å»º</p></li><li><p>ä½¿ç”¨Object.create()åˆ›å»º</p></li></ol><h1 id="åŸå‹ã€æ„é€ å‡½æ•°ã€å®ä¾‹ã€åŸå‹é“¾"><a href="#åŸå‹ã€æ„é€ å‡½æ•°ã€å®ä¾‹ã€åŸå‹é“¾" class="headerlink" title="åŸå‹ã€æ„é€ å‡½æ•°ã€å®ä¾‹ã€åŸå‹é“¾"></a>åŸå‹ã€æ„é€ å‡½æ•°ã€å®ä¾‹ã€åŸå‹é“¾</h1><p>åŸå‹ï¼šå‡½æ•°éƒ½æœ‰prototypeå±æ€§,æ˜¯jsé»˜è®¤æ·»åŠ çš„,prototypeæŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡,åªæœ‰å½“å‡½æ•°æ˜¯æ„é€ å‡½æ•°çš„æ—¶å€™,prototypeæ‰æœ‰æ„ä¹‰</p><p>å®ä¾‹ï¼šåªè¦æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½æ˜¯å®ä¾‹</p><p>æ„é€ å‡½æ•°ï¼šæ„é€ å‡½æ•°æ˜¯å¯ä»¥ä½¿ç”¨newè¿ç®—ç¬¦ç”Ÿæˆä¸€ä¸ªå®ä¾‹çš„å‡½æ•°å°±æ˜¯æ„é€ å‡½æ•°ï¼Œä»»ä½•ä¸€ä¸ªå‡½æ•°ï¼Œåªè¦è¢«newä½¿ç”¨äº†ï¼Œéƒ½æ˜¯æ„é€ å‡½æ•°</p><p>ps:åŸå‹æœ‰ä¸ªæ„é€ å™¨:constructorï¼ˆæ„é€ å™¨ï¼‰,æŒ‡å‘æ˜¯å£°æ˜çš„æ„é€ å‡½æ•°</p><blockquote><p>æ€»ç»“:</p></blockquote><ol><li><p>æ„é€ å‡½æ•°é€šè¿‡newå’Œå®ä¾‹å…³è”</p></li><li><p>æ„é€ å‡½æ•°é€šè¿‡prototypeå’ŒåŸå‹å¯¹è±¡å…³è”</p></li><li><p>å®ä¾‹é€šè¿‡<strong>proto</strong>å’ŒåŸå‹å¯¹è±¡å…³è”</p></li><li><p>åŸå‹é“¾æ˜¯é€šè¿‡<strong>proto</strong>å’Œprototypeå®ç°</p></li><li><p>Object.prototypeæ˜¯åŸå‹é“¾çš„é¡¶ç«¯</p></li></ol><h2 id="å…ˆæœ‰é¸¡è¿˜æ˜¯å…ˆæœ‰è›‹"><a href="#å…ˆæœ‰é¸¡è¿˜æ˜¯å…ˆæœ‰è›‹" class="headerlink" title="å…ˆæœ‰é¸¡è¿˜æ˜¯å…ˆæœ‰è›‹??"></a>å…ˆæœ‰é¸¡è¿˜æ˜¯å…ˆæœ‰è›‹??</h2><p>å¼„æ‡‚äº†ä¸Šé¢é‚£äº›ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªæœ‰è¶£çš„ç°åƒ</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Function</span> <span class="keyword">instanceof</span> <span class="built_in">Object</span>  <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span> <span class="keyword">instanceof</span> <span class="built_in">Function</span>  <span class="comment">// true</span></span><br></pre></td></tr></table></figure></div><p>å›ç­”è¿™ä¸ªé—®é¢˜å‰ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ä¸€ä¸‹Function.protype,å› ä¸ºå®ƒæ˜¯å¯¼è‡´Function instanceof Objectå’ŒObject instanceof Functionéƒ½ä¸ºtrueçš„æ ¹æœ¬åŸå› ã€‚</p><ol><li><p>Function.prototypeæ˜¯ä¸ªä¸åŒäºä¸€èˆ¬å‡½æ•°å¯¹è±¡ã€‚</p><ol><li>Function.prototypeåƒæ™®é€šå‡½æ•°ä¸€æ ·å¯ä»¥è°ƒç”¨ï¼Œä½†æ€»æ˜¯è¿”å›undefined;</li><li>æ™®é€šå‡½æ•°å®é™…ä¸Šæ˜¯Functionçš„å®ä¾‹</li></ol></li><li><p>Objectæœ¬èº«å°±æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œæ˜¯Functionçš„å®ä¾‹ï¼Œå³Object.<strong>proto</strong>å°±æ˜¯Function.prototype</p></li></ol><blockquote><p>æˆ‘ä»¬é€šè¿‡ä»£ç æ¥äº†è§£ä¸€ä¸‹ï¼š</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 1.Functionçš„æ„é€ å™¨æ˜¯å®ƒè‡ªèº«</span></span><br><span class="line"><span class="built_in">Function</span>.constructor=== <span class="built_in">Function</span>; <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.Objectçš„æ„é€ å™¨æ˜¯Function(å®é™…ä¸Šæ‰€æœ‰å‡½æ•°çš„æ„é€ å™¨éƒ½æŒ‡å‘Function)</span></span><br><span class="line"><span class="built_in">Object</span>.constructor === <span class="built_in">Function</span>; <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.Objectçš„__proto__æŒ‡å‘Functionçš„prototype</span></span><br><span class="line"><span class="built_in">Object</span>.__proto__ === <span class="built_in">Function</span>.prototype; <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.Functionçš„__proto__æŒ‡å‘Functionçš„prototype</span></span><br><span class="line"><span class="built_in">Function</span>.__proto__ === <span class="built_in">Function</span>.prototype <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 5.Function.prototypeçš„__proto__æŒ‡å‘Object.protype</span></span><br><span class="line"> <span class="built_in">Function</span>.__proto__.__proto__ === <span class="built_in">Object</span>.prototype <span class="comment">//true</span></span><br></pre></td></tr></table></figure></div><p>O(âˆ©_âˆ©)Oï¼Œé€šè¿‡è¿™é‡Œï¼Œæˆ‘æƒ³å¤§æ¦‚æˆ‘ä»¬å¯ä»¥çŸ¥é“ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¸ªç¥å¥‡çš„ç°åƒäº†å§ï¼Ÿ</p><h2 id="æ˜¯è°åˆ›å»ºäº†å®ƒï¼ˆObject-prototypeï¼‰å‘¢"><a href="#æ˜¯è°åˆ›å»ºäº†å®ƒï¼ˆObject-prototypeï¼‰å‘¢" class="headerlink" title="æ˜¯è°åˆ›å»ºäº†å®ƒï¼ˆObject.prototypeï¼‰å‘¢??"></a>æ˜¯è°åˆ›å»ºäº†å®ƒï¼ˆObject.prototypeï¼‰å‘¢??</h2><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.__proto__===<span class="literal">null</span> <span class="comment">//true</span></span><br></pre></td></tr></table></figure></div><p>ä»è¿™é‡Œå¯çŸ¥,æ˜¯nullåˆ›é€ äº†ä¸€åˆ‡,æ­£å¦‚é“å¾·ç»æ‰€è¯´ï¼šé“ç”Ÿä¸€ï¼Œä¸€ç”ŸäºŒï¼ŒäºŒç”Ÿä¸‰ï¼Œä¸‰ç”Ÿä¸‡ç‰©</p><h1 id="instanceofçš„åŸç†"><a href="#instanceofçš„åŸç†" class="headerlink" title="instanceofçš„åŸç†"></a>instanceofçš„åŸç†</h1><p>æˆ‘ä»¬å†å›è¿‡å¤´æ¥çœ‹å…ˆæœ‰é¸¡è¿˜æ˜¯å…ˆæœ‰è›‹çš„é‚£ä¸ªé—®é¢˜ï¼Œé€ æˆè¿™ä¸ªç°åƒçš„åŸå› è¿˜æ˜¯å¾—å½’æ ¹äºinstanceofçš„è¿ç®—è§„åˆ™ã€‚</p><blockquote><p>instanceofçš„è¿ç®—è§„åˆ™</p></blockquote><p>w3cå®˜æ–¹è§£é‡Š(<a href="https://www.w3.org/html/ig/zh/wiki/ES5/%E8%A1%A8%E8%BE%BE%E5%BC%8F#instanceof_.E8.BF.90.E7.AE.97.E7.AC.A6" target="_blank" rel="noopener">ä¼ é€é—¨</a>),è¿˜æ˜¯ä¸€å¦‚æ—¢å¾€çš„éš¾æ‡‚ (lllï¿¢Ï‰ï¿¢)</p><p>æˆ‘ä»¬ç”¨ä¸ªç®€å•çš„ä¾‹å­è¯´æ˜ä¸€ä¸‹:</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> Person = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> Student = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">Student.prototype = <span class="keyword">new</span> Person;</span><br><span class="line"><span class="keyword">var</span> gating = <span class="keyword">new</span> Student()</span><br><span class="line"></span><br><span class="line">gating <span class="keyword">instanceof</span> Student <span class="comment">//true</span></span><br><span class="line">gating <span class="keyword">instanceof</span> Person <span class="comment">//true</span></span><br></pre></td></tr></table></figure></div><p>ps: instanceofä¼šé€’å½’æŸ¥æ‰¾å·¦è¾¹çš„åŸå‹é“¾</p><blockquote><p>æ€»ç»“ï¼šinstanceofæ£€æµ‹å·¦ä¾§çš„<strong>proto</strong>åŸå‹é“¾ä¸Šæ˜¯å¦å­˜åœ¨å³ä¾§çš„åŸå‹å¯¹è±¡ã€‚</p></blockquote><h1 id="newè¿ç®—ç¬¦"><a href="#newè¿ç®—ç¬¦" class="headerlink" title="newè¿ç®—ç¬¦"></a>newè¿ç®—ç¬¦</h1><p>ä»ä¸Šæˆ‘ä»¬å¯ä»¥äº†è§£åˆ°åŸå‹ã€æ„é€ å‡½æ•°ã€å®ä¾‹ã€åŸå‹é“¾äº†ï¼Œæ¥ä¸‹æ¥äº†è§£ä¸‹newè¿ç®—ç¬¦</p><p>è¯´åˆ°newè¿ç®—ç¬¦ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> gating = <span class="keyword">new</span> Person(<span class="string">"gating"</span>)</span><br></pre></td></tr></table></figure></div><p>å¾ˆç®€å•çš„ä¸€æ®µä»£ç ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹newè¿ç®—ç¬¦æ˜¯å¦‚ä½•è¿›è¡Œå·¥ä½œçš„å‘¢ï¼Ÿ</p><blockquote><p>æˆ‘ä»¬å¯ä»¥æŠŠå®ƒæ‹†åˆ†æˆ3æ­¥:</p></blockquote><ol><li><p>åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œä»–ç»§æ‰¿äºPerson.prototype</p></li><li><p>æ„é€ å‡½æ•°Personè¢«æ‰§è¡Œã€‚ç›¸åº”çš„å‚æ•°ä¼šè¢«ä¼ å…¥ï¼ŒåŒæ—¶thisä¼šæŒ‡å‘è¿™ä¸ªæ–°åˆ›å»ºçš„å¯¹è±¡ã€‚ <font color="#f00">tips:å†ä¸ä¼ é€’ä»»ä½•å‚æ•°çš„æƒ…å†µä¸‹,new Person ç­‰åŒäº new Person()</font></p></li><li><p>å¦‚æœæ„é€ å‡½æ•°è¿”å›äº†ä¸€ä¸ªâ€œå¯¹è±¡â€ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡ä¼šå–ä»£æ•´ä¸ªnewå‡ºæ¥çš„ç»“æœã€‚å¦‚æœæ„é€ å‡½æ•°æ²¡æœ‰è¿”å›å¯¹è±¡(é€šå¸¸ä¹Ÿæ˜¯è¿™ä¹ˆåšçš„, ä¸è®©å…¶æœ‰è¿”å›å€¼)ï¼Œé‚£ä¹ˆnewå‡ºæ¥çš„ç»“æœä¸ºæ­¥éª¤1åˆ›å»ºçš„å¯¹è±¡</p></li></ol><blockquote><p>æˆ‘ä»¬ç®€å•çš„é€šè¿‡ä»£ç å®ç°ä¸€ä¸‹newï¼š</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> new2 = <span class="function"><span class="keyword">function</span>(<span class="params">fun</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> obj = <span class="built_in">Object</span>.create(fun.prototype);</span><br><span class="line">    <span class="keyword">var</span> o = fun.call(obj)</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> o === <span class="string">'object'</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> o</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> obj</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Student = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> gating = new2(Student)</span><br><span class="line"></span><br><span class="line">gating <span class="keyword">instanceof</span> Student <span class="comment">//true</span></span><br></pre></td></tr></table></figure></div><p>æœ€åï¼Œæ„Ÿè°¢å„ä½è§‚ä¼—è€çˆ·è§‚çœ‹</p>]]></content>
      
      
      <categories>
          
          <category> è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vscodeæ’ä»¶æ•´ç†</title>
      <link href="/2018-03-30/vscode%E6%8F%92%E4%BB%B6%E6%95%B4%E7%90%86/"/>
      <url>/2018-03-30/vscode%E6%8F%92%E4%BB%B6%E6%95%B4%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>åœ¨è¿™ç¼–è¾‘å™¨æ¨ªè¡Œçš„æ—¶ä»£,é€‰æ‹©ä¸€ä¸ªç§°æ‰‹çš„ç¼–è¾‘å™¨,èƒ½ä½¿å¾—è‡ªå·±ç ä»£ç çš„æ•ˆç‡å¾—åˆ°ä¸€ä¸ªè´¨çš„æå‡ï¼Œå¯¹æ¯”äº†atomã€bracketã€webStormã€vscodeã€sublimeç­‰ç¼–è¾‘å™¨ã€‚æœ€ç»ˆï¼Œæˆ‘åœç•™åœ¨äº†vscodeä¸Šã€‚</p><h1 id="ä¸ºä»€ä¹ˆé€‰æ‹©vscodeå‘¢ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆé€‰æ‹©vscodeå‘¢ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆé€‰æ‹©vscodeå‘¢ï¼Ÿ"></a>ä¸ºä»€ä¹ˆé€‰æ‹©vscodeå‘¢ï¼Ÿ</h1><ol><li>å¼€æºï¼Œå…è´¹ï¼Œé¢œå€¼é«˜ï¼›</li><li>å¯¹jsçš„æ”¯æŒååˆ†è‰¯å¥½</li><li>å¯¹æ¯”äºwsï¼Œwsåˆå¤ªå¤§ï¼Œsublimeæ™ºèƒ½æ„ŸçŸ¥åˆå¤ªå·®ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©æŠ˜ä¸­çš„vsc</li><li>é»˜è®¤æ”¯æŒgit</li><li>å¾ˆå¤šä½¿ç”¨çš„æ‹“å±•æ’ä»¶</li></ol><h1 id="æ’ä»¶æ¨è"><a href="#æ’ä»¶æ¨è" class="headerlink" title="æ’ä»¶æ¨è"></a>æ’ä»¶æ¨è</h1><p>Auto Close Tag è‡ªåŠ¨é—­åˆæ ‡ç­¾</p><p>Auto Rename Tag è‡ªåŠ¨é‡å‘½åæ ‡ç­¾ =&gt; æœ‰bugï¼Œä½†ä¸å½±å“ä½¿ç”¨</p><p>Beautify =&gt; æ ¼å¼åŒ–ä»£ç </p><p>Bootstrap 3 Snippets =&gt; Bootstrap3ä»£ç ç‰‡æ®µ</p><p>Bracket Pair Colorize =&gt; å„ç§æ‹¬å·çš„é¢œè‰²</p><p>Dracula Official =&gt; vscodeä¸»é¢˜</p><p>filesize =&gt; æ–‡ä»¶å¤§å°</p><p>HTML CSS Support =&gt; Html cssè¯­æ³•æ”¯æŒ</p><p>HTML Snippets =&gt; Htmlä»£ç ç‰‡æ®µ</p><p>IntelliSense for Css class names in HTML =&gt; å¯ä»¥å¼•ç”¨æ–‡ä»¶çš„class</p><p>JQuery Code Snippets =&gt; JQueryä»£ç ç‰‡æ®µ</p><p>npm Intellisense =&gt; npmæ™ºèƒ½æ„ŸçŸ¥</p><p>Path Intellisense =&gt; è·¯å¾„æ™ºèƒ½æ„ŸçŸ¥</p><p>View In Browser =&gt; ä»æµè§ˆå™¨æ‰“å¼€</p><p>vscode-fileheader =&gt; æ–‡ä»¶çš„å¤´ä¿¡æ¯</p><p>vscode-icons =&gt; vscodeå›¾æ ‡</p><p>Vetur =&gt; vueçš„è¯­æ³•é«˜äº®å’Œä»£ç ç‰‡æ®µ</p><p>Vue 2 Snippets =&gt; vue2çš„ä»£ç ç‰‡æ®µ</p><p>Guides =&gt; æ˜¾ç¤ºç¼©è¿›(ä¸»è¦ç”¨æ¥ç©python)</p><p>Python =&gt; vscodeçš„pythonæ‹“å±•</p><p>Python-vscode =&gt; pythoneçš„è¯­è¨€åŒ…</p><p>px2rem =&gt; ç”¨æ¥æŠŠpxè½¬æ¢ä¸ºremçš„ï¼ˆä¸»è¦æ­é…fleible.jsï¼‰</p><hr><h1 id="ä½¿ç”¨vscodeå°tips"><a href="#ä½¿ç”¨vscodeå°tips" class="headerlink" title="ä½¿ç”¨vscodeå°tips"></a>ä½¿ç”¨vscodeå°tips</h1><p>åœ¨jsæ–‡ä»¶ä¸­ä½¿ç”¨jqæç¤º:</p><p>åœ¨å½“å‰æ–‡ä»¶å¤¹æ ¹ç›®å½•æ–°å»ºjsconfig.jsonæ–‡ä»¶,å†™ä¸Š:</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">json</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"typeAcquisition"</span>: &#123;</span><br><span class="line">        <span class="attr">"include"</span>: [</span><br><span class="line">            <span class="string">"jquery"</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>é…ç½®æ–‡ä»¶ä»£ç é£æ ¼ï¼š</p><p>åœ¨å½“å‰æ–‡ä»¶å¤¹æ ¹ç›®å½•æ–°å»º.editorconfigæ–‡ä»¶ï¼š</p><p>å‚è€ƒèµ„æ–™: <a href="https://github.com/editorconfig/editorconfig/wiki/EditorConfig-Properties" target="_blank" rel="noopener">https://github.com/editorconfig/editorconfig/wiki/EditorConfig-Properties</a></p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># top-most EditorConfig file</span><br><span class="line">root &#x3D; true</span><br><span class="line"></span><br><span class="line"># å¯¹æ‰€æœ‰æ–‡ä»¶ç”Ÿæ•ˆ</span><br><span class="line">[*]</span><br><span class="line"># æ–‡ä»¶çš„å­—ç¬¦ç¼–ç </span><br><span class="line">charset &#x3D; utf-8</span><br><span class="line"># ç¼©è¿›çš„æ ¼å¼ space(ç©ºæ ¼)</span><br><span class="line">indent_style &#x3D; space</span><br><span class="line"># ç¼©è¿›çš„æ•°é‡2ä¸ª</span><br><span class="line">indent_size &#x3D; 2</span><br><span class="line"># æ¢è¡Œç¬¦æ ¼å¼</span><br><span class="line">end_of_line &#x3D; lf</span><br><span class="line"># æ˜¯å¦åœ¨æ–‡ä»¶çš„æœ€åæ’å…¥ä¸€ä¸ªç©ºè¡Œ</span><br><span class="line">insert_final_newline &#x3D; true</span><br><span class="line"># æ˜¯å¦åˆ é™¤è¡Œå°¾çš„ç©ºæ ¼</span><br><span class="line">trim_trailing_whitespace &#x3D; true</span><br></pre></td></tr></table></figure></div><p>æœ€åï¼Œæ„Ÿè°¢å„ä½è§‚ä¼—è€çˆ·çš„è§‚çœ‹</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–è¾‘å™¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vscode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DOMäº‹ä»¶</title>
      <link href="/2018-03-28/DOM%E4%BA%8B%E4%BB%B6/"/>
      <url>/2018-03-28/DOM%E4%BA%8B%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="DOMäº‹ä»¶çº§åˆ«"><a href="#DOMäº‹ä»¶çº§åˆ«" class="headerlink" title="DOMäº‹ä»¶çº§åˆ«"></a>DOMäº‹ä»¶çº§åˆ«</h1><ol><li><p>DOM0 element.onclick=function(){}</p></li><li><p>DOM2</p><ol><li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯äº‹ä»¶åï¼ˆå¦‚clickï¼‰ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯äº‹ä»¶å¤„ç†ç¨‹åºå‡½æ•°ï¼›ç¬¬ä¸‰ä¸ªå‚æ•°å¦‚æœæ˜¯trueåˆ™è¡¨ç¤ºåœ¨æ•è·é˜¶æ®µè°ƒç”¨ï¼Œä¸ºfalseè¡¨ç¤ºåœ¨å†’æ³¡é˜¶æ®µè°ƒç”¨ã€‚</li><li>elemnt.addEventListener(â€˜clickâ€™,function(){},false) elemnt.removeEventListener(â€˜clickâ€™,function(){},false)</li><li>elemnt.attachEvent(â€˜onclickâ€™,function(){}) elemnt.attachEvent(â€˜onclickâ€™,function(){}) <font color="#f00">å…¼å®¹IE7ã€IE8ç­‰æ—©æœŸç‰ˆæœ¬</font></li></ol></li><li><p>DOM3 elemnt.addEventListener(â€˜keyupâ€™,function(){},false) åŒä¸Š,å¢åŠ äº†é¼ æ ‡ã€é”®ç›˜ç­‰äº‹ä»¶</p></li></ol><blockquote><p>psï¼šä¸èƒ½ç§»é™¤åŒ¿åæ·»åŠ çš„å‡½æ•°ã€‚</p></blockquote><h2 id="ä¸ºä»€ä¹ˆæ²¡æœ‰DOM1"><a href="#ä¸ºä»€ä¹ˆæ²¡æœ‰DOM1" class="headerlink" title="ä¸ºä»€ä¹ˆæ²¡æœ‰DOM1"></a>ä¸ºä»€ä¹ˆæ²¡æœ‰DOM1</h2><p>DOM1äº1998å¹´10æœˆ1æ—¥æˆä¸ºW3Cæ¨èæ ‡å‡†ã€‚DOM1æ ‡å‡†ä¸­å¹¶æ²¡æœ‰å®šä¹‰äº‹ä»¶ç›¸å…³çš„å†…å®¹ï¼Œæ‰€ä»¥æ²¡æœ‰æ‰€è°“çš„DOM1äº‹ä»¶æ¨¡å‹</p><h1 id="DOMäº‹ä»¶æ¨¡å‹"><a href="#DOMäº‹ä»¶æ¨¡å‹" class="headerlink" title="DOMäº‹ä»¶æ¨¡å‹"></a>DOMäº‹ä»¶æ¨¡å‹</h1><p>å†’æ³¡å’Œæ•è·</p><h1 id="DOMäº‹ä»¶æµ"><a href="#DOMäº‹ä»¶æµ" class="headerlink" title="DOMäº‹ä»¶æµ"></a>DOMäº‹ä»¶æµ</h1><p>äº‹ä»¶æ•è·é˜¶æ®µã€å¤„äºç›®æ ‡é˜¶æ®µå’Œäº‹ä»¶å†’æ³¡é˜¶æ®µ</p><p>æ•è·-&gt;ç›®æ ‡é˜¶æ®µ-&gt;å†’æ³¡</p><h1 id="æè¿°DOMäº‹ä»¶æ•è·çš„å…·ä½“æµç¨‹"><a href="#æè¿°DOMäº‹ä»¶æ•è·çš„å…·ä½“æµç¨‹" class="headerlink" title="æè¿°DOMäº‹ä»¶æ•è·çš„å…·ä½“æµç¨‹"></a>æè¿°DOMäº‹ä»¶æ•è·çš„å…·ä½“æµç¨‹</h1><p>window-&gt;document-&gt;html-&gt;body-&gt;Â·Â·Â·-&gt;ç›®æ ‡å…ƒç´ </p><h1 id="Eventå¯¹è±¡çš„å¸¸è§é—®é¢˜"><a href="#Eventå¯¹è±¡çš„å¸¸è§é—®é¢˜" class="headerlink" title="Eventå¯¹è±¡çš„å¸¸è§é—®é¢˜"></a>Eventå¯¹è±¡çš„å¸¸è§é—®é¢˜</h1><ol><li><p>event.preventDefault() é˜»æ­¢é»˜è®¤æ˜¯è¡Œä¸º</p></li><li><p>event.stopPropagation() é˜»æ­¢å†’æ³¡</p></li><li><p>event.stoplmmediatePropagation() äº‹ä»¶ä¼˜å…ˆçº§</p></li><li><p>event.currentTarget å½“å‰ç»‘å®šäº‹ä»¶çš„å¯¹è±¡</p></li><li><p>event.target å½“å‰ç‚¹å‡»å¯¹è±¡</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>httpåè®®</title>
      <link href="/2018-03-28/http%E5%8D%8F%E8%AE%AE/"/>
      <url>/2018-03-28/http%E5%8D%8F%E8%AE%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="HTTPåè®®çš„ä¸»è¦ç‰¹ç‚¹"><a href="#HTTPåè®®çš„ä¸»è¦ç‰¹ç‚¹" class="headerlink" title="HTTPåè®®çš„ä¸»è¦ç‰¹ç‚¹"></a>HTTPåè®®çš„ä¸»è¦ç‰¹ç‚¹</h1><p>ç®€å•å¿«é€Ÿã€çµæ´»ã€æ— è¿æ¥ã€æ— çŠ¶æ€</p><h1 id="HTTPæŠ¥æ–‡çš„ç»„æˆéƒ¨åˆ†"><a href="#HTTPæŠ¥æ–‡çš„ç»„æˆéƒ¨åˆ†" class="headerlink" title="HTTPæŠ¥æ–‡çš„ç»„æˆéƒ¨åˆ†"></a>HTTPæŠ¥æ–‡çš„ç»„æˆéƒ¨åˆ†</h1><p>HTTPè¯·æ±‚/å“åº”æŠ¥æ–‡:<br>1. è¯·æ±‚è¡Œã€è¯·æ±‚å¤´éƒ¨ã€ç©ºè¡Œå’Œè¯·æ±‚æ•°<br>2. å“åº”è¡Œã€å“åº”å¤´éƒ¨ã€ç©ºè¡Œå’Œå“åº”ä½“</p><h1 id="HTTPæ–¹æ³•"><a href="#HTTPæ–¹æ³•" class="headerlink" title="HTTPæ–¹æ³•"></a>HTTPæ–¹æ³•</h1><ol><li>HTTP1.0å®šä¹‰äº†ä¸‰ç§è¯·æ±‚æ–¹æ³•ï¼š GET, POST å’Œ HEADæ–¹æ³•ã€‚</li><li>HTTP1.1æ–°å¢äº†äº”ç§è¯·æ±‚æ–¹æ³•ï¼šOPTIONS, PUT, DELETE, TRACE å’Œ CONNECT æ–¹æ³•ã€‚</li></ol><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>GET</td><td>è¯·æ±‚æŒ‡å®šçš„é¡µé¢ä¿¡æ¯ï¼Œå¹¶è¿”å›å®ä½“ä¸»ä½“</td></tr><tr><td>POST</td><td>å‘æŒ‡å®šèµ„æºæäº¤æ•°æ®è¿›è¡Œå¤„ç†è¯·æ±‚ï¼ˆä¾‹å¦‚æäº¤è¡¨å•æˆ–è€…ä¸Šä¼ æ–‡ä»¶ï¼‰ã€‚æ•°æ®è¢«åŒ…å«åœ¨è¯·æ±‚ä½“ä¸­ã€‚POSTè¯·æ±‚å¯èƒ½ä¼šå¯¼è‡´æ–°çš„èµ„æºçš„å»ºç«‹å’Œ/æˆ–å·²æœ‰èµ„æºçš„ä¿®æ”¹</td></tr><tr><td>HEAD</td><td>ç±»ä¼¼äºgetè¯·æ±‚ï¼Œåªä¸è¿‡è¿”å›çš„å“åº”ä¸­æ²¡æœ‰å…·ä½“çš„å†…å®¹ï¼Œç”¨äºè·å–æŠ¥å¤´</td></tr><tr><td>PUT</td><td>ä»å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ä¼ é€çš„æ•°æ®å–ä»£æŒ‡å®šçš„æ–‡æ¡£çš„å†…å®¹</td></tr><tr><td>DELETE</td><td>è¯·æ±‚æœåŠ¡å™¨åˆ é™¤æŒ‡å®šçš„é¡µé¢</td></tr><tr><td>CONNECT</td><td>HTTP/1.1åè®®ä¸­é¢„ç•™ç»™èƒ½å¤Ÿå°†è¿æ¥æ”¹ä¸ºç®¡é“æ–¹å¼çš„ä»£ç†æœåŠ¡å™¨</td></tr><tr><td>OPTIONS</td><td>å…è®¸å®¢æˆ·ç«¯æŸ¥çœ‹æœåŠ¡å™¨çš„æ€§èƒ½</td></tr><tr><td>TRACE</td><td>å›æ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚ï¼Œä¸»è¦ç”¨äºæµ‹è¯•æˆ–è¯Šæ–­</td></tr></tbody></table><h1 id="POSTå’ŒGETçš„åŒºåˆ«"><a href="#POSTå’ŒGETçš„åŒºåˆ«" class="headerlink" title="POSTå’ŒGETçš„åŒºåˆ«"></a>POSTå’ŒGETçš„åŒºåˆ«</h1><ol><li>GETåœ¨æµè§ˆå™¨å›é€€æ—¶æ˜¯æ— å®³çš„ï¼Œè€ŒPOSTä¼šå†æ¬¡æäº¤è¯·æ±‚ã€‚</li><li>GETäº§ç”Ÿçš„URLåœ°å€å¯ä»¥è¢«Bookmarkï¼Œè€ŒPOSTä¸å¯ä»¥ã€‚</li><li>GETè¯·æ±‚ä¼šè¢«æµè§ˆå™¨ä¸»åŠ¨cacheï¼Œè€ŒPOSTä¸ä¼šï¼Œé™¤éæ‰‹åŠ¨è®¾ç½®ã€‚</li><li>GETè¯·æ±‚åªèƒ½è¿›è¡Œurlç¼–ç ï¼Œè€ŒPOSTæ”¯æŒå¤šç§ç¼–ç æ–¹å¼ã€‚</li><li>GETè¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´ä¿ç•™åœ¨æµè§ˆå™¨å†å²è®°å½•é‡Œï¼Œè€ŒPOSTä¸­çš„å‚æ•°ä¸ä¼šè¢«ä¿ç•™ã€‚</li><li>GETè¯·æ±‚åœ¨URLä¸­ä¼ é€çš„å‚æ•°æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ï¼Œè€ŒPOSTä¹ˆæœ‰ã€‚</li><li>å¯¹å‚æ•°çš„æ•°æ®ç±»å‹ï¼ŒGETåªæ¥å—ASCIIå­—ç¬¦ï¼Œè€ŒPOSTæ²¡æœ‰é™åˆ¶ã€‚</li><li>GETæ¯”POSTæ›´ä¸å®‰å…¨ï¼Œå› ä¸ºå‚æ•°ç›´æ¥æš´éœ²åœ¨URLä¸Šï¼Œæ‰€ä»¥ä¸èƒ½ç”¨æ¥ä¼ é€’æ•æ„Ÿä¿¡æ¯ã€‚</li><li>GETå‚æ•°é€šè¿‡URLä¼ é€’ï¼ŒPOSTæ”¾åœ¨Request bodyä¸­</li></ol><h1 id="HTTPçŠ¶æ€ç "><a href="#HTTPçŠ¶æ€ç " class="headerlink" title="HTTPçŠ¶æ€ç "></a>HTTPçŠ¶æ€ç </h1><table><thead><tr><th>åˆ†ç±»</th><th>åˆ†ç±»æè¿°</th></tr></thead><tbody><tr><td>1**</td><td>ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œéœ€è¦è¯·æ±‚è€…ç»§ç»­æ‰§è¡Œæ“ä½œ</td></tr><tr><td>2**</td><td>æˆåŠŸï¼Œæ“ä½œè¢«æˆåŠŸæ¥æ”¶å¹¶å¤„ç†</td></tr><tr><td>3**</td><td>é‡å®šå‘ï¼Œéœ€è¦è¿›ä¸€æ­¥çš„æ“ä½œä»¥å®Œæˆè¯·æ±‚</td></tr><tr><td>4**</td><td>å®¢æˆ·ç«¯é”™è¯¯ï¼Œè¯·æ±‚åŒ…å«è¯­æ³•é”™è¯¯æˆ–æ— æ³•å®Œæˆè¯·æ±‚</td></tr><tr><td>5**</td><td>æœåŠ¡å™¨é”™è¯¯ï¼ŒæœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯</td></tr></tbody></table><h1 id="ä»€ä¹ˆæ˜¯æŒä¹…åŒ–è¿æ¥"><a href="#ä»€ä¹ˆæ˜¯æŒä¹…åŒ–è¿æ¥" class="headerlink" title="ä»€ä¹ˆæ˜¯æŒä¹…åŒ–è¿æ¥"></a>ä»€ä¹ˆæ˜¯æŒä¹…åŒ–è¿æ¥</h1><p>å¯¹äºHTTPåè®®è€Œè¨€ï¼Œå®ƒæ˜¯åŸºäºè¯·æ±‚å“åº”æ¨¡å‹ï¼ŒClientå‘Serverå‘è¯·æ±‚æ—¶ï¼Œå…ˆå»ºç«‹ä¸€æ¡HTTPè¿æ¥ï¼ŒServerç»™Clientå“åº”æ•°æ®åï¼Œè¿æ¥å…³é—­ã€‚</p><p>å½“Clientå‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œéœ€è¦é‡æ–°å†å»ºç«‹HTTPè¿æ¥ï¼Œè¿™ç§æ–¹å¼å°±æ˜¯ï¼šä¸€ä¸ªè¯·æ±‚å“åº”éœ€è¦å ç”¨ä¸€æ¡HTTPè¿æ¥ã€‚è€ŒæŒä¹…è¿æ¥å°±æ˜¯ï¼šåªéœ€è¦å»ºç«‹ä¸€æ¡è¿æ¥ï¼Œç„¶ååœ¨è¿™æ¡è¿æ¥ä¸Š ä¼ è¾“å¤šä¸ªè¯·æ±‚å’Œå“åº”ã€‚</p><p>ä¸æŒä¹…è¿æ¥ç›¸å…³çš„å­—æ®µï¼š</p><ol><li><p>HTTPä¸­æœ‰ä¸€ä¸ªConnectioné¦–éƒ¨å­—æ®µï¼Œå®ƒæ˜¯ä¸€ä¸ªé€è·³é¦–éƒ¨å­—æ®µã€‚Connection:Keep-Aliveï¼Œè¡¨ç¤ºå¸Œæœ›å°†æ­¤æ¡è¿æ¥ä½œä¸ºæŒä¹…è¿æ¥ã€‚</p></li><li><p>HTTP1.1ä¸­ï¼Œå»ºç«‹çš„HTTPè¯·æ±‚é»˜è®¤æ˜¯æŒä¹…è¿æ¥çš„ã€‚å½“Clientç¡®å®šä¸å†éœ€è¦å‘Serverå‘é€æ•°æ®æ—¶ï¼Œå®ƒå¯ä»¥å…³é—­è¿æ¥ï¼Œå³åœ¨å‘é€é¦–éƒ¨ä¸­æ·»åŠ Connection:Closedå­—æ®µã€‚</p></li></ol><h1 id="ä»€ä¹ˆæ˜¯ç®¡çº¿åŒ–"><a href="#ä»€ä¹ˆæ˜¯ç®¡çº¿åŒ–" class="headerlink" title="ä»€ä¹ˆæ˜¯ç®¡çº¿åŒ–"></a>ä»€ä¹ˆæ˜¯ç®¡çº¿åŒ–</h1><p>HTTPç®¡çº¿åŒ–æ˜¯å°†å¤šä¸ªHTTPè¦æ±‚ï¼ˆrequestï¼‰æ•´æ‰¹æäº¤çš„æŠ€æœ¯ï¼Œè€Œåœ¨ä¼ é€è¿‡ç¨‹ä¸­ä¸éœ€å…ˆç­‰å¾…æœåŠ¡ç«¯çš„å›åº”ã€‚ç®¡çº¿åŒ–æœºåˆ¶é¡»é€šè¿‡æ°¸ä¹…è¿æ¥ï¼ˆpersistent connectionï¼‰å®Œæˆï¼Œä»…HTTP/1.1æ”¯æŒæ­¤æŠ€æœ¯ï¼ˆHTTP/1.0ä¸æ”¯æŒï¼‰ï¼Œå¹¶ä¸”åªæœ‰GETå’ŒHEADè¦æ±‚å¯ä»¥è¿›è¡Œç®¡çº¿åŒ–ï¼Œè€ŒPOSTåˆ™æœ‰æ‰€é™åˆ¶ã€‚æ­¤å¤–ï¼Œåˆæ¬¡åˆ›å»ºè¿æ¥æ—¶ä¹Ÿä¸åº”å¯åŠ¨ç®¡çº¿æœºåˆ¶ï¼Œå› ä¸ºå¯¹æ–¹ï¼ˆæœåŠ¡å™¨ï¼‰ä¸ä¸€å®šæ”¯æŒHTTP/1.1ç‰ˆæœ¬çš„åè®®ã€‚</p><p>request1 -&gt; request2 -&gt; request3 -&gt; response1 -&gt; response2 -&gt; response3</p><blockquote><p>æ˜¾ç„¶ï¼Œç®¡é“åŒ–è¿æ¥æ˜¯éœ€è¦æŒä¹…è¿æ¥æ”¯æŒçš„</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> http </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é’ˆå¯¹é›†åˆçš„å°æ–¹æ³•</title>
      <link href="/2018-03-28/%E9%92%88%E5%AF%B9%E9%9B%86%E5%90%88%E7%9A%84%E5%B0%8F%E6%96%B9%E6%B3%95/"/>
      <url>/2018-03-28/%E9%92%88%E5%AF%B9%E9%9B%86%E5%90%88%E7%9A%84%E5%B0%8F%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="æ ¹æ®æ‰€æä¾›çš„å­—ç¬¦åˆ†ç»„"><a href="#æ ¹æ®æ‰€æä¾›çš„å­—ç¬¦åˆ†ç»„" class="headerlink" title="æ ¹æ®æ‰€æä¾›çš„å­—ç¬¦åˆ†ç»„"></a>æ ¹æ®æ‰€æä¾›çš„å­—ç¬¦åˆ†ç»„</h1><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®æ‰€æä¾›çš„å­—ç¬¦åˆ†ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&#125;</span> </span>arr =&gt; æ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>key =&gt; éœ€è¦åˆ†ç»„çš„å­—æ®µ </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">keyBy</span>(<span class="params">arr, key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arr.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">newObj, obj</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!newObj[obj[key]]) &#123;</span><br><span class="line">            newObj[obj[key]] = [];</span><br><span class="line">            newObj[obj[key]].push(obj);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            newObj[obj[key]].push(obj);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> newObj;</span><br><span class="line">    &#125;, &#123;&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><blockquote><p>æµ‹è¯•æˆ‘ä»¬å†™çš„æ–¹æ³•</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [&#123;<span class="attr">id</span>:<span class="number">1</span>&#125;,&#123;<span class="attr">id</span>:<span class="number">2</span>&#125;]</span><br><span class="line"><span class="keyword">var</span> res = delListRep(arr,<span class="string">"id"</span>) <span class="comment">// &#123;1:[&#123;id:1&#125;],2:[&#123;id:2&#125;]&#125;</span></span><br></pre></td></tr></table></figure></div><h1 id="æ ¹æ®æ‰€æä¾›çš„å­—æ®µæ’åº"><a href="#æ ¹æ®æ‰€æä¾›çš„å­—æ®µæ’åº" class="headerlink" title="æ ¹æ®æ‰€æä¾›çš„å­—æ®µæ’åº"></a>æ ¹æ®æ‰€æä¾›çš„å­—æ®µæ’åº</h1><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ’åºæ•°ç»„é‡Œçš„å¯¹è±¡(é›†åˆ)çš„æŸä¸ªå­—æ®µæ’åº</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&#125;</span> </span>arr =&gt; æ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>key =&gt; å­—æ®µå</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sortObj</span>(<span class="params">arr, key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arr.sort(<span class="function"><span class="keyword">function</span> (<span class="params">m, n</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> key1 = m[key]</span><br><span class="line">        <span class="keyword">var</span> key2 = n[key]</span><br><span class="line">        <span class="keyword">return</span> key2 - key1</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><blockquote><p>æµ‹è¯•æˆ‘ä»¬å†™çš„æ–¹æ³•</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [&#123;<span class="attr">id</span>:<span class="number">1</span>&#125;,&#123;<span class="attr">id</span>:<span class="number">2</span>&#125;]</span><br><span class="line"><span class="keyword">var</span> res = sortObj(arr,<span class="string">"id"</span>) <span class="comment">// [&#123;id:2&#125;,&#123;id:1&#125;]</span></span><br></pre></td></tr></table></figure></div><h1 id="æ ¹æ®æ‰€æä¾›çš„å­—æ®µå»é‡"><a href="#æ ¹æ®æ‰€æä¾›çš„å­—æ®µå»é‡" class="headerlink" title="æ ¹æ®æ‰€æä¾›çš„å­—æ®µå»é‡"></a>æ ¹æ®æ‰€æä¾›çš„å­—æ®µå»é‡</h1><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å»é™¤æŒ‡å®šå­—æ®µçš„é‡å¤é›†åˆ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&#125;</span> </span>arr =&gt; æ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>key =&gt; éœ€è¦å»é‡çš„å­—æ®µ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">delListRep</span>(<span class="params">arr, key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> keys = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        keys.push(arr[i][key])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr.filter(<span class="function">(<span class="params">ele, i, arr</span>) =&gt;</span> keys.indexOf(ele[key]) == i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><blockquote><p>æµ‹è¯•æˆ‘ä»¬å†™çš„æ–¹æ³•</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [&#123;<span class="attr">id</span>:<span class="number">1</span>&#125;,&#123;<span class="attr">id</span>:<span class="number">2</span>&#125;,&#123;<span class="attr">id</span>:<span class="number">1</span>&#125;]</span><br><span class="line"><span class="keyword">var</span> res = delListRep(arr,<span class="string">"id"</span>) <span class="comment">// [&#123;id:1&#125;,&#123;id:2&#125;]</span></span><br></pre></td></tr></table></figure></div><p>è¿™æ ·å­æˆ‘ä»¬å°±èƒ½ç®€å•çš„å»é‡å•¦o(<em>ï¿£â–½ï¿£</em>)ãƒ– 484ç¥å¥‡</p><p>æœ€åï¼Œæ„Ÿè°¢å„ä½è§‚ä¼—è€çˆ·çš„è§‚çœ‹</p>]]></content>
      
      
      <categories>
          
          <category> è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cssç›’æ¨¡å‹</title>
      <link href="/2018-03-26/css%E7%9B%92%E6%A8%A1%E5%9E%8B/"/>
      <url>/2018-03-26/css%E7%9B%92%E6%A8%A1%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="cssç›’æ¨¡å‹çš„åŸºæœ¬æ¦‚å¿µ"><a href="#cssç›’æ¨¡å‹çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="cssç›’æ¨¡å‹çš„åŸºæœ¬æ¦‚å¿µ"></a>cssç›’æ¨¡å‹çš„åŸºæœ¬æ¦‚å¿µ</h1><p>marginã€paddingã€borderã€content</p><h1 id="æ ‡å‡†æ¨¡å‹å’ŒIEæ¨¡å‹åŒºåˆ«"><a href="#æ ‡å‡†æ¨¡å‹å’ŒIEæ¨¡å‹åŒºåˆ«" class="headerlink" title="æ ‡å‡†æ¨¡å‹å’ŒIEæ¨¡å‹åŒºåˆ«"></a>æ ‡å‡†æ¨¡å‹å’ŒIEæ¨¡å‹åŒºåˆ«</h1><blockquote><p>å®½å’Œé«˜çš„è®¡ç®—æ–¹å¼ä¸åŒï¼š</p></blockquote><p>æ ‡å‡†æ¨¡å¼æ˜¯content</p><p>ieæ¨¡å‹çš„æ˜¯è®¡ç®—borderå’Œpadding</p><h1 id="csså¦‚ä½•è®¾ç½®è¿™ä¸¤ç§æ¨¡å‹"><a href="#csså¦‚ä½•è®¾ç½®è¿™ä¸¤ç§æ¨¡å‹" class="headerlink" title="csså¦‚ä½•è®¾ç½®è¿™ä¸¤ç§æ¨¡å‹"></a>csså¦‚ä½•è®¾ç½®è¿™ä¸¤ç§æ¨¡å‹</h1><p>æ ‡å‡†æ¨¡å‹ï¼šbox-sizing:content-box ä¹Ÿæ˜¯é»˜è®¤æ¨¡å¼</p><p>IEæ¨¡å‹ï¼šbox-sizing: border-box</p><h1 id="jså¦‚ä½•è·å–ç›’æ¨¡å‹å¯¹åº”çš„å®½å’Œé«˜"><a href="#jså¦‚ä½•è·å–ç›’æ¨¡å‹å¯¹åº”çš„å®½å’Œé«˜" class="headerlink" title="jså¦‚ä½•è·å–ç›’æ¨¡å‹å¯¹åº”çš„å®½å’Œé«˜"></a>jså¦‚ä½•è·å–ç›’æ¨¡å‹å¯¹åº”çš„å®½å’Œé«˜</h1><p>dom.style.width/height</p><p>dom.currentStyle.width/heightï¼ˆåªè¦ieæ”¯æŒï¼‰</p><p>window.getComputedStyle(dom).width/heightï¼ˆè°·æ­Œç«ç‹ç­‰æ”¯æŒï¼‰</p><p>dom.getBoundingClientRect().width/height</p><h1 id="æ ¹æ®ç›’æ¨¡å‹è§£é‡Šè¾¹è·é‡å "><a href="#æ ¹æ®ç›’æ¨¡å‹è§£é‡Šè¾¹è·é‡å " class="headerlink" title="æ ¹æ®ç›’æ¨¡å‹è§£é‡Šè¾¹è·é‡å "></a>æ ¹æ®ç›’æ¨¡å‹è§£é‡Šè¾¹è·é‡å </h1><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.parent</span>&#123;<span class="attribute">background</span>:red&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.child</span>&#123;<span class="attribute">height</span>:<span class="number">100px</span>;<span class="attribute">margin-top</span>:<span class="number">10px</span>;<span class="attribute">background</span>:<span class="number">#ff0</span>&#125;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"child"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure></div><h1 id="BOXæ˜¯ä»€ä¹ˆ"><a href="#BOXæ˜¯ä»€ä¹ˆ" class="headerlink" title="BOXæ˜¯ä»€ä¹ˆ"></a>BOXæ˜¯ä»€ä¹ˆ</h1><p>Boxæ˜¯CSSå¸ƒå±€çš„å¯¹è±¡å’ŒåŸºæœ¬å•ä½ï¼Œ ç›´è§‚ç‚¹æ¥è¯´ï¼Œå°±æ˜¯ä¸€ä¸ªé¡µé¢æ˜¯ç”±å¾ˆå¤šä¸ª Box ç»„æˆçš„ã€‚å…ƒç´ çš„ç±»å‹å’Œ display å±æ€§ï¼Œå†³å®šäº†è¿™ä¸ª Box çš„ç±»å‹ã€‚ ä¸åŒç±»å‹çš„ Boxï¼Œ ä¼šå‚ä¸ä¸åŒçš„ Formatting Contextï¼ˆä¸€ä¸ªå†³å®šå¦‚ä½•æ¸²æŸ“æ–‡æ¡£çš„å®¹å™¨ï¼‰ï¼Œå› æ­¤Boxå†…çš„å…ƒç´ ä¼šä»¥ä¸åŒçš„æ–¹å¼æ¸²æŸ“ã€‚</p><h1 id="BFC"><a href="#BFC" class="headerlink" title="BFC"></a>BFC</h1><h2 id="BFCçš„åŸºæœ¬æ¦‚å¿µ"><a href="#BFCçš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="BFCçš„åŸºæœ¬æ¦‚å¿µ"></a>BFCçš„åŸºæœ¬æ¦‚å¿µ</h2><p>å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼ŒBlock Formatting Contextså°±æ˜¯é¡µé¢ä¸Šçš„ä¸€ä¸ªéš”ç¦»çš„æ¸²æŸ“åŒºåŸŸï¼Œå®¹å™¨é‡Œé¢çš„å­å…ƒç´ ä¸ä¼šåœ¨å¸ƒå±€ä¸Šå½±å“åˆ°å¤–é¢çš„å…ƒç´ ï¼Œåä¹‹ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><h2 id="BFCçš„åŸç†"><a href="#BFCçš„åŸç†" class="headerlink" title="BFCçš„åŸç†"></a>BFCçš„åŸç†</h2><ol><li>ä¸¤ä¸ªç›¸é‚»å…ƒç´ çš„è¾¹è·ä¼šé‡å </li><li>BFCçš„åŒºåŸŸä¸ä¼šä¸float boxé‡å ã€‚</li><li>BFCæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å®¹æ˜“,å¤–é¢çš„å…ƒç´ ä¸ä¼šå½±å“é‡Œé¢çš„å…ƒç´ ï¼Œé‡Œé¢çš„å…ƒç´ ä¹Ÿä¸ä¼šå½±å“å¤–é¢çš„å…ƒç´ </li><li>è®¡ç®—BFCé«˜åº¦çš„æ—¶å€™ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿä¼šå‚ä¸è®¡ç®—</li></ol><h2 id="æ€ä¹ˆåˆ›å»ºBFC"><a href="#æ€ä¹ˆåˆ›å»ºBFC" class="headerlink" title="æ€ä¹ˆåˆ›å»ºBFC"></a>æ€ä¹ˆåˆ›å»ºBFC</h2><ol><li>floatå€¼ä¸ä¸ºNone</li><li>positionä¸ä¸ºstaticæˆ–è€…realtive</li><li>displayä¸ºinline-blockï¼Œtable-cell,table-caption,flexï¼Œinline-flex</li><li>overflowä¸ä¸ºvisiblev</li></ol>]]></content>
      
      
      <categories>
          
          <category> è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> html </tag>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¡µé¢å¸ƒå±€â€”â€”ä¸‰æ å¸ƒå±€</title>
      <link href="/2018-03-26/%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80/"/>
      <url>/2018-03-26/%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸‰æ å¸ƒå±€"><a href="#ä¸‰æ å¸ƒå±€" class="headerlink" title="ä¸‰æ å¸ƒå±€"></a>ä¸‰æ å¸ƒå±€</h1><p>é¦–å…ˆè§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯â€œä¸‰æ å¸ƒå±€â€ï¼šé¡¾åæ€ä¹‰ï¼Œä¸‰æ å¸ƒå±€å°±æ˜¯åœ¨ç½‘é¡µä¸Šä»¥å¹³é“ºæ–¹å¼å±•ç°çš„å·¦ä¸­å³ä¸‰åˆ—å¸ƒå±€ï¼Œå…¶ç‰¹ç‚¹åœ¨äºï¼Œå·¦å³ä¸¤åˆ—å¯å›ºå®šåœ¨ç½‘é¡µä¸¤ä¾§ï¼Œä¸­é—´ä¸€åˆ—æ°¸è¿œå±…ä¸­ï¼Œä¸”å½“ç½‘é¡µå®½åº¦å¤§äºå·¦å³ä¸¤åˆ—å®½åº¦ä¹‹å’Œæ—¶ï¼Œä¸­é—´ä¸€åˆ—å¯éšç½‘é¡µæ•´ä½“å®½åº¦çš„å˜åŒ–è€Œå˜åŒ–ï¼ˆç®€å•æ¥è¯´å°±æ˜¯ä¸¤ç«¯å›ºå®šï¼Œä¸­é—´è‡ªé€‚åº”ï¼‰ã€‚</p><p>ä¸‹é¢å›´ç»•çš„è¿™æ ·çš„ç›®çš„ï¼Œç½—åˆ—å‡ºå¤§çº¦7ç§è§£å†³æ–¹æ³•(é«˜åº¦å›ºå®š)ï¼š</p><h1 id="æµ®åŠ¨å¸ƒå±€"><a href="#æµ®åŠ¨å¸ƒå±€" class="headerlink" title="æµ®åŠ¨å¸ƒå±€"></a>æµ®åŠ¨å¸ƒå±€</h1><h2 id="æµ®åŠ¨å¸ƒå±€çš„ä¼˜ç¼ºç‚¹"><a href="#æµ®åŠ¨å¸ƒå±€çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="æµ®åŠ¨å¸ƒå±€çš„ä¼˜ç¼ºç‚¹"></a>æµ®åŠ¨å¸ƒå±€çš„ä¼˜ç¼ºç‚¹</h2><blockquote><p>htmlä»£ç ï¼š</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span>&gt;<span class="selector-tag">div</span>&#123;<span class="attribute">min-height</span>:<span class="number">200px</span>&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> <span class="selector-class">.left</span>&#123;<span class="attribute">float</span>:left;<span class="attribute">width</span>:<span class="number">300px</span>;<span class="attribute">background</span>:red&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> <span class="selector-class">.center</span>&#123;<span class="attribute">background</span>:<span class="number">#ff0</span>&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> <span class="selector-class">.right</span>&#123;<span class="attribute">float</span>:right;<span class="attribute">width</span>:<span class="number">300px</span>;<span class="attribute">background</span>:<span class="number">#00f</span>&#125;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">ç¼ºç‚¹:1. å½“å®½åº¦å°äºå·¦å³ä¸¤è¾¹å®½åº¦ä¹‹å’Œæ—¶ï¼Œå³ä¾§æ ä¼šè¢«æŒ¤ä¸‹å»ï¼›2. htmlçš„ç»“æ„ä¸æ­£ç¡®ï¼›3.è„±ç¦»æ–‡æ¡£æµï¼Œè¦å¤„ç†æµ®åŠ¨</span><br><span class="line"></span><br><span class="line">ä¼˜ç‚¹ï¼šæ¯”è¾ƒç®€å•,å…¼å®¹æ€§å¥½</span><br><span class="line"></span><br><span class="line"># ç»å¯¹å¸ƒå±€</span><br><span class="line">## ç»å¯¹å¸ƒå±€çš„ä¼˜ç¼ºç‚¹</span><br><span class="line"></span><br><span class="line">&gt;htmlä»£ç ï¼š</span><br><span class="line"></span><br><span class="line">```html</span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span>&gt;<span class="selector-tag">div</span>&#123;<span class="attribute">min-height</span>:<span class="number">200px</span>;<span class="attribute">position</span>:absolute&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> <span class="selector-class">.left</span>&#123;<span class="attribute">left</span>:<span class="number">0</span>;<span class="attribute">width</span>:<span class="number">300px</span>;<span class="attribute">background</span>:red&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> <span class="selector-class">.center</span>&#123;<span class="attribute">left</span>:<span class="number">300px</span>;<span class="attribute">right</span>:<span class="number">300px</span>;<span class="attribute">background</span>:<span class="number">#ff0</span>&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> <span class="selector-class">.right</span>&#123;<span class="attribute">right</span>:<span class="number">0</span>;<span class="attribute">width</span>:<span class="number">300px</span>;<span class="attribute">background</span>:<span class="number">#00f</span>&#125;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">ç¼ºç‚¹ï¼šå› ä¸ºå¸ƒå±€å·²ç»è„±ç¦»æ–‡æ¡£æµäº†ï¼Œæ„å‘³ç€ä¸‹é¢å…ƒç´ ä¹Ÿéœ€è¦è„±ç¦»æ–‡æ¡£æµï¼Œå¯¼è‡´äº†å¯ç”¨æ€§æ¯”è¾ƒå·®</span><br><span class="line"></span><br><span class="line">ä¼˜ç‚¹ï¼šå¿«æ·</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># åœ£æ¯å¸ƒå±€</span><br><span class="line">## åœ£æ¯å¸ƒå±€çš„ä¼˜ç¼ºç‚¹</span><br><span class="line"></span><br><span class="line">```html</span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span>&#123;<span class="attribute">padding</span>:<span class="number">0</span> <span class="number">300px</span>&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span>&gt;<span class="selector-tag">div</span>&#123;<span class="attribute">min-height</span>:<span class="number">200px</span>;<span class="attribute">float</span>:left;<span class="attribute">position</span>:relative&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> <span class="selector-class">.left</span>&#123;<span class="attribute">width</span>:<span class="number">300px</span>;<span class="attribute">background</span>:red;<span class="attribute">margin-left</span>:-<span class="number">100%</span>;<span class="attribute">left</span>:-<span class="number">300px</span>&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> <span class="selector-class">.center</span>&#123;<span class="attribute">width</span>:<span class="number">100%</span>;<span class="attribute">background</span>:<span class="number">#ff0</span>&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> <span class="selector-class">.right</span>&#123;<span class="attribute">right</span>:-<span class="number">300px</span>;<span class="attribute">width</span>:<span class="number">300px</span>;<span class="attribute">margin-left</span>:-<span class="number">300px</span>;<span class="attribute">background</span>:<span class="number">#00f</span>&#125;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">ç¼ºç‚¹ï¼šå½“çˆ¶å…ƒç´ æœ‰å†…å¤–è¾¹è·æ—¶ï¼Œä¼šå¯¼è‡´ä¸­é—´æ çš„ä½ç½®å‡ºç°åå·®</span><br><span class="line"></span><br><span class="line">ä¼˜ç‚¹ï¼šå…¼å®¹ç›®å‰æ‰€æœ‰çš„ä¸»æµæµè§ˆå™¨ï¼ŒåŒ…æ‹¬IE6åœ¨å†…ï¼›</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># åŒé£ç¿¼å¸ƒå±€</span><br><span class="line">## åŒé£ç¿¼å¸ƒå±€çš„ä¼˜ç¼ºç‚¹</span><br><span class="line"></span><br><span class="line">```html</span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> <span class="selector-tag">div</span>&#123;<span class="attribute">min-height</span>:<span class="number">200px</span>;<span class="attribute">float</span>:left&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> <span class="selector-class">.left</span>&#123;<span class="attribute">width</span>:<span class="number">300px</span>;<span class="attribute">margin-left</span>:-<span class="number">100%</span>;<span class="attribute">background</span>:red&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> <span class="selector-class">.center</span>&#123;<span class="attribute">width</span>:<span class="number">100%</span>;<span class="attribute">background</span>:<span class="number">#ff0</span>&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> <span class="selector-class">.center</span> <span class="selector-class">.center-wrap</span>&#123;<span class="attribute">margin</span>:<span class="number">0</span> <span class="number">300px</span>&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> <span class="selector-class">.right</span>&#123;<span class="attribute">width</span>:<span class="number">300px</span>;<span class="attribute">margin-left</span>:-<span class="number">300px</span>;<span class="attribute">background</span>:<span class="number">#00f</span>&#125;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center-wrap"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">ç¼ºç‚¹ï¼š1. ç»“æ„ä¸æ­£ç¡® 2. å¤šäº†ä¸€å±‚æ ‡ç­¾</span><br><span class="line"></span><br><span class="line">ä¼˜ç‚¹ï¼šå…¼å®¹ç›®å‰æ‰€æœ‰çš„ä¸»æµæµè§ˆå™¨ï¼ŒåŒ…æ‹¬IE6åœ¨å†…ï¼›</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># flexå¸ƒå±€</span><br><span class="line">## flexå¸ƒå±€çš„ä¼˜ç¼ºç‚¹</span><br><span class="line"></span><br><span class="line">&gt;htmlä»£ç ï¼š</span><br><span class="line"></span><br><span class="line">```html</span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span>&#123;<span class="attribute">display</span>:flex&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span>&gt;<span class="selector-tag">div</span>&#123;<span class="attribute">min-height</span>:<span class="number">200px</span>&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> <span class="selector-class">.left</span>&#123;<span class="attribute">width</span>:<span class="number">300px</span>;<span class="attribute">background</span>:red&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> <span class="selector-class">.center</span>&#123;<span class="attribute">flex</span>:<span class="number">1</span>;<span class="attribute">background</span>:<span class="number">#ff0</span>&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> <span class="selector-class">.right</span>&#123;<span class="attribute">width</span>:<span class="number">300px</span>;<span class="attribute">background</span>:<span class="number">#00f</span>&#125;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">ç¼ºç‚¹ï¼šéœ€è¦è€ƒè™‘æµè§ˆå™¨çš„å…¼å®¹æ€§</span><br><span class="line"></span><br><span class="line">ä¼˜ç‚¹ï¼šç®€å•å®ç”¨ï¼Œæœªæ¥çš„è¶‹åŠ¿</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># è¡¨æ ¼å¸ƒå±€</span><br><span class="line">## è¡¨æ ¼å¸ƒå±€çš„ä¼˜ç¼ºç‚¹</span><br><span class="line"></span><br><span class="line">```html</span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span>&#123;<span class="attribute">width</span>:<span class="number">100%</span>;<span class="attribute">display</span>:table;<span class="attribute">min-height</span>:<span class="number">200px</span>&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span>&gt;<span class="selector-tag">div</span>&#123;<span class="attribute">display</span>:table-cell&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> <span class="selector-class">.left</span>&#123;<span class="attribute">width</span>:<span class="number">300px</span>;<span class="attribute">background</span>:red&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> <span class="selector-class">.center</span>&#123;<span class="attribute">background</span>:<span class="number">#ff0</span>&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> <span class="selector-class">.right</span>&#123;<span class="attribute">width</span>:<span class="number">300px</span>;<span class="attribute">background</span>:<span class="number">#00f</span>&#125;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">ç¼ºç‚¹ï¼šæ— æ³•è®¾ç½®æ é—´è·</span><br><span class="line"></span><br><span class="line">ä¼˜ç‚¹ï¼šå…¼å®¹æ€§éå¸¸å¥½</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ç½‘æ ¼å¸ƒå±€</span><br><span class="line">## ç½‘æ ¼å¸ƒå±€çš„ä¼˜ç¼ºç‚¹</span><br><span class="line"></span><br><span class="line">```html</span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span>&#123;<span class="attribute">width</span>:<span class="number">100%</span>;<span class="attribute">display</span>:grid;<span class="attribute">grid-template-rows</span>:<span class="number">100px</span>;<span class="attribute">grid-template-columns</span>:<span class="number">300px</span> auto <span class="number">300px</span>&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> <span class="selector-class">.left</span>&#123;<span class="attribute">background</span>:red&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> <span class="selector-class">.center</span>&#123;<span class="attribute">background</span>:<span class="number">#ff0</span>&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> <span class="selector-class">.right</span>&#123;<span class="attribute">background</span>:<span class="number">#00f</span>&#125;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>ç¼ºç‚¹ï¼šå…¼å®¹æ€§æ¯”è¾ƒå·®</p><p>ä¼˜ç‚¹ï¼šä»£ç ç®€æ´ï¼Œå®¹æ˜“ç†è§£</p>]]></content>
      
      
      <categories>
          
          <category> è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> html </tag>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€ç»´æ•°ç»„æ„å»ºæŒ‡å®šä¸ªæ•°çš„äºŒä½æ•°ç»„</title>
      <link href="/2018-01-24/%E4%B8%80%E7%BB%B4%E6%95%B0%E7%BB%84%E6%9E%84%E5%BB%BA%E4%BA%8C%E4%BD%8D%E6%95%B0%E7%BB%84/"/>
      <url>/2018-01-24/%E4%B8%80%E7%BB%B4%E6%95%B0%E7%BB%84%E6%9E%84%E5%BB%BA%E4%BA%8C%E4%BD%8D%E6%95%B0%E7%BB%84/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ€è¿‘ï¼Œåœ¨å†™ç€å°ç¨‹åºï¼Œå¯¹æ•°æ®æ“ä½œæ¯”è¾ƒé¢‘ç¹ï¼Œåç«¯è¿”å›çš„æ•°æ®å¯¹äºæˆ‘æ„å»ºä¸€ä¸ª swiper ä¸æ˜¯é‚£ä¹ˆçš„ç†æƒ³ï¼Œæ‰€ä»¥è‡ªå·±å°±å†™äº†ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºæ„å»ºä¸€ä¸ªäºŒç»´æ•°ç»„æ¥æ„å»ºå•ä¸ª swiper-item å¤šå›¾çš„è½®æ’­</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸€ç»´æ•°ç»„ç”Ÿæˆä»¥subArrayNumçš„äºŒç»´æ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&#125;</span> <span class="variable">arr</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> <span class="variable">subArrayNum</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getMatrix</span>(<span class="params">arr, subArrayNum</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å®šä¹‰ä¸€ä¸ªæ•°ç»„ï¼Œé•¿åº¦ä¸ºåŸæ•°ç»„çš„æ€»é•¿åº¦é™¤ä»¥subArrayNumå‘ä¸Šå–æ•´</span></span><br><span class="line">  <span class="keyword">var</span> res = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="built_in">Math</span>.ceil(arr.length / subArrayNum));</span><br><span class="line">  <span class="comment">// éå†è¯¥æ•°ç»„</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; res.length; i++) &#123;</span><br><span class="line">    <span class="comment">// ä»¤æ•°ç»„æ¯ä¸€ä¸ªå€¼éƒ½ä¸ºç©ºæ•°ç»„ï¼Œå³ç”ŸæˆäºŒç»´æ•°ç»„</span></span><br><span class="line">    res[i] = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">    <span class="comment">// ä¸ºäºŒç»´æ•°ç»„æ•°æ®è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; i % subArrayNum; j++) &#123;</span><br><span class="line">      res[i][j] = <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ç»™äºŒç»´æ•°ç»„æ·»åŠ æ•°æ®</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    res[<span class="built_in">parseInt</span>(i / subArrayNum)][i % subArrayNum] = arr[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿”å›ä¸€ä¸ªæ ¹æ®subArrayNumçš„äºŒç»´æ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array&#125;</span> </span>arr =&gt; ä¸€ç»´æ•°ç»„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> </span>subArrayNum =&gt; æ¯ç»„å…ƒç´ çš„ä¸ªæ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">chunk</span>(<span class="params">arr, subArrayNum</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> result = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i += subArrayNum) &#123;</span><br><span class="line">    result.push(arr.slice(i, i + subArrayNum));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><blockquote><p>æµ‹è¯•æˆ‘ä»¬å†™çš„æ–¹æ³•ï¼š</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line">getMatrix(arr, <span class="number">2</span>); <span class="comment">// [[1,2],[3,4],[5,6]]</span></span><br><span class="line">chunk(arr, <span class="number">2</span>); <span class="comment">// [[1,2],[3,4],[5,6]]</span></span><br></pre></td></tr></table></figure></div>]]></content>
      
      
      <categories>
          
          <category> è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ul liè¡¨æ ¼æ‹–æ‹½ã€å¸é™„åŠŸèƒ½</title>
      <link href="/2017-10-20/ul%20li%E8%A1%A8%E6%A0%BC%E6%8B%96%E6%8B%BD%E3%80%81%E5%90%B8%E9%99%84%E5%8A%9F%E8%83%BD/"/>
      <url>/2017-10-20/ul%20li%E8%A1%A8%E6%A0%BC%E6%8B%96%E6%8B%BD%E3%80%81%E5%90%B8%E9%99%84%E5%8A%9F%E8%83%BD/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ€è¿‘ï¼Œé¢è¯•é‡åˆ°äº†ä¸€å®¶ç”¨ ul li åš table çš„ï¼Œé‡Œé¢æœ‰æ‚¬æµ®åå­—ã€div æ‹–æ‹½å’Œå¸é™„ç­‰ä¸€äº›åŠŸèƒ½ï¼Œå›åˆ°äº†å®¶é‡Œï¼Œå°±æƒ³ç€è‡ªå·±å®ç°ä¸€ä¸‹ã€‚</p><p>ç„¶åï¼Œæˆ‘åšçš„å¯èƒ½æ¯”è¾ƒéš¾çœ‹= =ï¼Œä¸»åœ¨åŠŸèƒ½å˜›ï¼Œè°…è§£è°…è§£</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆå¸ƒå±€ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p><p>( â€˜-Ï‰à¸Ì€ )ä¸è¦å¤ªé„™è§†æ¥¼ä¸»çš„å®¡ç¾</p><hr><p><strong>å…¶å®å°±æ˜¯ 8 ä¸ª ul å¥—è£… 8 ä¸ª liï¼Œå¸ƒå±€ä»€ä¹ˆçš„ç›¸å¯¹ç®€å•</strong></p><p>ä¸‹è¾¹è´´å‡º HTML + CSS çš„ä»£ç ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">      * &#123;</span><br><span class="line">        padding: 0;</span><br><span class="line">        margin: 0;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      ul &#123;</span><br><span class="line">        width: 496px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      ul li &#123;</span><br><span class="line">        list-style: none;</span><br><span class="line">        width: 60px;</span><br><span class="line">        height: 60px;</span><br><span class="line">        border: 1px solid red;</span><br><span class="line">        float: left;</span><br><span class="line">      &#125;</span><br><span class="line"><span class="css">      <span class="comment">/*æ¸…é™¤æµ®åŠ¨*/</span></span></span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="selector-tag">ul</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line">        content: "";</span><br><span class="line">        clear: both;</span><br><span class="line">        display: block;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="selector-class">.bg</span> &#123;</span></span><br><span class="line">        background: skyblue;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="selector-class">.bg2</span> &#123;</span></span><br><span class="line">        position: absolute;</span><br><span class="line">        background: red;</span><br><span class="line">        width: 60px;</span><br><span class="line">        height: 60px;</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦å®ç°çš„å°±æ˜¯<code>JavaScript</code>äº†ã€‚</p><p>æˆ‘ä»¬éœ€è¦çš„å®ç°æ˜¯ï¼šå½“é¼ æ ‡ç§»åŠ¨åˆ°æŸä¸ª li çš„æ—¶å€™ï¼Œå…¶æ‰€åœ¨çš„åŒä¸€è¡Œï¼ˆå³ ulï¼‰èƒŒæ™¯ä¼šå‘ç”Ÿæ”¹å˜ï¼ŒåŒä¸€åˆ—çš„ li çš„èƒŒæ™¯ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ï¼Œç§»å‡ºå»çš„æ—¶å€™åˆ™èƒŒæ™¯å˜å›åŸæ¥çš„æ ·å­ã€‚</p><p>ä¹Ÿå°±æ˜¯ä¸‹å›¾è¿™æ ·ï¼š</p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2017-10-20/20171020210934633.jpg" data-fancybox="group" data-caption="æ‚¬æµ®æ•ˆæœå›¾" class="fancybox"><img alt="æ‚¬æµ®æ•ˆæœå›¾" title="æ‚¬æµ®æ•ˆæœå›¾" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2017-10-20/20171020210934633.jpg" class="lazyload"></a></p><p>ä»ä¸Šè¿°æè¿°å°±å¯ä»¥çŸ¥é“äº†ï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ© mouseovrã€mouseout äº‹ä»¶å•¦ï¼Œï¼ˆâ—Â´âˆ€ ï½€ï¼‰é‚£æˆ‘ä»¬å°±å¼€å§‹ç€æ‰‹å†™ä»£ç å§</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">"ul li"</span>).on(<span class="string">"mouseover"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> index = $(<span class="keyword">this</span>).index();</span><br><span class="line">  $(<span class="keyword">this</span>).parent().addClass(<span class="string">"bg"</span>);</span><br><span class="line">  $(<span class="string">"ul"</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="keyword">this</span>).find(<span class="string">"li"</span>).eq(index).addClass(<span class="string">"bg"</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">"ul li"</span>).on(<span class="string">"mouseout"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> index = $(<span class="keyword">this</span>).index();</span><br><span class="line">  $(<span class="keyword">this</span>).parent().removeClass(<span class="string">"bg"</span>);</span><br><span class="line">  $(<span class="string">"ul"</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="keyword">this</span>).find(<span class="string">"li"</span>).eq(index).removeClass(<span class="string">"bg"</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><p>è¿™æ ·å­ï¼Œç¬¬ä¸€ä¸ªæ•ˆæœå°±å®ç°å•¦ â•­(â— ï½€ âˆ€Â´â—)â•¯â•°(â—â€™â—¡â€™â—)â•® (â—â€™â—¡â€™â—)ï¾‰ ãƒ¾(<em>Â´â–½â€˜</em>)ï¾‰</p><p><strong>æ¥ä¸‹æ¥ï¼Œå°±æ˜¯è¦ç‚¹å‡» li åï¼Œåœ¨ li ä¸Šåˆ›å»ºä¸€ä¸ªå®Œå…¨é®ç½© li çš„ divï¼ˆä¹Ÿå°±æ˜¯æ•°æ®å—ï¼‰ï¼Œç„¶åå®ç°æ‹–æ‹½å•¦</strong></p><p><strong>å…ˆä¸Šæ•ˆæœå›¾ï¼š</strong></p><p><a href="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2017-10-20/20171020211928900.jpg" data-fancybox="group" data-caption="æ‹–æ‹½æ•ˆæœå›¾" class="fancybox"><img alt="æ‹–æ‹½æ•ˆæœå›¾" title="æ‹–æ‹½æ•ˆæœå›¾" data-src="https://cdn.JsDelivr.net/gh/GATING/blog_imgs/2017-10-20/20171020211928900.jpg" class="lazyload"></a></p><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ç‚¹å‡»äº†å“ªä¸ª<code>li</code>ï¼Œç„¶åè·å–å…ƒç´ è·ç¦»æ–‡æ¡£çš„ä½ç½®ï¼Œä¹‹ååœ¨ç»™<code>div</code>å®šä½</p><p>æœ‰äº†è¿™æ ·çš„æ€è·¯ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥ç€æ‰‹å†™æˆ‘ä»¬çš„ <code>JavaScript</code> å•¦</p><blockquote><p>psï¼šdiv å¿…é¡»æ˜¯ç»å¯¹å®šä½ï¼ˆabsoluteï¼‰æ‰å¯ä»¥å“¦</p></blockquote><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">"ul li"</span>).on(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> oDiv = $(<span class="string">"&lt;div class='bg2'&gt;&lt;/div&gt;"</span>);</span><br><span class="line">  <span class="keyword">var</span> disY = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> disX = <span class="number">0</span>;</span><br><span class="line">  oDiv.css(&#123;</span><br><span class="line">    left: $(<span class="keyword">this</span>).offset().left + <span class="number">1</span>,</span><br><span class="line">    top: $(<span class="keyword">this</span>).offset().top + <span class="number">1</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  $(<span class="string">".div"</span>).append(oDiv);</span><br><span class="line">  oDiv.mousedown(<span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span><br><span class="line">    disX = ev.pageX - $(<span class="keyword">this</span>).offset().left;</span><br><span class="line">    disY = ev.pageY - $(<span class="keyword">this</span>).offset().top;</span><br><span class="line">    $(<span class="built_in">document</span>).mousemove(<span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span><br><span class="line">      oDiv.css(<span class="string">"left"</span>, ev.pageX - disX);</span><br><span class="line">      oDiv.css(<span class="string">"top"</span>, ev.pageY - disY);</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="built_in">document</span>).mouseup(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">      $(<span class="built_in">document</span>).off();</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div><p>è¿™é‡Œ div çš„ï¼ˆleft å’Œ topï¼‰+1 æ˜¯å› ä¸ºæˆ‘ç»™ li è®¾ç½®äº† 1px çš„ border<br>åˆ°äº†è¿™é‡Œäº†ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬çš„ div æ˜¯ä¸å¸é™„åœ¨ li ä¸Šçš„ï¼Œè¿™é‡Œéœ€è¦æ€ä¹ˆåšå‘¢ï¼Ÿ</p><p>èªæ˜çš„å°ä¼™ä¼´ä»¬ï¼Œå…¶å®ä¸€çœ‹å°±çŸ¥é“äº†ï¼Œæˆ‘ä»¬å¯ä»¥è·å–æ‰€æœ‰ li çš„åæ ‡ï¼Œç„¶ååˆ¤æ–­ div çš„åæ ‡è·ç¦»å“ªä¸ª li è¿‘ï¼Œé‚£å°±å¸é™„åœ¨å“ªä¸ª li ä¸Šé¢</p><p>é‚£ä¹ˆï¼Œæœ‰äº†è¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®è¡Œæˆ‘ä»¬çš„æƒ³æ³•</p><hr><p>é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå°è¯•ä¸€ä¸‹ç®€å•çš„åæ ‡æ€ä¹ˆå–æœ€è¿‘çš„ç‚¹ã€‚</p><p>å…ˆè§„å®šä¸€ä¸‹æˆ‘ä»¬åæ ‡çš„æ ¼å¼ï¼ŒposArr=[{x:1,y:2},x:1,y:2},x:1,y:2}]</p><p>ç‚¹çš„æ ¼å¼ï¼ˆ<strong>ä¹Ÿå°±æ˜¯ div çš„åæ ‡</strong>ï¼‰divPos = {x,y}</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">Javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> posArr = [</span><br><span class="line">  &#123;</span><br><span class="line">    x: <span class="number">0</span>,</span><br><span class="line">    y: <span class="number">0</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    x: <span class="number">10</span>,</span><br><span class="line">    y: <span class="number">20</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    x: <span class="number">20</span>,</span><br><span class="line">    y: <span class="number">30</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> divPos = &#123;</span><br><span class="line">  x: <span class="number">1</span>,</span><br><span class="line">  y: <span class="number">2</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result = &#123;</span><br><span class="line">  index: <span class="number">0</span>, <span class="comment">//æ•°ç»„ç´¢å¼•</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; posArr.length; i++) &#123;</span><br><span class="line">  <span class="keyword">var</span> x = posArr[i].x - divPos.x;</span><br><span class="line">  <span class="keyword">var</span> y = posArr[i].y - divPos.y;</span><br><span class="line">  x = x &gt; <span class="number">0</span> ? x : -x;</span><br><span class="line">  y = y &gt; <span class="number">0</span> ? y : -y;</span><br><span class="line">  <span class="keyword">var</span> temp = x + y;</span><br><span class="line">  <span class="comment">//ç¬¬ä¸€æ¬¡è¿›æ¥èµ‹å€¼</span></span><br><span class="line">  <span class="keyword">if</span> (i == <span class="number">0</span>) &#123;</span><br><span class="line">    result.x = i;</span><br><span class="line">    result.y = temp;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (result.y &gt; temp) &#123;</span><br><span class="line">      result.index = i;</span><br><span class="line">      result.y = temp;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(arr[result.index].x);</span><br><span class="line"><span class="built_in">console</span>.log(arr[result.index].y);</span><br></pre></td></tr></table></figure></div><p>ä»è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥è·å–åˆ°è¿™ä¸ªç‚¹çš„ x åæ ‡å’Œ y åæ ‡ï¼Œè¿™æ ·å­ï¼Œå°±å¯ä»¥å®ç°æˆ‘ä»¬ä¸Šé¢çš„æƒ³æ³•äº†ã€‚</p><p>æ•´ä¸ªä»£ç å¦‚ä¸‹ï¼š</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand code-closed" aria-hidden="true"></i><div class="code_lang">html</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">      * &#123;</span><br><span class="line">        padding: 0;</span><br><span class="line">        margin: 0;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      ul &#123;</span><br><span class="line">        width: 496px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      ul li &#123;</span><br><span class="line">        list-style: none;</span><br><span class="line">        width: 60px;</span><br><span class="line">        height: 60px;</span><br><span class="line">        border: 1px solid red;</span><br><span class="line">        float: left;</span><br><span class="line">      &#125;</span><br><span class="line"><span class="css">      <span class="comment">/*æ¸…é™¤æµ®åŠ¨*/</span></span></span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="selector-tag">ul</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line">        content: "";</span><br><span class="line">        clear: both;</span><br><span class="line">        display: block;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="selector-class">.bg</span> &#123;</span></span><br><span class="line">        background: skyblue;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="selector-class">.bg2</span> &#123;</span></span><br><span class="line">        position: absolute;</span><br><span class="line">        background: red;</span><br><span class="line">        width: 60px;</span><br><span class="line">        height: 60px;</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/2.2.1/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">var</span> posArr = [];</span></span><br><span class="line"><span class="javascript">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; $(<span class="string">"ul li"</span>).length; i++) &#123;</span></span><br><span class="line">        posArr.push(&#123;</span><br><span class="line"><span class="javascript">          x: $(<span class="string">"ul li"</span>).eq(i).offset().left,</span></span><br><span class="line"><span class="javascript">          y: $(<span class="string">"ul li"</span>).eq(i).offset().top,</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">      $(<span class="string">"ul li"</span>).on(<span class="string">"mouseover"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> index = $(<span class="keyword">this</span>).index();</span></span><br><span class="line"><span class="javascript">        $(<span class="keyword">this</span>).parent().addClass(<span class="string">"bg"</span>);</span></span><br><span class="line"><span class="javascript">        $(<span class="string">"ul"</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          $(<span class="keyword">this</span>).find(<span class="string">"li"</span>).eq(index).addClass(<span class="string">"bg"</span>);</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line"><span class="javascript">      $(<span class="string">"ul li"</span>).on(<span class="string">"mouseout"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> index = $(<span class="keyword">this</span>).index();</span></span><br><span class="line"><span class="javascript">        $(<span class="keyword">this</span>).parent().removeClass(<span class="string">"bg"</span>);</span></span><br><span class="line"><span class="javascript">        $(<span class="string">"ul"</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          $(<span class="keyword">this</span>).find(<span class="string">"li"</span>).eq(index).removeClass(<span class="string">"bg"</span>);</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line"><span class="javascript">      $(<span class="string">"ul li"</span>).on(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> oDiv = $(<span class="string">"&lt;div class='bg2'&gt;&lt;/div&gt;"</span>);</span></span><br><span class="line"></span><br><span class="line">        oDiv.css(&#123;</span><br><span class="line"><span class="javascript">          left: $(<span class="keyword">this</span>).offset().left + <span class="number">1</span>,</span></span><br><span class="line"><span class="javascript">          top: $(<span class="keyword">this</span>).offset().top + <span class="number">1</span>,</span></span><br><span class="line">        &#125;);</span><br><span class="line"><span class="javascript">        $(<span class="string">".div"</span>).append(oDiv);</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> disY = <span class="number">0</span>;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> disX = <span class="number">0</span>;</span></span><br><span class="line"><span class="actionscript">        oDiv.mousedown(<span class="function"><span class="keyword">function</span> <span class="params">(ev)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">var</span> result = &#123;</span></span><br><span class="line">            index: 0,</span><br><span class="line">          &#125;;</span><br><span class="line"><span class="javascript">          disX = ev.pageX - $(<span class="keyword">this</span>).offset().left;</span></span><br><span class="line"><span class="javascript">          disY = ev.pageY - $(<span class="keyword">this</span>).offset().top;</span></span><br><span class="line"><span class="javascript">          $(<span class="built_in">document</span>).mousemove(<span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">            oDiv.css(<span class="string">"left"</span>, ev.pageX - disX);</span></span><br><span class="line"><span class="actionscript">            oDiv.css(<span class="string">"top"</span>, ev.pageY - disY);</span></span><br><span class="line">          &#125;);</span><br><span class="line"><span class="javascript">          $(<span class="built_in">document</span>).mouseup(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; posArr.length; i++) &#123;</span></span><br><span class="line"><span class="actionscript">              <span class="keyword">var</span> x = posArr[i].x - oDiv.offset().left;</span></span><br><span class="line"><span class="actionscript">              <span class="keyword">var</span> y = posArr[i].y - oDiv.offset().top;</span></span><br><span class="line">              x = x &gt; 0 ? x : -x;</span><br><span class="line">              y = y &gt; 0 ? y : -y;</span><br><span class="line"><span class="actionscript">              <span class="keyword">var</span> temp = x + y;</span></span><br><span class="line">              if (i == 0) &#123;</span><br><span class="line"><span class="actionscript">                <span class="comment">//ç¬¬ä¸€æ¬¡è¿›æ¥èµ‹å€¼</span></span></span><br><span class="line">                result.x = i;</span><br><span class="line">                result.y = temp;</span><br><span class="line"><span class="actionscript">              &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line">                if (result.y &gt; temp) &#123;</span><br><span class="line">                  result.index = i;</span><br><span class="line">                  result.y = temp;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line"><span class="actionscript">            oDiv.css(<span class="string">"left"</span>, posArr[result.index].x + <span class="number">1</span>);</span></span><br><span class="line"><span class="actionscript">            oDiv.css(<span class="string">"top"</span>, posArr[result.index].y + <span class="number">1</span>);</span></span><br><span class="line"><span class="javascript">            $(<span class="built_in">document</span>).off();</span></span><br><span class="line">          &#125;);</span><br><span class="line"><span class="actionscript">          <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div><h1 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h1><p>è¿™é‡Œç”¨äº† jquery ä¹Ÿæ˜¯ä¸ºäº†æ–¹ä¾¿æ“ä½œ DOMï¼Œé‡Œé¢æœ‰äº›æ ·å¼ä¹Ÿæ˜¯ä¸ºäº†æ–¹ä¾¿ï¼ˆå›¾åšä¸ªç¬”è®°ï¼‰ï¼Œå†™çš„ç›¸å½“ä¸è§„èŒƒï¼Œè¯·å„ä½è§‚ä¼—è€çˆ·è°…è§£<br>å†™çš„ä¸å¥½ï¼Œè¯·å„ä½å¤§ç¥è§è°…ï¼Œæœ‰ä»€ä¹ˆé”™è¯¯ä¹Ÿå¿˜æŒ‡å‡º ÎµÙ© (à¹‘&gt; ç¬ &lt;)Û¶Ğ·</p><p><strong>å¦å¤–è¿™é‡Œæ²¡æœ‰åšè¾¹ç•Œæ£€æµ‹ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è‡ªå·±å°è¯•åšä¸€ä¸‹ï¼Œä¹Ÿæ˜¯ç›¸å¯¹ç®€å•</strong></p>]]></content>
      
      
      <categories>
          
          <category> è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½ å¥½,ä¸–ç•Œ</title>
      <link href="/2017-03-17/%E4%BD%A0%E5%A5%BD%EF%BC%8C%E4%B8%96%E7%95%8C/"/>
      <url>/2017-03-17/%E4%BD%A0%E5%A5%BD%EF%BC%8C%E4%B8%96%E7%95%8C/</url>
      
        <content type="html"><![CDATA[<p>è¯è¯´ï¼Œä» 2016 å¹´å¹´åˆï¼Œæˆ‘å°±ä¸€ç›´æœ‰ä¸€ä¸ªæƒ³æ³•ï¼Œå°±æ˜¯æ­å»ºä¸€ä¸ªè‡ªå·±çš„åšå®¢ï¼Œè®©è‡ªå·±æ›´æœ‰å½’å±æ„Ÿã€‚ä½†æ˜¯å¥ˆä½• ç°å®å¤ªéª¨æ„Ÿ ä¸€å¼€å§‹æƒ³çš„å¤ªå¤šï¼Œæƒ³â€œå®Œå…¨è‡ªå·±æ­å»ºå‰åç«¯ï¼Œæƒ³â€¦â€ ç»“æœï¼Œä¸€ç›´æƒ³äº†ä¸€å¹´å¤šï¼Œä¹Ÿæ²¡æœ‰å¼€å§‹è¡ŒåŠ¨ (åº”è¯¥è¯´ï¼Œä»å»å¹´æ‰å¼€å§‹ç”¨è…¾è®¯äº‘æ­äº†ä¸€ä¸ªç®€å•çš„åšå®¢ï¼Œç„¶ååˆæ”¾å¼ƒç®¡äº†)</p><blockquote><p>æ­¢åˆ°ç°åœ¨ï¼Œå¿ƒè¡€æ¥æ½®ï¼Œåˆæƒ³æ‰¾ç‚¹å½’å±æ„Ÿäº†</p></blockquote><p>å°±åœ¨æ˜¨å¤©ï¼Œé—²æ¥æ— äº‹ï¼Œè‡ªå·±åœ¨ window æ­å»º jekyll= =ä¸€è·¯ä¸‹æ¥,ä¹Ÿä¸æ˜¯ååˆ†é¡ºåˆ©</p>]]></content>
      
      
      <categories>
          
          <category> éšç¬” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšç¬” </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
